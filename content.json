{"meta":{"title":"é´»å¡µ","subtitle":"","description":"é´»å¡µçš„åšå®¢","author":"é´»å¡µ","url":"https://hwame.top","root":"/"},"pages":[{"title":"","date":"2023-08-19T16:35:16.947Z","updated":"2022-02-12T19:27:26.000Z","comments":true,"path":"baidu_verify_code-CzL5NY2WH2.html","permalink":"https://hwame.top/baidu_verify_code-CzL5NY2WH2.html","excerpt":"","text":"8369f22f23b7c87aaa52628d39d9a7ea"},{"title":"","date":"2023-08-19T16:35:16.964Z","updated":"2022-02-12T19:03:46.000Z","comments":true,"path":"google73552bba660504fd.html","permalink":"https://hwame.top/google73552bba660504fd.html","excerpt":"","text":"google-site-verification: google73552bba660504fd.html"},{"title":"ç›¸å†Œ","date":"2020-09-27T03:25:35.000Z","updated":"2020-10-24T05:36:02.000Z","comments":true,"path":"gallery/index.html","permalink":"https://hwame.top/gallery/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2020-08-21T03:31:23.000Z","updated":"2020-08-21T06:16:52.000Z","comments":false,"path":"categories/index.html","permalink":"https://hwame.top/categories/index.html","excerpt":"","text":""},{"title":"èµ„æº","date":"2020-08-21T03:31:57.000Z","updated":"2020-12-11T12:20:20.000Z","comments":true,"path":"repository/index.html","permalink":"https://hwame.top/repository/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2020-08-21T03:21:11.000Z","updated":"2022-02-15T11:46:12.000Z","comments":true,"path":"links/index.html","permalink":"https://hwame.top/links/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2020-08-21T03:15:44.000Z","updated":"2020-08-21T06:13:12.000Z","comments":false,"path":"tags/index.html","permalink":"https://hwame.top/tags/index.html","excerpt":"","text":""},{"title":"å…³äº","date":"2020-05-24T07:57:00.000Z","updated":"2023-12-16T17:57:14.215Z","comments":false,"path":"about/index.html","permalink":"https://hwame.top/about/index.html","excerpt":"","text":"ç‚¹å‡»ã€ŒğŸ±â€ğŸ‰å°æé¾™ğŸ±â€ğŸ‰ã€ç©ä¸€ä¼šå°æé¾™å¿«è·‘å§ï¼ŒæŒ‰ç©ºæ ¼(space)/ä¸Š(â†‘)/ä¸‹(â†“)/å·¦(â†)/å³(â†’)é”®è¯•è¯• æ¸¸æˆæºç æ¥è‡ªChromiumï¼Œæœ¬é¡µé¢æºç å‚è€ƒhttps://gitee.com/tczmh/dino ç‚¹å‡»è¿™ä¸ªç¥å¥‡çš„æŒ‰é’®ğŸ‘‰ğŸ“§åæ§½ä¸€ä¸‹ğŸ“§ğŸ‘ˆ"},{"title":"","date":"2023-12-16T17:56:43.405Z","updated":"2023-12-16T17:56:20.406Z","comments":true,"path":"dino.html","permalink":"https://hwame.top/dino.html","excerpt":"","text":"chromeå°æé¾™dinobody,html{padding:0;margin:0;width:100%;height:100%}.icon{-webkit-user-select:none;user-select:none;display:inline-block}.icon-offline{content:-webkit-image-set( url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIAQMAAABvIyEEAAAABlBMVEUAAABTU1OoaSf/AAAAAXRSTlMAQObYZgAAAGxJREFUeF7tyMEJwkAQRuFf5ipMKxYQiJ3Z2nSwrWwBA0+DQZcdxEOueaePp9+dQZFB7GpUcURSVU66yVNFj6LFICatThZB6r/ko/pbRpUgilY0Cbw5sNmb9txGXUKyuH7eV25x39DtJXUNPQGJtWFV+BT/QAAAAABJRU5ErkJggg==\") 1x,url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQBAMAAAAVaP+LAAAAGFBMVEUAAABTU1NNTU1TU1NPT09SUlJSUlJTU1O8B7DEAAAAB3RSTlMAoArVKvVgBuEdKgAAAJ1JREFUeF7t1TEOwyAMQNG0Q6/UE+RMXD9d/tC6womIFSL9P+MnAYOXeTIzMzMzMzMzaz8J9Ri6HoITmuHXhISE8nEh9yxDh55aCEUoTGbbQwjqHwIkRAEiIaG0+0AA9VBMaE89Rogeoww936MQrWdBr4GN/z0IAdQ6nQ/FIpRXDwHcA+JIJcQowQAlFUA0MfQpXLlVQfkzR4igS6ENjknm/wiaGhsAAAAASUVORK5CYII=\") 2x);position:relative}.hidden{display:none}.offline .interstitial-wrapper{color:#2b2b2b;font-size:1em;line-height:1.55;margin:0 auto;max-width:600px;padding-top:100px;width:100%}.offline .runner-container{height:150px;max-width:600px;overflow:hidden;position:absolute;top:35px;width:44px}.offline .runner-canvas{height:150px;max-width:600px;opacity:1;overflow:hidden;position:absolute;top:0;z-index:2}.offline .controller{background:rgba(247,247,247,.1);height:100vh;left:0;position:absolute;top:0;width:100vw;z-index:1}#offline-resources{display:none}@media (max-width:420px){.suggested-left>#control-buttons,.suggested-right>#control-buttons{float:none}.snackbar{left:0;bottom:0;width:100%;border-radius:0}}@media (max-height:350px){h1{margin:0 0 15px}.icon-offline{margin:0 0 10px}.interstitial-wrapper{margin-top:5%}.nav-wrapper{margin-top:30px}}@media (min-width:600px) and (max-width:736px) and (orientation:landscape){.offline .interstitial-wrapper{margin-left:0;margin-right:0}}@media (min-width:420px) and (max-width:736px) and (min-height:240px) and (max-height:420px) and (orientation:landscape){.interstitial-wrapper{margin-bottom:100px}}@media (min-height:240px) and (orientation:landscape){.offline .interstitial-wrapper{margin-bottom:90px}.icon-offline{margin-bottom:20px}}@media (max-height:320px) and (orientation:landscape){.icon-offline{margin-bottom:0}.offline .runner-container{top:10px}}@media (max-width:240px){.interstitial-wrapper{overflow:inherit;padding:0 8px}}eval(function(i,a,e,o,t,c){if(t=function(i){return(i"}],"posts":[{"title":"Goè¯­è¨€ä¸­çš„é€šé“","slug":"channel-and-goroutine-in-go","date":"2022-03-27T11:06:16.000Z","updated":"2022-03-27T12:00:41.000Z","comments":true,"path":"20220327/channel-and-goroutine-in-go.html","link":"","permalink":"https://hwame.top/20220327/channel-and-goroutine-in-go.html","excerpt":"æ‘˜è¦ï¼šçœ‹å®Œè¿™ç¯‡ï¼ŒGoè¯­è¨€çš„é€šé“åŠGoroutineä½ å°±éƒ½ä¼šäº†â€¦","text":"æ‘˜è¦ï¼šçœ‹å®Œè¿™ç¯‡ï¼ŒGoè¯­è¨€çš„é€šé“åŠGoroutineä½ å°±éƒ½ä¼šäº†â€¦ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20220327/channel-and-goroutine-in-go.htmlåŸæ–‡é“¾æ¥ï¼šhttps://mp.weixin.qq.com/s/-N1qUEE090wMpI6TWmFTWgå‚è€ƒèµ„æ–™ï¼š çœ‹å®Œè¿™ç¯‡ï¼ŒGoè¯­è¨€çš„é€šé“åŠGoroutineä½ å°±éƒ½ä¼šäº† Goè¯­è¨€ä¸ƒç¯‡å…¥é—¨æ•™ç¨‹å››ï¼šé€šé“åŠGoroutine æ·±å…¥å­¦ä¹  Go å¹¶å‘ç¼–ç¨‹ä¹‹é€šé“ 1.å‰è¨€åœ¨goç¤¾åŒºæœ‰è¿™æ ·ä¸€å¥è¯ï¼šä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜ã€‚ goå®˜æ–¹æ˜¯å»ºè®®ä½¿ç”¨ç®¡é“é€šä¿¡çš„æ–¹å¼æ¥è¿›è¡Œå¹¶å‘ã€‚ é€šé“ æ˜¯ç”¨äºåç¨‹é—´äº¤æµçš„é€šä¿¡è½½ä½“ã€‚ä¸¥æ ¼åœ°æ¥è¯´ï¼Œé€šé“å°±æ˜¯æ•°æ®ä¼ è¾“çš„ç®¡é“ï¼Œæ•°æ®é€šè¿‡è¿™æ ¹ç®¡é“è¢« â€œä¼ å…¥â€ æˆ–è¢« â€œè¯»å‡ºâ€ã€‚ å› æ­¤åç¨‹å¯ä»¥å‘é€æ•°æ®åˆ°é€šé“ä¸­ï¼Œè€Œå¦ä¸€ä¸ªåç¨‹å¯ä»¥ä»è¯¥é€šé“ä¸­è¯»å–æ•°æ®ã€‚ åœ¨è¿™é‡Œå°±è¦å¼•å…¥ä¸€ä¸ªæ–°åè¯ï¼š åç¨‹å°†çº¿ç¨‹å†ç»†åˆ†ä¸ºå¤šä¸ªåç¨‹ï¼Œæ¯”å¦‚è¯´æ˜¯ä¸€æ¡æµæ°´çº¿ä¸Šçš„å¤šäººåä½œã€‚é‚£ä¹ˆå°±å¯ä»¥å‡å°‘å„ä¸ªçº¿ç¨‹å†…éƒ¨çš„ç­‰å¾…æ—¶é—´ã€‚ 2.é€šé“ç®€ä»‹Go æä¾›ä¸€ä¸ª chan å…³é”®è¯å»åˆ›å»ºä¸€ä¸ªé€šé“ã€‚ä¸€ä¸ªé€šé“åªèƒ½ä¼ å…¥ä¸€ç§ç±»å‹çš„æ•°æ®ï¼Œå…¶ä»–çš„æ•°æ®ç±»å‹ä¸å…è®¸è¢«ä¼ è¾“ã€‚ å°†çº¿ç¨‹å†åˆ†æˆæ›´ç»†çš„åç¨‹ï¼Œä½¿å¾—ä¸­é—´ç­‰å¾…æ—¶å€™æ›´å°‘ï¼Œæé«˜æ•ˆç‡ï¼ 2.1.å£°æ˜12345678910package mainimport &quot;fmt&quot;func main() &#123; var channel chan int //å£°æ˜äº†ä¸€ä¸ªå¯ä»¥ä¼ å…¥ int ç±»å‹æ•°æ®çš„é€šé“ channel ã€‚ fmt.Println(channel) //ç¨‹åºä¼šæ‰“å°nil, å› ä¸ºé€šé“çš„ 0 å€¼æ˜¯ nilã€‚&#125; ä¸€ä¸ª nil é€šé“æ˜¯æ²¡æœ‰ç”¨çš„ã€‚ä½ ä¸èƒ½å‘å®ƒä¼ é€’æ•°æ®æˆ–è€…è¯»å–æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ make å‡½æ•°å™¨åˆ›å»ºä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„é€šé“ã€‚ 12345678910package mainimport &quot;fmt&quot;func main()&#123; channel := make(chan int) //å£°æ˜äº†ä¸€ä¸ªå¯ä»¥ä¼ å…¥ int ç±»å‹æ•°æ®çš„é€šé“ channel ã€‚ fmt.Println(channel) //ç¨‹åºä¼šæ‰“å°channelçš„åœ°å€ã€‚ 0xc0000180c0&#125; å®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆå†…å­˜åœ°å€ã€‚é€šé“å˜é‡é»˜è®¤æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“ä½ æƒ³è¦å’Œä¸€ä¸ªåç¨‹æ²Ÿé€šçš„æ—¶å€™ï¼Œä½ å¯ä»¥ç»™å‡½æ•°æˆ–è€…æ–¹æ³•ä¼ é€’ä¸€ä¸ªé€šé“ä½œä¸ºå‚æ•°ã€‚å½“ä»åç¨‹æ¥æ”¶åˆ°é€šé“å‚æ•°åï¼Œä½ ä¸éœ€è¦å†å¯¹å…¶è¿›è¡Œè§£å¼•ç”¨å°±å¯ä»¥ä»é€šé“æ¥æ”¶æˆ–è€…å‘é€æ•°æ®ã€‚ 2.2.è¯»å†™Go è¯­è¨€æä¾›ä¸€ä¸ªéå¸¸ç®€æ´çš„å·¦ç®­å¤´è¯­æ³• &lt;- å»ä»é€šé“è¯»å†™æ•°æ®ã€‚æœ‰å˜é‡æ¥å—ç®¡é“å€¼1channel &lt;- data ä¸Šé¢çš„ä»£ç æ„å‘³ç€æˆ‘ä»¬æƒ³è¦æŠŠ data æ•°æ®æ¨å…¥åˆ°é€šé“ channel ä¸­ï¼Œæ³¨æ„çœ‹ç®­å¤´çš„æŒ‡å‘ã€‚ å®ƒè¡¨æ˜æ˜¯ä» dataæ•°æ® toåˆ° é€šé“ channelã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å½“ä½œæˆ‘ä»¬æ­£åœ¨æŠŠ data æ¨å…¥åˆ°é€šé“ channelã€‚æ— å˜é‡æ¥å—ç®¡é“å€¼1&lt;- data è¿™ä¸ªè¯­å¥ä¸ä¼šæŠŠæ•°æ®ä¼ è¾“ç»™ä»»ä½•å˜é‡ï¼Œä½†æ˜¯ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è¯­å¥ã€‚ ä¸Šé¢çš„é€šé“æ“ä½œé»˜è®¤æ˜¯é˜»å¡çš„ã€‚åœ¨ä»¥å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“å¯ä»¥ä½¿ç”¨ time.Sleep å»é˜»å¡ä¸€ä¸ªé€šé“ã€‚é€šé“æ“ä½œæœ¬è´¨ä¸Šæ˜¯é˜»å¡çš„ã€‚å½“ä¸€äº›æ•°æ®è¢«å†™å…¥é€šé“ï¼Œå¯¹åº”çš„åç¨‹å°†é˜»å¡ç›´åˆ°æœ‰å…¶ä»–çš„åç¨‹å¯ä»¥ä»æ­¤é€šé“æ¥æ”¶æ•°æ®ã€‚ é€šé“æ“ä½œä¼šé€šçŸ¥è°ƒåº¦å™¨å»è°ƒåº¦å…¶ä»–çš„åç¨‹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¨‹åºä¸ä¼šä¸€ç›´é˜»å¡åœ¨ä¸€ä¸ªåç¨‹ã€‚é€šé“çš„è¿™äº›ç‰¹æ€§åœ¨ä¸åŒçš„åç¨‹æ²Ÿé€šçš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œå®ƒé¿å…äº†æˆ‘ä»¬ä½¿ç”¨é”æˆ–è€…ä¸€äº› hack æ‰‹æ®µå»è¾¾åˆ°é˜»å¡åç¨‹çš„ç›®çš„ã€‚ 2.3.é€šé“è¯¦è§£2.3.1.ä¾‹å­123456789101112131415161718192021222324252627282930313233343536package mainimport &quot;fmt&quot;func Rush(c chan string) &#123; fmt.Println(&quot;Hello &quot;+ &lt;-c + &quot;!&quot;) // å£°æ˜ä¸€ä¸ªå‡½æ•° greet, è¿™ä¸ªå‡½æ•°çš„å‚æ•° c æ˜¯ä¸€ä¸ª string ç±»å‹çš„é€šé“ã€‚ // åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä»é€šé“ c ä¸­æ¥æ”¶æ•°æ®å¹¶æ‰“å°åˆ°æ§åˆ¶å°ä¸Šã€‚&#125;func main()&#123; fmt.Println(&quot;Main Start&quot;) // main å‡½æ•°çš„ç¬¬ä¸€ä¸ªè¯­å¥æ˜¯æ‰“å° main start åˆ°æ§åˆ¶å°ã€‚ channel := make(chan string) // åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨ make å‡½æ•°åˆ›å»ºä¸€ä¸ª string ç±»å‹çš„é€šé“èµ‹å€¼ç»™ â€˜ channel &#x27; å˜é‡ go Rush(channel) // æŠŠ channel é€šé“ä¼ é€’ç»™ greet å‡½æ•°å¹¶ç”¨ go å…³é”®è¯ä»¥åç¨‹æ–¹å¼è¿è¡Œå®ƒã€‚ // æ­¤æ—¶ï¼Œç¨‹åºæœ‰ä¸¤ä¸ªåç¨‹å¹¶ä¸”æ­£åœ¨è°ƒåº¦è¿è¡Œçš„æ˜¯ main goroutine ä¸»å‡½æ•° channel &lt;- &quot;DEMO&quot; // ç»™é€šé“ channel ä¼ å…¥ä¸€ä¸ªæ•°æ® DEMO. // æ­¤æ—¶ä¸»çº¿ç¨‹å°†é˜»å¡ç›´åˆ°æœ‰åç¨‹æ¥æ”¶è¿™ä¸ªæ•°æ®. Go çš„è°ƒåº¦å™¨å¼€å§‹è°ƒåº¦ greet åç¨‹æ¥æ”¶é€šé“ channel çš„æ•°æ® fmt.Println(&quot;Main Stop&quot;) // ç„¶åä¸»çº¿ç¨‹æ¿€æ´»å¹¶ä¸”æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œæ‰“å° main stopped&#125;/*Main StartHello DEMO!Main Stop*/ 2.3.2.æ­»é” å½“é€šé“è¯»å†™æ•°æ®æ—¶ï¼Œæ‰€åœ¨åç¨‹ä¼šé˜»å¡å¹¶ä¸”è°ƒåº¦æ§åˆ¶æƒä¼šè½¬ç§»åˆ°å…¶ä»–æœªé˜»å¡çš„åç¨‹ã€‚å¦‚æœå½“å‰åç¨‹æ­£åœ¨ä»ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å€¼çš„é€šé“ä¸­è¯»å–æ•°æ®ï¼Œé‚£ä¹ˆå½“å‰åç¨‹ä¼šé˜»å¡å¹¶ä¸”ç­‰å¾…å…¶ä»–åç¨‹å¾€æ­¤é€šé“å†™å…¥å€¼ã€‚ å› æ­¤ï¼Œè¯»æ“ä½œå°†è¢«é˜»å¡ã€‚ç±»ä¼¼çš„ï¼Œå¦‚æœä½ å‘é€æ•°æ®åˆ°ä¸€ä¸ªé€šé“ï¼Œå®ƒå°†é˜»å¡å½“å‰åç¨‹ç›´åˆ°æœ‰å…¶ä»–åç¨‹ä»é€šé“ä¸­è¯»å–æ•°æ®ã€‚æ­¤æ—¶å†™æ“ä½œå°†é˜»å¡ ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¸»çº¿ç¨‹åœ¨è¿›è¡Œé€šé“æ“ä½œçš„æ—¶å€™é€ æˆæ­»é”çš„ä¾‹å­123456789101112131415161718192021222324package mainimport &quot;fmt&quot;func main() &#123; fmt.Println(&quot;main start&quot;) // main å‡½æ•°çš„ç¬¬ä¸€ä¸ªè¯­å¥æ˜¯æ‰“å° main start åˆ°æ§åˆ¶å°ã€‚ channel := make(chan string) // åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨ make å‡½æ•°åˆ›å»ºä¸€ä¸ª string ç±»å‹çš„é€šé“èµ‹å€¼ç»™ â€˜ channel &#x27; å˜é‡ channel &lt;- &quot;GoLang&quot; // ç»™é€šé“ channel ä¼ å…¥ä¸€ä¸ªæ•°æ® DEMO. // æ­¤æ—¶ä¸»çº¿ç¨‹å°†é˜»å¡ç›´åˆ°æœ‰åç¨‹æ¥æ”¶è¿™ä¸ªæ•°æ®. Go çš„è°ƒåº¦å™¨å¼€å§‹è°ƒåº¦åç¨‹æ¥æ”¶é€šé“ channel çš„æ•°æ® // ä½†æ˜¯ç”±äºæ²¡æœ‰åç¨‹æ¥å—ï¼Œæ²¡æœ‰åç¨‹æ˜¯å¯è¢«è°ƒåº¦çš„ã€‚æ‰€æœ‰åç¨‹éƒ½è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œå³æ˜¯ä¸»ç¨‹åºé˜»å¡äº†ã€‚ fmt.Println(&quot;main stop&quot;)&#125;/*æŠ¥é”™main startfatal error: all goroutines are asleep - deadlock! //æ‰€æœ‰åç¨‹éƒ½è¿›å…¥ä¼‘çœ çŠ¶æ€,æ­»é”goroutine 1 [chan send]:main.main()*/ 2.3.3.å…³é—­é€šé“123456789101112131415161718192021222324252627282930313233343536package mainimport &quot;fmt&quot;func RushChan(c chan string) &#123; &lt;- c fmt.Println(&quot;1&quot;) &lt;- c fmt.Println(&quot;2&quot;)&#125;func main() &#123; fmt.Println(&quot;main start&quot;) c := make(chan string, 1) go RushChan(c) c &lt;- &quot;Demo1&quot; close(c) /* ä¸èƒ½å‘ä¸€ä¸ªå…³äº†çš„channelå‘ä¿¡æ¯ main start panic: send on closed channel */ c &lt;- &quot;Demo2&quot; //close(c) /* close æ”¾è¿™é‡Œçš„è¯å¯ä»¥ main start 1 2 Main Stop */ fmt.Println(&quot;Main Stop&quot;)&#125; ç¬¬ä¸€ä¸ªæ“ä½œ c &lt;- &quot;Demo2&quot; å°†é˜»å¡åç¨‹ç›´åˆ°æœ‰å…¶ä»–åç¨‹ä»æ­¤é€šé“ä¸­è¯»å–æ•°æ®ï¼Œå› æ­¤ greet ä¼šè¢«è°ƒåº¦å™¨è°ƒåº¦æ‰§è¡Œã€‚ç¬¬ä¸€ä¸ªæ“ä½œ &lt;-c æ˜¯éé˜»å¡çš„ å› ä¸ºç°åœ¨é€šé“ c æœ‰æ•°æ®å¯è¯»ã€‚ç¬¬äºŒä¸ªæ“ä½œ &lt;-c å°†è¢«é˜»å¡å› ä¸ºé€šé“ c å·²ç»æ²¡æ•°æ®å¯è¯».æ­¤æ—¶ main åç¨‹å°†è¢«æ¿€æ´»å¹¶ä¸”ç¨‹åºæ‰§è¡Œ close(c) å…³é—­é€šé“æ“ä½œã€‚ 2.3.4.ç¼“å†²åŒº1c := make(chan Type, n) å½“ç¼“å†²åŒºå‚æ•°ä¸æ˜¯ 0 çš„æ—¶å€™ã€‚åç¨‹å°†ä¸ä¼šé˜»å¡é™¤éç¼“å†²åŒºè¢«å¡«æ»¡ã€‚ å½“ç¼“å†²åŒºæ»¡äº†ä¹‹åï¼Œæƒ³è¦å†å¾€ç¼“å†²åŒºå‘é€æ•°æ®åªæœ‰ç­‰åˆ°æœ‰å…¶ä»–åç¨‹ä»ç¼“å†²åŒºæ¥æ”¶æ•°æ®ï¼Œ æ­¤æ—¶çš„å‘é€åç¨‹æ˜¯é˜»å¡çš„ã€‚ æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œ è¯»ç¼“å†²åŒºçš„æ“ä½œæ˜¯æ¸´æœ›å¼è¯»å–ï¼Œæ„å‘³ç€ä¸€æ—¦è¯»æ“ä½œå¼€å§‹å®ƒå°†è¯»å–ç¼“å†²åŒºæ‰€æœ‰æ•°æ®ï¼Œç›´åˆ°ç¼“å†²åŒºä¸ºç©ºã€‚ åŸç†ä¸Šæ¥è¯´è¯»æ“ä½œçš„åç¨‹å°†ä¸ä¼šé˜»å¡ç›´åˆ°ç¼“å†²åŒºä¸ºç©ºã€‚12345678910111213141516171819202122232425262728293031323334package mainimport &quot;fmt&quot;func RushChan(c chan string) &#123; for &#123; val ,_ := &lt;-c fmt.Println(val) &#125;&#125;func main() &#123; fmt.Println(&quot;Main Start&quot;) c := make(chan string, 1) go RushChan(c) c &lt;- &quot;Demo1&quot; //ç»“æœ1 //c &lt;- &quot;Demo2&quot; //ç»“æœ2 fmt.Println(&quot;Main Stop&quot;)&#125;/*ç»“æœ1ï¼šMain StartMain Stop*//*ç»“æœ2ï¼šMain StartJoinMikeMain Stop*/ ç”±äºè¿™æ˜¯ä¸€ä¸ªç¼“å†²çš„é€šé“ï¼Œå½“æˆ‘åªæœ‰ c &lt;- Demo1 çš„æ—¶å€™ï¼Œè¿™é‡Œé¢åªæ˜¯æ»¡äº†ï¼Œä½†æ˜¯æ˜¯ä¸ä¼šé˜»å¡çš„ã€‚æ‰€ä»¥å­åç¨‹æ¥å—åˆ°äº†è¿™ä¸ªæ•°æ® Demo1 ï¼Œä½†æ˜¯ç”±äºæ˜¯éé˜»å¡ï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹æ²¡æœ‰è¢«é˜»å¡ï¼Œå¹¶æ²¡æœ‰ç­‰å­åç¨‹å®Œæˆå°±ç»“æŸäº†ï¼Œç»“æœ1å°±æ˜¯è¿™æ ·å‡ºç°äº†ã€‚ å½“åŠ å¤šä¸€ä¸ª c &lt;- Demo2 çš„æ—¶å€™ï¼Œè¿™æ—¶å°±è¦ç­‰ç¼“å†²åŒºç©ºäº†ï¼Œä¹Ÿå°±æ˜¯ç­‰æœ‰åç¨‹æŠŠ Demo1 è¯»å–ï¼Œæ‰€ä»¥å°±ä¼šå¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡ï¼Œæ­¤æ—¶çš„ç»“æœå°±æ˜¯ç»“æœ2äº†ã€‚12345678910111213141516171819package mainimport &quot;fmt&quot;func RushChan(c chan string) &#123; for &#123; val ,_ := &lt;-c fmt.Println(val) &#125;&#125;func main() &#123; c := make(chan int,3) c &lt;- 1 c &lt;- 2 c &lt;- 3 close(c) for elem := range c &#123; fmt.Println(elem) &#125;&#125; è¿™é‡Œè™½ç„¶å…³é—­äº†é€šé“ï¼Œä½†æ˜¯å…¶å®æ•°æ®ä¸ä»…åœ¨é€šé“é‡Œé¢ï¼Œæ•°æ®è¿˜åœ¨ç¼“å†²åŒºä¸­çš„ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥è¯»å–åˆ°è¿™ä¸ªæ•°æ®ã€‚ 2.3.5.é€šé“çš„é•¿åº¦å’Œå®¹é‡å’Œåˆ‡ç‰‡ç±»ä¼¼ï¼Œä¸€ä¸ªç¼“å†²é€šé“ä¹Ÿæœ‰é•¿åº¦å’Œå®¹é‡ã€‚é€šé“çš„é•¿åº¦æ˜¯å…¶å†…éƒ¨ç¼“å†²é˜Ÿåˆ—æœªè¯»çš„æ•°æ®é‡ï¼Œè€Œé€šé“çš„å®¹é‡æ˜¯ç¼“å†²åŒºå¯æœ€å¤§ç››æ”¾çš„æ•°æ®é‡ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ len å‡½æ•°å»è®¡ç®—é€šé“çš„é•¿åº¦ï¼Œä½¿ç”¨ cap å‡½æ•°å»è·å¾—é€šé“çš„å®¹é‡ã€‚å’Œåˆ‡ç‰‡ç”¨æ³•ç¥ä¼¼123456789101112131415161718192021222324252627282930package mainimport &quot;fmt&quot;func RushChan(c chan string) &#123; for &#123; val ,_ := &lt;-c fmt.Println(val) &#125;&#125;func main() &#123; c := make(chan int,3) c &lt;- 1 c &lt;- 2 fmt.Println(&quot;é•¿åº¦ï¼š &quot;,len(c)) fmt.Println(&lt;-c) fmt.Println(&quot;é•¿åº¦ï¼š &quot;,len(c)) fmt.Println(&lt;-c) fmt.Println(&quot;é•¿åº¦ï¼š &quot;,len(c)) fmt.Println(&quot;å®¹é‡ï¼š &quot;,cap(c))&#125;/*ç»“æœï¼šé•¿åº¦ï¼š 21é•¿åº¦ï¼š 12é•¿åº¦ï¼š 0å®¹é‡ï¼š 3*/ è¿™ä¸ª c é€šé“å®¹é‡ä¸º 3ï¼Œä½†åªç››æ”¾äº† 2 ä¸ªæ•°æ®ã€‚Go å°±ä¸ç”¨å»é˜»å¡ä¸»çº¿ç¨‹å»è°ƒåº¦å…¶ä»–åç¨‹ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä¸»çº¿ç¨‹ä¸­å»è¯»å–è¿™äº›æ•°æ®ï¼Œå› ä¸ºè™½ç„¶é€šé“æ²¡æœ‰æ”¾æ»¡ï¼Œä¹Ÿä¸ä¼šé˜»æ­¢ä½ å»ä»é€šé“è¯»å–æ•°æ®ã€‚ 2.3.6.å•å‘é€šé“ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ åˆ°å¯ä»¥åŒå‘ä¼ é€’æ•°æ®çš„é€šé“ï¼Œæˆ–è€…è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹é€šé“åšè¯»æ“ä½œå’Œå†™æ“ä½œã€‚ä½†æ˜¯äº‹å®ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºå•å‘é€šé“ã€‚æ¯”å¦‚åªè¯»é€šé“åªå…è®¸è¯»æ“ä½œï¼Œåªå†™é€šé“åªå…è®¸å†™æ“ä½œã€‚å•å‘é€šé“ä¹Ÿå¯ä»¥ä½¿ç”¨ make å‡½æ•°åˆ›å»ºï¼Œä¸è¿‡éœ€è¦é¢å¤–åŠ ä¸€ä¸ªç®­å¤´è¯­æ³•ã€‚12roc := make(&lt;-chan int)soc := make(chan&lt;- int) åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œ roc æ˜¯ä¸€ä¸ªåªè¯»é€šé“ï¼Œ&lt;- åœ¨ chan å…³é”®è¯å‰é¢ã€‚ soc is åªå†™é€šé“ï¼Œ&lt;- åœ¨ chan å…³é”®è¯åé¢ã€‚ ä»–ä»¬ä¹Ÿç®—ä¸åŒçš„æ•°æ®ç±»å‹ã€‚ ä½†æ˜¯å•å‘é€šé“æœ‰ä»€ä¹ˆä½œç”¨å‘¢ ?ä½¿ç”¨å•å‘é€šé“å¯ä»¥ æé«˜ç¨‹åºçš„ç±»å‹å®‰å…¨æ€§ï¼Œ ä½¿å¾—ç¨‹åºä¸å®¹æ˜“å‡ºé”™ã€‚ ä½†æ˜¯å‡å¦‚ä½ åœ¨ä¸€ä¸ªåç¨‹ä¸­åªéœ€è¦è¯»æ“ä½œæŸé€šé“ï¼Œä½†æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­å´éœ€è¦è¯»å†™æ“ä½œè¿™ä¸ªé€šé“è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ å¹¸è¿çš„æ˜¯ Go æä¾›äº†ä¸€ä¸ªç®€å•çš„è¯­æ³•å»æŠŠåŒå‘é€šé“è½¬åŒ–ä¸ºå•å‘é€šé“ã€‚123456789101112131415161718192021package mainimport &quot;fmt&quot;func greet(roc &lt;-chan string) &#123; fmt.Println(&quot;Hello &quot; + &lt;-roc ,&quot;!&quot;)&#125;func main() &#123; fmt.Println(&quot;Main Start&quot;) c := make(chan string) go greet(c) c &lt;- &quot;Demo&quot; fmt.Println(&quot;Main Stop&quot;)&#125;/*ç»“æœMain StartHello Demo !Main Stop*/ æˆ‘ä»¬ä¿®æ”¹ greet åç¨‹å‡½æ•°ï¼ŒæŠŠå‚æ•° c ç±»å‹ä»åŒå‘é€šé“æ”¹æˆå•å‘æ¥æ”¶é€šé“ã€‚ç°åœ¨æˆ‘ä»¬åªèƒ½ä»é€šé“ä¸­è¯»å–æ•°æ®ï¼Œé€šé“ä¸Šçš„ä»»ä½•å†™å…¥æ“ä½œå°†ä¼šå‘ç”Ÿé”™è¯¯ï¼š â€œinvalid operation: roc &lt;- â€œTempâ€ (send to receive-only type &lt;-chan string)â€. 2.3.7.Selectselect å’Œ switch å¾ˆåƒï¼Œå®ƒä¸éœ€è¦è¾“å…¥å‚æ•°ï¼Œå¹¶ä¸”ä»…ä»…è¢«ä½¿ç”¨åœ¨é€šé“æ“ä½œä¸Šã€‚Select è¯­å¥è¢«ç”¨æ¥æ‰§è¡Œå¤šä¸ªé€šé“æ“ä½œçš„ä¸€ä¸ªå’Œå…¶é™„å¸¦çš„ case å—ä»£ç ã€‚ åŸç† è®©æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œè®¨è®ºä¸‹å…¶æ‰§è¡ŒåŸç†1234567891011121314151617181920212223242526272829303132333435363738package mainimport ( &quot;fmt&quot; &quot;time&quot;)var start time.Timefunc init() &#123; start = time.Now()&#125;func service1(c chan string) &#123; time.Sleep(3 * time.Second) c &lt;- &quot;Hello from service 1&quot;&#125;func service2(c chan string) &#123; time.Sleep(5 * time.Second) c &lt;- &quot;Hello from service 2&quot;&#125;func main() &#123; fmt.Println(&quot;main start&quot;, time.Since(start)) chan1 := make(chan string) chan2 := make(chan string) go service1(chan1) go service2(chan2) select &#123; case res := &lt;-chan1: fmt.Println(&quot;Response form service 1&quot;, res, time.Since(start)) case res := &lt;-chan2: fmt.Println(&quot;Response form service 2&quot;, res, time.Since(start)) &#125; fmt.Println(&quot;main stop &quot;,time.Since(start))&#125;/*ç»“æœï¼šmain start 0sResponse form service 1 Hello from service 1 3.0018445smain stop 3.0019815s*/ ä»ä¸Šé¢çš„ç¨‹åºæ¥çœ‹ï¼Œæˆ‘ä»¬çŸ¥é“ select è¯­å¥å’Œ switch å¾ˆåƒï¼Œä¸åŒç‚¹æ˜¯ç”¨é€šé“è¯»å†™æ“ä½œä»£æ›¿äº†å¸ƒå°”æ“ä½œã€‚é€šé“å°†è¢«é˜»å¡ï¼Œé™¤éå®ƒæœ‰é»˜è®¤çš„ default å— (ä¹‹åå°†ä»‹ç»)ã€‚ä¸€æ—¦æŸä¸ª case æ¡ä»¶æ‰§è¡Œï¼Œå®ƒå°†ä¸é˜»å¡ã€‚ æ‰€ä»¥ä¸€ä¸ª case æ¡ä»¶ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå‘¢ ? å¦‚æœæ‰€æœ‰çš„ case è¯­å¥ï¼ˆé€šé“æ“ä½œï¼‰è¢«é˜»å¡ï¼Œé‚£ä¹ˆ select è¯­å¥å°†é˜»å¡ç›´åˆ°è¿™äº› case æ¡ä»¶çš„ä¸€ä¸ªä¸é˜»å¡ï¼ˆé€šé“æ“ä½œï¼‰ï¼Œcase å—æ‰§è¡Œã€‚å¦‚æœæœ‰å¤šä¸ª case å—ï¼ˆé€šé“æ“ä½œï¼‰éƒ½æ²¡æœ‰é˜»å¡ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶å°†éšæœºé€‰æ‹©ä¸€ä¸ªä¸é˜»å¡çš„ case å—ç«‹å³æ‰§è¡Œã€‚ ä¸ºäº†æ¼”ç¤ºä¸Šé¢çš„ç¨‹åºï¼Œæˆ‘ä»¬å¼€å¯ä¸¤ä¸ªåç¨‹å¹¶ä¼ å…¥å¯¹åº”çš„é€šé“å˜é‡ã€‚ç„¶åæˆ‘ä»¬å†™ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ª case æ“ä½œçš„ select è¯­å¥ã€‚ ä¸€ä¸ª case æ“ä½œä» chan1 è¯»æ•°æ®ï¼Œå¦å¤–ä¸€ä¸ªä» chan2 è¯»æ•°æ®ã€‚è¿™ä¸¤ä¸ªé€šé“éƒ½æ˜¯æ— ç¼“å†²çš„ , è¯»æ“ä½œå°†è¢«é˜»å¡ ã€‚æ‰€ä»¥ select è¯­å¥å°†é˜»å¡ã€‚å› æ­¤ select å°†ç­‰å¾…ï¼Œç›´åˆ°æœ‰ case è¯­å¥ä¸é˜»å¡ã€‚ å½“ç¨‹åºæ‰§è¡Œåˆ°selectè¯­å¥åï¼Œä¸»çº¿ç¨‹å°†é˜»å¡å¹¶å¼€å§‹è°ƒåº¦ service1 å’Œservice2åç¨‹ã€‚ service1 ä¼‘çœ  3 ç§’ åæœªé˜»å¡çš„æŠŠæ•°æ®å†™å…¥é€šé“ chan1 ä¸å…¶ç±»ä¼¼ï¼Œservice2ç­‰å¾… 5 ç§’ åæœªé˜»å¡çš„æŠŠæ•°æ®å†™å…¥é€šé“chan2 å› ä¸º service1 æ¯” service2 æ—©ä¸€æ­¥æ‰§è¡Œå®Œæ¯•ï¼Œcase 1 å°†é¦–å…ˆè°ƒåº¦æ‰§è¡Œï¼Œå…¶ä»–çš„ cases å— (è¿™é‡ŒæŒ‡ case 2) å°†è¢«å¿½ç•¥ã€‚ ä¸€æ—¦ case å—æ‰§è¡Œå®Œæ¯•ï¼Œ main çº¿ç¨‹å°†å¼€å§‹ç»§ç»­æ‰§è¡Œã€‚ æ‰€ä»¥å¹¶æ²¡æœ‰è¾“å‡ºcase2çš„ç»“æœ ä¸Šè¿°ç¨‹åºçœŸå®æ¨¡æ‹Ÿäº†ä¸€ä¸ªæ•°ç™¾ä¸‡è¯·æ±‚çš„æœåŠ¡å™¨è´Ÿè½½å‡è¡¡çš„ä¾‹å­ï¼Œå®ƒä»å¤šä¸ªæœ‰æ•ˆæœåŠ¡ä¸­è¿”å›å…¶ä¸­ä¸€ä¸ªå“åº”ã€‚ä½¿ç”¨åç¨‹ï¼Œé€šé“å’Œ select è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥å‘å¤šä¸ªæœåŠ¡å™¨è¯·æ±‚æ•°æ®å¹¶è·å–å…¶ä¸­æœ€å¿«å“åº”çš„é‚£ä¸ªã€‚ ä¸ºäº†æ¨¡æ‹Ÿä¸Šé¢å“ªä¸ª case å—ç‡å…ˆè¿”å›æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å»æ‰ Sleep å‡½æ•°è°ƒç”¨ã€‚ 1234567891011121314151617181920212223242526272829303132333435package mainimport ( &quot;fmt&quot; &quot;time&quot;)var start time.Timefunc init() &#123; start = time.Now()&#125;func service1(c chan string) &#123; c &lt;- &quot;Hello from service 1&quot;&#125;func service2(c chan string) &#123; c &lt;- &quot;Hello from service 2&quot;&#125;func main() &#123; fmt.Println(&quot;main start&quot;, time.Since(start)) chan1 := make(chan string) chan2 := make(chan string) go service1(chan1) go service2(chan2) select &#123; case res := &lt;-chan1: fmt.Println(&quot;Response form service 1&quot;, res, time.Since(start)) case res := &lt;-chan2: fmt.Println(&quot;Response form service 2&quot;, res, time.Since(start)) &#125; fmt.Println(&quot;main stop &quot;,time.Since(start))&#125; ç»“æœä¸€ï¼šmain start 0sResponse form service 1 Hello from service 1 539.3Âµsmain stop 539.3Âµsç»“æœäºŒï¼šmain start 0sResponse form service 2 Hello from service 2 0smain stop 0s ç»“æœä¸€å…±æœ‰2ä¸ªä¸åŒçš„ç»“æœ ä¸ºäº†è¯æ˜å½“æ‰€æœ‰ case å—éƒ½æ˜¯éé˜»å¡çš„æ—¶å€™ï¼Œgolang ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªä»£ç å—æ‰§è¡Œæ‰“å° responseï¼Œæˆ‘ä»¬ä½¿ç”¨ç¼“å†²é€šé“æ¥æ”¹é€ ç¨‹åºã€‚ 1234567891011121314151617181920212223242526272829303132package mainimport ( &quot;fmt&quot; &quot;time&quot;)var start time.Timefunc init() &#123; start = time.Now()&#125;func service1(c chan string) &#123; c &lt;- &quot;Hello from service 1&quot;&#125;func service2(c chan string) &#123; c &lt;- &quot;Hello from service 2&quot;&#125;func main() &#123; fmt.Println(&quot;main start&quot;, time.Since(start)) chan1 := make(chan string,2) chan2 := make(chan string,2) chan1 &lt;- &quot;Value 1&quot; chan1 &lt;- &quot;Value 2&quot; chan2 &lt;- &quot;Value 1&quot; chan2 &lt;- &quot;Value 2&quot; select &#123; case res := &lt;-chan1: fmt.Println(&quot;Response form service 1&quot;, res, time.Since(start)) case res := &lt;-chan2: fmt.Println(&quot;Response form service 2&quot;, res, time.Since(start)) &#125; fmt.Println(&quot;main stop &quot;,time.Since(start))&#125; ä¸Šè¿°çš„ç¨‹åºçš„ç»“æœæ˜¯æœ‰ä¸åŒçš„ ç»“æœä¸€ï¼šmain start 0sResponse form service 1 Value 1 496.2Âµsmain stop 496.2Âµsç»“æœäºŒï¼šmain start 0sResponse form service 2 Value 1 0smain stop 0s åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œä¸¤ä¸ªé€šé“åœ¨å…¶ç¼“å†²åŒºä¸­éƒ½æœ‰ä¸¤ä¸ªå€¼ã€‚å› ä¸ºæˆ‘ä»¬å‘å®¹é‡ä¸º 2 çš„ç¼“å†²åŒºé€šé“åˆ†åˆ«å‘é€äº†ä¸¤ä¸ªå€¼ï¼Œæ‰€ä»¥è¿™äº›é€šé“å‘é€æ“ä½œä¸ä¼šé˜»å¡å¹¶ä¸”ä¼šæ‰§è¡Œä¸‹é¢çš„ select å—ã€‚ select å—ä¸­çš„æ‰€æœ‰ case æ“ä½œéƒ½ä¸ä¼šé˜»å¡ï¼Œå› ä¸ºæ¯ä¸ªé€šé“ä¸­éƒ½æœ‰ä¸¤ä¸ªå€¼ï¼Œè€Œæˆ‘ä»¬çš„ case æ“ä½œåªéœ€è¦å–å‡ºå…¶ä¸­ä¸€ä¸ªå€¼ã€‚å› æ­¤ï¼Œgo è¿è¡Œæ—¶ä¼šéšæœºé€‰æ‹©ä¸€ä¸ª case æ“ä½œå¹¶æ‰§è¡Œå…¶ä¸­çš„ä»£ç ã€‚ 2.3.8.default case å—åƒ switch ä¸€æ ·ï¼Œ select è¯­å¥ä¹Ÿæœ‰ default case å—ã€‚default case å— æ˜¯éé˜»å¡çš„ï¼Œä¸ä»…å¦‚æ­¤ï¼Œ default case å—å¯ä»¥ä½¿ select è¯­å¥æ°¸ä¸é˜»å¡ï¼Œè¿™æ„å‘³ç€ï¼Œ ä»»ä½•é€šé“çš„ å‘é€ å’Œ æ¥æ”¶ æ“ä½œ (ä¸ç®¡æ˜¯ç¼“å†²æˆ–è€…éç¼“å†²) éƒ½ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚ å¦‚æœæœ‰ caseå—çš„é€šé“æ“ä½œæ˜¯éé˜»å¡ï¼Œé‚£ä¹ˆ selectä¼šæ‰§è¡Œå…¶case å—ã€‚å¦‚æœæ²¡æœ‰é‚£ä¹ˆ selectå°†é»˜è®¤æ‰§è¡Œ defaultå—. 12345678910111213141516171819202122232425262728293031323334353637package mainimport ( &quot;fmt&quot; &quot;time&quot;)var start time.Timefunc init() &#123; start = time.Now()&#125;func service1(c chan string) &#123; c &lt;- &quot;Hello from service 1&quot;&#125;func service2(c chan string) &#123; c &lt;- &quot;Hello from service 2&quot;&#125;func main() &#123; fmt.Println(&quot;main start&quot;, time.Since(start)) chan1 := make(chan string) chan2 := make(chan string) go service1(chan1) go service2(chan2) select &#123; case res := &lt;-chan1: fmt.Println(&quot;Response form service 1&quot;, res, time.Since(start)) case res := &lt;-chan2: fmt.Println(&quot;Response form service 2&quot;, res, time.Since(start)) default: fmt.Println(&quot;No Response received&quot;,time.Since(start)) &#125; fmt.Println(&quot;main stop &quot;,time.Since(start))&#125;/*ç»“æœï¼šmain start 0sNo Response received 0smain stop 0s*/ åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œå› ä¸ºé€šé“æ˜¯éç¼“å†²çš„ï¼Œcase å—çš„é€šé“æ“ä½œéƒ½æ˜¯é˜»å¡çš„ï¼Œæ‰€æœ‰ default å—å°†è¢«æ‰§è¡Œã€‚ å¦‚æœä¸Šé¢çš„ select è¯­å¥æ²¡æœ‰ default å—ï¼Œselect å°†é˜»å¡ï¼Œæ²¡æœ‰ response ä¼šè¢«æ‰“å°å‡ºæ¥ï¼ŒçŸ¥é“é€šé“å˜æˆéé˜»å¡ã€‚ å¦‚æœå¸¦æœ‰ default, select å°†æ˜¯éé˜»å¡çš„ï¼Œè°ƒåº¦å™¨å°†ä¸ä¼šä»ä¸»çº¿ç¨‹è½¬è€Œè°ƒåº¦å…¶ä»–åç¨‹ã€‚ ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ time.Sleep æ”¹å˜è¿™ä¸€ç‚¹ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸»çº¿ç¨‹å°†æŠŠè°ƒåº¦æƒè½¬ç§»åˆ°å…¶ä»–åç¨‹ï¼Œåœ¨å…¶ä»–åç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè°ƒåº¦æƒä»æ–°å›åˆ°ä¸»çº¿ç¨‹æ‰‹é‡Œã€‚ å½“ä¸»çº¿ç¨‹é‡æ–°æ‰§è¡Œçš„æ—¶å€™ï¼Œé€šé“é‡Œé¢å·²ç»æœ‰å€¼äº†ï¼Œcase æ“ä½œå°†ä¸ä¼šé˜»å¡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142package mainimport ( &quot;fmt&quot; &quot;time&quot;)var start time.Timefunc init() &#123; start = time.Now()&#125;func service1(c chan string) &#123; fmt.Println(&quot;service1 start&quot;) c &lt;- &quot;Hello from service 1&quot;&#125;func service2(c chan string) &#123; fmt.Println(&quot;service2 start&quot;) c &lt;- &quot;Hello from service 2&quot;&#125;func main() &#123; fmt.Println(&quot;main start&quot;, time.Since(start)) chan1 := make(chan string) chan2 := make(chan string) go service1(chan1) go service2(chan2) time.Sleep(3*time.Second) select &#123; case res := &lt;-chan1: fmt.Println(&quot;Response form service 1&quot;, res, time.Since(start)) case res := &lt;-chan2: fmt.Println(&quot;Response form service 2&quot;, res, time.Since(start)) default: fmt.Println(&quot;No Response received&quot;,time.Since(start)) &#125; fmt.Println(&quot;main stop &quot;,time.Since(start))&#125;/*ç»“æœä¸å”¯ä¸€ã€‚main start 0sservice2 startservice1 startResponse form service 1 Hello from service 1 3.0006729smain stop 3.0006729s*/ 2.3.9.ç©º selectå’Œ for&#123;&#125; è¿™æ ·çš„ç©ºå¾ªç¯å¾ˆåƒï¼Œç©º select&#123;&#125; è¯­æ³•ä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹å¿…é¡»è¦è¯´æ˜ã€‚æˆ‘ä»¬çŸ¥é“ select å°†è¢«é˜»å¡é™¤éæœ‰ case å—æ²¡æœ‰é˜»å¡ã€‚å› ä¸º select&#123;&#125; æ²¡æœ‰ case éé˜»å¡è¯­å¥ï¼Œä¸»çº¿ç¨‹å°†é˜»å¡å¹¶å¯èƒ½ä¼šå¯¼è‡´æ­»é”ã€‚ 123456789101112131415161718package mainimport &quot;fmt&quot;func service() &#123; fmt.Println(&quot;Hello from service&quot;)&#125;func main() &#123; fmt.Println(&quot;main started&quot;) go service() select &#123;&#125; fmt.Println(&quot;main stop&quot;)&#125;/*ç»“æœmain startedHello from servicefatal error: all goroutines are asleep - deadlock!goroutine 1 [select (no cases)]:*/ åœ¨ä¸Šé¢çš„ç¨‹åºä¸­æˆ‘ä»¬çŸ¥é“ select å°†é˜»å¡ main çº¿ç¨‹ï¼Œè°ƒåº¦å™¨å°†ä¼šè°ƒåº¦ service è¿™ä¸ªåç¨‹ã€‚åœ¨ service æ‰§è¡Œå®Œæ¯•åï¼Œè°ƒåº¦å™¨ä¼šå†å»è°ƒåº¦å…¶ä»–å¯ç”¨çš„åç¨‹ï¼Œä½†æ˜¯æ­¤æ—¶å·²ç»æ²¡æœ‰å¯ç”¨çš„åç¨‹ï¼Œä¸»çº¿ç¨‹ä¹Ÿæ­£åœ¨é˜»å¡ï¼Œæ‰€ä»¥æœ€åçš„ç»“æœå°±æ˜¯å‘ç”Ÿæ­»é”. 2.3.10.Deadlockdefault å—åœ¨é€šé“æ“ä½œé˜»å¡çš„æ—¶å€™æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä»–å¯ä»¥é¿å…æ­»é”ã€‚ åŒæ—¶ç”±äº defaultå—çš„éé˜»å¡ç‰¹æ€§ï¼ŒGo å¯ä»¥é¿å…åœ¨å…¶ä»–åç¨‹é˜»å¡çš„æ—¶å€™å»è°ƒåº¦å…¶ä»–åç¨‹ï¼Œä»è€Œé¿å…æ­»é”ã€‚é€šé“çš„å‘é€æ“ä½œä¹Ÿç±»ä¼¼ï¼Œï¼Œ default å¯ä»¥åœ¨å…¶ä»–åç¨‹ä¸èƒ½è¢«è°ƒåº¦çš„æ—¶å€™è¢«æ‰§è¡Œï¼Œä»è€Œé¿å…æ­»é”ã€‚ 2.3.11.nilé€šé“2.4.å¤šåç¨‹ååŒå·¥ä½œå†™ä¸¤ä¸ªåç¨‹ï¼Œä¸€ä¸ªç”¨æ¥è®¡ç®—æ•°å­—çš„å¹³æ–¹ï¼Œå¦ä¸€ä¸ªç”¨æ¥è®¡ç®—æ•°å­—çš„ç«‹æ–¹ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344package mainimport &quot;fmt&quot;func square(c chan int) &#123; fmt.Println(&quot;[square] reading&quot;) num := &lt;-c c &lt;- num * num&#125;func cube(c chan int) &#123; fmt.Println(&quot;[cube] reading&quot;) num := &lt;-c c &lt;- num * num * num&#125;func main() &#123; fmt.Println(&quot;[main] main started&quot;) squareChan := make(chan int) cubeChan := make(chan int) go square(squareChan) go cube(cubeChan) testNum := 3 fmt.Println(&quot;[main] send testNum to squareChan&quot;) squareChan &lt;- testNum fmt.Println(&quot;[main] resuming&quot;) fmt.Println(&quot;[main] send testNum to cubeChane&quot;) cubeChan &lt;- testNum fmt.Println(&quot;[main] resuming&quot;) fmt.Println(&quot;[main] reading from channels&quot;) squareVal,cubeVal := &lt;-squareChan, &lt;-cubeChan sum := squareVal + cubeVal fmt.Println(&quot;[main] sum of square and cube of&quot;,testNum,&quot; is&quot;,sum) fmt.Println(&quot;[main] main stop&quot;)&#125;/*ç»“æœï¼š[main] main started[main] send testNum to squareChan[cube] reading[square] reading[main] resuming[main] send testNum to cubeChane[main] resuming[main] reading from channels[main] sum of square and cube of 3 is 36[main] main stop*/ æµç¨‹ï¼š åˆ›å»ºä¸¤ä¸ªå‡½æ•° square å’Œ cube ä½œä¸ºåç¨‹è¿è¡Œã€‚ ä¸¤ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª int ç±»å‹é€šé“å‚æ•°cï¼Œä» c ä¸­è¯»å–æ•°æ®åˆ°å˜é‡numï¼Œæœ€åæŠŠè®¡ç®—çš„æ•°æ®å†å†™å…¥åˆ°é€šé“ c ä¸­ã€‚ åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨ makeå‡½æ•°åˆ›å»ºä¸¤ä¸ª intç±»å‹é€šé“ squareChan and cubeChanç„¶ååˆ†åˆ«è¿è¡Œsquareå’Œcube åç¨‹ã€‚å› ä¸ºè°ƒåº¦æƒè¿˜åœ¨ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥æ‰§è¡ŒtestNumb èµ‹å€¼ä¸º 3ã€‚ ç„¶åæˆ‘ä»¬æŠŠæ•°æ®æ”¾å…¥é€šé“ squareChan ã€‚ä¸»çº¿ç¨‹å°†é˜»å¡ç›´åˆ°é€šé“çš„æ•°æ®è¢«è¯»å–ã€‚ ä¸€æ—¦é€šé“çš„æ•°æ®è¢«è¯»å–ï¼Œä¸»çº¿ç¨‹å°†ç»§ç»­æ‰§è¡Œã€‚ åœ¨ä¸»çº¿ç¨‹ä¸­æˆ‘ä»¬è¯•å›¾ä»è¿™ä¸¤ä¸ªé€šé“ä¸­è¯»å–æ•°æ®ï¼Œæ­¤æ—¶çº¿ç¨‹å¯èƒ½é˜»å¡ç›´åˆ°æœ‰æ•°æ®å†™å…¥åˆ°é€šé“ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨:=è¯­æ³•æ¥æ¥æ”¶å¤šä¸ªé€šé“çš„å€¼ã€‚ ä¸€æ—¦è¿™äº›åç¨‹æŠŠæ•°æ®å†™å…¥åˆ°é€šé“ï¼Œä¸»çº¿ç¨‹å°†é˜»å¡ã€‚å½“æ•°æ®è¢«å†™å…¥é€šé“ä¸­ï¼Œä¸»çº¿ç¨‹å°†ç»§ç»­æ‰§è¡Œï¼Œæœ€åæˆ‘ä»¬è®¡ç®—å‡ºæ•°å­—çš„æ€»å’Œå¹¶æ‰“å°åˆ°æ§åˆ¶å°ã€‚ 2.5.WaitGroupæœ‰ä¸€ç§ä¸šåŠ¡åœºæ™¯æ˜¯ä½ éœ€è¦çŸ¥é“æ‰€æœ‰çš„åç¨‹æ˜¯å¦å·²æ‰§è¡Œå®Œæˆä»–ä»¬çš„ä»»åŠ¡ã€‚è¿™ä¸ªå’Œåªéœ€è¦éšæœºé€‰æ‹©ä¸€ä¸ªæ¡ä»¶ä¸ºtrue çš„ select ä¸åŒï¼Œä»–éœ€è¦ä½ æ»¡è¶³æ‰€æœ‰çš„æ¡ä»¶éƒ½æ˜¯ true æ‰å¯ä»¥æ¿€æ´»ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚ è¿™é‡Œçš„æ¡ä»¶æŒ‡çš„æ˜¯éé˜»å¡çš„é€šé“æ“ä½œã€‚ 2.5.1.ç®€ä»‹WaitGroup æ˜¯ä¸€ä¸ªå¸¦ç€è®¡æ•°å™¨çš„ç»“æ„ä½“ï¼Œè¿™ä¸ªè®¡æ•°å™¨å¯ä»¥è¿½è¸ªåˆ°æœ‰å¤šå°‘åç¨‹åˆ›å»ºï¼Œæœ‰å¤šå°‘åç¨‹å®Œæˆäº†å…¶å·¥ä½œã€‚å½“è®¡æ•°å™¨ä¸º 0 çš„æ—¶å€™è¯´æ˜æ‰€æœ‰åç¨‹éƒ½å®Œæˆäº†å…¶å·¥ä½œã€‚ 1234567891011121314151617181920212223242526272829package mainimport ( &quot;fmt&quot; &quot;sync&quot; &quot;time&quot;)func service(wg *sync.WaitGroup, instance int) &#123; time.Sleep(2 * time.Second) fmt.Println(&quot;Service called on instance&quot;,instance) wg.Done() //åç¨‹æ•°-1&#125;func main() &#123; fmt.Println(&quot;main started&quot;) var wg sync.WaitGroup for i:=1;i&lt;= 3; i++&#123; wg.Add(1) go service(&amp;wg,i) &#125; wg.Wait()//é˜»å¡ fmt.Println(&quot;main stop&quot;)&#125;/*ç»“æœï¼š(ç»“æœæ˜¯ä¸å”¯ä¸€çš„ï¼Œä¸€å…±æœ‰3!æ¬¡å¯èƒ½çš„ç»“æœ)main startedService called on instance 2Service called on instance 1Service called on instance 3main stop*/ åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªsync.WaitGroup ç±»å‹çš„ç©ºç»“æ„ä½“ (å¸¦ç€ 0 å€¼å­—æ®µ) wg ã€‚ WaitGroup ç»“æ„ä½“æœ‰ä¸€äº›åƒ noCopy, state1 å’Œ sema è¿™æ ·çš„å†…éƒ¨å­—æ®µã€‚ è¿™ä¸ªç»“æ„ä½“ä¹Ÿæœ‰ä¸‰ä¸ªå…¬å¼€æ–¹æ³•ï¼š Add, Wait å’Œ Done. Add æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå˜é‡åå« delta çš„int ç±»å‹å‚æ•°ï¼Œä¸»è¦ç”¨æ¥å†…éƒ¨è®¡æ•°ã€‚ å†…éƒ¨è®¡æ•°å™¨é»˜è®¤å€¼ä¸º 0. å®ƒç”¨äºè®°å½•å¤šå°‘ä¸ªåç¨‹åœ¨è¿è¡Œã€‚ å½“ WaitGroupåˆ›å»ºåï¼Œè®¡æ•°å™¨å€¼ä¸º 0ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™ Addæ–¹æ³•ä¼  intç±»å‹å€¼æ¥å¢åŠ å®ƒçš„æ•°é‡ã€‚ è®°ä½ï¼Œ å½“åç¨‹å»ºç«‹åï¼Œè®¡æ•°å™¨çš„å€¼ä¸ä¼šè‡ªåŠ¨é€’å¢ ï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é€’å¢å®ƒã€‚ Wait æ–¹æ³•ç”¨æ¥é˜»å¡å½“å‰åç¨‹ã€‚ä¸€æ—¦è®¡æ•°å™¨ä¸º 0, åç¨‹å°†æ¢å¤è¿è¡Œã€‚ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•å»é™ä½è®¡æ•°å™¨çš„å€¼ã€‚Done æ–¹æ³•å¯ä»¥é™ä½è®¡æ•°å™¨çš„å€¼ã€‚ä»–ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œå› æ­¤ï¼Œå®ƒæ¯æ‰§è¡Œä¸€æ¬¡è®¡æ•°å™¨å°±å‡ 1ã€‚ ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»º wg å˜é‡åï¼Œè¿è¡Œäº†ä¸‰æ¬¡ for å¾ªç¯ï¼Œæ¯æ¬¡è¿è¡Œçš„æ—¶å€™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåç¨‹å¹¶ç»™è®¡æ•°å™¨åŠ  1ã€‚ è¿™æ„å‘³ç€ç°åœ¨æˆ‘ä»¬æœ‰ä¸‰ä¸ªåç¨‹åœ¨ç­‰å¾…è¿è¡Œå¹¶ä¸” WaitGroup çš„è®¡æ•°å™¨å€¼ä¸º 3ã€‚æ³¨æ„æˆ‘ä»¬ä¼ ç»™åç¨‹å‡½æ•°çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™æ˜¯å› ä¸ºä¸€æ—¦åœ¨åç¨‹å†…éƒ¨å·¥ä½œå®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è°ƒç”¨Doneæ–¹æ³•å»é™ä½è®¡æ•°å™¨çš„å€¼ã€‚ å¦‚æœ wg é€šè¿‡å€¼å¤åˆ¶æ–¹å¼ä¼ è¿‡å»ï¼Œ å› ä¸ºä¼ é€’çš„æ˜¯ä¸€ä¸ªæ‹·è´ï¼Œä¸»çº¿ç¨‹ä¸­çš„ wgå°†ä¸ä¼šå¾—åˆ°ä¿®æ”¹ã€‚ åœ¨ for å¾ªç¯æ‰§è¡Œå®Œæˆåï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ wg.Wait()å»é˜»å¡å½“å‰ä¸»çº¿ç¨‹ï¼Œå¹¶æŠŠè°ƒåº¦æƒè®©ç»™å…¶ä»–åç¨‹ï¼Œç›´åˆ°è®¡æ•°å™¨å€¼ä¸º 0 ä¹‹åï¼Œä¸»çº¿ç¨‹æ‰ä¼šè¢«å†æ¬¡è°ƒåº¦ã€‚ æˆ‘ä»¬åœ¨å¦å¤–ä¸‰ä¸ªåç¨‹ä¸­é€šè¿‡Doneæ–¹æ³•æŠŠè®¡æ•°å™¨å€¼é™ä¸º 0ï¼Œæ­¤æ—¶ä¸»çº¿ç¨‹å°†å†æ¬¡è¢«è°ƒåº¦å¹¶å¼€å§‹æ‰§è¡Œä¹‹åçš„ä»£ç ã€‚ 2.5.2.å·¥ä½œæ± é¡¾åæ€ä¹‰ï¼Œä¸€ä¸ªå·¥ä½œæ± å¹¶å‘æ‰§è¡ŒæŸé¡¹å·¥ä½œçš„åç¨‹é›†åˆã€‚ åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬å·²ç»ç”¨åˆ°çš„å¤šä¸ªåç¨‹æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯ä»–ä»¬å¹¶æ²¡æœ‰æ‰§è¡Œç‰¹å®šçš„å·¥ä½œï¼Œåªæ˜¯ sleep äº†ä¸€ä¸‹ã€‚ å¦‚æœä½ å‘åç¨‹ä¸­ä¼ ä¸€ä¸ªé€šé“ï¼Œä»–ä»¬å¯ä»¥å»å®Œæˆä¸€äº›å·¥ä½œï¼Œå˜æˆä¸€ä¸ªå·¥ä½œæ± ã€‚ æ‰€ä»¥å·¥ä½œæ± å…¶å®å°±æ˜¯ç»´æŠ¤äº†å¤šä¸ªå·¥ä½œåç¨‹ï¼Œè¿™äº›åç¨‹çš„åŠŸèƒ½æ˜¯å¯ä»¥æ”¶åˆ°ä»»åŠ¡ï¼Œæ‰§è¡Œä»»åŠ¡å¹¶è¿”å›ç»“æœã€‚ä»–ä»¬å®Œæˆä»»åŠ¡åæˆ‘ä»¬å°±å¯ä»¥æ”¶åˆ°ç»“æœã€‚è¿™äº›åç¨‹ä½¿ç”¨ç›¸åŒçš„é€šé“æ¥è¾¾åˆ°è‡ªå·±çš„ç›®çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445package mainimport ( &quot;fmt&quot; &quot;time&quot;)func sqrWorker(tasks &lt;-chan int, results chan &lt;-int, instance int) &#123; for num := range tasks &#123; time.Sleep(time.Millisecond) //é˜»å¡ fmt.Printf(&quot;[worker %v ] Sending result by worker %v \\n&quot;,instance,instance) results &lt;- num*num &#125;&#125;func main() &#123; fmt.Println(&quot;main started&quot;) tasks := make(chan int,10) results := make(chan int,10) for i:=0;i&lt;3;i++&#123; go sqrWorker(tasks,results,i) &#125; for i := 0; i &lt; 5; i++ &#123; tasks &lt;- i*2 &#125; fmt.Println(&quot;[main] write 5 tasks&quot;) close(tasks) for i := 0; i &lt; 5; i++ &#123; result := &lt;-results fmt.Println(&quot;[main] Result&quot; , i , &quot;:&quot;, result) &#125; fmt.Println(&quot;main stop&quot;)&#125;/*//ç»“æœä¹‹ä¸€[main] write 5 tasks[worker 0 ] Sending result by worker 0 [worker 1 ] Sending result by worker 1 [worker 2 ] Sending result by worker 2 [main] Result 0 : 4[main] Result 1 : 16[main] Result 2 : 0[worker 1 ] Sending result by worker 1 [main] Result 3 : 64[worker 0 ] Sending result by worker 0 [main] Result 4 : 36main stop*/ sqrWorker æ˜¯ä¸€ä¸ªå¸¦æœ‰ tasks é€šé“ï¼Œresults é€šé“ å’Œ id ä¸‰ä¸ªå‚æ•°çš„åç¨‹å‡½æ•°ã€‚è¿™ä¸ªåç¨‹å‡½æ•°çš„ä»»åŠ¡æ˜¯æŠŠä» tasks é€šé“æ¥æ”¶åˆ°çš„æ•°å­—çš„å¹³æ–¹å‘é€åˆ° resultsé€šé“ã€‚ åœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªå¸¦ç¼“å†²åŒºï¼Œå®¹é‡ä¸º 10 çš„é€šé“tasks and resultã€‚å› æ­¤åœ¨ç¼“å†²åŒºè¢«å……æ»¡ä¹‹å‰ï¼Œä»»ä½•æ“ä½œéƒ½æ˜¯éé˜»å¡çš„ã€‚æ‰€ä»¥æœ‰æ—¶å€™è®¾ç½®ä¸€ä¸ªå¤§ç‚¹çš„ç¼“å†²åŒºæ˜¯ä¸ªå¥½åŠæ³•ã€‚ ç„¶åæˆ‘ä»¬å¾ªç¯åˆ›å»ºå¤šä¸ª sqrWorker åç¨‹ï¼Œå¹¶ä¼ å…¥ tasks é€šé“ï¼Œ results é€šé“ å’Œ id ä¸‰ä¸ªå‚æ•°ï¼Œç”¨æ¥ä¼ é€’å’Œè·å–åç¨‹æ‰§è¡Œå‰åçš„æ•°æ®ã€‚ æ¥ç€æˆ‘ä»¬å‘ tasks éé˜»å¡é€šé“æ”¾å…¥ 5 ä¸ªä»»åŠ¡æ•°æ®ã€‚ å› ä¸ºæˆ‘ä»¬å·²ç»å‘ä»»åŠ¡é€šé“æ”¾å…¥çš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…³é—­å®ƒï¼Œè™½ç„¶è¿™ä¸ªæ“ä½œä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯å¦‚æœä»¥åè¿è¡Œä¸­å‡ºç°é”™è¯¯çš„è¯å¯ä»¥é˜²æ­¢é€šé“ range å¸¦æ¥çš„æ­»é”é—®é¢˜ã€‚ ç„¶åæˆ‘ä»¬å¼€å¯å¾ªç¯ 5 æ¬¡ä» results é€šé“æ¥æ”¶æ•°æ®ï¼Œå› ä¸ºç›®å‰é€šé“ç¼“å†²åŒºæ²¡æœ‰æ•°æ®ï¼Œæ‰€ä»¥é€šé“è¯»å–æ“ä½œé€ æˆä¸»çº¿ç¨‹é˜»å¡ï¼Œè°ƒåº¦å™¨å°†è°ƒåº¦å·¥ä½œæ± çš„åç¨‹ï¼Œç›´åˆ°æœ‰æ•°æ®æ·»åŠ åˆ° resultsé€šé“ã€‚ å½“å‰æˆ‘ä»¬æœ‰ 3 ä¸ªwork åç¨‹åœ¨å·¥ä½œï¼Œæˆ‘ä»¬ä½¿ç”¨äº† sleep æ“ä½œæ¥æ¨¡æ‹Ÿé˜»å¡æ“ä½œï¼Œæ‰€ä»¥è°ƒåº¦å™¨åœ¨æŸä¸€ä¸ªé˜»å¡çš„æ—¶å€™ä¼šå»è°ƒç”¨å…¶ä»–çš„ work åç¨‹ï¼Œå½“æŸä¸ª work åç¨‹ sleep å®Œæˆåä¼šæŠŠè®¡ç®—æ•°å­—çš„å¹³æ–¹çš„ç»“æœæ•°æ®æ”¾å…¥ results ç¼“å†²æ— é˜»å¡é€šé“ã€‚ å½“ 3 ä¸ªåç¨‹ä¾æ¬¡äº¤æ›¿æŠŠ task é€šé“çš„ä»»åŠ¡éƒ½å®Œæˆåï¼Œfor range å¾ªç¯å°†å®Œæˆï¼Œå¹¶ä¸”å› ä¸ºä¹‹å‰æˆ‘ä»¬å·²ç»å…³é—­äº†ä»»åŠ¡é€šé“ï¼Œæ‰€ä»¥åç¨‹ä¹Ÿä¸ä¼šå‘ç”Ÿæ­»é”ã€‚è°ƒåº¦å™¨å°†ç»§ç»­è¿”å›è°ƒåº¦ä¸»çº¿ç¨‹ã€‚ æœ‰æ—¶å€™æ‰€æœ‰çš„å·¥ä½œåç¨‹å¯èƒ½éƒ½åœ¨é˜»å¡ï¼Œæ­¤æ—¶è°ƒåº¦å™¨å°†å»è°ƒåº¦ä¸»çº¿ç¨‹ï¼Œç›´åˆ° results é€šé“å†æ¬¡ä¸ºç©ºã€‚ å½“æ‰€æœ‰ work åç¨‹éƒ½å®Œæˆä»»åŠ¡é€€å‡ºåï¼Œä¸»çº¿ç¨‹å°†ç»§ç»­æ‹¿åˆ°è°ƒåº¦æƒå¹¶æ‰“å° results é€šé“å‰©ä¸‹çš„æ•°æ®ï¼Œç»§ç»­ä¹‹åä»£ç çš„æ‰§è¡Œã€‚ 2.5.3.Mutexäº’æ–¥æ˜¯ Go ä¸­ä¸€ä¸ªç®€å•çš„æ¦‚å¿µã€‚åœ¨æˆ‘è§£é‡Šå®ƒä¹‹å‰ï¼Œå…ˆè¦æ˜ç™½ä»€ä¹ˆæ˜¯ç«æ€æ¡ä»¶ã€‚ goroutines éƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹çš„è°ƒç”¨æ ˆï¼Œå› æ­¤ä»–ä»¬ä¹‹é—´ä¸åˆ†äº«ä»»ä½•æ•°æ®ã€‚ä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µæ˜¯æ•°æ®å­˜æ”¾åœ¨å †ä¸Šï¼Œå¹¶ä¸”è¢«å¤šä¸ª goroutines ä½¿ç”¨ã€‚ å¤šä¸ª goroutines è¯•å›¾å»æ“ä½œä¸€ä¸ªå†…å­˜åŒºåŸŸçš„æ•°æ®ä¼šé€ æˆæ„æƒ³ä¸åˆ°çš„åæœ. 12345678910111213141516171819202122232425package mainimport ( &quot;fmt&quot; &quot;sync&quot;)var i intfunc worker(wg *sync.WaitGroup) &#123; i = i+1 wg.Done()&#125;func main() &#123; fmt.Println(&quot;main started&quot;) var wg sync.WaitGroup for i:=0;i&lt;1000;i++&#123; wg.Add(1) go worker(&amp;wg) &#125; wg.Wait() fmt.Println(&quot;main stop&quot;,i)&#125;/*ç»“æœæ˜¯ä¸åŒçš„ï¼ï¼main startedmain stop 985*/ i = i + 1 è¿™ä¸ªè®¡ç®—æœ‰ 3 æ­¥(1) å¾—åˆ° i çš„å€¼(2) ç»™ i çš„å€¼åŠ  1(3) æ›´æ–° i çš„å€¼ è¿™é‡Œå‘ç”Ÿå¾ˆå¤šäº‹æƒ…ï¼Œå› ä¸ºgoæ˜¯åç¨‹ï¼Œè¿™ä¸‰æ­¥é‡Œé¢ä¸ä¸€å®šéƒ½æ˜¯åŒæ—¶é¡ºåºæ‰§è¡Œçš„ã€‚æœ‰å¯èƒ½Aæ˜¯é¡ºåˆ©æ‰§è¡Œï¼Œä½¿å¾—i=2ï¼Œä½†æ˜¯Bæ˜¯è¯»å–çš„æ˜¯Aæ²¡æ›´æ–°çš„ä¹‹å‰çš„iä¹Ÿå°±æ˜¯1ï¼Œæ‰€ä»¥å°±æ˜¯ç»“æœä¼šå°äºç­‰äº1000çš„ï¼Œ é™¤éä¸€ä¸ªåç¨‹é˜»å¡ï¼Œå¦åˆ™å…¶ä»–åç¨‹æ˜¯æ²¡æœ‰æœºä¼šè·å¾—è°ƒåº¦çš„ã€‚é‚£ä¹ˆ i = i + 1 ä¹Ÿæ²¡æœ‰é˜»å¡ï¼Œä¸ºä»€ä¹ˆ Go çš„è°ƒåº¦å™¨ä¼šå»è°ƒåº¦å…¶ä»–åç¨‹å‘¢ï¼Ÿ åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œéƒ½ä¸åº”è¯¥ä¾èµ– Go çš„è°ƒåº¦ç®—æ³•ï¼Œè€Œåº”è¯¥å®ç°è‡ªå·±çš„é€»è¾‘æ¥åŒæ­¥ä¸åŒçš„ goroutine. å®ç°æ–¹æ³•ä¹‹ä¸€å°±æ˜¯ä½¿ç”¨æˆ‘ä»¬ä¸Šé¢æåˆ°çš„äº’æ–¥é”ã€‚äº’æ–¥é”æ˜¯ä¸€ä¸ªç¼–ç¨‹æ¦‚å¿µï¼Œå®ƒä¿è¯äº†åœ¨åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æˆ–è€…åç¨‹å»æ“ä½œåŒä¸€ä¸ªæ•°æ®ã€‚å½“ä¸€ä¸ªåç¨‹æƒ³è¦æ“ä½œæ•°æ®çš„æ—¶å€™ï¼Œå¿…é¡»è·å–è¯¥æ•°æ®çš„ä¸€ä¸ªé”ï¼Œæ“ä½œå®Œæˆåå¿…é¡»é‡Šæ”¾é”ï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ°è¯¥æ•°æ®çš„é”ï¼Œé‚£ä¹ˆå°±ä¸èƒ½æ“ä½œè¿™ä¸ªæ•°æ®ã€‚ åœ¨ Go ä¸­ï¼Œäº’æ–¥æ•°æ®ç»“æ„ ( map) ç”± sync åŒ…æä¾›ã€‚åœ¨ Go ä¸­ï¼Œå¤šåç¨‹å»æ“ä½œä¸€ä¸ªå€¼éƒ½å¯èƒ½ä¼šå¼•èµ·ç«æ€æ¡ä»¶ã€‚æˆ‘ä»¬éœ€è¦åœ¨æ“ä½œæ•°æ®ä¹‹å‰ä½¿ç”¨ mutex.Lock() å»é”å®šå®ƒï¼Œä¸€æ—¦æˆ‘ä»¬å®Œæˆæ“ä½œï¼Œæ¯”å¦‚ä¸Šé¢æåˆ°çš„ i = i + 1, æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ mutext.Unlock() æ–¹æ³•è§£é”ã€‚ å¦‚æœåœ¨é”å®šçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªåç¨‹æƒ³è¦è¯»å†™ i çš„å€¼ï¼Œé‚£ä¹ˆæ­¤åç¨‹å°†é˜»å¡ ç›´åˆ°å‰é¢çš„åç¨‹å®Œæˆæ“ä½œå¹¶è§£é”æ•°æ®ã€‚å› æ­¤åœ¨æŸä¸€æ—¶åˆ»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåç¨‹å¯ä»¥æ“ä½œæ•°æ®ï¼Œä»è€Œé¿å…ç«æ€æ¡ä»¶ã€‚è®°ä½ï¼Œä»»ä½•é”ä¹‹é—´çš„å˜é‡åœ¨è§£é”ä¹‹å‰å¯¹äºå…¶ä»–åç¨‹éƒ½ä¸æ˜¯å¯ç”¨çš„ã€‚ è®©æˆ‘ä»¬ä½¿ç”¨äº’æ–¥é”ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ï¼š 123456789101112131415161718192021222324252627package mainimport ( &quot;fmt&quot; &quot;sync&quot;)var i intfunc worker(wg *sync.WaitGroup,m *sync.Mutex) &#123; m.Lock() i = i+1 m.Unlock() wg.Done()&#125;func main() &#123; fmt.Println(&quot;main started&quot;) var wg sync.WaitGroup var m sync.Mutex for i:=0;i&lt;1000;i++&#123; wg.Add(1) go worker(&amp;wg,&amp;m) &#125; wg.Wait() fmt.Println(&quot;main stop&quot;,i)&#125;/*ç»“æœmain startedmain stop 1000*/ åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªäº’æ–¥é”å˜é‡ mï¼Œå¹¶æŠŠå®ƒçš„æŒ‡é’ˆä¼ é€’ç»™æ‰€æœ‰å·²åˆ›å»ºçš„åç¨‹ã€‚åœ¨åç¨‹å†…éƒ¨ï¼Œå½“æˆ‘ä»¬è¦å¼€å§‹æ“ä½œ iå˜é‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ m.Lock()è·å¾—é”ï¼Œæ“ä½œå®Œæˆåæˆ‘ä»¬ä½¿ç”¨ m.Unlock()é‡Šæ”¾é”ã€‚äº’æ–¥é”å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³ç«æ€æ¡ä»¶ã€‚ ä½†é¦–è¦è§„åˆ™æ˜¯é¿å… goroutine ä¹‹é—´å…±äº«èµ„æºã€‚æ‰€ä»¥å®˜æ–¹å»ºè®®ä¸è¦å…±äº«å†…å­˜å¹¶å‘ï¼Œè€Œæ˜¯é€šè¿‡ç®¡é“é€šä¿¡çš„æ–¹å¼å¹¶å‘ã€‚ 3.ç»“è¯­åéƒ¨åˆ†goå¹¶å‘çŸ¥è¯†æ˜¯å‚è€ƒä½œè€…summarçš„goå¹¶å‘ä»¥åŠä¹¦ä¸Šçš„çŸ¥è¯†ç‚¹ï¼Œéå¸¸æ„Ÿè°¢ä½œè€…çš„ç¿»è¯‘å·¥ä½œï¼Œä½¿å¾—æˆ‘èƒ½æ›´å¥½çš„ç†è§£goçš„channelå¹¶å‘æœºåˆ¶ï¼é“¾æ¥ç‚¹è¿™é‡Œchannel éšç€ä¸šåŠ¡çš„ä¸æ–­æ‰©å¤§ï¼Œå¹¶å‘èƒ½æ›´å¥½çš„å‘æŒ¥æœåŠ¡å™¨çš„æ€§èƒ½ã€‚","categories":[{"name":"Go","slug":"Go","permalink":"https://hwame.top/categories/Go/"}],"tags":[{"name":"Go","slug":"Go","permalink":"https://hwame.top/tags/Go/"}]},{"title":"Goè¯­è¨€ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŒ‡é’ˆ","slug":"when-to-use-pointer-in-go","date":"2022-03-23T12:49:57.000Z","updated":"2022-03-23T15:48:45.000Z","comments":true,"path":"20220323/when-to-use-pointer-in-go.html","link":"","permalink":"https://hwame.top/20220323/when-to-use-pointer-in-go.html","excerpt":"","text":"img { display: inline !important; } æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20220323/when-to-use-pointer-in-go.htmlåŸæ–‡é“¾æ¥ï¼šhttps://mp.weixin.qq.com/s/FQ83qRBb985FHB-0ttIYCQæ–‡ç« è¯´æ˜ï¼šæ–‡ç« ä½¿ç”¨Goç¨‹åºå°†å¾®ä¿¡å…¬ä¼—å·æ–‡ç« è½¬æ¢ä¸ºMarkdownæ ¼å¼ã€‚å‚è€ƒèµ„æ–™ï¼š Goè¯­è¨€ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨æŒ‡é’ˆï¼ŸæŒ‡é’ˆä½¿ç”¨åˆ†æä¸è®²è§£ Goè¯­è¨€ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨æŒ‡é’ˆ Goè¯­è¨€ä»€ä¹ˆæ—¶å€™è¯¥ä½¿ç”¨æŒ‡é’ˆï¼ŸæŒ‡é’ˆä½¿ç”¨åˆ†æä¸è®²è§£ æ”¶å½•äºè¯é¢˜#ä¸ºä»€ä¹ˆè¦å­¦Goè¯­è¨€ 47ä¸ª ä»€ä¹ˆæ˜¯æŒ‡é’ˆæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç¨‹åºè¿è¡Œæ—¶çš„æ•°æ®æ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œæ¯ä¸€ä¸ªå­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ•°æ®éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œè¿™ä¸ªç¼–å·å°±æ˜¯å†…å­˜åœ°å€ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªå†…å­˜åœ°å€æ¥æ‰¾åˆ°å†…å­˜ä¸­å­˜å‚¨çš„æ•°æ®ï¼Œè€Œå†…å­˜åœ°å€å¯ä»¥è¢«èµ‹å€¼ç»™ä¸€ä¸ªæŒ‡é’ˆã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç®€å•çš„ç†è§£ä¸ºæŒ‡é’ˆå°±æ˜¯å†…å­˜åœ°å€ã€‚ æŒ‡é’ˆçš„å£°æ˜å’Œå®šä¹‰åœ¨Goè¯­è¨€ä¸­ï¼Œè·å–ä¸€ä¸ªæŒ‡é’ˆï¼Œç›´æ¥ä½¿ç”¨å–åœ°å€ç¬¦&amp;å°±å¯ä»¥ã€‚ç¤ºä¾‹ï¼š12345678910func main() &#123; name := &quot;Goè¯­è¨€åœˆ&quot; nameP := &amp;name //å–åœ°å€ fmt.Println(&quot;nameå˜é‡å€¼ä¸ºï¼š&quot;, name) fmt.Println(&quot;nameå˜é‡çš„å†…å­˜åœ°å€ä¸ºï¼š&quot;, nameP)&#125;//è¿è¡Œç»“æœï¼š//nameå˜é‡å€¼ä¸ºï¼šGoè¯­è¨€åœˆ//nameå˜é‡çš„å†…å­˜åœ°å€ä¸ºï¼š 0xc00004e240 nameP æŒ‡é’ˆçš„ç±»å‹æ˜¯ *stringGoè¯­è¨€ä¸­ï¼Œ* ç±»å‹åè¡¨ç¤ºä¸€ä¸ªå¯¹åº”çš„æŒ‡é’ˆç±»å‹ ä»ä¸Šé¢è¡¨æ ¼å¯ä»¥çœ‹åˆ°ï¼š æ™®é€šå˜é‡ name çš„å€¼æ˜¯Goè¯­è¨€åœˆï¼Œå­˜æ”¾åœ¨å†…å­˜åœ°å€ä¸º 0xc00004e240 çš„å†…å­˜ä¸­ æŒ‡é’ˆå˜é‡ namep çš„å€¼æ˜¯æ™®é€šå˜é‡çš„å†…å­˜åœ°å€ 0xc00004e240 æŒ‡é’ˆå˜é‡ nameP çš„å€¼å­˜æ”¾åœ¨ å†…å­˜åœ°å€ä¸º 0xc00004e360 çš„å†…å­˜ä¸­ æ™®é€šå˜é‡å­˜çš„æ˜¯æ•°æ®ï¼ŒæŒ‡é’ˆå˜é‡å­˜çš„æ˜¯æ•°æ®çš„åœ°å€ var å…³é”®å­—å£°æ˜æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ var å…³é”®å­—å£°æ˜12var nameP *stringnameP = &amp;name new å‡½æ•°å£°æ˜12nameP := new(string)nameP = &amp;name å¯ä»¥ä¼ é€’ç±»å‹ç»™è¿™ä¸ªå†…ç½®çš„ new å‡½æ•°ï¼Œå®ƒä¼šè¿”å›å¯¹åº”çš„æŒ‡é’ˆç±»å‹ã€‚ æŒ‡é’ˆçš„æ“ä½œè¿™é‡Œå¼ºè°ƒä¸€ä¸‹ï¼šæŒ‡é’ˆå˜é‡æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„å€¼æ˜¯æŒ‡é’ˆï¼ˆå†…å­˜åœ°å€ï¼‰ï¼æŒ‡é’ˆå˜é‡æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„å€¼æ˜¯æŒ‡é’ˆï¼ˆå†…å­˜åœ°å€ï¼‰ï¼æŒ‡é’ˆå˜é‡æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„å€¼æ˜¯æŒ‡é’ˆï¼ˆå†…å­˜åœ°å€ï¼‰ï¼è·å–æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼šåªéœ€è¦åœ¨æŒ‡é’ˆå˜é‡å‰åŠ  * å·å³å¯è·å¾—æŒ‡é’ˆå˜é‡å€¼æ‰€å¯¹åº”çš„æ•°æ®ï¼š123nameV := *namePfmt.Println(&quot;namePæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸º:&quot;, nameV)//namePæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸º: Goè¯­è¨€åœˆ ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼š123456789*nameP = &quot;å…¬ä¼—å·:Goè¯­è¨€åœˆ&quot;//ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å€¼fmt.Println(&quot;namePæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸º:&quot;,*nameP)fmt.Println(&quot;nameå˜é‡çš„å€¼ä¸º:&quot;,name)//è¿è¡Œç»“æœï¼š//namePæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸º: å…¬ä¼—å·:Goè¯­è¨€åœˆ//nameå˜é‡çš„å€¼ä¸º: å…¬ä¼—å·:Goè¯­è¨€åœˆ æˆ‘ä»¬å‘ç°nameP æŒ‡é’ˆæŒ‡å‘çš„å€¼è¢«æ”¹å˜äº†ï¼Œå˜é‡ name çš„å€¼ä¹Ÿè¢«æ”¹å˜äº† å› ä¸ºå˜é‡ name å­˜å‚¨æ•°æ®çš„å†…å­˜å°±æ˜¯æŒ‡é’ˆ nameP æŒ‡å‘çš„å†…å­˜ï¼Œè¿™å—å†…å­˜è¢« nameP ä¿®æ”¹åï¼Œå˜é‡ name çš„å€¼ä¹Ÿè¢«ä¿®æ”¹äº†ã€‚ é€šè¿‡ var å…³é”®å­—ç›´æ¥å®šä¹‰çš„æŒ‡é’ˆå˜é‡æ˜¯ä¸èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œçš„ï¼Œå› ä¸ºå®ƒçš„å€¼ä¸º nilï¼Œä¹Ÿå°±æ˜¯è¿˜æ²¡æœ‰æŒ‡å‘çš„å†…å­˜åœ°å€123456789101112131415//é”™è¯¯ç¤ºä¾‹var intP *int*intP = 10//é”™è¯¯ï¼Œåº”è¯¥å…ˆç»™åˆ†é…ä¸€å—å†…å­˜ï¼Œå†…å­˜åœ°å€ä½œä¸ºå˜é‡ intP çš„å€¼ï¼Œè¿™ä¸ªå†…å­˜å°±å¯ä»¥å­˜æ”¾ 10 äº†ã€‚//åº”è¯¥ä½¿ç”¨var intP *int//å£°æ˜intç±»å‹çš„æŒ‡é’ˆå˜é‡ intPintP = new(int) // ç»™æŒ‡é’ˆåˆ†é…ä¸€å—å†…å­˜*intP = 66 fmt.Println(&quot;:::&quot;,intP) //::: 0xc0000ac088fmt.Println(*intP) //66//ç®€çŸ­å†™æ³•var intP := new(int)*intP=66 æŒ‡é’ˆå‚æ•°å½“ç»™ä¸€ä¸ªå‡½æ•°ä½¿ç”¨æŒ‡é’ˆä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œå°±å¯ä»¥åœ¨å‡½æ•°ä¸­ï¼Œé€šè¿‡å½¢å‚æ”¹å˜å®å‚çš„å€¼ï¼š123456789101112func main() &#123; name := &quot;ç–¯å­&quot; modify(&amp;name) fmt.Println(&quot;nameçš„å€¼ä¸º:&quot;,name)&#125;func modify(name *string) &#123; *name = &quot;wucs&quot;&#125;//è¿è¡Œç»“æœï¼š//nameçš„å€¼ä¸º: wucs æŒ‡é’ˆæ¥æ”¶è€… å¦‚æœæ¥æ”¶è€…ç±»å‹æ˜¯ mapã€sliceã€channel è¿™ç±»å¼•ç”¨ç±»å‹ï¼Œä¸ä½¿ç”¨æŒ‡é’ˆï¼› å¦‚æœéœ€è¦ä¿®æ”¹æ¥æ”¶è€…ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨æŒ‡é’ˆï¼› å¦‚æœæ¥æ”¶è€…æ˜¯æ¯”è¾ƒå¤§çš„ç±»å‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æŒ‡é’ˆï¼Œå› ä¸ºå†…å­˜æ‹·è´å»‰ä»·ï¼Œæ‰€ä»¥æ•ˆç‡é«˜ã€‚ æ™®é€šæŒ‡é’ˆå’ŒCè¯­è¨€ä¸€æ ·, å…è®¸ç”¨ä¸€ä¸ªå˜é‡æ¥å­˜æ”¾å…¶å®ƒå˜é‡çš„åœ°å€, è¿™ç§ä¸“é—¨ç”¨äºå­˜å‚¨å…¶å®ƒå˜é‡åœ°å€çš„å˜é‡, æˆ‘ä»¬ç§°ä¹‹ä¸ºæŒ‡é’ˆå˜é‡.å’ŒCè¯­è¨€ä¸€æ ·, Goè¯­è¨€ä¸­çš„æŒ‡é’ˆæ— è®ºæ˜¯ä»€ä¹ˆç±»å‹å ç”¨å†…å­˜éƒ½ä¸€æ ·(32ä½4ä¸ªå­—èŠ‚, 64ä½8ä¸ªå­—èŠ‚)12345678910111213141516package mainimport ( &quot;fmt&quot; &quot;unsafe&quot;)func main() &#123; var p1 *int; var p2 *float64; var p3 *bool; fmt.Println(unsafe.Sizeof(p1)) // 8 fmt.Println(unsafe.Sizeof(p2)) // 8 fmt.Println(unsafe.Sizeof(p3)) // 8&#125; å’ŒCè¯­è¨€ä¸€æ ·, åªè¦ä¸€ä¸ªæŒ‡é’ˆå˜é‡ä¿å­˜äº†å¦ä¸€ä¸ªå˜é‡å¯¹åº”çš„å†…å­˜åœ°å€, é‚£ä¹ˆå°±å¯ä»¥é€šè¿‡*æ¥è®¿é—®æŒ‡é’ˆå˜é‡æŒ‡å‘çš„å­˜å‚¨ç©ºé—´1234567891011121314151617181920212223package mainimport ( &quot;fmt&quot;)func main() &#123; // 1.å®šä¹‰ä¸€ä¸ªæ™®é€šå˜é‡ var num int = 666 // 2.å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆå˜é‡ var p *int = &amp;num fmt.Printf(&quot;%p\\n&quot;, &amp;num) // 0xc042064080 fmt.Printf(&quot;%p\\n&quot;, p) // 0xc042064080 fmt.Printf(&quot;%T\\n&quot;, p) // *int // 3.é€šè¿‡æŒ‡é’ˆå˜é‡æ“ä½œæŒ‡å‘çš„å­˜å‚¨ç©ºé—´ *p = 888 // 4.æŒ‡é’ˆå˜é‡æ“ä½œçš„å°±æ˜¯æŒ‡å‘å˜é‡çš„å­˜å‚¨ç©ºé—´ fmt.Println(num) // 888 fmt.Println(*p) // 888&#125; æŒ‡å‘æ•°ç»„æŒ‡é’ˆåœ¨Goè¯­è¨€ä¸­é€šè¿‡æ•°ç»„åæ— æ³•ç›´æ¥è·å–æ•°ç»„çš„å†…å­˜åœ°å€123456789package mainimport &quot;fmt&quot;func main() &#123; var arr [3]int = [3]int&#123;1, 3, 5&#125; fmt.Printf(&quot;%p\\n&quot;, arr) // ä¹±ä¸ƒå…«ç³Ÿä¸œè¥¿ fmt.Printf(&quot;%p\\n&quot;, &amp;arr) // 0xc0420620a0 fmt.Printf(&quot;%p\\n&quot;, &amp;arr[0]) // 0xc0420620a0&#125; åœ¨Goè¯­è¨€ä¸­, å› ä¸ºåªæœ‰æ•°æ®ç±»å‹ä¸€æ¨¡ä¸€æ ·æ‰èƒ½èµ‹å€¼, æ‰€ä»¥åªèƒ½é€šè¿‡&amp;æ•°ç»„åèµ‹å€¼ç»™æŒ‡é’ˆå˜é‡, æ‰ä»£è¡¨æŒ‡é’ˆå˜é‡æŒ‡å‘äº†è¿™ä¸ªæ•°ç»„123456789101112131415161718192021222324252627282930package mainimport &quot;fmt&quot;func main() &#123; // 1.é”™è¯¯, åœ¨Goè¯­è¨€ä¸­å¿…é¡»ç±»å‹ä¸€æ¨¡ä¸€æ ·æ‰èƒ½èµ‹å€¼ // arrç±»å‹æ˜¯[3]int, p1çš„ç±»å‹æ˜¯*[3]int var p1 *[3]int fmt.Printf(&quot;%T\\n&quot;, arr) fmt.Printf(&quot;%T\\n&quot;, p1) p1 = arr // æŠ¥é”™ p1[1] = 6 fmt.Println(arr[1]) // 2.æ­£ç¡®, &amp;arrçš„ç±»å‹æ˜¯*[3]int, p2çš„ç±»å‹ä¹Ÿæ˜¯*[3]int var p2 *[3]int fmt.Printf(&quot;%T\\n&quot;, &amp;arr) fmt.Printf(&quot;%T\\n&quot;, p2) p2 = &amp;arr p2[1] = 6 fmt.Println(arr[1]) // 3.é”™è¯¯, &amp;arr[0]çš„ç±»å‹æ˜¯*int, p3çš„ç±»å‹ä¹Ÿæ˜¯*[3]int var p3 *[3]int fmt.Printf(&quot;%T\\n&quot;, &amp;arr[0]) fmt.Printf(&quot;%T\\n&quot;, p3) p3 = &amp;arr[0] // æŠ¥é”™ p3[1] = 6 fmt.Println(arr[1])&#125; æ³¨æ„ç‚¹:Goè¯­è¨€ä¸­çš„æŒ‡é’ˆ, ä¸æ”¯æŒCè¯­è¨€ä¸­çš„+1 -1å’Œ++ â€“- æ“ä½œ123456789101112131415161718192021222324252627282930313233package mainimport &quot;fmt&quot;func main() &#123; var arr [3]int = [3]int&#123;1, 3, 5&#125; var p *[3]int p = &amp;arr fmt.Printf(&quot;%p\\n&quot;, &amp;arr) // 0xc0420620a0 fmt.Printf(&quot;%p\\n&quot;, p) // 0xc0420620a0 fmt.Println(&amp;arr) // &amp;[1 3 5] fmt.Println(p) // &amp;[1 3 5] // æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¹‹åæ“ä½œæ•°ç»„çš„å‡ ç§æ–¹å¼ // 1.ç›´æ¥é€šè¿‡æ•°ç»„åæ“ä½œ arr[1] = 6 fmt.Println(arr[1]) // 2.é€šè¿‡æŒ‡é’ˆé—´æ¥æ“ä½œ (*p)[1] = 7 fmt.Println((*p)[1]) fmt.Println(arr[1]) // 3.é€šè¿‡æŒ‡é’ˆé—´æ¥æ“ä½œ p[1] = 8 fmt.Println(p[1]) fmt.Println(arr[1]) // æ³¨æ„ç‚¹: Goè¯­è¨€ä¸­çš„æŒ‡é’ˆ, ä¸æ”¯æŒ+1 -1å’Œ++ --æ“ä½œ *(p + 1) = 9 // æŠ¥é”™ fmt.Println(*p++) // æŠ¥é”™ fmt.Println(arr[1])&#125; æŒ‡å‘åˆ‡ç‰‡çš„æŒ‡é’ˆå€¼å¾—æ³¨æ„ç‚¹çš„æ˜¯åˆ‡ç‰‡çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ•°ç»„, æ‰€ä»¥æŒ‡å‘åˆ‡ç‰‡çš„æŒ‡é’ˆæ˜¯ä¸€ä¸ªäºŒçº§æŒ‡é’ˆ12345678910111213141516171819202122232425262728293031323334package mainimport &quot;fmt&quot;func main() &#123; // 1.å®šä¹‰ä¸€ä¸ªåˆ‡ç‰‡ var sce[]int = []int&#123;1, 3, 5&#125; // 2.æ‰“å°åˆ‡ç‰‡çš„åœ°å€ // åˆ‡ç‰‡å˜é‡ä¸­ä¿å­˜çš„åœ°å€, ä¹Ÿå°±æ˜¯æŒ‡å‘çš„é‚£ä¸ªæ•°ç»„çš„åœ°å€ sce = 0xc0420620a0 fmt.Printf(&quot;sce = %p\\n&quot;,sce ) fmt.Println(sce) // [1 3 5] // åˆ‡ç‰‡å˜é‡è‡ªå·±çš„åœ°å€, &amp;sce = 0xc04205e3e0 fmt.Printf(&quot;&amp;sce = %p\\n&quot;,&amp;sce ) fmt.Println(&amp;sce) // &amp;[1 3 5] // 3.å®šä¹‰ä¸€ä¸ªæŒ‡å‘åˆ‡ç‰‡çš„æŒ‡é’ˆ var p *[]int // å› ä¸ºå¿…é¡»ç±»å‹ä¸€è‡´æ‰èƒ½èµ‹å€¼, æ‰€ä»¥å°†åˆ‡ç‰‡å˜é‡è‡ªå·±çš„åœ°å€ç»™äº†æŒ‡é’ˆ p = &amp;sce // 4.æ‰“å°æŒ‡é’ˆä¿å­˜çš„åœ°å€ // ç›´æ¥æ‰“å°pæ‰“å°å‡ºæ¥çš„æ˜¯ä¿å­˜çš„åˆ‡ç‰‡å˜é‡çš„åœ°å€ p = 0xc04205e3e0 fmt.Printf(&quot;p = %p\\n&quot;, p) fmt.Println(p) // &amp;[1 3 5] // æ‰“å°*pæ‰“å°å‡ºæ¥çš„æ˜¯åˆ‡ç‰‡å˜é‡ä¿å­˜çš„åœ°å€, ä¹Ÿå°±æ˜¯æ•°ç»„çš„åœ°å€ *p = 0xc0420620a0 fmt.Printf(&quot;*p = %p\\n&quot;, *p) fmt.Println(*p) // [1 3 5] // 5.ä¿®æ”¹åˆ‡ç‰‡çš„å€¼ // é€šè¿‡*pæ‰¾åˆ°åˆ‡ç‰‡å˜é‡æŒ‡å‘çš„å­˜å‚¨ç©ºé—´(æ•°ç»„), ç„¶åä¿®æ”¹æ•°ç»„ä¸­ä¿å­˜çš„æ•°æ® (*p)[1] = 666 fmt.Println(sce[1])&#125; æŒ‡å‘å­—å…¸æŒ‡é’ˆä¸æ™®é€šæŒ‡é’ˆå¹¶æ— å·®å¼‚123456789package mainimport &quot;fmt&quot;func main() &#123; var dict map[string]string = map[string]string&#123;&quot;name&quot;:&quot;lnj&quot;, &quot;age&quot;:&quot;33&quot;&#125; var p *map[string]string = &amp;dict (*p)[&quot;name&quot;] = &quot;zs&quot; fmt.Println(dict)&#125; æŒ‡å‘ç»“æ„ä½“æŒ‡é’ˆGoè¯­è¨€ä¸­æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆå’ŒCè¯­è¨€ä¸€æ ·ç»“æ„ä½“å’ŒæŒ‡é’ˆåˆ›å»ºç»“æ„ä½“æŒ‡é’ˆå˜é‡æœ‰ä¸¤ç§æ–¹å¼123456789101112131415161718package mainimport &quot;fmt&quot;type Student struct &#123; name string age int&#125;func main() &#123; // åˆ›å»ºæ—¶åˆ©ç”¨å–åœ°å€ç¬¦å·è·å–ç»“æ„ä½“å˜é‡åœ°å€ var p1 = &amp;Student&#123;&quot;lnj&quot;, 33&#125; fmt.Println(p1) // &amp;&#123;lnj 33&#125; // é€šè¿‡newå†…ç½®å‡½æ•°ä¼ å…¥æ•°æ®ç±»å‹åˆ›å»º // å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„ç»“æ„ä½“å˜é‡, ç„¶åè¿”å›è¿™ä¸ªç»“æ„ä½“å˜é‡çš„åœ°å€ var p2 = new(Student) fmt.Println(p2) // &amp;&#123; 0&#125;&#125; åˆ©ç”¨ç»“æ„ä½“æŒ‡é’ˆæ“ä½œç»“æ„ä½“å±æ€§1234567891011121314151617181920212223package mainimport &quot;fmt&quot;type Student struct &#123; name string age int&#125;func main() &#123; var p = &amp;Student&#123;&#125; // æ–¹å¼ä¸€: ä¼ ç»Ÿæ–¹å¼æ“ä½œ // ä¿®æ”¹ç»“æ„ä½“ä¸­æŸä¸ªå±æ€§å¯¹åº”çš„å€¼ // æ³¨æ„: ç”±äº.è¿ç®—ç¬¦ä¼˜å…ˆçº§æ¯”*é«˜, æ‰€ä»¥ä¸€å®šè¦åŠ ä¸Š() (*p).name = &quot;lnj&quot; // è·å–ç»“æ„ä½“ä¸­æŸä¸ªå±æ€§å¯¹åº”çš„å€¼ fmt.Println((*p).name) // lnj // æ–¹å¼äºŒ: é€šè¿‡Goè¯­æ³•ç³–æ“ä½œ // Goè¯­è¨€ä½œè€…ä¸ºäº†ç¨‹åºå‘˜ä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿, åœ¨æ“ä½œæŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆæ—¶å¯ä»¥åƒæ“ä½œæ¥å¤´ä½“å˜é‡ä¸€æ ·é€šè¿‡.æ¥æ“ä½œ // ç¼–è¯‘æ—¶åº•å±‚ä¼šè‡ªåŠ¨è½¬å‘ä¸º(*p).ageæ–¹å¼ p.age = 33 fmt.Println(p.age) // 33&#125; ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨æŒ‡é’ˆ ä¸è¦å¯¹ mapã€sliceã€channel è¿™ç±»å¼•ç”¨ç±»å‹ä½¿ç”¨æŒ‡é’ˆï¼› å¦‚æœéœ€è¦ä¿®æ”¹æ–¹æ³•æ¥æ”¶è€…å†…éƒ¨çš„æ•°æ®æˆ–è€…çŠ¶æ€æ—¶ï¼Œéœ€è¦ä½¿ç”¨æŒ‡é’ˆï¼› å¦‚æœéœ€è¦ä¿®æ”¹å‚æ•°çš„å€¼æˆ–è€…å†…éƒ¨æ•°æ®æ—¶ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨æŒ‡é’ˆç±»å‹çš„å‚æ•°ï¼› å¦‚æœæ˜¯æ¯”è¾ƒå¤§çš„ç»“æ„ä½“ï¼Œæ¯æ¬¡å‚æ•°ä¼ é€’æˆ–è€…è°ƒç”¨æ–¹æ³•éƒ½è¦å†…å­˜æ‹·è´ï¼Œå†…å­˜å ç”¨å¤šï¼Œè¿™æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨æŒ‡é’ˆï¼› åƒ intã€bool è¿™æ ·çš„å°æ•°æ®ç±»å‹æ²¡å¿…è¦ä½¿ç”¨æŒ‡é’ˆï¼› å¦‚æœéœ€è¦å¹¶å‘å®‰å…¨ï¼Œåˆ™å°½å¯èƒ½åœ°ä¸è¦ä½¿ç”¨æŒ‡é’ˆï¼Œä½¿ç”¨æŒ‡é’ˆä¸€å®šè¦ä¿è¯å¹¶å‘å®‰å…¨ï¼› æŒ‡é’ˆæœ€å¥½ä¸è¦åµŒå¥—ï¼Œä¹Ÿå°±æ˜¯ä¸è¦ä½¿ç”¨ä¸€ä¸ªæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œè™½ç„¶ Go è¯­è¨€å…è®¸è¿™ä¹ˆåšï¼Œä½†æ˜¯è¿™ä¼šä½¿ä½ çš„ä»£ç å˜å¾—å¼‚å¸¸å¤æ‚ã€‚","categories":[{"name":"Go","slug":"Go","permalink":"https://hwame.top/categories/Go/"}],"tags":[{"name":"Go","slug":"Go","permalink":"https://hwame.top/tags/Go/"}]},{"title":"Markdownä¸­å›¾ç‰‡çš„é«˜çº§ç”¨æ³•","slug":"awesome-images-in-markdown","date":"2022-02-28T15:27:50.000Z","updated":"2022-03-02T15:28:27.000Z","comments":true,"path":"20220228/awesome-images-in-markdown.html","link":"","permalink":"https://hwame.top/20220228/awesome-images-in-markdown.html","excerpt":"","text":"æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20220228/awesome-images-in-markdown.htmlåŸæ–‡ä½œè€…ï¼šå¾ä¹ƒæœ¨æ˜“å…ˆç”ŸåŸæ–‡é“¾æ¥ï¼šhttps://www.52pojie.cn/thread-1522362-1-1.htmlå‚è€ƒèµ„æ–™ï¼š åº†å›½è¯72å‘¨å¹´ï¼Œåˆ†äº«æˆ‘å¸–å­ä¸­çš„é“¾æ¥å°å¡ç‰‡æ˜¯æ€ä¹ˆåšçš„ ~2.6è²Œä¼¼æœ‰é—®é¢˜ï¼Œstyleå˜æˆå‰å†…å®¹äº†~ ã€å·²æ›´æ­£ã€‘ ~ç”±äºæ­¤å‰å°†Hexoé»˜è®¤CSSä¿®æ”¹ä¸ºå›¾ç‰‡å±…ä¸­äº†ï¼Œæ•…æœ¬æ–‡æ˜¾ç¤ºä¸å¤ªé¡ºçœ¼ï¼Œå¯ç§»æ­¥åŸæ–‡ï¼~ è§£å†³åŠæ³•ï¼šåœ¨æ–‡ç« å‰æ·»åŠ æ ·å¼å³å¯ï¼Œ!importantä¸ä¼šè¢«å…¶ä»–é€‰æ‹©å™¨è¦†ç›–æ‰12345&lt;style&gt; img &#123; display: inline !important; &#125;&lt;/style&gt; img { display: inline !important; } ä¹‹å‰æˆ‘åˆ†äº«ç²¾å“è½¯ä»¶çš„æ—¶å€™ç”¨åˆ°äº†é“¾æ¥å°å¡ç‰‡ï¼Œæœ‰å›å‹é—®æˆ‘æ€ä¹ˆåšï¼Œè™½ç„¶æˆ‘ä¸¤ä¸‰è¨€ç®€è¦å›å¤è¿‡äº†ï¼Œä½†æ²¡å…·ä½“è¯´ã€‚å€¼æ­¤å›½è¯72å‘¨å¹´ï¼Œç‰¹æ¥åˆ†äº«ã€‚ å‰æ’æé†’ï¼šéœ€è¦ä¼šå†™åŸºæœ¬çš„ Markdown è¯­æ³•ï¼ˆå½“ç„¶ï¼Œå¦‚æœåªæƒ³å­¦ä¼šé“¾æ¥å°å¡ç‰‡çš„è¯ä¼šå†™å›¾ç‰‡å’Œé“¾æ¥çš„è¯­æ³•å°±å¯ä»¥äº†ï¼‰ã€‚å¦‚æœä¸ä¼š Markdownï¼Œå¯ä»¥å‚è€ƒè®ºå›é‡Œçš„è¿™ç¯‡å¸–å­ï¼ˆç‚¹å‡»å³å¯ä¼ é€ï¼‰ï¼š 1 ä»€ä¹ˆæ˜¯é“¾æ¥å°å¡ç‰‡è¿™ç©æ„å„¿å®é™…ä¸Šå« badgeï¼Œç¿»è¯‘è¿‡æ¥æ˜¯å¾½æ ‡çš„æ„æ€ã€‚å¤§æ¦‚æ˜¯å› ä¸ºæˆ‘æ¯æ¬¡ç”¨è¿™ä¸ªéƒ½æ˜¯ç”¨ä½œé“¾æ¥ï¼Œè€Œè¿™ç©æ„å„¿é•¿å¾—æœ‰ç‚¹åƒå°å¡ç‰‡ï¼Œæ‰€ä»¥å›å‹è´´å¿ƒåœ°èµ·åå«â€œé“¾æ¥å°å¡ç‰‡â€ã€‚ åœ¨è®ºå›ä¸­å‘å¸–ä½¿ç”¨è¯·ç¡®ä¿ä½¿ç”¨çš„æ˜¯ MD ç¼–è¾‘å™¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è§æ­¤è´´ï¼ˆç‚¹å‡»ä¼ é€ï¼‰ï¼š 2 ä½¿ç”¨æ–¹æ³•é“¾æ¥å°å¡ç‰‡æœ¬è´¨ä¸Šæ˜¯å€ŸåŠ© è¿™ä¸ªç½‘ç«™æ¥å®ç°çš„å›¾ç‰‡ã€‚æ‰€ä»¥ä¼šç”¨åˆ° Markdown å›¾ç‰‡è¯­æ³•ï¼Œå¦‚æœæƒ³åšæˆé“¾æ¥ï¼Œè¿˜éœ€ç”¨åˆ° Markdown é“¾æ¥è¯­æ³•ã€‚ æ‰€æœ‰å‚æ•°å€¼æœªåŠ ç‰¹æ®Šè¯´æ˜å‡ä¸å¯çœç•¥ï¼ ç”±äºæ˜¯é€šè¿‡å…¶ä»–ç½‘ç«™å®ç°æ˜¾ç¤ºå›¾ç‰‡ï¼Œæ‰€ä»¥è¦æƒ³æ­£å¸¸æ˜¾ç¤ºï¼Œå¿…é¡»ç¡®ä¿æœ‰ç½‘ã€‚ å‰æ’æé†’ï¼šæœ¬å¸–ä¸æ˜¯å¹¿å‘Šï¼æ­¤ç½‘ç«™æ˜¯å¼€æºã€éå•†ä¸šã€éç›ˆåˆ©æ€§ç½‘ç«™ï¼Œæ²¡æœ‰ä»»ä½•æ”¶è´¹çš„é¡¹ç›®ï¼ 2.1 å•å†…å®¹é“¾æ¥å°å¡ç‰‡æˆ‘æŠŠåªæœ‰ä¸€ä¸ªå†…å®¹é¡¹çš„ç§°ä¸º å•å†…å®¹é“¾æ¥å°å¡ç‰‡ã€‚æ¯”å¦‚æˆ‘çš„ç­¾åçš„ç¬¬ä¸€ä¸ªã€‚ 2.1.1 è¯­æ³•1![](https://img.shields.io/badge/å†…å®¹-é˜²ä¼ªå€¼?color=é¢œè‰²å€¼) 2.1.2 ç¤ºä¾‹1![](https://img.shields.io/badge/å¾çˆ±ç ´è§£-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?color=ff69b4) æ•ˆæœï¼š 2.1.3 æ³¨æ„äº‹é¡¹ ä½¿ç”¨æ—¶æ›¿æ¢è¯­æ³•ä»£ç éƒ¨åˆ†ä¸­çš„æ±‰å­—å†…å®¹å³å¯ é¢œè‰²å€¼å¯çœç•¥ï¼ˆä» ? å¼€å§‹çœç•¥ï¼‰ é¢œè‰²å€¼å‡æŒ‡èƒŒæ™¯é¢œè‰²ï¼Œå­—ä½“é¢œè‰²ä¼šè‡ªåŠ¨è°ƒæ•´ï¼Œæ— æ³•è‡ªå®šä¹‰å­—ä½“é¢œè‰² é¢œè‰²å€¼è‹¥ä½¿ç”¨ 16 è¿›åˆ¶ï¼Œä¸è¦åŠ  # å· é»˜è®¤çš„é¢œè‰²æ˜¯ï¼š é˜²ä¼ªå€¼åªæ˜¯æˆ‘æ˜¯è¿™ä¹ˆå«çš„ï¼Œå› ä¸ºå®ƒåœ¨è¿™é‡Œä¸ä¼šæ˜¾ç¤º åªè¦å‡ºç°é˜²ä¼ªå€¼ï¼Œé˜²ä¼ªå€¼å‡ä¸å¯çœç•¥ï¼Œä¸‹åŒ 2.2 åŒå†…å®¹é“¾æ¥å°å¡ç‰‡æˆ‘æŠŠæœ‰ä¸¤ä¸ªå†…å®¹é¡¹çš„ç§°ä¸º åŒå†…å®¹é“¾æ¥å°å¡ç‰‡ã€‚ 2.2.1 è¯­æ³•1![](https://img.shields.io/badge/å‰å†…å®¹-åå†…å®¹-åå†…å®¹é¢œè‰²å€¼) 2.2.2 ç¤ºä¾‹1![](https://img.shields.io/badge/52PoJie-å¾çˆ±ç ´è§£-fff) æ•ˆæœï¼š 2.2.3 æ³¨æ„äº‹é¡¹ æ‰€æœ‰å†…å®¹å‡ä¸å¯çœç•¥ï¼ŒåŒ…æ‹¬é¢œè‰²å€¼ è¿™é‡Œçš„é¢œè‰²å€¼åªèƒ½ä¿®æ”¹åå†…å®¹çš„é¢œè‰²å€¼ 2.3 å›¾æ ‡é“¾æ¥å°å¡ç‰‡æˆ‘æŠŠå¸¦æœ‰å°å›¾æ ‡çš„ç§°ä¸º å›¾æ ‡é“¾æ¥å°å¡ç‰‡ã€‚æ¯”å¦‚æˆ‘ç­¾åä¸­åé¢å‡ ä¸ªã€‚ å›¾æ ‡é“¾æ¥å°å¡ç‰‡åˆåˆ†ä¸º å†…ç½®å›¾æ ‡é“¾æ¥å°å¡ç‰‡ å’Œ è‡ªå®šä¹‰å›¾æ ‡é“¾æ¥å°å¡ç‰‡ã€‚ 2.3.1 å†…ç½®å›¾æ ‡é“¾æ¥å°å¡ç‰‡å†…ç½®å›¾æ ‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚æ‰€æœ‰å†…ç½®å›¾æ ‡å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼ˆç‚¹å‡»ä¼ é€ï¼‰ï¼š 2.3.1.1 è¯­æ³•12345671. å•å†…å®¹![](https://img.shields.io/badge/å†…å®¹-é˜²ä¼ªå€¼?color=é¢œè‰²&amp;logo=å†…ç½®å›¾æ ‡å);2. åŒå†…å®¹![](https://img.shields.io/badge/å‰å†…å®¹-åå†…å®¹-åå†…å®¹é¢œè‰²å€¼?logo=å†…ç½®å›¾æ ‡å) 2.3.1.2 ç¤ºä¾‹123451. å•å†…å®¹![](https://img.shields.io/badge/QQ-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?color=4ab7f5&amp;logo=tencentqq);2. åŒå†…å®¹![](https://img.shields.io/badge/macOS-10.13+-367aff?logo=apple) æ•ˆæœï¼š å•å†…å®¹ï¼š åŒå†…å®¹ï¼š 2.3.1.3 ä¿®æ”¹å†…ç½®å›¾æ ‡é¢œè‰² éƒ¨åˆ†å†…ç½®å›¾æ ‡é»˜è®¤æ˜¯ç™½è‰²çš„ï¼Œæ¯”å¦‚ä¸Šé¢çš„ç¤ºä¾‹ éƒ¨åˆ†å†…ç½®å›¾æ ‡é»˜è®¤è‡ªå¸¦é¢œè‰²ï¼Œæ¯”å¦‚ï¼š è¿˜æœ‰ å“ªäº›é»˜è®¤å¸¦é¢œè‰²ï¼Œå“ªäº›é»˜è®¤ä¸å¸¦ï¼Œéœ€è¦è‡ªå·±è¯• å†…ç½®å›¾æ ‡çš„é¢œè‰²å¯ä»¥ä¿®æ”¹ 2.3.1.3.1 è¯­æ³•123451. å•å†…å®¹![](https://img.shields.io/badge/å†…å®¹-é˜²ä¼ªå€¼?color=é¢œè‰²&amp;logo=å†…ç½®å›¾æ ‡å&amp;logoColor=å†…ç½®å›¾æ ‡é¢œè‰²å€¼);2. åŒå†…å®¹![](https://img.shields.io/badge/å‰å†…å®¹-åå†…å®¹-åå†…å®¹é¢œè‰²å€¼?logo=å†…ç½®å›¾æ ‡å&amp;logoColor=å†…ç½®å›¾æ ‡é¢œè‰²å€¼) 2.3.1.3.2 ç¤ºä¾‹123451. å•å†…å®¹![](https://img.shields.io/badge/QQ-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?color=fff&amp;logo=tencentqq&amp;logoColor=4ab7f5);2. åŒå†…å®¹![](https://img.shields.io/badge/macOS-10.13+-367aff?logo=apple&amp;logoColor=f9d694) æ•ˆæœï¼š 2.3.2 è‡ªå®šä¹‰å›¾æ ‡é“¾æ¥å°å¡ç‰‡è‡ªå®šä¹‰å›¾æ ‡éœ€å°†å›¾ç‰‡è½¬æ¢æˆ Base64 ç¼–ç ï¼ˆè¿™æ ·çš„å·¥å…·å¾ˆå¤šï¼Œè®ºå›é‡Œä¹Ÿæœ‰äººå‘è¿‡ï¼‰ï¼ŒåŒæ—¶éœ€è¦åŸå›¾ç‰‡çš„é•¿å’Œå®½å‡ â‰¥ 14pxã€‚ 2.3.2.1 è¯­æ³•123451. å•å†…å®¹![](https://img.shields.io/badge/å†…å®¹-é˜²ä¼ªå€¼?color=é¢œè‰²å€¼&amp;logo=data:image/png;base64,ä¸€é•¿ä¸²Base64ç¼–ç );2. åŒå†…å®¹![](https://img.shields.io/badge/å‰å†…å®¹-åå†…å®¹-é˜²ä¼ªå€¼?color=åå†…å®¹é¢œè‰²å€¼&amp;logo=data:image/png;base64,ä¸€é•¿ä¸²Base64ç¼–ç ) 2.3.2.2 ç¤ºä¾‹æˆ‘æŠŠè®ºå›çš„ Logo è½¬æ¢æˆäº† Base64 ç¼–ç ä½œä¸ºç¤ºä¾‹ï¼Œä¸è¿‡ç¼–ç å¤ªé•¿äº†ï¼Œæ”¾è¿›æ¥ä¸¥é‡å½±å“é˜…è¯»ï¼Œæ‰€ä»¥å°±çœç•¥ä¸æ”¾äº†ã€‚ 123451. å•å†…å®¹![](https://img.shields.io/badge/å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ-å¾ä¹ƒæœ¨æ˜“?color=fff&amp;logo=data:image/png;base64,AAA...A==);2. åŒå†…å®¹![](https://img.shields.io/badge/å¾çˆ±ç ´è§£-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ-å¾ä¹ƒæœ¨æ˜“?color=fff&amp;logo=data:image/png;base64,AAA...A==) æ•ˆæœï¼š å•å†…å®¹ï¼š åŒå†…å®¹ï¼š 2.4 åŒå†…å®¹è‡ªå®šä¹‰é¢œè‰²å‰é¢æåŠåŒå†…å®¹é“¾æ¥å°å¡ç‰‡çš„è¯­æ³•å’Œç¤ºä¾‹ä¸­å¯ä¿®æ”¹çš„é¢œè‰²å€¼éƒ½åªèƒ½ä¿®æ”¹åå†…å®¹çš„é¢œè‰²ã€‚æœ¬å°èŠ‚å°†æ¼”ç¤ºå¦‚ä½•åˆ†åˆ«æ§åˆ¶åŒå†…å®¹çš„é¢œè‰²ã€‚ 2.4.1 è¯­æ³•1![](https://img.shields.io/badge/åå†…å®¹-é˜²ä¼ªå€¼?label=å‰å†…å®¹&amp;colorA=å‰å†…å®¹é¢œè‰²å€¼&amp;colorB=åå†…å®¹é¢œè‰²å€¼) 2.4.2 ç¤ºä¾‹1![](https://img.shields.io/badge/macOS-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?label=AppStore&amp;colorA=fff&amp;colorB=367aff&amp;logo=appstore) æ•ˆæœï¼š 2.4.3 æ³¨æ„äº‹é¡¹ æ³¨æ„å›¾ç‰‡è¯­æ³•é“¾æ¥ä¸­çš„â€œå‰å†…å®¹â€è·‘åˆ°åé¢å»äº†ï¼Œâ€œåå†…å®¹â€è·‘åˆ°å‰é¢å»äº†ï¼Œä¸è¦æåäº† å¦‚æœè¦åŠ ä¸Šå›¾æ ‡ï¼Œæ¯”å¦‚ä¸Šé¢çš„ç¤ºä¾‹ï¼Œç›´æ¥åœ¨å›¾ç‰‡è¯­æ³•é“¾æ¥æœ«å°¾åŠ ä¸Š &amp;logo=å›¾æ ‡å å³å¯ï¼Œæ³¨æ„ &amp; ä¸è¦å¿˜äº† å¦‚æœè¿˜è¦ä¿®æ”¹å›¾æ ‡é¢œè‰²ï¼Œå†ç»§ç»­åœ¨é“¾æ¥æœ«å°¾ç»§ç»­åŠ ä¸Š &amp;logoColor=å›¾æ ‡é¢œè‰²å€¼ å³å¯ 2.5 å¢åŠ è¶…é“¾æ¥æˆ‘çš„è½¯ä»¶åˆ†äº«è´´çš„é“¾æ¥å°å¡ç‰‡æ˜¯å¯ä»¥ç‚¹çš„ï¼Œæœ¬å¸–å½“ä¸­çš„éƒ¨åˆ†ä¹Ÿæ˜¯ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ Markdown å›¾ç‰‡è¯­æ³•å¤–å±‚åˆå¥—å¨ƒäº†ä¸€å±‚è¶…é“¾æ¥è¯­æ³•ã€‚ 2.5.1 è¯­æ³•1[é“¾æ¥å°å¡ç‰‡å›¾ç‰‡æ˜¾ç¤º](è¶…é“¾æ¥åœ°å€) 2.5.2 ç¤ºä¾‹å°±æ˜¯æŠŠ 2.1 ~ 2.4 å­¦åˆ°çš„æ”¾åœ¨è¶…é“¾æ¥è¯­æ³•çš„ [] é‡Œå°±è¡Œã€‚ 1[![](https://img.shields.io/badge/å¾çˆ±ç ´è§£-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?color=fff&amp;logo=data:image/png;base64,AAA...A==)](https://www.52pojie.cn/) æ•ˆæœï¼š å…¶ä»–çš„å¯ä»¥è‡ªè¡Œå°è¯•ã€‚ 2.6 æ ·å¼æœ‰äº”ç§æ ·å¼å¯ä¾›é€‰æ‹©ã€‚ 2.6.1 é»˜è®¤é»˜è®¤å°±æ˜¯è¿™ç§å¸¦ç«‹ä½“æ„Ÿçš„åœ†è§’çŸ©å½¢æ ·å¼ã€‚ ç¤ºä¾‹ï¼š 1![](https://img.shields.io/badge/style=plastic-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?label=Git&amp;colorA=fff&amp;colorB=f14d28&amp;logo=git) æ•ˆæœï¼š é»˜è®¤å®é™…ä¸Šå°±æ˜¯ &amp;style=plasticã€‚ 2.6.2 æ‰å¹³åœ†è§’çŸ©å½¢2.6.2.1 è¯­æ³•1&amp;style=flat 2.6.2.2 ç¤ºä¾‹1![](https://img.shields.io/badge/style=flat-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?label=Git&amp;colorA=fff&amp;colorB=f14d28&amp;logo=git&amp;style=flat) æ•ˆæœï¼š 2.6.3 æ‰å¹³ç›´è§’çŸ©å½¢2.6.3.1 è¯­æ³•1&amp;style=flat-square 2.6.3.2 ç¤ºä¾‹1![](https://img.shields.io/badge/style=flat--square-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?label=Git&amp;colorA=fff&amp;colorB=f14d28&amp;logo=git&amp;style=flat-square) æ•ˆæœï¼š 2.6.4 å¤§æ‰å¹³åœ†è§’çŸ©å½¢ - å­—æ¯å…¨å¤§å†™2.6.4.1 è¯­æ³•1&amp;style=for-the-badge 2.6.4.2 ç¤ºä¾‹1![](https://img.shields.io/badge/style=for--the--badge-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?label=Git&amp;colorA=fff&amp;colorB=f14d28&amp;logo=git&amp;style=for-the-badge) æ•ˆæœï¼š 2.6.5 GitHub äº¤æµæ ·å¼2.6.5.1 è¯­æ³•1&amp;style=social 2.6.5.2 ç¤ºä¾‹1![](https://img.shields.io/badge/style=social-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?label=Git&amp;colorA=fff&amp;colorB=f14d28&amp;logo=git&amp;style=social) æ•ˆæœï¼š 2.7 åŠ¨æ€å†…å®¹åŠ¨æ€å†…å®¹å³æ˜¾ç¤ºçš„å†…å®¹ä¸ºå¯å˜çš„ï¼Œä¸»è¦ç”¨äº GitHub ç­‰ç½‘ç«™çš„æŸäº›æ•°æ®æ˜¾ç¤ºã€‚ è¿™é‡Œçš„åŠ¨æ€å†…å®¹åªä»‹ç»ä¸ GitHub ç›¸å…³çš„ä¸€éƒ¨åˆ†ï¼Œæƒ³äº†è§£æ›´å¤šå¯ä»¥å»å®˜ç½‘æŸ¥è¯¢ã€‚ ä»¥ Linux ä¹‹çˆ¶æ—çº³æ–¯Â·æ‰˜ç“¦æ–¯çš„ Linux æºä»£ç ä»“åº“ torvalds/linux ä¸ºç¤ºä¾‹ã€‚ 2.7.1 Watchè¯­æ³•ï¼š 1![](https://img.shields.io/github/watchers/ç”¨æˆ·å/ä»“åº“å?style=social&amp;label=Watch) ç¤ºä¾‹ï¼š 1![](https://img.shields.io/github/watchers/torvalds/linux?style=social&amp;label=Watch) æ•ˆæœï¼š 2.7.2 Starè¯­æ³•ï¼š 1![](https://img.shields.io/github/stars/ç”¨æˆ·å/ä»“åº“å?style=social) ç¤ºä¾‹ï¼š 1![](https://img.shields.io/github/stars/torvalds/linux?style=social&amp;label=star) æ•ˆæœï¼š 2.7.3 Forkè¯­æ³•ï¼š 1![](https://img.shields.io/github/forks/ç”¨æˆ·å/ä»“åº“å?style=social&amp;label=Fork) ç¤ºä¾‹ï¼š 1![](https://img.shields.io/github/forks/torvalds/linux?style=social&amp;label=Fork) æ•ˆæœï¼š å…¶ä»–çš„å¯ä»¥è‡ªè¡Œå°è¯•ã€‚ 3 ç‰¹æ®Šç¬¦å·é—®é¢˜æœ‰æ—¶å€™éœ€è¦ç©ºæ ¼æˆ–è€…å…¶ä»–çš„ç‰¹æ®Šç¬¦å·ï¼Œç›´æ¥æ‰“åœ¨é“¾æ¥é‡Œå¯èƒ½ä¼šå¯¼è‡´ç»“æœä¸ç¬¦åˆé¢„æœŸã€‚ è§£å†³æ–¹æ³•å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠç‰¹æ®Šç¬¦å·è½¬æ¢æˆ url ç¼–ç å³å¯ã€‚ 3.1 ç©ºæ ¼ç¤ºä¾‹ä¹‹å‰ App Store é‚£ä¸ªç¤ºä¾‹ä¸­æ˜¯æ²¡æœ‰ç©ºæ ¼çš„ï¼Œç°åœ¨æ·»åŠ ç©ºæ ¼ï¼ˆç©ºæ ¼çš„ url ç¼–ç æ˜¯ %20 ï¼‰ï¼š 1![](https://img.shields.io/badge/macOS-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?label=App%20Store&amp;colorA=fff&amp;colorB=367aff&amp;logo=appstore) æ•ˆæœï¼š 3.2 çŸ­æ¨ª - ç¬¦å·ç¤ºä¾‹çŸ­æ¨ªç¬¦å· - æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ²¡æœ‰ url ç¼–ç ï¼Œæˆ–è€…è¯´å®ƒçš„ url ç¼–ç å°±æ˜¯å®ƒæœ¬èº«ã€‚ è¦æƒ³åœ¨å°å¡ç‰‡ä¸­æ˜¾ç¤ºå®ƒä¹Ÿå¾ˆç®€å•ï¼Œå†™ä¸¤éå°±è¡Œã€‚ 1![](https://img.shields.io/badge/-everything--is--local-å¾ä¹ƒæœ¨æ˜“å…ˆç”Ÿ?label=git&amp;colorA=fff&amp;colorB=f14d28&amp;logo=git) æ•ˆæœï¼š 4. å†™åœ¨æœ€åæœ¬å¸–å†…å®¹çš„ .md æºæ–‡ä»¶ä¹Ÿä¸€å¹¶åˆ†äº«ç»™å¤§å®¶ï¼Œä»»ä½•ä¸€æ¬¾ Markdown ç¼–è¾‘å™¨å‡æ”¯æŒä»¥ä¸Šæ‰€æœ‰æ“ä½œå’Œæ˜¾ç¤ºç›¸å…³å†…å®¹ã€‚ çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚â€”â€”é™†æ¸¸ã€Šå†¬å¤œè¯»ä¹¦ç¤ºå­è¿ã€‹ çœ‹å’Œå¬å†å¤šï¼Œä¹Ÿæ¯”ä¸ä¸Šè‡ªå·±åŠ¨æ‰‹è¯•ä¸€éã€‚å­¦ä¹ è¿™ä»¶äº‹å„¿ï¼Œçœ¼ç›å’Œè€³æœµå‘Šè¯‰è„‘å­ä¼šäº†ï¼Œä¹Ÿè¦è„‘å­èƒ½æŒ‡æŒ¥æ‰‹ä¼šæ‰è¡Œã€‚ ç¥å„ä½å­¦ä¹ æ„‰å¿«ï¼ŒæŠ€æœ¯å¤§æˆï¼ç¥ç¥–å›½ç¹è£æ˜Œç››ï¼Œå›½æ³°æ°‘å®‰ï¼ æ­¤å›½æ——å›¾æ¡ˆæ¥æºäºä¸­å›½æ”¿åºœç½‘çš„â€œç½‘ç»œä½¿ç”¨çš„å›½æ——å›¾æ¡ˆæ ‡å‡†ç‰ˆæœ¬â€ï¼Œä½¿ç”¨ç¬¦åˆã€Šä¸­åäººæ°‘å…±å’Œå›½å›½æ——æ³•ã€‹ã€‚","categories":[{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/categories/miscellanea/"}],"tags":[{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/tags/miscellanea/"}]},{"title":"Shellæ­£åˆ™è¡¨è¾¾å¼","slug":"shell-regular-expression","date":"2022-01-16T14:13:05.000Z","updated":"2022-02-22T16:10:38.000Z","comments":true,"path":"20220116/shell-regular-expression.html","link":"","permalink":"https://hwame.top/20220116/shell-regular-expression.html","excerpt":"","text":"æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20220116/shell-regular-expression.htmlå‚è€ƒèµ„æ–™ï¼š shell-æ­£åˆ™è¡¨è¾¾å¼ ã€Œé€šé…ç¬¦ã€å’Œã€Œæ­£åˆ™è¡¨è¾¾å¼ã€çš„åŒºåˆ« æ­£åˆ™è¡¨è¾¾å¼å’Œé€šé…ç¬¦çš„åŒºåˆ« 1.å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼(regular expression)æ˜¯æŒ‡ä¸€ä¸ªç”¨æ¥æè¿°æˆ–è€…åŒ¹é…ä¸€ç³»åˆ—ç¬¦åˆæŸä¸ªå¥æ³•è§„åˆ™çš„å­—ç¬¦ä¸²çš„å•ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒæè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼ˆpatternï¼‰ï¼Œå¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªä¸²æ˜¯å¦å«æœ‰æŸç§å­ä¸²ã€å°†åŒ¹é…çš„å­ä¸²æ›¿æ¢æˆ–è€…ä»æŸä¸ªä¸²ä¸­å–å‡ºç¬¦åˆæŸä¸ªæ¡ä»¶çš„å­ä¸²ç­‰ã€‚ åªæœ‰æŒæ¡äº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰èƒ½å…¨é¢åœ°æŒæ¡ Linux ä¸‹çš„å¸¸ç”¨æ–‡æœ¬å·¥å…·ï¼ˆä¾‹å¦‚ï¼šgrepã€egrepã€GUN sedã€ awk ç­‰ï¼‰ çš„ç”¨æ³•ã€‚ 2.æ­£åˆ™è¡¨è¾¾å¼åˆ†ç±» åŸºæœ¬çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆBasic Regular Expressionï¼Œåˆå« Basic RegExï¼Œç®€ç§° BREsï¼‰ï¼› æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆExtended Regular Expressionï¼Œåˆå« Extended RegExï¼Œç®€ç§° EREsï¼‰ï¼› Perl çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆPerl Regular Expressionï¼Œåˆå« Perl RegExï¼Œç®€ç§° PREsï¼‰ã€‚ 3.Linuxå¸¸ç”¨æ–‡æœ¬å·¥å…·ä¸æ­£åˆ™è¡¨è¾¾å¼çš„å…³ç³»å¸¸æ¡ Linux ä¸‹å‡ ç§å¸¸ç”¨æ–‡æœ¬å·¥å…·çš„ç‰¹ç‚¹ï¼Œå¯¹äºæˆ‘ä»¬æ›´å¥½çš„ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚ è¡¨æ ¼å†…å®¹æ¥è‡ªå‚è€ƒèµ„æ–™ ã€Šshell-æ­£åˆ™è¡¨è¾¾å¼ã€‹ï¼Œæš‚æœªå¯¹å…¶éªŒè¯ã€‚ å‘½ä»¤ BREs EREs PREs å¤„ç†æ¨¡å¼ grep é»˜è®¤ -Eå‚æ•° -På‚æ•° è¡Œ egrep â€”â€” é»˜è®¤ -På‚æ•° è¡Œ sed é»˜è®¤ -rå‚æ•° â€”â€” è¡Œ awk â€”â€” é»˜è®¤ â€”â€” åˆ— 4.æ­£åˆ™è¡¨è¾¾å¼æ¯”è¾ƒæ³¨é‡Šè§è¡¨æ ¼ä¸‹æ–¹ã€‚ å­—ç¬¦ BREs EREs Python PREs è¯´æ˜ \\ \\ \\ \\ \\ è½¬ä¹‰å­—ç¬¦ ^ ^ ^ ^ ^ åŒ¹é…è¡Œé¦–[1] $$` `$$ $$` `$$ $ åŒ¹é…è¡Œå°¾[2] ^$ ^$ ^$ ^$ ^$ åŒ¹é…ç©ºè¡Œ \\&lt; \\&lt; \\&lt; â€”â€” â€”â€” åŒ¹é…å•è¯å¼€å¤´[3]ï¼Œç­‰ä»·äº\\b \\&gt; &gt; \\&gt; â€”â€” â€”â€” åŒ¹é…å•è¯ç»“å°¾ï¼Œç­‰ä»·äº\\b \\&lt;string\\&gt; \\&lt;string\\&gt; \\&lt;string\\&gt; â€”â€” â€”â€” åŒ¹é…å•è¯æˆ–ç‰¹å®šå­—ç¬¦string[4] () \\(\\) () () () åŒ¹é…è¡¨è¾¾å¼[5] ? \\? ? ? ? åŒ¹é…0æ¬¡æˆ–1æ¬¡[6] ? â€”â€” â€”â€” â€”â€” â€”â€” éè´ªå©ªåŒ¹é…[7] . . . . . åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦[8] * * * * * åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡ + \\+ + + + åŒ¹é…1æ¬¡æˆ–å¤šæ¬¡ &#123;n&#125; \\&#123;n\\&#125; &#123;n&#125; &#123;n&#125; &#123;n&#125; åŒ¹é…næ¬¡ &#123;n,&#125; \\&#123;n,\\&#125; &#123;n,&#125; &#123;n,&#125; &#123;n,&#125; åŒ¹é…å¤§äºç­‰äºnæ¬¡ &#123;n,m&#125; \\&#123;n,m\\&#125; &#123;n,m&#125; &#123;n,m&#125; &#123;n,m&#125; åŒ¹é…n~mæ¬¡[9] xï½œy xï½œy xï½œy xï½œy xï½œy åŒ¹é…xæˆ–y[10] [0-9] [0-9] [0-9] [0-9] [0-9] åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦[11] [xyz] [xyz] [xyz] [xyz] [xyz] åŒ¹é…å­—ç¬¦é›†åˆä¸­çš„ä»»ä¸€å­—ç¬¦[12] [^xyz] [^xyz] [^xyz] [^xyz] [^xyz] åŒ¹é…å­—ç¬¦é›†åˆä»¥å¤–çš„ä»»ä¸€å­—ç¬¦[13] [A-Za-z] [A-Za-z] [A-Za-z] [A-Za-z] [A-Za-z] åŒ¹é…ä»»ä¸€å­—æ¯ [^A-Za-z] [^A-Za-z] [^A-Za-z] [^A-Za-z] [^A-Za-z] åŒ¹é…é™¤å­—æ¯å¤–çš„ä»»ä¸€å­—ç¬¦ \\d â€”â€” â€”â€” \\d \\d åŒ¹é…ä»»ä¸€æ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº[0-9] \\D â€”â€” â€”â€” \\D \\D åŒ¹é…ä»»ä¸€éæ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº[^0-9] \\s â€”â€” â€”â€” \\s \\s åŒ¹é…ä»»ä¸€ç©ºç™½å­—ç¬¦ï¼Œç­‰ä»·äº[\\f\\n\\r\\t\\v] \\S â€”â€” â€”â€” \\S \\S åŒ¹é…ä»»ä¸€éç©ºç™½å­—ç¬¦ï¼Œç­‰ä»·äº[^\\f\\n\\r\\t\\v] \\w \\w \\w \\w \\w åŒ¹é…ä»»ä¸€å•è¯å­—ç¬¦ï¼Œç­‰ä»·äº[A-Za-z0-9_] \\W \\W \\W \\W \\W åŒ¹é…ä»»ä¸€éå•è¯å­—ç¬¦ï¼Œç­‰ä»·äº[^A-Za-z0-9_] \\b \\b \\b \\b \\b åŒ¹é…å•è¯è¾¹ç•Œï¼Œå³å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½® \\B \\B \\B \\B \\B åŒ¹é…éå•è¯è¾¹ç•Œ \\t â€”â€” â€”â€” \\t \\t åŒ¹é…ä¸€ä¸ªæ¨ªå‘åˆ¶è¡¨ç¬¦ï¼Œç­‰ä»·äº\\x09å’Œ\\cI \\v â€”â€” â€”â€” \\v \\v åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ï¼Œç­‰ä»·äº\\x0bå’Œ\\cK \\n â€”â€” â€”â€” \\n \\n åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œç­‰ä»·äº\\x0aå’Œ\\cJ \\f â€”â€” â€”â€” \\f \\f åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ï¼Œç­‰ä»·äº\\x0cå’Œ\\cL \\r â€”â€” â€”â€” \\r \\r åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ï¼Œç­‰ä»·äº\\x0då’Œ\\cM \\\\ \\ \\\\ \\\\ \\\\ åŒ¹é…ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦\\æœ¬èº« \\cx â€”â€” â€”â€” \\cx åŒ¹é…ç”±xæŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦[14] \\xn â€”â€” â€”â€” \\xn åŒ¹é…åå…­è¿›åˆ¶n[15] \\num â€”â€” \\num \\num åŒ¹é…å¼•ç”¨ [:alnum:] [:alnum:] [:alnum:] [:alnum:] [:alnum:] åŒ¹é…ä»»ä¸€å­—æ¯æˆ–æ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº[A-Za-z0-9] [:alpha:] [:alpha:] [:alpha:] [:alpha:] [:alpha:] åŒ¹é…ä»»ä¸€å­—æ¯å­—ç¬¦ï¼Œç­‰ä»·äº[A-Za-z] [:digit:] [:digit:] [:digit:] [:digit:] [:digit:] åŒ¹é…ä»»ä¸€æ•°å­—ï¼Œç­‰ä»·äº[0-9] [:lower:] [:lower:] [:lower:] [:lower:] [:lower:] åŒ¹é…ä»»ä¸€å°å†™å­—æ¯ï¼Œç­‰ä»·äº[a-z] [:upper:] [:upper:] [:upper:] [:upper:] [:upper:] åŒ¹é…ä»»ä¸€å¤§å†™å­—æ¯ï¼Œç­‰ä»·äº[A-Z] [:space:] [:space:] [:space:] [:space:] [:space:] åŒ¹é…ä»»ä¸€ç©ºç™½å­—ç¬¦ [:blank:] [:blank:] [:blank:] [:blank:] [:blank:] åŒ¹é…ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ [:graph:] [:graph:] [:graph:] [:graph:] [:graph:] åŒ¹é…ä»»ä¸€å¯è§ä¸”å¯æ‰“å°çš„å­—ç¬¦[16] [:print:] [:print:] [:print:] [:print:] [:print:] åŒ¹é…ä»»ä¸€å¯æ‰“å°å­—ç¬¦[17] [:cntrl:] [:cntrl:] [:cntrl:] [:cntrl:] [:cntrl:] åŒ¹é…ä»»ä¸€æ§åˆ¶å­—ç¬¦[18] [:punct:] [:punct:] [:punct:] [:punct:] [:punct:] åŒ¹é…ä»»ä¸€æ ‡ç‚¹ç¬¦å·[19] [:xdigit:] [:xdigit:] [:xdigit:] [:xdigit:] [:xdigit:] åŒ¹é…ä»»ä¸€åå…­è¿›åˆ¶æ•°ï¼Œå³[0-9a-fA-F] æ³¨é‡Šï¼š[1] ^stringåŒ¹é…ä»¥å­—ç¬¦ä¸²stringå¼€å¤´çš„è¡Œï¼Œåœ¨awkä¸­åˆ™æ˜¯åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ï¼ˆå› ä¸ºawkä»¥åˆ—ä¸ºå•ä½ï¼‰ã€‚[2] ^stringåŒ¹é…ä»¥å­—ç¬¦ä¸²stringç»“å°¾çš„è¡Œï¼Œåœ¨awkä¸­åˆ™æ˜¯åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸï¼ˆå› ä¸ºawkä»¥åˆ—ä¸ºå•ä½ï¼‰ã€‚[3] \\&lt;å’Œ\\&gt;åŒ¹é…å•è¯æ—¶ç­‰ä»·äº\\bï¼Œ\\&lt;stringå’Œstring\\&gt;åˆ†åˆ«è¡¨ç¤ºä»¥stringå¼€å¤´å’Œç»“å°¾çš„å•è¯ã€‚PREsä¸­ä¸æ”¯æŒæ­¤æ–¹å¼ï¼Œä½†å¯ç”¨\\bçš„ç­‰ä»·å†™æ³•ã€‚[4] \\&lt;string\\&gt;åŒ¹é…ç‰¹å®šå•è¯æˆ–å­—ç¬¦stringï¼Œç­‰ä»·äº\\bstring\\bã€‚PREsä¸­ä¸æ”¯æŒæ­¤æ–¹å¼ï¼Œä½†å¯ç”¨\\bçš„ç­‰ä»·å†™æ³•ã€‚[5] ()è¡¨ç¤ºå¯¹åŒ¹é…çš„è¡¨è¾¾å¼åˆ†ç»„ï¼Œå¯ä»¥\\numå½¢å¼å¼•ç”¨ã€‚[6] ?è¡¨ç¤ºåŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼0æ¬¡æˆ–1æ¬¡ï¼Œç­‰ä»·äº\\&#123;0,1\\&#125;ï¼Œä¾‹å¦‚where(is)å¯åŒ¹é…whereåŠwhereisã€‚[7] è‹¥å­è¡¨è¾¾å¼ä¸º é™åˆ¶ç¬¦ï¼ˆ*ã€+ã€?ã€&#123;n&#125;ã€&#123;n,&#125;ã€&#123;n,m&#125;ï¼‰ æ—¶è¡¨ç¤ºéè´ªå©ªåŒ¹é…ï¼Œæœ¬æ–‡æ¶‰åŠçš„æ­£åˆ™è¡¨è¾¾å¼ç”¨æ³•ä¸æ”¯æŒæ­¤æ–¹å¼ï¼ˆå­˜ç–‘ï¼‰ï¼Œä½†å¯ä½¿ç”¨ ä¿®é¥°ç¬¦U ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚[8] .åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»ä¸€å­—ç¬¦ï¼Œåœ¨awkä¸­èƒ½åŒ¹é…æ¢è¡Œç¬¦ã€‚å¦‚æœè¦åŒ¹é…åŒ…æ‹¬æ¢è¡Œç¬¦åœ¨å†…çš„ä»»ä¸€å­—ç¬¦ï¼Œåˆ™åœ¨EREsä¸­å¯ä½¿ç”¨(^$)|(.)ï¼Œåœ¨Perl REä¸­å¯ä½¿ç”¨[.\\n]ã€‚[9] æœ€å°‘åŒ¹é…næ¬¡ï¼Œä¸”æœ€å¤šåŒ¹é…mæ¬¡ã€‚æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚[10] ç”±äºåŠè§’|ä½œä¸ºè¡¨æ ¼å•å…ƒæ ¼åˆ†éš”ç¬¦ä¸”ä¼˜å…ˆè§£æï¼Œå³ä½¿å†™åœ¨è¡Œå†…ä»£ç ä¸­ä¹Ÿä¼šè¢«è§£ææˆå•å…ƒæ ¼ï¼Œæ•…æ­¤å¤„ä½¿ç”¨å…¨è§’ï½œã€‚[11] æ•°å­—éœ€å†™æˆé€’å¢é¡ºåºã€‚[12] è‹¥å…ƒå­—ç¬¦ï¼ˆä¾‹å¦‚.ã€*ç­‰ï¼‰ç½®äºæ–¹æ‹¬å·ä¸­ï¼Œåˆ™å°†ä½œä¸ºæ™®é€šå­—ç¬¦ã€‚[13] [^xyz]è¡¨ç¤ºè´Ÿå€¼å­—ç¬¦é›†åˆä¸”ä¸åŒ…æ‹¬æ¢è¡Œç¬¦ï¼Œåœ¨awkä¸­è¡¨ç¤ºåŒ¹é… æœªåŒ…å«çš„ä»»ä¸€å­—ç¬¦ï¼‹æ¢è¡Œç¬¦ ã€‚[14] \\cxåŒ¹é…ç”±xæŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦å³Control-xæˆ–å›è½¦ç¬¦ï¼Œxçš„å€¼å¿…é¡»ä¸ºA-Zæˆ–a-zä¹‹ä¸€ï¼Œå¦åˆ™å°†cè§†ä¸ºä¸€ä¸ªåŸä¹‰çš„å­—ç¬¦cã€‚[15] \\xnåŒ¹é…åå…­è¿›åˆ¶è½¬ä¹‰å€¼nï¼Œåå…­è¿›åˆ¶è½¬ä¹‰å€¼å¿…é¡»ä¸ºç¡®å®šçš„ä¸¤ä¸ªæ•°å­—é•¿ã€‚ä¾‹å¦‚ï¼š\\x41åŒ¹é…Aï¼ˆæ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨ ASCII ç¼–ç ï¼Œåå…­è¿›åˆ¶41ï¼åè¿›åˆ¶65ï¼‰ï¼›è€Œ\\x041åˆ™ç­‰ä»·äº\\x04ï¼‹1ã€‚[16] [:graph:]ä¸åŒ…æ‹¬ç©ºæ ¼å’Œæ¢è¡Œç¬¦ç­‰ã€‚[17] [:print:]ä¸åŒ…æ‹¬æ§åˆ¶å­—ç¬¦[:cntrl:]ã€å­—ç¬¦ä¸²ç»“æŸç¬¦\\0ã€EOFæ–‡ä»¶ç»“æŸç¬¦ï¼ˆ-1ï¼‰ï¼Œ ä½†åŒ…æ‹¬ç©ºæ ¼ç¬¦å·ã€‚[18] æ§åˆ¶å­—ç¬¦[:cntrl:]æŒ‡ ASCII å­—ç¬¦é›†ä¸­çš„å‰ 32 ä¸ªå­—ç¬¦ï¼Œå³ç”¨åè¿›åˆ¶è¡¨ç¤ºä¸ºä» 0 åˆ° 31ï¼Œä¾‹å¦‚æ¢è¡Œç¬¦ã€åˆ¶è¡¨ç¬¦ç­‰ã€‚[19] æ ‡ç‚¹ç¬¦å·[:punct:]ä¸åŒ…æ‹¬[:alnum:]ã€[:cntrl:]ã€[:space:]ç­‰å­—ç¬¦é›†ã€‚ 5.è¯´æ˜ å½“ä½¿ç”¨ BERsï¼ˆåŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼ï¼‰æ—¶ï¼Œå¿…é¡»åœ¨ç‰¹æ®Šç¬¦å·å‰åŠ ä¸Šè½¬ä¹‰å­—ç¬¦ï¼ˆ\\ï¼‰ï¼Œä»¥å±è”½æ‰å®ƒä»¬çš„ç‰¹æ®Šå«ä¹‰ã€‚ç‰¹æ®Šç¬¦å·æœ‰?ã€+ã€|ã€&#123;ã€&#125;ã€(ã€)ã€‚ ä¿®é¥°ç¬¦ç”¨åœ¨æ­£åˆ™è¡¨è¾¾å¼ç»“å°¾ï¼Œä¾‹å¦‚/dog/iä¸­çš„iå°±æ˜¯ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºåŒ¹é…æ—¶ä¸åŒºåˆ†å¤§å°å†™ã€‚å¸¸è§çš„ä¿®é¥°ç¬¦å¦‚ä¸‹ï¼š gï¼Œè¡¨ç¤ºå…¨å±€åŒ¹é…ï¼ˆå³ï¼šä¸€è¡Œä¸Šçš„æ¯ä¸ªå‡ºç°ï¼Œè€Œä¸åªæ˜¯ä¸€è¡Œä¸Šçš„ç¬¬ä¸€ä¸ªå‡ºç°ï¼‰ï¼› sï¼Œè¡¨ç¤ºæŠŠæ•´ä¸ªåŒ¹é…ä¸²å½“ä½œä¸€è¡Œå¤„ç†ï¼› mï¼Œè¡¨ç¤ºå¤šè¡ŒåŒ¹é…ï¼› iï¼Œè¡¨ç¤ºå¿½ç•¥å¤§å°å†™ï¼› xï¼Œè¡¨ç¤ºå…è®¸æ³¨é‡Šå’Œç©ºæ ¼çš„å‡ºç°ï¼› Uï¼Œè¡¨ç¤ºéè´ªå©ªåŒ¹é…ã€‚ 111","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/tags/Linux/"},{"name":"shell","slug":"shell","permalink":"https://hwame.top/tags/shell/"}]},{"title":"å¦‚ä½•åœ¨å®‰å“æ‰‹æœºä¸Šå®‰è£…Linuxå‘è¡Œç‰ˆ","slug":"install-linux-on-android-phone","date":"2021-10-09T15:16:37.000Z","updated":"2021-10-15T17:39:10.000Z","comments":true,"path":"20211009/install-linux-on-android-phone.html","link":"","permalink":"https://hwame.top/20211009/install-linux-on-android-phone.html","excerpt":"æ‘˜è¦ï¼šåºŸæ—§çš„å®‰å“æ‰‹æœºrootåå®‰è£…Linuxå‘è¡Œç‰ˆï¼Œå¹¶åœ¨chrootå®¹å™¨ä¸­è¿è¡Œã€‚","text":"æ‘˜è¦ï¼šåºŸæ—§çš„å®‰å“æ‰‹æœºrootåå®‰è£…Linuxå‘è¡Œç‰ˆï¼Œå¹¶åœ¨chrootå®¹å™¨ä¸­è¿è¡Œã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20211009/install-linux-on-android-phone.htmlæ–‡ç« è¯´æ˜ï¼šrootæ‰‹æœºä¸Šå®‰è£…Linuxç³»ç»Ÿï¼Œæˆ‘æŠ˜è…¾è¿‡å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´ï¼ŒæŸ¥é˜…å‚è€ƒäº†å¾ˆå¤šæ–‡ç« ï¼Œç”±äºæ—¶é—´è·¨åº¦è¾ƒå¤§ï¼Œå‚è€ƒèµ„æ–™å¯èƒ½ä¸å…¨ã€‚å‚è€ƒèµ„æ–™ï¼š Turn Your Old, Cracked Android Phone Into a Backup Server! å®‰å“æ‰‹æœºè£…centos å½“æœåŠ¡å™¨ Linux deploy è¶…è¯¦ç»†å…¥é—¨æ•™ç¨‹ Linux Deploy å®‰è£…centos-altarch 1.å‰è¨€åœ¨å·²rootæ‰‹æœºä¸Šå®‰è£…Linuxå‘è¡Œç‰ˆï¼Œæˆ‘æ›¾åšè¿‡å¾ˆå¤šå°è¯•ï¼ŒæˆåŠŸå¤±è´¥çš„éƒ½æœ‰ï¼Œä½†æ˜¯å³ä½¿æˆåŠŸä¹Ÿæ˜¯å®‰è£…çš„Debianç³»çš„ï¼ŒRedHatç³»ä»æœªæˆåŠŸè¿‡ã€‚ å†™è¿™ç¯‡æ–‡ç« æ—¶çœ‹äº†çœ‹ç”µè„‘é‡Œçš„èµ„æ–™ï¼Œå‘ç°æ—©åœ¨2020å¹´çš„6æœˆå°±å·²ç»å¼€å§‹å°è¯•äº†ï¼Œé‚£æ—¶å€™æ­£æ˜¯æš‘å‡æ²¡å¼€å­¦ç–«æƒ…åœ¨å®¶æ²¡äº‹å¹²çš„æ—¶å€™ï¼Œæ°å¥½æ‰‹ä¸Šæœ‰ä¸€å°å®Œå…¨rootçš„å®‰å“æ‰‹æœºã€‚ä½†é‚£æ—¶å€™ä¸æ˜¯åˆšåˆ©ç”¨å­¦ç”Ÿèº«ä»½ç™½å«–äº†é˜¿é‡Œäº‘çš„1M2H4GæœåŠ¡å™¨å—ï¼Œè™½ç„¶è¯´åŠå¹´ä¹‹åå› ä¸ºã€Œè€ƒè¯•ã€æ²¡è¿‡ä¸èƒ½ç»­æœŸåŠå¹´è€Œæ²¡æ³•ç™½å«–åˆ°ä¸€å¹´â€¦â€¦ æ²¡æœ‰äº†å­¦ç”Ÿèº«ä»½ä¹‹åï¼Œè´­ä¹°äº‘æœåŠ¡å™¨çš„ä»·æ ¼æ˜¯è¶Šæ¥è¶Šè´µäº†ï¼Œä¸ç®¡æ˜¯é˜¿é‡Œäº‘è¿˜æ˜¯è…¾è®¯äº‘ã€‚æˆ‘å¯»æ€ç€èƒ½ä¸èƒ½æ‰¾åˆ°ä»€ä¹ˆæ›¿ä»£å“ï¼Œè¿™è®©æˆ‘æƒ³èµ·ä¹‹å‰åœ¨çŸ¥ä¹ä¸ç»æ„çœ‹åˆ°çš„ï¼Œå¯ä»¥æŠŠAndroidæ‰‹æœºæ”¹é€ æˆLinuxã€‚ âœ‰æœ¬æ–‡ä¹Ÿæ˜¯ä¸€è¾¹æ‘¸ç´¢ä¸€è¾¹é‡‡å‘ï¼Œæ‰æˆåŠŸå®‰è£…ä¸Šä¸åŒçš„Linuxå‘è¡Œç‰ˆï¼Œå»ºè®®åŒæ—¶å‚è€ƒDebianå’ŒCentOSçš„ã€Œé…ç½®LinuxDeployã€éƒ¨åˆ†ã€‚ 2.å‡†å¤‡å·¥ä½œ rootæ‰‹æœºï¼Œéœ€è¦è·å¾—ç³»ç»Ÿçº§Rootæƒé™ã€‚æ³¨æ„ï¼Œæœªè·å–Rootæƒé™çš„æ‰‹æœºå¯é€šè¿‡Termuxä½œä¸ºæ›¿ä»£è½¯ä»¶ï¼Œä»è€Œåœ¨æ‰‹æœºä¸Šå®‰è£…Linuxï¼Œä½†æ˜¯å¾ˆå¤šLinuxå‘½ä»¤å°†æ— æ³•ä½¿ç”¨ï¼Œä¸è¿‡è¿è¡Œä¸ªpythonå‘½ä»¤è¡Œè¿˜æ˜¯å¯ä»¥çš„ã€æœªéªŒè¯ï¼Œè‡ªè¡Œå°è¯•ã€‘ã€‚ éœ€è¦è¿æ¥ç½‘ç»œï¼Œæœ€å¥½ä¸ç”µè„‘å¤„äºåŒä¸€æ— çº¿å±€åŸŸç½‘ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç”µè„‘ä¸Šé€šè¿‡SecureCRT/XShellä¹‹ç±»çš„è½¯ä»¶è¿›è¡Œè¿æ¥ï¼› æ‰‹æœºä¸Šå®‰è£…Linux deployï¼ˆå¿…éœ€ï¼‰ã€BusyBoxï¼ˆå¿…éœ€ï¼‰ï¼ŒJuiceSSHï¼ˆå¯é€‰ä½†å»ºè®®ï¼‰ï¼ŒRootExplorerï¼ˆå¯é€‰ï¼‰ï¼Œå„è½¯ä»¶ä½œç”¨å¦‚ä¸‹ï¼š BusyBoxï¼ˆéœ€è¦Rootæƒé™ï¼‰ï¼šç”¨äºæ‰©å±•Androidæ‰‹æœºå‘½ä»¤ï¼Œå› ä¸ºåœ¨è¿™è£…Linuxä¹‹åï¼Œå¾ˆå¤šLinuxå‘½ä»¤éƒ½æ˜¯æ²¡æœ‰çš„ï¼› Linux deployï¼ˆéœ€è¦Rootæƒé™ï¼‰ï¼šä½œä¸ºè£…è½½Linuxç³»ç»Ÿçš„å®¹å™¨ï¼› JuiceSSHï¼šæ‰‹æœºç»ˆç«¯é€šè¿‡SSHè¿æ¥Linuxã€‚ RootExplorerï¼ˆéœ€è¦Rootæƒé™ï¼‰ï¼šå¼ºå¤§çš„æ–‡ä»¶ç®¡ç†å™¨ï¼Œå¯æ“ä½œç³»ç»Ÿæ–‡ä»¶ã€ç²¾ç®€ç³»ç»Ÿã€‚ å®‰è£…BusyBoxï¼šæ‰“å¼€BusyBoxè½¯ä»¶ï¼Œå¯ä»¥çœ‹åˆ°çŠ¶æ€ä¸º*not installedï¼Œç‚¹å‡»å³ä¸‹æ–¹INSTALLï¼ŒæŒ‰æç¤ºèµ‹äºˆROOTæƒé™å³å¯å®‰è£…ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 3.å®‰è£…Debianç³»ç»Ÿ3.1.é…ç½®LinuxDeploy æ‰“å¼€Linux Deployè½¯ä»¶ï¼Œé¦–é¡µå¯è§ç®€è¦å®‰è£…æ­¥éª¤ï¼ˆå¦‚ä¸Šå›¾1ï¼‰ã€‚ç‚¹å‡»é¦–é¡µå³ä¸‹è§’çš„ã€Œè®¾ç½®å›¾æ ‡ã€è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼ˆå»ºè®®ã€Œå¼•å¯¼è®¾ç½®ã€ä¸­çš„é…ç½®é¡¹ã€Œæœ¬åœ°åŒ–ã€è®¾ç½®ä¸ºzh_CN.UTF-8ï¼‰ï¼š ç±»åˆ« é…ç½®é¡¹ å±æ€§ å¤‡æ³¨ å¼•å¯¼è®¾ç½® å‘è¡Œç‰ˆGNU/Linux Debian å¼•å¯¼è®¾ç½® æ¶æ„ arm64 å®‰è£…BusyBoxæ—¶çš„architectureï¼Œæ²¡æœ‰å°±é€‰æœ€æ¥è¿‘çš„ å¼•å¯¼è®¾ç½® å‘è¡Œç‰ˆGNU/Linuxç‰ˆæœ¬ buster å¼•å¯¼è®¾ç½® æºåœ°å€ http://ftp.debian.org/debian/ å¯æ›´æ¢å›½å†…é•œåƒæº å¼•å¯¼è®¾ç½® å®‰è£…ç±»å‹ é•œåƒæ–‡ä»¶ å¼•å¯¼è®¾ç½® å®‰è£…è·¯å¾„ /storage/emulated/0/linux.img å¯å‘½åä¸ºdebian.imgä»¥ç¤ºåŒºåˆ« å¼•å¯¼è®¾ç½® é•œåƒå¤§å° è‡ªåŠ¨åˆ†é… é»˜è®¤ä¸º2GBï¼Œå¯ä¿®æ”¹ å¼•å¯¼è®¾ç½® æ–‡ä»¶ç³»ç»Ÿ ext4 å¼•å¯¼è®¾ç½® ç”¨æˆ·å root é»˜è®¤android å¼•å¯¼è®¾ç½® ç”¨æˆ·å¯†ç  **** åˆå§‹åŒ– å¯ç”¨ â˜‘ï¸ è²Œä¼¼å¯ä¸é€‰ åˆå§‹åŒ– åˆå§‹åŒ–ç³»ç»Ÿ sysv è²Œä¼¼å¯ä¸é€‰ æŒ‚è½½ å¯ç”¨ â˜‘ï¸ è²Œä¼¼å¯ä¸é€‰ SSH å¯ç”¨ â˜‘ï¸ å¿…é€‰ é…ç½®å®Œæˆåè¿”å›é¦–é¡µï¼Œç‚¹å‡»å·¦ä¸Šè§’èœå•å›¾æ ‡ï¼Œé€‰æ‹©è®¾ç½®ï¼ˆå¦‚ä¸Šå›¾2ï¼‰ï¼Œé…ç½®ã€Œç¯å¢ƒã€é¡¹ã€‚å…¶ä¸­ï¼Œã€ŒENVç›®å½•ã€é»˜è®¤å³å¯ï¼Œã€ŒPATHå˜é‡ã€è®¾ç½®ä¸ºã€Œ/system/xbinã€ï¼Œç„¶åç‚¹å‡»ã€Œæ›´æ–°ç¯å¢ƒã€æ¥æ›´æ–°æ“ä½œç¯å¢ƒï¼ˆå¦‚ä¸Šå›¾3ï¼‰ã€‚ 3.2.å®‰è£…è¿‡ç¨‹ æ›´æ–°å®Œæ“ä½œç¯å¢ƒåï¼Œå›åˆ°Linux Deployä¸»é¡µï¼Œç‚¹å‡»å³ä¸Šè§’é€‰é¡¹å›¾æ ‡ ï¼Œé€‰æ‹©ã€Œå®‰è£…ã€ï¼ŒæŒ‰æç¤ºèµ‹äºˆROOTæƒé™å³å¯å¼€å§‹å®‰è£…ï¼ˆå¦‚ä¸Šå›¾1ï¼‰ã€‚é¦–å…ˆæ˜¯ç³»ç»Ÿå’Œåˆ†åŒºã€è½¯ä»¶åŒ…çš„Retrievingå’ŒValidatingï¼ˆå¦‚ä¸Šå›¾2ï¼‰ï¼Œç„¶åæ˜¯Extractingã€Unpackingã€Configuringï¼ˆå¦‚ä¸Šå›¾3ï¼‰ï¼Œæ¥ç€ä¸‹è½½å®‰è£…å…¶ä»–å¿…è¦è½¯ä»¶ï¼ˆå¦‚ä¸‹å›¾1ã€2ï¼‰ï¼Œæœ€åæ˜¯Setting upã€Creatingã€Processingï¼Œé…ç½®å¥½extra/sshååˆ™éƒ¨ç½²å®Œæˆï¼ˆå¦‚ä¸‹å›¾3ï¼‰ã€‚ è‡³æ­¤ï¼ŒDebianå®‰è£…éƒ¨ç½²å®Œæˆï¼Œç¬¬ä¸€æ¬¡éƒ¨ç½²éœ€è¦å®‰è£…çš„è½¯ä»¶å¾ˆå¤šï¼Œå› æ­¤è¾“å‡ºçš„æ—¥å¿—å¾ˆå¤šå¾ˆæ‚ï¼Œã€Œ&gt;&gt;&gt; deployã€å’Œã€Œ&lt;&lt;&lt; deployã€ä¹‹é—´çš„è¾“å‡ºå³å®‰è£…éƒ¨ç½²æ—¶çš„æ—¥å¿—ï¼Œå¦‚æœå¤±è´¥åˆ™å¯ä»ä¸­æ£€æŸ¥ã€‚åˆæ¬¡å®‰è£…èŠ±è´¹5åˆ†é’Ÿå·¦å³çš„æ—¶é—´ï¼Œè¿™å–å†³äºç½‘é€Ÿï¼Œä¾‹å¦‚æ­¤å¤„è¿è¡Œæ—¶é—´ä¸º[09:51:02]ï½[09:55:07]ã€‚ç¬¬äºŒæ¬¡å†ç‚¹å®‰è£…æ—¶åˆ™åªç”¨äº†10ç§’ï¼Œç¨‹åºåšå¿…è¦çš„æ£€æŸ¥ã€è½¯ä»¶çš„æ›´æ–°ï¼š[11:55:29] 0 upgraded, 0 newly installed, 0 to remove and 0 not upgradedï¼Œå¦‚ä¸‹å›¾ã€‚ 3.3.å®¹å™¨çš„å¯åŠ¨ä¸åœæ­¢å®‰è£…å®Œæˆåå³å¯å¯åŠ¨ã€è¿æ¥ã€ä½¿ç”¨äº†ã€‚åœ¨Linux Deployä¸»é¡µä¸‹æ–¹ç‚¹å‡»ã€Œå¯åŠ¨ã€å’Œã€Œåœæ­¢ã€å³å¯å®ŒæˆæœåŠ¡å™¨å¯¹åº”çš„æ“ä½œï¼Œæ—¥å¿—ä¹Ÿä¼šåŒæ­¥è¾“å‡ºå¯¹åº”ã€Œ&gt;&gt;&gt; start / &lt;&lt;&lt; startã€å’Œã€Œ&gt;&gt;&gt; stop / &lt;&lt;&lt; stopã€çš„ä¿¡æ¯ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ æ³¨æ„ï¼šåˆæ¬¡å®‰è£…å®Œæˆåï¼Œåº”å…ˆç‚¹å‡»ã€Œåœæ­¢ã€è¿›è¡Œåˆ†åŒºåŠç³»ç»Ÿçš„å¸è½½ï¼Œç„¶åé‡æ–°ç‚¹å‡»ã€Œå¯åŠ¨ã€ã€‚ 3.4.è¿æ¥ä½¿ç”¨Linuxä¿æŒLinuxå¤„äº å¯åŠ¨ çŠ¶æ€ï¼Œåˆ™å¯ä»¥é€šè¿‡SSHè½¯ä»¶è¿›è¡Œè¿æ¥ï¼Œä¾‹å¦‚Juice SSHã€X Shellå’ŒSecure CRTç­‰ã€‚ ä¾‹å¦‚åœ¨åŒä¸€å±€åŸŸç½‘ä¸‹ï¼Œç”µè„‘IPä¸º192.168.0.104ï¼Œæ‰‹æœºï¼ˆLinuxä¸»æœºï¼‰IPä¸º192.168.0.107ï¼Œåˆ™å¯ä»¥è¿›è¡Œè¿æ¥ï¼Œå¦‚å›¾æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œsshè¿æ¥ã€‚ ã€è¯´æ˜ï¼šã€‘â‘ è²Œä¼¼è¿æ¥10åˆ†é’Ÿæ— æ“ä½œåˆ™è‡ªåŠ¨æ–­å¼€ï¼›â‘¡å›¾ç¤ºsshå‘½ä»¤ç¬¬ä¸€æ¬¡è¿æ¥æ—¶ä¼šæç¤ºï¼›â‘¢æ¨èä½¿ç”¨ä¸“é—¨è½¯ä»¶ï¼Œå‘½ä»¤è¡Œè¿‡äºç®€é™‹ã€‚ 4.å®‰è£…CentOSç³»ç»Ÿ4.1.æ–°å»ºLinuxDeployé…ç½®ä¸Šé¢å®‰è£…çš„Debianç³»ç»Ÿæ˜¯åœ¨7æœˆ24æ—¥å®Œæˆçš„ï¼Œå¾ˆå¤šã€Œéå¿…è¦ä¿®æ”¹ã€çš„ä¸œè¥¿éƒ½æ˜¯ä¿æŒé»˜è®¤ï¼Œæ¯”å¦‚é•œåƒæºã€å®‰è£…è·¯å¾„ç­‰é…ç½®é¡¹ã€‚ ç”±äºè¦å®‰è£…CentOSï¼Œä¸ºäº†ä¿ç•™Debianå’ŒCentOSä¸¤è€…çš„é…ç½®ï¼Œæ•…æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶è€Œä¸æ˜¯è¦†ç›–ä¿®æ”¹åŸæ¥çš„Debiançš„é…ç½®ã€‚ åœ¨LinuxDeployè½¯ä»¶é¦–é¡µç‚¹å‡»å·¦ä¸Šè§’èœå•å›¾æ ‡ ï¼Œé€‰æ‹©é…ç½®æ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªåç§°ä¸ºCentosçš„é…ç½®æ–‡ä»¶ã€‚ä¸ºäº†ä»¥ç¤ºåŒºåˆ«ï¼Œå°†é»˜è®¤åç§°Linuxä¿®æ”¹ä¸ºDebianã€‚ é€‰æ‹©Centosé…ç½®æ–‡ä»¶åè¿”å›ä¸»ç•Œé¢ï¼Œç‚¹å‡»å·¦ä¸Šè§’èœå•å›¾æ ‡ ï¼Œé€‰æ‹©è®¾ç½® ï¼Œé…ç½®ã€Œç¯å¢ƒã€é¡¹ï¼Œä¸3.1èŠ‚å®‰è£…Debianç³»ç»Ÿæ—¶çš„é…ç½®LinuxDeployç›¸åŒï¼Œä¸å†èµ˜è¿°ã€‚ 4.2.é…ç½®LinuxDeployæ‰“å¼€Linux Deployï¼Œé¦–é¡µå¯è§ç®€è¦å®‰è£…æ­¥éª¤ã€‚ç‚¹å‡»å³ä¸‹è§’çš„è®¾ç½®å›¾æ ‡ è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š ç±»åˆ« é…ç½®é¡¹ å±æ€§ å¤‡æ³¨ å¼•å¯¼è®¾ç½® å‘è¡Œç‰ˆGNU/Linux Centos å¼•å¯¼è®¾ç½® æ¶æ„ aarch64 å®‰è£…BusyBoxæ—¶çš„architecture å¼•å¯¼è®¾ç½® å‘è¡Œç‰ˆGNU/Linuxç‰ˆæœ¬ 7 å¼•å¯¼è®¾ç½® æºåœ°å€ https://mirrors.bfsu.edu.cn/centos-altarch/ æ¸…åæºå¤±è´¥æ‰æ¢æ­¤æº å¼•å¯¼è®¾ç½® å®‰è£…ç±»å‹ é•œåƒæ–‡ä»¶ å¼•å¯¼è®¾ç½® å®‰è£…è·¯å¾„ /storage/emulated/0/centos.img ä¸debian.imgç›¸åŒºåˆ« å¼•å¯¼è®¾ç½® é•œåƒå¤§å° è‡ªåŠ¨åˆ†é… é»˜è®¤ä¸º2GBï¼Œå¯ä¿®æ”¹ å¼•å¯¼è®¾ç½® æ–‡ä»¶ç³»ç»Ÿ ext4 å¼•å¯¼è®¾ç½® ç”¨æˆ·å android é»˜è®¤android å¼•å¯¼è®¾ç½® ç”¨æˆ·å¯†ç  **** å¼•å¯¼è®¾ç½® æœ¬åœ°åŒ– zh_CN.UTF-8 é»˜è®¤ä¸ºC SSH å¯ç”¨ â˜‘ï¸ å¿…é€‰ è¯´æ˜ï¼š â‘ é•œåƒæºåœ°å€æ˜¯æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ï¼Œå°±ç¬”è€…ç¯å¢ƒè€Œè¨€ï¼šå®˜æ–¹æºé€Ÿåº¦æ…¢ä¸ç¨³å®šï¼Œæ¸…åæºå¡ä¼šåœ¨æŸä¸€æ­¥åŠ¨ä¸äº†ï¼ˆåŸå› æ˜¯å¦æ˜¯ç”¨æˆ·åè®¾ç½®ä¸ºrootè¿˜æ˜¯å¯ç”¨åˆå§‹åŒ–/æŒ‚è½½æœªçŸ¥ï¼‰ï¼Œé˜¿é‡Œæºæ²¡æœ‰altarchåˆ†æ”¯ï¼Œæ•…é€‰æ‹©åŒ—äº¬å¤–å›½è¯­å¤§å­¦é•œåƒç«™ï¼ˆåªæœ‰è¿™ä¸ªæ‰èƒ½æˆåŠŸå®‰è£…CentOSï¼‰ã€‚ â‘¡å› çŒœæµ‹æ¸…åæºrootç”¨æˆ·ååŸå› ï¼Œæ•…å°†ç”¨æˆ·åæ”¹ä¸ºandroidè€Œæœªç›´æ¥è®¾ç½®rootã€‚å¾…ç³»ç»Ÿå®‰è£…æˆåŠŸåï¼Œå¯åˆ é™¤androidç”¨æˆ·ã€‚ â‘¢é•œåƒå¤§å°ä¸º0æ—¶å³è‡ªåŠ¨åˆ†é…ï¼Œé»˜è®¤åªæœ‰2GBï¼Œè‹¥ä¿®æ”¹å¤§å°åˆ™éœ€é‡è£…ç³»ç»Ÿã€‚ 4.3.å®‰è£…CentOSç³»ç»Ÿåœ¨Linux Deployä¸»é¡µï¼Œç‚¹å‡»å³ä¸Šè§’é€‰é¡¹å›¾æ ‡ï¼Œé€‰æ‹©ã€Œå®‰è£…ã€ï¼ŒæŒ‰æç¤ºèµ‹äºˆROOTæƒé™å³å¯å¼€å§‹å®‰è£…ã€‚ é¦–å…ˆæ˜¯bootstrap/rootfsçš„å®‰è£…ï¼ˆå¿«ï¼‰ï¼Œç„¶åæ˜¯bootstrap/centosçš„å®‰è£…ï¼ˆæ…¢ï¼‰ï¼Œå¦‚ä¸Šå›¾1ã€‚ç»è¿‡è½¯ä»¶åŒ…çš„Retrievingå’ŒResolving Dependenciesï¼ˆå¦‚ä¸Šå›¾1ã€2ï¼‰ï¼Œè½¯ä»¶ä¾èµ–åˆ†æå®Œæˆåå°†åˆ—å‡ºå¾…å®‰è£…è½¯ä»¶çš„ä¿¡æ¯ï¼ˆåŒ…åã€æ¶æ„ã€ç‰ˆæœ¬ã€ä»“åº“ã€å¤§å°ï¼‰ï¼Œå¦‚ä¸Šå›¾3ã€‚ Transaction Summaryåˆ—å‡ºå¾…å®‰è£…çš„57ä¸ªå®‰è£…åŒ…ï¼ˆPackageï¼‰å’Œ87ä¸ªä¾èµ–åŒ…ï¼ˆDependent packageï¼‰ï¼Œå¦‚ä¸‹å›¾1ã€‚éšå³å¼€å§‹è½¯ä»¶åŒ…çš„ä¸‹è½½ï¼ˆDownloadingï¼‰ã€å®‰è£…ï¼ˆInstallingï¼‰å’Œæ ¡éªŒï¼ˆVerifyingï¼‰ï¼Œå®‰è£…æ ¡éªŒè¿‡ç¨‹å¯ä»¥çœ‹åˆ°å½“å‰è¿›åº¦ï¼Œå¦‚ä¸‹å›¾1ã€2ã€‚å®Œæˆåå°†åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶ï¼Œå¦‚ä¸‹å›¾3ã€‚ æ¥ä¸‹æ¥æ˜¯ä¸€ç³»åˆ—é…ç½®ï¼Œå…³é”®æ˜¯extra/sshçš„å®‰è£…å’Œé…ç½®ï¼ˆå‡ ä¹æ‰€æœ‰çš„å¤±è´¥éƒ½æ˜¯è¿™é‡Œçš„é—®é¢˜ï¼‰ï¼Œå¦‚ä¸‹å›¾1ã€‚è¿™é¡¹å®‰è£…é…ç½®å°†ä¼šé¢å¤–å®‰è£…openssh-serverï¼Œå¦‚ä¸‹å›¾2ã€‚å®‰è£…å®Œæˆåè‡ªåŠ¨é…ç½®å¥½extra/sshåˆ™éƒ¨ç½²å®Œæˆï¼Œå¦‚ä¸‹å›¾3ã€‚ æ³¨æ„åˆ°ï¼Œåœ¨ä¸Šå›¾1ä¸­é…ç½®å®Œcore/localeæœ¬åœ°åŒ–åç•Œé¢è¯­è¨€å°±å˜æˆä¸­æ–‡äº†ï¼Œè¿™å¾—ç›Šäºã€Œå¼•å¯¼è®¾ç½®ã€ä¸­çš„é…ç½®é¡¹ã€Œæœ¬åœ°åŒ–ã€è®¾ç½®ä¸ºzh_CN.UTF-8ã€‚ è‡³æ­¤ï¼ŒCentOSå®‰è£…éƒ¨ç½²å®Œæˆï¼Œç¬¬ä¸€æ¬¡éƒ¨ç½²éœ€è¦å®‰è£…çš„è½¯ä»¶å¾ˆå¤šï¼Œå› æ­¤è¾“å‡ºçš„æ—¥å¿—å¾ˆå¤šå¾ˆæ‚ï¼Œã€Œ&gt;&gt;&gt; deployã€å’Œã€Œ&lt;&lt;&lt; deployã€ä¹‹é—´çš„è¾“å‡ºå³å®‰è£…éƒ¨ç½²æ—¶çš„æ—¥å¿—ï¼Œå¦‚æœå¤±è´¥åˆ™å¯æ ¹æ®æ—¥å¿—ä¿¡æ¯æ£€æŸ¥ã€‚åˆæ¬¡å®‰è£…èŠ±è´¹5åˆ†é’Ÿå·¦å³çš„æ—¶é—´ï¼Œè¿™å–å†³äºç½‘é€Ÿï¼Œä¾‹å¦‚æ­¤å¤„è¿è¡Œæ—¶é—´ä¸º[08:44:47]ï½[08:49:14]ã€‚ 4.4.å¯åŠ¨åœæ­¢ä¸ä½¿ç”¨åŒDebianï¼Œä¸å†èµ˜è¿°ã€‚ 5.é™„ä»¶å¿…ä¸å¯å°‘çš„å®‰å“è½¯ä»¶ï¼š åç§° ç‰ˆæœ¬ å¤§å° å¤‡æ³¨ BusyBox 1.31.1 5.21MB Githubä¸‹è½½ï¼Œ1å¹´æœªæ›´æ–° Linux deploy 2.6.0 10.1MB Githubä¸‹è½½ï¼Œ1å¹´æœªæ›´æ–° å¯é€‰ä½†å¼ºçƒˆå»ºè®®å®‰è£…çš„å®‰å“è½¯ä»¶ï¼š åç§° ç‰ˆæœ¬ å¤§å° å¤‡æ³¨ JuiceSSH 3.2.2 23.6MB JuiceSSHå®˜ç½‘ä¸‹è½½ï¼Œæœ€æ–°ç‰ˆäº2021-01-30 å®‰è£…æ—¥å¿—æ–‡ä»¶å¯ä½œä¸ºå®‰è£…å‚è€ƒã€æŸ¥é”™ä¾æ®ï¼Œè‹¥ä¸ä»¥ä¸‹æ—¥å¿—ä¸åŒåˆ™å¯å¯¹æ¯”æ¥å®šä½é—®é¢˜ã€‚ åç§° Linuxå‘è¡Œç‰ˆ ç‰ˆæœ¬ å¤§å° linux-debian.log Debian buster 41.0KB linux-centos.log CentOS 7 85.6KB","categories":[{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/categories/miscellanea/"}],"tags":[{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/tags/miscellanea/"}]},{"title":"è®©ä½ çš„Windowsæ›´å…·ç”Ÿäº§åŠ›","slug":"make-your-windows-productive","date":"2021-09-04T15:45:56.000Z","updated":"2021-09-06T15:26:09.000Z","comments":true,"path":"20210904/make-your-windows-productive.html","link":"","permalink":"https://hwame.top/20210904/make-your-windows-productive.html","excerpt":"æ‘˜è¦ï¼šé€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨çš„æ–¹å¼æå‡Windowsä½¿ç”¨ä½“éªŒã€æé«˜å·¥ä½œæ•ˆç‡ï¼","text":"æ‘˜è¦ï¼šé€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨çš„æ–¹å¼æå‡Windowsä½¿ç”¨ä½“éªŒã€æé«˜å·¥ä½œæ•ˆç‡ï¼ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20210904/make-your-windows-productive.htmlå‚è€ƒèµ„æ–™ï¼š å®ä¾‹è®²è§£æ˜ åƒåŠ«æŒçš„ä½¿ç”¨æŠ€å·§â€”â€”é€šè¿‡æ˜ åƒåŠ«æŒå®ç°Notepad2æ›¿æ¢è®°äº‹æœ¬ win10å³é”®èœå•æ·»åŠ ã€Œç”¨è®°äº‹æœ¬æ‰“å¼€æ–‡ä»¶ã€ Win10æ·»åŠ å³é”®æ‰“å¼€cmdå’ŒPowershellçª—å£ åœ¨Win10å³é”®èœå•ä¸­æ·»åŠ ã€Œå¤åˆ¶è·¯å¾„ã€é€‰é¡¹ Windowsç…§ç‰‡æŸ¥çœ‹å™¨-å¬å›å¤§æ³• 1.æ›¿æ¢ç³»ç»Ÿè®°äº‹æœ¬ä¼—æ‰€å‘¨çŸ¥ï¼ŒWindowsè‡ªå¸¦çš„è®°äº‹æœ¬notepadåŠå…¶ç®€é™‹ï¼Œæœ‰æ—¶å€™åªæƒ³æŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶å†…å®¹ä½†åˆä¸æƒ³æ‰“å¼€IDEï¼Œè¿™æ—¶å€™ä¸€ä¸ªç®€å•çš„å¸¦è¯­æ³•é«˜äº®çš„è®°äº‹æœ¬å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ é€šè¿‡ æ˜ åƒåŠ«æŒ å®ç°å°†Notepad2æ›¿æ¢ç³»ç»Ÿè‡ªå¸¦çš„è®°äº‹æœ¬ã€‚ è¯´æ˜â‘ ï¼š Notepad2ç½‘ä¸Šæœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œæœ¬äººè‡ªç”¨çš„ã€Notepad2ã€‘æ˜¯ä»…æœ‰1.86Mçš„å•æ–‡ä»¶ç»¿è‰²ç‰ˆï¼Œæ‰€æœ‰é…ç½® å†™æ­» åˆ°æ–‡ä»¶ä¸­ï¼Œå› æ­¤æ²¡æœ‰é…ç½®æ–‡ä»¶ã€æ²¡æœ‰ä¸»é¢˜æ–‡ä»¶ã€æ— æ³•ä¿®æ”¹é…ç½®ã€‚è¯´æ˜â‘¡ï¼š Notepad2æœ‰äº›æ–°çš„ç‰ˆæœ¬è‡ªå¸¦äº†ã€Œç³»ç»Ÿé›†æˆã€çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸€é”®æ›¿æ¢ï¼Œä½†æˆ‘æ²¡æœ‰æ‰¾åˆ°æ— éœ€é…ç½®æ–‡ä»¶çš„å•æ–‡ä»¶ç‰ˆï¼Œå› æ­¤æ‰‹åŠ¨ä¿®æ”¹æ³¨å†Œè¡¨ã€‚è¯´æ˜â‘¢ï¼š Notepad3æ”¯æŒçš„è¯­æ³•é«˜äº®æ›´å¤šï¼Œæ¯”å¦‚Markdownæ ¼å¼ï¼Œå¥ˆä½•èŠ±é‡Œèƒ¡å“¨ä¸åœ¨æˆ‘çš„å®¡ç¾ä¸Šã€‚ å‚è€ƒæ–‡ç« ï¼š https://my.oschina.net/u/2304110/blog/419536 æ‰€è°“ã€Œæ˜ åƒåŠ«æŒã€ï¼Œå°±æ˜¯Image File Execution Optionsï¼Œæ˜¯CreateProcesså‡½æ•°ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå³åœ¨å¯æ‰§è¡Œç¨‹åºè¿è¡Œæ—¶ï¼ŒWindowsä¼šå…ˆæ£€æµ‹å¯¹åº”IFEOä¸­çš„Debuggerå€¼ï¼Œå¦‚æœå­˜åœ¨è¿™ä¸ªå‚æ•°çš„è¯ï¼Œå°±è¿è¡Œè¿™ä¸ªå‚æ•°ä¸­æŒ‡å®šçš„ç¨‹åºã€‚ å…¶å®ç°åŸç†ä¸ºï¼Œä¿®æ”¹Image File Execution Optionsé”®å€¼åï¼Œåœ¨æœ‰notepad.exeè¿è¡Œè¯·æ±‚çš„æ—¶å€™ï¼Œå°±æ¬ºéª—ç³»ç»Ÿè½¬è€Œè¿è¡Œnotepad2.exeï¼Œä»è€Œå®ç°å°†åŸæœ¬ç³»ç»Ÿé»˜è®¤çš„è®°äº‹æœ¬æ”¹æˆäº†åŠŸèƒ½æ›´ä¸ºå…¨é¢çš„Notepad2ã€‚ è¿™ç§æ–¹å¼ä¸ä½†ä¸éœ€è¦ä¿®æ”¹æ–‡ä»¶å…³è”ï¼Œä¹Ÿæ— éœ€ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ï¼Œé¿å…äº†ä»¥å¾€çš„æ–‡ä»¶æ›¿æ¢æ³•å¯¼è‡´çš„ç³»ç»Ÿæ›´æ–°åå°±å¤±æ•ˆçš„é—®é¢˜ã€‚ å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š ä¸‹è½½Notepad2.exeå•æ–‡ä»¶ï¼Œã€é˜¿é‡Œäº‘ç›˜ã€‘ï¼Œã€Githubä¸‹è½½ã€‘ï¼Œç‰ˆæƒä¿¡æ¯å¦‚ä¸‹ï¼š å°†å…¶æ”¾åœ¨ä¸åŸnotepad.exeç›¸åŒçš„ä½ç½®ï¼Œå³C:\\Windows\\System32\\Notepad2.exeã€‚å°½ç®¡è¿™ä¸€æ­¥éå¿…é¡»ï¼Œä½†ä»å»ºè®®è¿™ä¹ˆåšã€‚ Win+Rè¿è¡Œè¾“å…¥regeditæ‰“å¼€æ³¨å†Œè¡¨ï¼Œåˆ›å»ºå¦‚ä¸‹æ³¨å†Œè¡¨é¡¹ï¼šè®¡ç®—æœº\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Image File Execution Options\\notepad.exeï¼Œå¦‚æœæ— æ³•ä¿®æ”¹ï¼Œéœ€è¦å…ˆå³é”®å–å¾—æƒé™ã€‚ åœ¨notepad.exeæ³¨å†Œè¡¨é¡¹ä¸­ï¼Œå³é”®åˆ›å»ºåä¸ºDebuggerçš„å­—ç¬¦ä¸²å€¼ï¼ˆREG_SZï¼‰ï¼Œå¦‚å›¾ï¼š å°†å­—ç¬¦ä¸²å€¼Debuggerçš„æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºNotepad2.exeçš„å®Œæ•´è·¯å¾„ï¼Œæœ€åä»¥ /z å‚æ•°ç»“å°¾ï¼Œå³&quot;C:\\WINDOWS\\system32\\Notepad2.exe&quot; /zï¼Œå¦‚å›¾ï¼š è‡³æ­¤æ–‡æœ¬æ–‡ä»¶ç”¨è®°äº‹æœ¬æ‰“å¼€å³å¯ï¼Œè¿˜å¯å³é”®å¢åŠ ã€Œç”¨è®°äº‹æœ¬æ‰“å¼€ã€åŠå›¾æ ‡ï¼Œè§ä¸‹æ–‡ã€‚ 2.å³é”®ç”¨è®°äº‹æœ¬æ‰“å¼€ä¸Šé¢å·²ç»å°†è®°äº‹æœ¬æ›¿æ¢æˆå¼ºå¤§çš„Notepad2ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹åªæœ‰txtç­‰æ–‡æœ¬æ–‡ä»¶æ‰å¯ç›´æ¥ç”¨è®°äº‹æœ¬æ‰“å¼€ã€‚è™½ç„¶å¯ä»¥å³é”®é€‰æ‹©æ‰“å¼€æ–¹å¼ï¼Œä½†æœªå…å¤ªéº»çƒ¦ï¼›é‚£å¦‚æœå‹¾é€‰ã€Œå§‹ç»ˆä½¿ç”¨æ­¤åº”ç”¨æ‰“å¼€xxxæ–‡ä»¶ã€ï¼Œåˆä¼šæ”¹å˜é»˜è®¤çš„æ‰“å¼€æ–¹å¼ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚ä¾‹å¦‚batæ–‡ä»¶åŒå‡»è¿è¡Œï¼Œæˆ‘ä»¬æƒ³ç”¨è®°äº‹æœ¬æ‰“å¼€æŸ¥çœ‹å†…å®¹å°±åªèƒ½å³é”®æ‰“å¼€æ–¹å¼äº†ã€‚å› æ­¤å³é”®èœå•å¢åŠ ã€Œç”¨è®°äº‹æœ¬æ‰“å¼€ã€ä¹Ÿç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®ç”¨çš„æé«˜ç”Ÿäº§åŠ›çš„åŠŸèƒ½äº†ã€‚ å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š Win+Rè¿è¡Œè¾“å…¥regeditæ‰“å¼€æ³¨å†Œè¡¨ï¼Œåˆ›å»ºå¦‚ä¸‹æ³¨å†Œè¡¨é¡¹ï¼šè®¡ç®—æœº\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\*\\shell\\notepadï¼ŒåŒå‡»é»˜è®¤å°†æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºã€Œç”¨è®°äº‹æœ¬æ‰“å¼€ã€ï¼Œå¦‚å›¾ï¼š æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºå³é”®èœå•æ·»åŠ ä¸€ä¸ªè®°äº‹æœ¬å›¾æ ‡ã€‚å¦‚ä¸Šå›¾ï¼Œåœ¨notepadé¡¹ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºIconçš„ å­—ç¬¦ä¸²å€¼ ï¼Œå°†å…¶æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºNotepad2.exeçš„æ–‡ä»¶è·¯å¾„C:\\Windows\\System32\\notepad2.exeã€‚ åœ¨notepadé¡¹ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºcommandçš„ é¡¹ ï¼ˆå³å­é¡¹ï¼‰ï¼ŒåŒå‡»é»˜è®¤å°†æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºã€Œnotepad %1ã€ï¼Œæ³¨æ„ç©ºæ ¼ï¼Œå¦‚å›¾ï¼š 3.å³é”®æ‰“å¼€å‘½ä»¤è¡Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ç‰¹å®šç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œï¼Œé€šå¸¸ä¼šåœ¨å¼€å§‹èœå•æˆ–è¿è¡Œä¸­æ‰“å¼€ï¼Œæ­¤æ—¶è·¯å¾„ä¸€èˆ¬ä¸ºC:\\Users\\é´»å¡µæˆ–C:\\Windows\\System32ï¼Œç„¶åä¸€å±‚ä¸€å±‚åˆ‡æ¢è¿‡å»ã€‚ åœ¨å³é”®èœå•ä¸­æ·»åŠ ã€Œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤è¡Œã€ï¼Œå¯ä»¥ç›´æ¥å®šä½åˆ°å½“å‰æ–‡ä»¶å¤¹ï¼Œå…å»cdä¹‹è‹¦ã€‚ æœ¬æ–‡æ‰“å¼€å‘½ä»¤è¡Œä»…ä»¥æ™®é€šç”¨æˆ·æƒé™ï¼Œå› ä¸ºæˆ‘çš„ç»„ç­–ç•¥å·²ä¿®æ”¹ä¸ºã€Œç®¡ç†æƒé™åˆ›å»ºä»»åŠ¡ã€ï¼Œè‹¥æœ‰éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¯·ç§»æ­¥å‚è€ƒæ–‡ç« ã€‚ å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š å³é”®æ‰“å¼€CMD Win+Rè¿è¡Œè¾“å…¥regeditæ‰“å¼€æ³¨å†Œè¡¨ï¼Œåˆ›å»ºå¦‚ä¸‹æ³¨å†Œè¡¨é¡¹ï¼šè®¡ç®—æœº\\HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\OpenCmdHereï¼Œå°†ã€Œé»˜è®¤ã€å­—ç¬¦ä¸²å€¼çš„æ•°å€¼æ•°æ®ä¸ºã€Œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤è¡Œçª—å£ã€ã€‚æ­¤å¤„é¡¹å€¼å’Œæ•°å€¼æ•°æ®å¯éšæ„ã€‚ åœ¨OpenCmdHereé¡¹ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºIconçš„ å­—ç¬¦ä¸²å€¼ ï¼Œå°†å…¶æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºcmd.exeçš„æ–‡ä»¶è·¯å¾„cmd.exeã€‚ åœ¨OpenCmdHereé¡¹ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºcommandçš„ é¡¹ ï¼ˆå³å­é¡¹ï¼‰ï¼ŒåŒå‡»é»˜è®¤å°†æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºã€Œcmd.exe /s /k pushd &quot;%V&quot;ã€ã€‚ æ­¤å¤„æ­¥éª¤ä¸ä¸Šæ–‡å³é”®ç”¨è®°äº‹æœ¬æ‰“å¼€ç±»ä¼¼ï¼Œç®€è¦æˆªå›¾å¦‚ä¸‹ï¼š å³é”®æ‰“å¼€PowerShell Win+Rè¿è¡Œè¾“å…¥regeditæ‰“å¼€æ³¨å†Œè¡¨ï¼Œåˆ›å»ºå¦‚ä¸‹æ³¨å†Œè¡¨é¡¹ï¼šè®¡ç®—æœº\\HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\Powershell_Hereï¼Œã€Œé»˜è®¤ã€å­—ç¬¦ä¸²å€¼çš„æ•°å€¼æ•°æ®ä¸ºã€Œåœ¨æ­¤å¤„æ‰“å¼€PowerShellã€ã€‚æ­¤å¤„é¡¹å€¼å’Œæ•°å€¼æ•°æ®å¯éšæ„ã€‚ åœ¨Powershell_Hereé¡¹ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºIconçš„ å­—ç¬¦ä¸²å€¼ ï¼Œå°†å…¶æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºpowershell.exeçš„æ–‡ä»¶è·¯å¾„powershell.exeã€‚ åœ¨Powershell_Hereé¡¹ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºcommandçš„ é¡¹ ï¼ˆå³å­é¡¹ï¼‰ï¼ŒåŒå‡»é»˜è®¤å°†æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºã€Œpowershell.exe -noexit -command Set-Location &#39;%V&#39;ã€ã€‚ æˆªå›¾ç•¥ã€‚ è¯´æ˜ï¼š å¢åŠ å›¾æ ‡æ—¶æ²¡æœ‰å†™æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œå› ä¸ºè·¯å¾„å·²åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œæ•…ä¸Šæ–‡å³é”®ç”¨è®°äº‹æœ¬æ‰“å¼€ä¸­è®¾ç½®å›¾æ ‡åŒç†å¯ç®€å†™ã€‚ 4.å³é”®å¤åˆ¶æ–‡ä»¶è·¯å¾„å½“æˆ‘ä»¬éœ€è¦ç”¨åˆ°æŸæ–‡ä»¶çš„ç»å¯¹è·¯å¾„æ—¶ï¼Œæ€ä¹ˆè·å–è¯¥å­—ç¬¦ä¸²å‘¢ï¼Ÿæ˜¯å…ˆåœ°å€æ å¤åˆ¶ç›®å½•å†å¤åˆ¶æ–‡ä»¶åï¼Œè¿˜æ˜¯æ–‡ä»¶å±æ€§çš„å®‰å…¨é‡Œé¢å»å¤åˆ¶å¯¹è±¡åç§°ï¼Ÿ å› æ­¤åœ¨å³é”®èœå•æ·»åŠ ä¸€ä¸ªå¤åˆ¶æ–‡ä»¶ï¼ˆå¤¹ï¼‰è·¯å¾„ï¼Œä¹Ÿèƒ½æé«˜ç”Ÿäº§åŠ›ã€‚ ä½†æ˜¯æˆ‘ä¸ä¼šå‘Šè¯‰ä½ ï¼Œé€‰ä¸­æ–‡ä»¶ï¼ˆå¤¹ï¼‰åæŒ‰ä½Shiftå³é”®å°±æœ‰ã€Œå¤åˆ¶ä¸ºè·¯å¾„ã€çš„é€‰é¡¹ï¼æ‰€ä»¥è¿™é‡Œä¿®æ”¹æ³¨å†Œè¡¨å…¶å®ä¹Ÿæ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Œä½†æ˜¯æœ‰å¤šå°‘äººçŸ¥é“è¿™ç§ã€Œå¤åˆ¶ä¸ºè·¯å¾„ã€çš„æ–¹æ³•å‘¢ï¼Ÿ æ–¹æ³•1.0æ¥è‡ªå¾çˆ±ç ´è§£è®ºå›ç”¨æˆ·tmdgdxçš„è¯„è®ºï¼Œè¯¦è§https://www.52pojie.cn/forum.php?mod=viewthread&amp;tid=1374242&amp;page=1#pid36998334ã€‚1234567891011Windows Registry Editor Version 5.00[HKEY_CLASSES_ROOT\\Directory\\shell\\copypath]@=&quot;å¤åˆ¶æ–‡ä»¶å¤¹è·¯å¾„&quot;[HKEY_CLASSES_ROOT\\Directory\\shell\\copypath\\command]@=&quot;mshta vbscript:clipboarddata.setdata(\\&quot;text\\&quot;,\\&quot;%1\\&quot;)(close)&quot;[HKEY_CLASSES_ROOT\\*\\shell\\copypath]@=&quot;å¤åˆ¶æ–‡ä»¶è·¯å¾„&quot;[HKEY_CLASSES_ROOT\\*\\shell\\copypath\\command]@=&quot;mshta vbscript:clipboarddata.setdata(\\&quot;text\\&quot;,\\&quot;%1\\&quot;)(close)&quot; ä¸Šè¿°mshtaè¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š â‘ å¤åˆ¶exeç­‰æ ¼å¼çš„æ–‡ä»¶æ—¶ä¼šæœ‰ç±»ä¼¼ã€Œæ˜¯å¦è¿è¡Œxxxã€çš„è­¦å‘Šï¼› â‘¡å¤åˆ¶é“¾æ¥ä¾‹å¦‚å¿«æ·æ–¹å¼ä¼šå¤åˆ¶æºæ–‡ä»¶è·¯å¾„ï¼Œè€Œä¸æ˜¯å¿«æ·æ–¹å¼æœ¬èº«çš„è·¯å¾„ã€‚ æ¨èä½¿ç”¨åœ¨Win10å³é”®èœå•ä¸­æ·»åŠ ã€Œå¤åˆ¶è·¯å¾„ã€é€‰é¡¹ä¸­çš„æ–¹æ³•2.0ï¼š 1234567891011Windows Registry Editor Version 5.00[HKEY_CLASSES_ROOT\\Allfilesystemobjects\\shell\\windows.copyaspath]&quot;CanonicalName&quot;=&quot;&#123;707C7BC6-685A-4A4D-A275-3966A5A3EFAA&#125;&quot;&quot;CommandStateHandler&quot;=&quot;&#123;3B1599F9-E00A-4BBF-AD3E-B3F99FA87779&#125;&quot;&quot;CommandStateSync&quot;=&quot;&quot;&quot;Description&quot;=&quot;@shell32.dll,-30336&quot;&quot;Icon&quot;=&quot;imageres.dll,-5302&quot;&quot;InvokeCommandOnSelection&quot;=dword:00000001&quot;MUIVerb&quot;=&quot;@shell32.dll,-30329&quot;&quot;VerbHandler&quot;=&quot;&#123;f3d06e7c-1e45-4a26-847e-f9fcdee59be0&#125;&quot;&quot;VerbName&quot;=&quot;copyaspath&quot; å…¶ä¸­&quot;Icon&quot;=&quot;imageres.dll,-5302&quot;å¯ä»¥æ”¹æˆ4ï¼Œæ¢æˆæ–‡ä»¶å¤¹é£æ ¼å›¾æ ‡ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 5.Windowsç…§ç‰‡æŸ¥çœ‹å™¨ä¼—æ‰€å‘¨çŸ¥ï¼ŒWin10è‡ªå¸¦çš„ã€Œç…§ç‰‡ã€æå…¶éš¾ç”¨ï¼Œç”šè‡³å¯èƒ½éœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹æ›¿ä»£è½¯ä»¶ï¼Œè¿™è®©æˆ‘ä»¬ä¸å¾—ä¸æ„Ÿå¹è¿˜æ˜¯Win7æ—¶ä»£çš„ã€ŒWindowsç…§ç‰‡æŸ¥çœ‹å™¨ã€æœ€ç»å…¸ã€‚ é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨çš„æ–¹å¼æ¢å¤ã€ŒWindowsç…§ç‰‡æŸ¥çœ‹å™¨ã€ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºé»˜è®¤ã€‚ å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š Win+Rè¿è¡Œè¾“å…¥regeditæ‰“å¼€æ³¨å†Œè¡¨ï¼Œå®šä½åˆ°å¦‚ä¸‹æ³¨å†Œè¡¨é¡¹ï¼šè®¡ç®—æœº\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows Photo Viewer\\Capabilities\\FileAssociationsã€‚ åœ¨FileAssociationsé¡¹ä¸‹æ–°å»ºä¸€ä¸ªåä¸º.jpgçš„ å­—ç¬¦ä¸²å€¼ ï¼Œå°†å…¶æ•°å€¼æ•°æ®ä¿®æ”¹ä¸ºPhotoViewer.FileAssoc.Tiffã€‚ åŒæ ·æ–°å»ºå…¶ä»–å›¾ç‰‡åç¼€åçš„å­—ç¬¦ä¸²å€¼ï¼Œä¾‹å¦‚.jpegã€.pngã€.gifã€.bmpã€.icoç­‰ï¼Œæ•°å€¼æ•°æ®çš†ä¸ºPhotoViewer.FileAssoc.Tiffï¼Œæ·»åŠ å®Œæˆåçš„æ³¨å†Œè¡¨å¦‚å›¾æ‰€ç¤ºï¼š åŒå‡»å›¾ç‰‡æ‰“å¼€æ—¶é€‰æ‹©ã€ŒWindowsç…§ç‰‡æŸ¥çœ‹å™¨ã€å¹¶å‹¾é€‰ã€Œå§‹ç»ˆä½¿ç”¨æ­¤åº”ç”¨æ‰“å¼€.xxxæ–‡ä»¶ã€å³å¯è®¾ç½®ä¸ºé»˜è®¤æ–¹å¼ã€‚è‹¥å·²è®¾ç½®å…¶ä»–ä¸ºé»˜è®¤ï¼Œå³é”®æ‰“å¼€æ–¹å¼é€‰æ‹©å…¶ä»–åº”ç”¨ï¼Œå³å¯è®¾ç½®é»˜è®¤ã€‚å¦‚å›¾æ‰€ç¤ºï¼š æ³¨æ„â‘ ï¼š å¹¶éæ‰€æœ‰æ ¼å¼çš„å›¾ç‰‡éƒ½èƒ½ç”¨ã€ŒWindowsç…§ç‰‡æŸ¥çœ‹å™¨ã€æ‰“å¼€ï¼Œå¦‚.webpã€.svgç­‰ã€‚æ³¨æ„â‘¡ï¼š æ–°å»ºçš„ å­—ç¬¦ä¸²å€¼ åç§°ä¸ºå›¾ç‰‡æ‰©å±•åï¼Œä¸”æœ‰ä¸€ä¸ªç‚¹.ã€‚","categories":[{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/categories/miscellanea/"}],"tags":[{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/tags/miscellanea/"}]},{"title":"MongoDBèšåˆç¤ºä¾‹","slug":"mongodb-aggregation-examples","date":"2021-08-14T15:44:47.000Z","updated":"2021-09-30T16:40:26.000Z","comments":true,"path":"20210814/mongodb-aggregation-examples.html","link":"","permalink":"https://hwame.top/20210814/mongodb-aggregation-examples.html","excerpt":"","text":"æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20210814/mongodb-aggregation-examples.htmlå‚è€ƒèµ„æ–™ï¼š èšåˆç¤ºä¾‹æ¥æºï¼šPractical MongoDB Aggregationsï¼ˆby Paul Done@TheDonesterï¼‰ Ebookæºç ï¼šGithub @pkdone MongoDBåœ¨çº¿è¿è¡Œï¼šMongoDB Web Shell æ¸©é¦¨æç¤ºï¼šæµ‹è¯•æ•°æ®å¯ç›´æ¥å¤åˆ¶ï¼Œæ–¹ä¾¿ç”Ÿæˆæ•°æ®ï¼›è¿è¡Œç»“æœä»¥å›¾ç‰‡å½¢å¼å±•ç¤ºï¼Œå¯ä»¥ã€Œç‚¹å‡»å›¾ç‰‡ã€æˆ–ã€Œå°†å›¾ç‰‡æ‹–æ›³åˆ°æ–°æ ‡ç­¾é¡µã€æ¥æŸ¥çœ‹å¤§å›¾ï¼Œä»è€Œè·å–æ›´ä½³çš„æµè§ˆä½“éªŒã€‚ å¯¹MongoDBä¸­èšåˆæ“ä½œçš„ç†è§£å’Œç†Ÿæ‚‰ï¼Œéœ€è¦é…åˆå¤§é‡ä¾‹å­ï¼ŒPractical MongoDB Aggregations Bookä¸­æä¾›äº†å¾ˆå¤šæœ‰åŠ©äºç†è§£çš„ä¾‹å­ï¼Œä½†åŸæ–‡æ˜¯è‹±æ–‡ç‰ˆçš„ä¸”æœ‰ä¸€å®šæ¦‚ç‡æ— æ³•è®¿é—®ï¼Œæ•…åœ¨æ­¤è®°å½•ä¸‹å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹åŸæ–‡çš„ç¿»è¯‘ã€‚ è¯´æ˜ï¼šæœ¬æ–‡ä»…ä½œä¸ºèšåˆç¤ºä¾‹ï¼Œç”±äºç¯‡å¹…é™åˆ¶ï¼Œå¯¹äºæ•°æ®åº“çš„æŒ‡å®šåŠç´¢å¼•çš„åˆ›å»ºéƒ½è¿›è¡Œåˆ å‡ï¼Œå¹¶ä¸”ä¹Ÿä¸æ‰§è¡Œexplainã€‚ 1.åŸºç¡€(1)TopNæŸ¥è¯¢ æ‚¨æƒ³åœ¨ç”±äººç»„æˆçš„é›†åˆä¸­æŸ¥è¯¢ï¼Œä»¥æ‰¾åˆ°èŒä¸šä¸ºå·¥ç¨‹å¸ˆçš„ä¸‰ä¸ªæœ€å¹´è½»çš„äººï¼ŒæŒ‰å¹´é¾„ä»å°åˆ°å¤§æ’åºã€‚ æ­¤ç¤ºä¾‹æ˜¯æœ¬æ–‡ä¸­å”¯ä¸€ä¸€ä¸ªå¯ä»¥ä»¥å®Œå…¨ä½¿ç”¨MQLå®ç°çš„ç¤ºä¾‹ï¼ŒåŒæ—¶ä¹Ÿä½œä¸ºMQLå’Œèšåˆç®¡é“ä¹‹é—´çš„ä¸€ä¸ªæœ‰ç”¨æ¯”è¾ƒã€‚ æµ‹è¯•æ•°æ®å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243&#123; &quot;person_id&quot;: &quot;6392529400&quot;, &quot;firstname&quot;: &quot;Elise&quot;, &quot;lastname&quot;: &quot;Smith&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1972-01-13T09:32:07Z&quot;), &quot;vocation&quot;: &quot;ENGINEER&quot;, &quot;address&quot;: &#123; &quot;number&quot;: 5625, &quot;street&quot;: &quot;Tipa Circle&quot;, &quot;city&quot;: &quot;Wojzinmoj&quot;&#125;,&#125;,&#123; &quot;person_id&quot;: &quot;1723338115&quot;, &quot;firstname&quot;: &quot;Olive&quot;, &quot;lastname&quot;: &quot;Ranieri&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1985-05-12T23:14:30Z&quot;), &quot;gender&quot;: &quot;FEMALE&quot;, &quot;vocation&quot;: &quot;ENGINEER&quot;, &quot;address&quot;: &#123; &quot;number&quot;: 9303, &quot;street&quot;: &quot;Mele Circle&quot;, &quot;city&quot;: &quot;Tobihbo&quot;&#125;,&#125;,&#123; &quot;person_id&quot;: &quot;8732762874&quot;, &quot;firstname&quot;: &quot;Toni&quot;, &quot;lastname&quot;: &quot;Jones&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1991-11-23T16:53:56Z&quot;), &quot;vocation&quot;: &quot;POLITICIAN&quot;, &quot;address&quot;: &#123; &quot;number&quot;: 1, &quot;street&quot;: &quot;High Street&quot;, &quot;city&quot;: &quot;Upper Abbeywoodington&quot;&#125;&#125;,&#123; &quot;person_id&quot;: &quot;7363629563&quot;, &quot;firstname&quot;: &quot;Bert&quot;, &quot;lastname&quot;: &quot;Gooding&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1941-04-07T22:11:52Z&quot;), &quot;vocation&quot;: &quot;FLORIST&quot;, &quot;address&quot;: &#123; &quot;number&quot;: 13, &quot;street&quot;: &quot;Upper Bold Road&quot;, &quot;city&quot;: &quot;Redringtonville&quot;&#125;&#125;,&#123; &quot;person_id&quot;: &quot;1029648329&quot;, &quot;firstname&quot;: &quot;Sophie&quot;, &quot;lastname&quot;: &quot;Celements&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1959-07-06T17:35:45Z&quot;), &quot;vocation&quot;: &quot;ENGINEER&quot;, &quot;address&quot;: &#123; &quot;number&quot;: 5, &quot;street&quot;: &quot;Innings Close&quot;, &quot;city&quot;: &quot;Basilbridge&quot;&#125;&#125;,&#123; &quot;person_id&quot;: &quot;7363626383&quot;, &quot;firstname&quot;: &quot;Carl&quot;, &quot;lastname&quot;: &quot;Simmons&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1998-12-26T13:13:55Z&quot;), &quot;vocation&quot;: &quot;ENGINEER&quot;, &quot;address&quot;: &#123; &quot;number&quot;: 187, &quot;street&quot;: &quot;Hillside Road&quot;, &quot;city&quot;: &quot;Kenningford&quot;&#125;&#125; èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š123456var pipeline = [ &#123;&quot;$match&quot;: &#123;&quot;vocation&quot;: &quot;ENGINEER&quot;,&#125;&#125;, &#123;&quot;$sort&quot;: &#123;&quot;dateofbirth&quot;: -1,&#125;&#125;, &#123;&quot;$limit&quot;: 3&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;, &quot;vocation&quot;, &quot;address&quot;,]&#125;,]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›ä¸‰ä¸ªæ–‡æ¡£ï¼Œä»£è¡¨ä¸‰ä¸ªæœ€å¹´è½»çš„å·¥ç¨‹å¸ˆï¼ˆæŒ‰å¹´é¾„ä»å°åˆ°å¤§æ’åºï¼‰ï¼Œçœç•¥æ¯ä¸ªäººçš„_idæˆ–addresså±æ€§ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š Index Use. A basic aggregation pipeline, where if many records belong to the collection, a compound index for vocation + dateofbirth should exist to enable the database to fully optimise the execution of the pipeline combining the filter of the $match stage with the sort from the sort stage and the limit of the limit stage. Unset Use. An $unset stage is used rather than a $project stage. This enables the pipeline to avoid being verbose. More importantly, it means the pipeline does not have to be modified if a new field appears in documents added in the future (for example, see the gender field that appears in only Oliveâ€™s record). MQL Similarity. For reference, the MQL equivalent for you to achieve the same result is shown below (you can try this in the Shell): 12345db.persons.find( &#123;&quot;vocation&quot;: &quot;ENGINEER&quot;&#125;, &#123;&quot;_id&quot;: 0, &quot;vocation&quot;: 0, &quot;address&quot;: 0&#125;, ).sort( &#123;&quot;dateofbirth&quot;: -1&#125; ).limit(3); (2)åˆ†ç»„æ±‡æ€» æ‚¨æƒ³è¦ç”Ÿæˆä¸€ä»½æŠ¥å‘Šä»¥æ˜¾ç¤ºæ¯ä¸ªå®¢æˆ·åœ¨ 2020 å¹´è´­ä¹°çš„å•†å“ã€‚ æ‚¨å°†æŒ‰å®¢æˆ·å¯¹ä¸ªäººè®¢å•è®°å½•è¿›è¡Œåˆ†ç»„ï¼Œæ•è·æ¯ä¸ªå®¢æˆ·çš„ã€Œé¦–å•æ—¥æœŸã€ã€ã€Œè®¢å•æ•°é‡ã€ã€ã€Œè®¢å•æ€»ä»·ã€å’Œä¸€ä¸ªæŒ‰æ—¥æœŸæ’åºçš„è®¢å•é¡¹ç›®åˆ—è¡¨ã€‚ æµ‹è¯•æ•°æ®å¦‚ä¸‹ï¼Œordersé›†åˆç”±3ä¸ªä¸åŒå®¢æˆ·åœ¨2019-2021å¹´é—´çš„9ä¸ªè®¢å•ç»„æˆï¼š 123456789&#123;&quot;customer_id&quot;: &quot;elise_smith@myemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-05-30T08:35:52Z&quot;), &quot;value&quot;: NumberDecimal(&quot;231.43&quot;)&#125;,&#123;&quot;customer_id&quot;: &quot;elise_smith@myemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-01-13T09:32:07Z&quot;), &quot;value&quot;: NumberDecimal(&quot;99.99&quot;)&#125;,&#123;&quot;customer_id&quot;: &quot;oranieri@warmmail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-01-01T08:25:37Z&quot;), &quot;value&quot;: NumberDecimal(&quot;63.13&quot;)&#125;,&#123;&quot;customer_id&quot;: &quot;tj@wheresmyemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2019-05-28T19:13:32Z&quot;), &quot;value&quot;: NumberDecimal(&quot;2.01&quot;)&#125;, &#123;&quot;customer_id&quot;: &quot;tj@wheresmyemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-11-23T22:56:53Z&quot;), &quot;value&quot;: NumberDecimal(&quot;187.99&quot;)&#125;,&#123;&quot;customer_id&quot;: &quot;tj@wheresmyemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-08-18T23:04:48Z&quot;), &quot;value&quot;: NumberDecimal(&quot;4.59&quot;)&#125;,&#123;&quot;customer_id&quot;: &quot;elise_smith@myemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-12-26T08:55:46Z&quot;), &quot;value&quot;: NumberDecimal(&quot;48.50&quot;)&#125;,&#123;&quot;customer_id&quot;: &quot;tj@wheresmyemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2021-02-29T07:49:32Z&quot;), &quot;value&quot;: NumberDecimal(&quot;1024.89&quot;)&#125;,&#123;&quot;customer_id&quot;: &quot;elise_smith@myemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-10-03T13:49:44Z&quot;), &quot;value&quot;: NumberDecimal(&quot;102.24&quot;)&#125; èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š1234567891011121314151617181920var pipeline = [ &#123;&quot;$match&quot;: &#123; &quot;orderdate&quot;: &#123;&quot;$gte&quot;: ISODate(&quot;2020-01-01T00:00:00Z&quot;), &quot;$lt&quot;: ISODate(&quot;2021-01-01T00:00:00Z&quot;), &#125;, &#125;&#125;, // æŒ‰è®¢å•æ—¥æœŸå‡åºï¼Œéœ€è¦é€‰æ‹©ä¸‹é¢çš„ã€Œfirst_purchase_dateã€ &#123;&quot;$sort&quot;: &#123;&quot;orderdate&quot;: 1, &#125;&#125;, &#123;&quot;$group&quot;: &#123; &quot;_id&quot;: &quot;$customer_id&quot;, &quot;first_purchase_date&quot;: &#123;&quot;$first&quot;: &quot;$orderdate&quot;&#125;, &quot;total_value&quot;: &#123;&quot;$sum&quot;: &quot;$value&quot;&#125;, &quot;total_orders&quot;: &#123;&quot;$sum&quot;: 1&#125;, &quot;orders&quot;: &#123;&quot;$push&quot;: &#123;&quot;orderdate&quot;: &quot;$orderdate&quot;, &quot;value&quot;: &quot;$value&quot;&#125;&#125;, &#125;&#125;, &#123;&quot;$sort&quot;: &#123;&quot;first_purchase_date&quot;: 1, &#125;&#125;, &#123;&quot;$set&quot;: &#123;&quot;customer_id&quot;: &quot;$_id&quot;, &#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;, ]&#125;, ]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›ä»£è¡¨ä¸‰ä¸ªå®¢æˆ·çš„ä¸‰ä¸ªæ–‡æ¡£ï¼Œæ–‡æ¡£åˆ†åˆ«åŒ…å«äº†2020å¹´é¦–æ¬¡è´­ä¹°æ—¥æœŸã€è®¢å•æ€»ä»·å€¼ã€è®¢å•æ•°é‡ï¼Œä»¥åŠè®¢å•è¯¦æƒ…åˆ—è¡¨ã€‚ Note, the order of fields shown for each document may vary. Double Sort Use. It is necessary to perform a $sort on the order date both before and after the $group stage. The $sort before the $group is required because the $group stage uses a $first group accumulator to capture just the first orderâ€™s orderdate value for each grouped customer. The $sort after the $group is required because the act of having just grouped on customer ID will mean that the records are no longer sorted by purchase date for the records coming out of the $group stage. Renaming Group. Towards the end of the pipeline, you will see what is a typical pattern for pipelines that use $group, consisting of a combination of $set+$unset stages, to essentially take the groupâ€™s key (which is always called _id) and substitute it with a more meaningful name (customer_id). Lossless Decimals. You may notice the pipeline uses a NumberDecimal() function to ensure the order amounts in the inserted records are using a lossless decimal type, IEEE 754 decimal128. In this example, if you use a JSON float or double type instead, the order totals will suffer from a loss of precision. For instance, for the customer elise_smith@myemail.com, if you use a double type, the total_value result will have the value shown in the second line below, rather than the first line: 12345// ä½¿ç”¨decimal128ç±»å‹è·å¾—çš„æœŸæœ›ç»“æœtotal_value: NumberDecimal(&#x27;482.16&#x27;)// ä½¿ç”¨floatæˆ–doubleç±»å‹è·å¾—çš„ç»“æœtotal_value: 482.15999999999997 (3)è§£åŒ…æ•°ç»„åŠåˆ†ç»„ æ‚¨æƒ³è¦ç”Ÿæˆé›¶å”®æŠ¥å‘Šä»¥åˆ—å‡ºå·²å”®å‡ºã€Œæ˜‚è´µäº§å“ã€ï¼ˆä»·å€¼è¶…è¿‡ 15 ç¾å…ƒï¼‰çš„æ€»ä»·å€¼å’Œæ•°é‡ã€‚ æ•°æ®æºæ˜¯ä¸€ä¸ªå•†åº—è®¢å•åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªè®¢å•éƒ½åŒ…å«ä¸€ä¸ªè´­ä¹°çš„äº§å“é›†ã€‚ 12345678910111213141516171819202122232425262728&#123; &quot;order_id&quot;: 6363763262239, &quot;products&quot;: [ &#123;&quot;prod_id&quot;: &quot;abc12345&quot;, &quot;name&quot;: &quot;Asus Laptop&quot;, &quot;price&quot;: NumberDecimal(&quot;431.43&quot;), &#125;, &#123;&quot;prod_id&quot;: &quot;def45678&quot;, &quot;name&quot;: &quot;Karcher Hose Set&quot;, &quot;price&quot;: NumberDecimal(&quot;22.13&quot;), &#125;, ],&#125;,&#123; &quot;order_id&quot;: 1197372932325, &quot;products&quot;: [ &#123;&quot;prod_id&quot;: &quot;abc12345&quot;, &quot;name&quot;: &quot;Asus Laptop&quot;, &quot;price&quot;: NumberDecimal(&quot;429.99&quot;), &#125;, ],&#125;,&#123; &quot;order_id&quot;: 9812343774839, &quot;products&quot;: [ &#123;&quot;prod_id&quot;: &quot;pqr88223&quot;, &quot;name&quot;: &quot;Morphy Richardds Food Mixer&quot;, &quot;price&quot;: NumberDecimal(&quot;431.43&quot;), &#125;, &#123;&quot;prod_id&quot;: &quot;def45678&quot;, &quot;name&quot;: &quot;Karcher Hose Set&quot;, &quot;price&quot;: NumberDecimal(&quot;21.78&quot;), &#125;, ],&#125;,&#123; &quot;order_id&quot;: 4433997244387, &quot;products&quot;: [ &#123;&quot;prod_id&quot;: &quot;def45678&quot;, &quot;name&quot;: &quot;Karcher Hose Set&quot;, &quot;price&quot;: NumberDecimal(&quot;23.43&quot;), &#125;, &#123;&quot;prod_id&quot;: &quot;jkl77336&quot;, &quot;name&quot;: &quot;Picky Pencil Sharpener&quot;, &quot;price&quot;: NumberDecimal(&quot;0.67&quot;), &#125;, &#123;&quot;prod_id&quot;: &quot;xyz11228&quot;, &quot;name&quot;: &quot;Russell Hobbs Chrome Kettle&quot;, &quot;price&quot;: NumberDecimal(&quot;15.76&quot;), &#125;, ],&#125;, èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617var pipeline = [ // ä»æ¯ä¸ªè®¢å•çš„productsä¸­è§£åŒ…æ¯ä¸ªproductï¼Œä½œä¸ºä¸€ä¸ªæ–°çš„å•ç‹¬è®°å½• &#123;&quot;$unwind&quot;: &#123;&quot;path&quot;: &quot;$products&quot;, &#125;&#125;, &#123;&quot;$match&quot;: &#123;&quot;products.price&quot;: &#123; &quot;$gt&quot;: NumberDecimal(&quot;15.00&quot;), &#125;,&#125;&#125;, // æŒ‰äº§å“ç±»å‹åˆ†ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªäº§å“çš„æ€»ä»·å’Œæ•°é‡ &#123;&quot;$group&quot;: &#123; &quot;_id&quot;: &quot;$products.prod_id&quot;, &quot;product&quot;: &#123;&quot;$first&quot;: &quot;$products.name&quot;&#125;, &quot;total_value&quot;: &#123;&quot;$sum&quot;: &quot;$products.price&quot;&#125;, &quot;quantity&quot;: &#123;&quot;$sum&quot;: 1&#125;, &#125;&#125;, &#123;&quot;$set&quot;: &#123;&quot;product_id&quot;: &quot;$_id&quot;, &#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;,]&#125;,]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›4ä¸ªæ–‡æ¡£ï¼Œä»£è¡¨å®¢æˆ·è®¢å•ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„4ä¸ªä»…æœ‰çš„ã€Œæ˜‚è´µäº§å“ã€ï¼Œæ¯ä¸ªæ–‡æ¡£åŒ…æ‹¬äº†äº§å“çš„æ€»è®¢å•ä»·å€¼å’Œæ•°é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š Note, the order of fields shown for each document may vary. Unwinding Arrays. The $unwind stage is a powerful concept, although often unfamiliar to many developers initially. Distilled down, it does one simple thing: it generates a new record for each element in an array field of every input document. If a source collection has 3 documents and each document contains an array of 4 elements, then performing an $unwind on each recordâ€™s array field produces 12 records (3 x 4). Introducing A Partial Match. The current example pipeline scans all documents in the collection and then filters out unpacked products where price &gt; 15.00. If the pipeline executed this filter as the first stage, it would incorrectly produce some result product records with a value of 15 dollars or less. This would be the case for an order composed of both inexpensive and expensive products. However, you can still improve the pipeline by including an additional â€œpartial matchâ€ filter at the start of the pipeline for products valued at over 15 dollars. The aggregation could leverage an index (on products.price), resulting in a partial rather than full collection scan. This extra filter stage is beneficial if the input data set is large and many customer orders are for inexpensive items only. This approach is described in the chapter Pipeline Performance Considerations. (4)åˆ—è¡¨å»é‡ æ‚¨æƒ³åœ¨personsé›†åˆä¸­æŸ¥è¯¢ï¼Œå…¶ä¸­æ¯ä¸ªæ–‡æ¡£éƒ½åŒ…å«å…¶æ‰€è¯´çš„ä¸€ç§æˆ–å¤šç§è¯­è¨€ã€‚ æŸ¥è¯¢ç»“æœåº”è¯¥æ˜¯æŒ‰å­—æ¯é¡ºåºæ’åºçš„å»é‡çš„è¯­è¨€åˆ—è¡¨ï¼Œå¼€å‘äººå‘˜éšåå¯ä»¥ä½¿ç”¨å®ƒæ¥å¡«å……ç”¨æˆ·ç•Œé¢ä¸‹æ‹‰å°éƒ¨ä»¶ä¸­çš„å€¼åˆ—è¡¨ã€‚ æ­¤ç¤ºä¾‹ç­‰æ•ˆäºSQLä¸­çš„SELECT DISTINCTè¯­å¥ã€‚ 123456789&#123;&quot;firstname&quot;: &quot;Elise&quot;, &quot;lastname&quot;: &quot;Smith&quot;, &quot;vocation&quot;: &quot;ENGINEER&quot;, &quot;language&quot;: &quot;English&quot;,&#125;,&#123;&quot;firstname&quot;: &quot;Olive&quot;, &quot;lastname&quot;: &quot;Ranieri&quot;, &quot;vocation&quot;: &quot;ENGINEER&quot;, &quot;language&quot;: [&quot;Italian&quot;, &quot;English&quot;],&#125;,&#123;&quot;firstname&quot;: &quot;Toni&quot;, &quot;lastname&quot;: &quot;Jones&quot;, &quot;vocation&quot;: &quot;POLITICIAN&quot;, &quot;language&quot;: [&quot;English&quot;, &quot;Welsh&quot;],&#125;,&#123;&quot;firstname&quot;: &quot;Bert&quot;, &quot;lastname&quot;: &quot;Gooding&quot;, &quot;vocation&quot;: &quot;FLORIST&quot;, &quot;language&quot;: &quot;English&quot;,&#125;,&#123;&quot;firstname&quot;: &quot;Sophie&quot;, &quot;lastname&quot;: &quot;Celements&quot;, &quot;vocation&quot;: &quot;ENGINEER&quot;, &quot;language&quot;: [&quot;Gaelic&quot;, &quot;English&quot;],&#125;,&#123;&quot;firstname&quot;: &quot;Carl&quot;, &quot;lastname&quot;: &quot;Simmons&quot;, &quot;vocation&quot;: &quot;ENGINEER&quot;, &quot;language&quot;: &quot;English&quot;,&#125;,&#123;&quot;firstname&quot;: &quot;Diego&quot;, &quot;lastname&quot;: &quot;Lopez&quot;, &quot;vocation&quot;: &quot;CHEF&quot;, &quot;language&quot;: &quot;Spanish&quot;,&#125;,&#123;&quot;firstname&quot;: &quot;Helmut&quot;, &quot;lastname&quot;: &quot;Schneider&quot;, &quot;vocation&quot;: &quot;NURSE&quot;, &quot;language&quot;: &quot;German&quot;,&#125;,&#123;&quot;firstname&quot;: &quot;Valerie&quot;, &quot;lastname&quot;: &quot;Dubois&quot;, &quot;vocation&quot;: &quot;SCIENTIST&quot;, &quot;language&quot;: &quot;French&quot;,&#125;, èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š123456var pipeline = [ &#123;&quot;$unwind&quot;: &#123;&quot;path&quot;: &quot;$language&quot;&#125;&#125;, // è§£åŒ…languageå­—æ®µï¼Œè¯¥å­—æ®µä¸ºæ•°ç»„æˆ–å•ä¸ªå€¼ &#123;&quot;$group&quot;: &#123;&quot;_id&quot;: &quot;$language&quot;&#125;&#125;, &#123;&quot;$sort&quot;: &#123;&quot;_id&quot;: 1&#125;&#125;, &#123;&quot;$set&quot;: &#123;&quot;language&quot;: &quot;$_id&quot;, &quot;_id&quot;: &quot;$$REMOVE&quot;&#125;&#125;,]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›æŒ‰å­—æ¯åºçš„7ä¸ªæ–‡æ¡£ï¼Œä»£è¡¨ä¸åŒçš„7ç§è¯­è¨€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š Unwinding Non-Arrays. In some of the exampleâ€™s documents, the language field is an array, whilst in others, the field is a simple string value. The $unwind stage can seamlessly deal with both field types and does not throw an error if it encounters a non-array value. Instead, if the field is not an array, the stage outputs a single record using the fieldâ€™s string value in the same way it would if the field was an array containing just one element. If you are sure the field in every document will only ever be a simple field rather than an array, you can omit this first stage ($unwind) from the pipeline. Group ID Provides Unique Values. By grouping on a single field and not accumulating other fields such as total or count, the output of a $group stage is just every unique groupâ€™s ID, which in this case is every unique language. Unset Alternative. For the pipeline to be consistent with earlier examples in this book, it could have included an additional $unset stage to exclude the _id field. However, partly to show another way, the example pipeline used here marks the _id field for exclusion in the $set stage by being assigned the $$REMOVE variable. 2.æ•°æ®è”ç»“(1)ä¸€å¯¹ä¸€è”ç»“ æ‚¨æƒ³è¦ç”Ÿæˆä¸€ä¸ªæŠ¥å‘Šæ¥åˆ—å‡º 2020 å¹´æ‰€æœ‰çš„è´­ä¹°æƒ…å†µï¼Œæ˜¾ç¤ºæ¯ä¸ªè®¢å•çš„äº§å“åç§°å’Œç±»åˆ«ï¼Œè€Œä¸æ˜¯äº§å“IDã€‚ ä¸ºæ­¤æ‚¨éœ€è¦è·å–å®¢æˆ·ã€Œè®¢å•é›†åˆordersã€ï¼Œå¹¶å°†æ¯ä¸ªè®¢å•è®°å½•ä¸ã€Œäº§å“é›†åˆproductsã€ä¸­çš„å¯¹åº”çš„äº§å“ç›¸è”ç»“ã€‚ ä¸¤ä¸ªé›†åˆä¹‹é—´å­˜åœ¨ã€Œå¤šå¯¹ä¸€many:1ã€å…³ç³»ï¼Œå› æ­¤åœ¨å°†è®¢å•ä¸äº§å“åŒ¹é…æ—¶ä¼šäº§ç”Ÿã€Œä¸€å¯¹ä¸€1:1ã€çš„è”ç»“ã€‚è”ç»“å°†æ ¹æ®äº§å“çš„idåœ¨åŒæ–¹ä¹‹é—´ä½¿ç”¨å•ä¸ªå­—æ®µæ¯”è¾ƒã€‚ æ•°æ®åŒ…æ‹¬2019-2021å¹´é—´çš„äº§å“productså’Œè®¢å•ordersä¸¤ä¸ªé›†åˆï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 12345678910111213141516171819202122// é›†åˆproducts&#123; &quot;id&quot;: &quot;a1b2c3d4&quot;, &quot;name&quot;: &quot;Asus Laptop&quot;, &quot;category&quot;: &quot;ELECTRONICS&quot;, &quot;description&quot;: &quot;Good value laptop for students&quot;,&#125;, &#123; &quot;id&quot;: &quot;z9y8x7w6&quot;, &quot;name&quot;: &quot;The Day Of The Triffids&quot;, &quot;category&quot;: &quot;BOOKS&quot;, &quot;description&quot;: &quot;Classic post-apocalyptic novel&quot;,&#125;, &#123; &quot;id&quot;: &quot;ff11gg22hh33&quot;, &quot;name&quot;: &quot;Morphy Richardds Food Mixer&quot;, &quot;category&quot;: &quot;KITCHENWARE&quot;, &quot;description&quot;: &quot;Luxury mixer turning good cakes into great&quot;,&#125;, &#123; &quot;id&quot;: &quot;pqr678st&quot;, &quot;name&quot;: &quot;Karcher Hose Set&quot;, &quot;category&quot;: &quot;GARDEN&quot;, &quot;description&quot;: &quot;Hose + nosels + winder for tidy storage&quot;,&#125; 12345678910111213141516171819202122// é›†åˆorders&#123; &quot;customer_id&quot;: &quot;elise_smith@myemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-05-30T08:35:52Z&quot;), &quot;product_id&quot;: &quot;a1b2c3d4&quot;, &quot;value&quot;: NumberDecimal(&quot;431.43&quot;),&#125;, &#123; &quot;customer_id&quot;: &quot;tj@wheresmyemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2019-05-28T19:13:32Z&quot;), &quot;product_id&quot;: &quot;z9y8x7w6&quot;, &quot;value&quot;: NumberDecimal(&quot;5.01&quot;),&#125;, &#123; &quot;customer_id&quot;: &quot;oranieri@warmmail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-01-01T08:25:37Z&quot;), &quot;product_id&quot;: &quot;ff11gg22hh33&quot;, &quot;value&quot;: NumberDecimal(&quot;63.13&quot;),&#125;, &#123; &quot;customer_id&quot;: &quot;jjones@tepidmail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-12-26T08:55:46Z&quot;), &quot;product_id&quot;: &quot;a1b2c3d4&quot;, &quot;value&quot;: NumberDecimal(&quot;429.65&quot;),&#125;, èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122var pipeline = [ &#123;&quot;$match&quot;: &#123;&quot;orderdate&quot;: &#123; &quot;$gte&quot;: ISODate(&quot;2020-01-01T00:00:00Z&quot;), &quot;$lt&quot;: ISODate(&quot;2021-01-01T00:00:00Z&quot;), &#125; &#125;&#125;, // Join &quot;product_id&quot; in orders collection to &quot;id&quot; in products&quot; collection &#123;&quot;$lookup&quot;: &#123; &quot;from&quot;: &quot;products&quot;, &quot;localField&quot;: &quot;product_id&quot;, &quot;foreignField&quot;: &quot;id&quot;, &quot;as&quot;: &quot;product_mapping&quot;, &#125;&#125;, // For this data model, will always be 1 record in right-side // of join, so take 1st joined array element &#123;&quot;$set&quot;: &#123;&quot;product_mapping&quot;: &#123;&quot;$first&quot;: &quot;$product_mapping&quot;&#125;, &#125;&#125;, // Extract the joined embeded fields into top level fields &#123;&quot;$set&quot;: &#123; &quot;product_name&quot;: &quot;$product_mapping.name&quot;, &quot;product_category&quot;: &quot;$product_mapping.category&quot;, &#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;, &quot;product_id&quot;, &quot;product_mapping&quot;, ]&#125;, ]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›ä»£è¡¨2020å¹´çš„3ä¸ªè®¢å•æ–‡æ¡£ï¼Œä½†æ¯ä¸ªè®¢å•çš„product_idå­—æ®µæ›¿æ¢æˆäº†ä¸¤ä¸ªæ–°æŸ¥æ‰¾çš„å­—æ®µproduct_nameå’Œproduct_categoryï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ Single Field Match. The pipeline includes a $lookup join between a single field from each collection. For an illustration of performing a join based on two or more matching fields, see the Multi-Field Join &amp; One-to-Many example. First Element Assumption. In this particular data model example, the join between the two collections is 1:1. Therefore the returned array of joined elements coming out of the $lookup stage always contains precisely one array element. As a result, the pipeline extracts the data from this first array element only, using the $first operator. For an illustration of performing a 1:many join instead, see the Multi-Field Join &amp; One-to-Many example. (2)å¤šå­—æ®µè”ç»“åŠä¸€å¯¹å¤š æ‚¨æƒ³è¦ç”Ÿæˆä¸€ä»½æŠ¥å‘Šï¼Œåˆ—å‡º2020å¹´æ¯ç§äº§å“æ‰€ç”Ÿæˆçš„æ‰€æœ‰è®¢å•ã€‚ ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦å°†å•†åº—çš„ã€Œäº§å“é›†åˆproductsã€ä¸­çš„æ¯ä¸ªäº§å“productï¼Œä¸äº§å“å¯¹åº”çš„è®¢å•orderï¼ˆè®¢å•ä½äºordersé›†åˆï¼‰ç›¸è”ç»“ã€‚ åŸºäºæ¯ä¾§ä¸¤ä¸ªå­—æ®µçš„åŒ¹é…ï¼Œä¸¤ä¸ªé›†åˆä¹‹é—´å­˜åœ¨ã€Œä¸€å¯¹å¤š1:manyã€çš„å…³ç³»ã€‚ è”ç»“éœ€è¦ä½¿ç”¨ä¸¤ä¸ªå…¬å…±å­—æ®µï¼ˆproduct_nameå’Œproduct_variationï¼‰ï¼Œè€Œä¸æ˜¯åƒproduct_idï¼ˆæ­¤æ•°æ®é›†ä¸­ä¸å­˜åœ¨è¯¥å­—æ®µï¼‰è¿™æ ·çš„å•ä¸ªå­—æ®µã€‚ æ³¨æ„ï¼šæ‰§è¡Œä¸€å¯¹å¤š1:manyçš„è”ç»“å¹¶ä¸å¼ºåˆ¶è¦æ±‚åœ¨æ¯ä¸€ä¾§é€šè¿‡å¤šä¸ªå­—æ®µè¿›è¡Œè”ç»“ã€‚ç„¶è€Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ¨ä¸€ä¸ªåœ°æ–¹å±•ç¤ºè¿™ä¸¤ä¸ªæ–¹é¢è¢«è®¤ä¸ºæ˜¯æœ‰ç›Šçš„ã€‚ æ•°æ®åŒ…æ‹¬2019-2021å¹´é—´çš„äº§å“productså’Œè®¢å•ordersä¸¤ä¸ªé›†åˆï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 1234567891011121314151617181920212223242526272829303132// é›†åˆproducts&#123; &quot;name&quot;: &quot;Asus Laptop&quot;, &quot;variation&quot;: &quot;Ultra HD&quot;, &quot;category&quot;: &quot;ELECTRONICS&quot;, &quot;description&quot;: &quot;Great for watching movies&quot;,&#125;, &#123; &quot;name&quot;: &quot;Asus Laptop&quot;, &quot;variation&quot;: &quot;Normal Display&quot;, &quot;category&quot;: &quot;ELECTRONICS&quot;, &quot;description&quot;: &quot;Good value laptop for students&quot;,&#125;, &#123; &quot;name&quot;: &quot;The Day Of The Triffids&quot;, &quot;variation&quot;: &quot;1st Edition&quot;, &quot;category&quot;: &quot;BOOKS&quot;, &quot;description&quot;: &quot;Classic post-apocalyptic novel&quot;,&#125;, &#123; &quot;name&quot;: &quot;The Day Of The Triffids&quot;, &quot;variation&quot;: &quot;2nd Edition&quot;, &quot;category&quot;: &quot;BOOKS&quot;, &quot;description&quot;: &quot;Classic post-apocalyptic novel&quot;,&#125;, &#123; &quot;name&quot;: &quot;Morphy Richards Food Mixer&quot;, &quot;variation&quot;: &quot;Deluxe&quot;, &quot;category&quot;: &quot;KITCHENWARE&quot;, &quot;description&quot;: &quot;Luxury mixer turning good cakes into great&quot;,&#125;, &#123; &quot;name&quot;: &quot;Karcher Hose Set&quot;, &quot;variation&quot;: &quot;Full Monty&quot;, &quot;category&quot;: &quot;GARDEN&quot;, &quot;description&quot;: &quot;Hose + nosels + winder for tidy storage&quot;,&#125; 123456789101112131415161718// é›†åˆorders&#123; &quot;customer_id&quot;: &quot;elise_smith@myemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-05-30T08:35:52Z&quot;), &quot;product_name&quot;: &quot;Asus Laptop&quot;, &quot;product_variation&quot;: &quot;Normal Display&quot;, &quot;value&quot;: NumberDecimal(&quot;431.43&quot;),&#125;, &#123; &quot;customer_id&quot;: &quot;tj@wheresmyemail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2019-05-28T19:13:32Z&quot;), &quot;product_name&quot;: &quot;The Day Of The Triffids&quot;, &quot;product_variation&quot;: &quot;2nd Edition&quot;, &quot;value&quot;: NumberDecimal(&quot;5.01&quot;),&#125;, &#123; &quot;customer_id&quot;: &quot;oranieri@warmmail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-01-01T08:25:37Z&quot;), &quot;product_name&quot;: &quot;Morphy Richards Food Mixer&quot;, &quot;product_variation&quot;: &quot;Deluxe&quot;, &quot;value&quot;: NumberDecimal(&quot;63.13&quot;),&#125;, &#123; &quot;customer_id&quot;: &quot;jjones@tepidmail.com&quot;, &quot;orderdate&quot;: ISODate(&quot;2020-12-26T08:55:46Z&quot;), &quot;product_name&quot;: &quot;Asus Laptop&quot;, &quot;product_variation&quot;: &quot;Normal Display&quot;, &quot;value&quot;: NumberDecimal(&quot;429.65&quot;),&#125; èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132var pipeline = [ // å°†äº§å“é›†åˆä¸­çš„ 2 ä¸ªå­—æ®µè¿æ¥åˆ°è®¢å•é›†åˆä¸­çš„ 2 ä¸ªå­—æ®µ &#123;&quot;$lookup&quot;: &#123; &quot;from&quot;: &quot;orders&quot;, &quot;let&quot;: &#123;&quot;prdname&quot;: &quot;$name&quot;, &quot;prdvartn&quot;: &quot;$variation&quot;, &#125;, // Embedded pipeline to control how the join is matched &quot;pipeline&quot;: [ // Join by two fields in each side &#123;&quot;$match&quot;: &#123;&quot;$expr&quot;: &#123;&quot;$and&quot;: [ &#123;&quot;$eq&quot;: [&quot;$product_name&quot;, &quot;$$prdname&quot;]&#125;, &#123;&quot;$eq&quot;: [&quot;$product_variation&quot;, &quot;$$prdvartn&quot;]&#125;, ]&#125;, &#125;, &#125;, // Match only orders made in 2020 &#123;&quot;$match&quot;: &#123;&quot;orderdate&quot;: &#123; &quot;$gte&quot;: ISODate(&quot;2020-01-01T00:00:00Z&quot;), &quot;$lt&quot;: ISODate(&quot;2021-01-01T00:00:00Z&quot;), &#125; &#125;&#125;, // Exclude some unwanted fields from the right side of the join &#123;&quot;$unset&quot;: [&quot;_id&quot;, &quot;product_name&quot;, &quot;product_variation&quot;, ]&#125;, ], as: &quot;orders&quot;, &#125;&#125;, // Only show products that have at least one order &#123;&quot;$match&quot;: &#123;&quot;orders&quot;: &#123;&quot;$ne&quot;: []&#125;,&#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;,]&#125;, ]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›2ä¸ªæ–‡æ¡£ï¼Œä»£è¡¨ 2020 å¹´æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè®¢å•çš„ä¸¤ä¸ªäº§å“ï¼Œæ¯ä¸ªäº§å“å¯¹åº”çš„è®¢å•ä»¥æ•°ç»„å½¢å¼å±•ç¤ºï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ Multiple Join Fields. To perform a join of two or more fields between the two collections, you need to use a let parameter rather than specifying the localField and foreignField parameters used in a single field join. With a let parameter, you bind multiple fields from the first collection into variables ready to be used in the joining process. You use an embedded pipeline inside the $lookup stage to match the bind variables with fields in the second collectionâ€™s records. In this instance, because the $expr operator performs an equality comparison specifically (as opposed to a range comparison), the aggregation runtime can employ an appropriate index for this match. Reducing Array Content. The presence of an embedded pipeline in the $lookup stage provides an opportunity to filter out three unwanted fields brought in from the second collection. Instead, you could use an $unset stage later in the top-level pipeline to project out these unwanted array elements. If you need to perform more complex array content filtering rules, you can use the approach described in section 2. Avoid Unwinding &amp; Regrouping Documents Just To Process Array Elementsâ€œ of the Pipeline Performance Considerations chapter. 3.æ•°æ®ç±»å‹è½¬æ¢(1)å¼ºç±»å‹è½¬æ¢ ä¸€ç»„é›¶å”®è®¢å•retail orderså·²è¢«æŸä¸‰æ–¹æœºæ„å¯¼å…¥MongoDBé›†åˆä¸­ï¼Œä½†æ˜¯æ‰€æœ‰æ•°æ®ç±»å‹éƒ½ä¸¢å¤±äº†ï¼Œå› æ­¤æ‰€æœ‰å­—æ®µå€¼è¢«å­˜å‚¨ä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚ æ‚¨æƒ³ä¸ºæ‰€æœ‰æ–‡æ¡£é‡æ–°å»ºç«‹æ­£ç¡®çš„æ•°æ®ï¼Œå¹¶å°†å®ƒä»¬å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„ã€Œæ¸…ç†è¿‡çš„ã€é›†åˆä¸­ã€‚æ‚¨å¯ä»¥åœ¨èšåˆç®¡é“ä¸­åŒ…å«è¯¥ç±»å‹çš„è½¬æ¢é€»è¾‘ï¼Œå› ä¸ºæ‚¨çŸ¥é“æ¯ä¸ªå­—æ®µåœ¨åŸå§‹è®°å½•ä¸­çš„ç»“æ„ç±»å‹ã€‚ ä¸æœ¬æ–‡ä¸­çš„å¤§å¤šæ•°ç¤ºä¾‹ä¸åŒï¼Œèšåˆç®¡é“å°†å…¶è¾“å‡ºå†™å…¥ä¸€ä¸ªé›†åˆï¼Œè€Œä¸æ˜¯å°†ç»“æœæµå¼åœ°è¿”å›ç»™è°ƒç”¨çš„åº”ç”¨ç¨‹åºã€‚ è®¢å•é›†åˆordersåŒ…å«ä¸‰ä¸ªè®¢å•æ–‡æ¡£ï¼Œå…¶ä¸­æ¯ä¸ªè®¢å•åªæœ‰å­—ç¬¦ä¸²å½¢å¼çš„æ–‡æœ¬å­—æ®µï¼ˆæ³¨æ„ï¼Œç¬¬äºŒä¸ªæ–‡æ¡£æœ‰æ„ç¼ºå°‘further_infoå­æ–‡æ¡£ä¸­çš„reportedå­—æ®µï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 12345678910111213141516&#123; &quot;customer_id&quot;: &quot;elise_smith@myemail.com&quot;, &quot;order_date&quot;: &quot;2020-05-30T08:35:52&quot;, &quot;value&quot;: &quot;231.43&quot;, &quot;further_info&quot;: &#123;&quot;item_qty&quot;: &quot;3&quot;, &quot;reported&quot;: &quot;false&quot;,&#125;,&#125;, &#123; &quot;customer_id&quot;: &quot;oranieri@warmmail.com&quot;, &quot;order_date&quot;: &quot;2020-01-01T08:25:37&quot;, &quot;value&quot;: &quot;63.13&quot;, &quot;further_info&quot;: &#123;&quot;item_qty&quot;: &quot;2&quot;,&#125;,&#125;, &#123; &quot;customer_id&quot;: &quot;tj@wheresmyemail.com&quot;, &quot;order_date&quot;: &quot;2019-05-28T19:13:32&quot;, &quot;value&quot;: &quot;2.01&quot;, &quot;further_info&quot;: &#123;&quot;item_qty&quot;: &quot;1&quot;, &quot;reported&quot;: &quot;true&quot;, &#125;,&#125; èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718var pipeline = [ // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ‰€éœ€ç±»å‹ &#123;&quot;$set&quot;: &#123; &quot;order_date&quot;: &#123;&quot;$toDate&quot;: &quot;$order_date&quot;&#125;, &quot;value&quot;: &#123;&quot;$toDecimal&quot;: &quot;$value&quot;&#125;, &quot;further_info.item_qty&quot;: &#123;&quot;$toInt&quot;: &quot;$further_info.item_qty&quot;&#125;, &quot;further_info.reported&quot;: &#123;&quot;$switch&quot;: &#123; &quot;branches&quot;: [ &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&#123;&quot;$toLower&quot;: &quot;$further_info.reported&quot;&#125;, &quot;true&quot;]&#125;, &quot;then&quot;: true&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&#123;&quot;$toLower&quot;: &quot;$further_info.reported&quot;&#125;, &quot;false&quot;]&#125;, &quot;then&quot;: false&#125;, ], &quot;default&quot;: &#123;&quot;$ifNull&quot;: [&quot;$further_info.reported&quot;, &quot;$$REMOVE&quot;]&#125;, &#125;&#125;, &#125;&#125;, // è¾“å‡ºåˆ°æœªåˆ†ç‰‡ï¼ˆunshardedï¼‰æˆ–åˆ†ç‰‡ï¼ˆshardedï¼‰çš„é›†åˆ &#123;&quot;$merge&quot;: &#123;&quot;into&quot;: &quot;orders_typed&quot;, &#125;&#125;, ]; æ‰§è¡Œèšåˆæ“ä½œåå°†ç”Ÿæˆä¸€ä¸ªæ–°çš„åä¸ºorders_typedçš„é›†åˆï¼Œæ–°é›†åˆorders_typedåº”è¯¥ä¸åŸé›†åˆorderså…·æœ‰ç›¸åŒæ•°é‡çš„æ–‡æ¡£ã€ç›¸åŒçš„å­—æ®µç»“æ„å’Œå­—æ®µåç§°ï¼Œä½†ç°åœ¨ä½¿ç”¨äº†åˆé€‚çš„å¼ºç±»å‹çš„å¸ƒå°”å€¼ã€æ—¥æœŸã€æ•´æ•°å’Œåè¿›åˆ¶å€¼ï¼Œé›†åˆå†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚ Boolean Conversion. The pipelineâ€™s conversions for integers, decimals, and dates are straightforward using the corresponding expression operators, $toInt, $toDecimal and $toDate. However, the expression operator $toBool is not used for the boolean conversion. This is because $toBool will convert any non-empty string to true regardless of its value. As a result, the pipeline uses a $switch operator to compare the lowercase version of strings with the text &#39;true&#39; and &#39;false&#39;, returning the matching boolean. Preserving Non-Existence. The field further_info.reported is an optional field in this scenario. The field may not always appear in a document, as illustrated by one of the three documents in the example. If a field is not present in a document, this potentially significant fact should never be lost. The pipeline includes additional logic for the further_info.reported field to preserve this information. The pipeline ensures the field is not included in the output document if it didnâ€™t exist in the source document. A $ifNull conditional operator is used, which returns the $$REMOVE marker flag if the field is missing, instructing the aggregation engine to omit it. Output To A Collection. The pipeline uses a $merge stage to instruct the aggregation engine to write the output to a collection rather than returning a stream of results. For this example, the default settings for $merge are sufficient. Each transformed record coming out of the aggregation pipeline becomes a new record in the target collection. The pipeline could have used a $out rather than a $merge stage. However, because $merge supports both unsharded and sharded collections, whereas $out only supports the former, $merge provides a more universally applicable example. If your aggregation needs to create a brand new unsharded collection, $out may be a little faster because the aggregation will completely replace the existing collection if it exists. Using $merge, the system has to perform more checks for every record the aggregation inserts (even though, in this case, it will be to a new collection). Trickier Date Conversions. In this example, the date strings contain all the date parts required by the $toDate operator to perform a conversion correctly. In some situations, this may not be the case, and a date string may be missing some valuable information (e.g. which century a 2-character year string is for, such as the century 19 or 21). To understand how to deal with these cases, see the Convert Incomplete Date Strings example chapter. (2)æ®‹ç¼ºæ—¥æœŸè½¬æ¢ åº”ç”¨ç¨‹åºæ­£åœ¨å°†paymentæ–‡æ¡£æå–åˆ° MongoDB é›†åˆä¸­ï¼Œå…¶ä¸­æ¯ä¸ªæ–‡æ¡£çš„payment dateå­—æ®µéƒ½åŒ…å«ä¸€ä¸ªã€Œçœ‹èµ·æ¥æœ‰ç‚¹åƒæ—¥æœŸæ—¶é—´ã€çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚&quot;01-JAN-20 01.01.01.123000000&quot;ã€‚ æ‚¨å¸Œæœ›åœ¨èšåˆæ—¶å°†æ¯ä¸ªpayment dateè½¬æ¢ä¸ºæœ‰æ•ˆçš„BSONæ—¥æœŸç±»å‹ï¼Œä½†æ˜¯è¯¥å­—æ®µä¸åŒ…å«èƒ½å‡†ç¡®ç¡®å®šç¡®åˆ‡æ—¥æœŸæ—¶é—´æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚å› æ­¤ï¼Œæ‚¨ä¸èƒ½ç›´æ¥ä½¿ç”¨ MongoDB çš„æ—¥æœŸè¡¨è¾¾å¼è¿ç®—ç¬¦å°†æ–‡æœ¬è½¬æ¢ä¸ºæ—¥æœŸã€‚ è¿™äº›æ–‡æœ¬å­—æ®µä¸­çš„æ¯ä¸€ä¸ªéƒ½ç¼ºå°‘ä»¥ä¸‹ä¿¡æ¯ï¼š æ˜ç¡®çš„ä¸–çºªï¼šä¾‹å¦‚æ˜¯1900sï¼Œè¿˜æ˜¯2000sï¼Œè¿˜æ˜¯å…¶ä»–ï¼› æ˜ç¡®çš„æ—¶åŒºï¼šä¾‹å¦‚æ˜¯GMTï¼Œæ˜¯ISTï¼Œè¿˜æ˜¯PSTï¼Œè¿˜æ˜¯å…¶ä»–ï¼› ä¸‰ä¸ªå­—æ¯çš„æœˆä»½ç¼©å†™æ‰€ä»£è¡¨çš„å…·ä½“è¯­è¨€ï¼šä¾‹å¦‚ã€ŒJANã€æ˜¯æ³•è¯­ï¼Œè¿˜æ˜¯è‹±è¯­ï¼Œè¿˜æ˜¯å…¶ä»–ã€‚ å‡è®¾æ‚¨éšåäº†è§£åˆ°æ‰€æœ‰ä»˜æ¬¾è®°å½•ä»…å‘ç”Ÿåœ¨21ä¸–çºªï¼Œæå–æ•°æ®æ—¶ä½¿ç”¨çš„æ—¶åŒºæ˜¯UTCï¼Œä½¿ç”¨çš„è¯­è¨€æ˜¯è‹±è¯­ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæ‚¨å°±å¯ä»¥æ„å»ºä¸€ä¸ªèšåˆç®¡é“æ¥å°†è¿™äº›æ–‡æœ¬å­—æ®µè½¬æ¢ä¸ºæ—¥æœŸå­—æ®µã€‚ ç¼´è´¹é›†åˆpaymentsåŒ…å«12ä¸ªæ”¯ä»˜æ–‡æ¡£ï¼ŒåŒ…æ‹¬äº†æ—¶é—´ä¹±åºçš„è¦†ç›–äº†2020å¹´æ‰€æœ‰12ä¸ªæœˆçš„æ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 123456789101112&#123;&quot;account&quot;: &quot;010101&quot;, &quot;payment_date&quot;: &quot;01-JAN-20 01.01.01.123000000&quot;, &quot;amount&quot;: 1.01&#125;,&#123;&quot;account&quot;: &quot;020202&quot;, &quot;payment_date&quot;: &quot;02-FEB-20 02.02.02.456000000&quot;, &quot;amount&quot;: 2.02&#125;,&#123;&quot;account&quot;: &quot;030303&quot;, &quot;payment_date&quot;: &quot;03-MAR-20 03.03.03.789000000&quot;, &quot;amount&quot;: 3.03&#125;,&#123;&quot;account&quot;: &quot;040404&quot;, &quot;payment_date&quot;: &quot;04-APR-20 04.04.04.012000000&quot;, &quot;amount&quot;: 4.04&#125;,&#123;&quot;account&quot;: &quot;050505&quot;, &quot;payment_date&quot;: &quot;05-MAY-20 05.05.05.345000000&quot;, &quot;amount&quot;: 5.05&#125;,&#123;&quot;account&quot;: &quot;060606&quot;, &quot;payment_date&quot;: &quot;06-JUN-20 06.06.06.678000000&quot;, &quot;amount&quot;: 6.06&#125;,&#123;&quot;account&quot;: &quot;070707&quot;, &quot;payment_date&quot;: &quot;07-JUL-20 07.07.07.901000000&quot;, &quot;amount&quot;: 7.07&#125;,&#123;&quot;account&quot;: &quot;080808&quot;, &quot;payment_date&quot;: &quot;08-AUG-20 08.08.08.234000000&quot;, &quot;amount&quot;: 8.08&#125;,&#123;&quot;account&quot;: &quot;090909&quot;, &quot;payment_date&quot;: &quot;09-SEP-20 09.09.09.567000000&quot;, &quot;amount&quot;: 9.09&#125;,&#123;&quot;account&quot;: &quot;101010&quot;, &quot;payment_date&quot;: &quot;10-OCT-20 10.10.10.890000000&quot;, &quot;amount&quot;: 10.10&#125;,&#123;&quot;account&quot;: &quot;111111&quot;, &quot;payment_date&quot;: &quot;11-NOV-20 11.11.11.111000000&quot;, &quot;amount&quot;: 11.11&#125;,&#123;&quot;account&quot;: &quot;121212&quot;, &quot;payment_date&quot;: &quot;12-DEC-20 12.12.12.999000000&quot;, &quot;amount&quot;: 12.12&#125; èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738var pipeline = [ // å°†å­—æ®µä»å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸç±»å‹ï¼Œå¡«è¡¥ç¼ºå¤±çš„ç©ºç™½ &#123;&quot;$set&quot;: &#123; &quot;payment_date&quot;: &#123; &quot;$let&quot;: &#123; &quot;vars&quot;: &#123; &quot;txt&quot;: &quot;$payment_date&quot;, // Assign &quot;payment_date&quot; field to variable &quot;txt&quot;, &quot;month&quot;: &#123;&quot;$substrCP&quot;: [&quot;$payment_date&quot;, 3, 3]&#125;, // Extract month text &#125;, &quot;in&quot;: &#123; &quot;$dateFromString&quot;: &#123;&quot;format&quot;: &quot;%d-%m-%Y %H.%M.%S.%L&quot;, &quot;dateString&quot;: &#123;&quot;$concat&quot;: [ &#123;&quot;$substrCP&quot;: [&quot;$$txt&quot;, 0, 3]&#125;, // Use 1st 3 chars in string &#123;&quot;$switch&quot;: &#123;&quot;branches&quot;: [ // Replace month 3 chars with month number &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;JAN&quot;]&#125;, &quot;then&quot;: &quot;01&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;FEB&quot;]&#125;, &quot;then&quot;: &quot;02&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;MAR&quot;]&#125;, &quot;then&quot;: &quot;03&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;APR&quot;]&#125;, &quot;then&quot;: &quot;04&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;MAY&quot;]&#125;, &quot;then&quot;: &quot;05&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;JUN&quot;]&#125;, &quot;then&quot;: &quot;06&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;JUL&quot;]&#125;, &quot;then&quot;: &quot;07&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;AUG&quot;]&#125;, &quot;then&quot;: &quot;08&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;SEP&quot;]&#125;, &quot;then&quot;: &quot;09&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;OCT&quot;]&#125;, &quot;then&quot;: &quot;10&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;NOV&quot;]&#125;, &quot;then&quot;: &quot;11&quot;&#125;, &#123;&quot;case&quot;: &#123;&quot;$eq&quot;: [&quot;$$month&quot;, &quot;DEC&quot;]&#125;, &quot;then&quot;: &quot;12&quot;&#125;, ], &quot;default&quot;: &quot;ERROR&quot;&#125;&#125;, &quot;-20&quot;, // Add hyphen + hardcoded century 2 digits &#123;&quot;$substrCP&quot;: [&quot;$$txt&quot;, 7, 15]&#125; // Use remaining 3 millis (ignore last 6 nanosecs) ] &#125;&#125; &#125; &#125; &#125;, &#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;, ]&#125;, ]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›å¯¹åº”äºåŸæ–‡æ¡£çš„12ä¸ªæ–‡æ¡£ï¼Œä½†å°†payment_dateä»æ–‡æœ¬å€¼è½¬æ¢ä¸ºæ­£ç¡®çš„æ—¥æœŸç±»å‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ Concatenation Explanation. In this pipeline, the text fields (e.g. &#39;12-DEC-20 12.12.12.999000000&#39;) are each converted to date fields (e.g. 2020-12-12T12:12:12.999Z). This is achieved by concatenating together the following four example elements before passing them to the $dateFromString operator to convert to a date type: &#39;12-&#39; (day of the month from the input string + the hyphen suffix already present in the text) &#39;12&#39; (replacing â€˜DECâ€™) &#39;-20&#39; (hard-coded hyphen + hardcoded century) &#39;20 12.12.12.999&#39; (the rest of input string apart from the last 6 nanosecond digits) Further Reading. This example is based on the output of the blog post: Converting Gnarly Date Strings to Proper Date Types Using a MongoDB Aggregation Pipeline. 4.è¶‹åŠ¿åˆ†æ(1)ç‰¹å¾åˆ†ç±»ï¼ˆåˆ†é¢æ£€ç´¢ï¼‰ æ‚¨å¸Œæœ›åœ¨é›¶å”®ç½‘ç«™ä¸Šæä¾›åˆ†é¢æ£€ç´¢åŠŸèƒ½ï¼Œä½¿å®¢æˆ·èƒ½å¤Ÿåœ¨ç½‘é¡µä¸­åˆ—å‡ºçš„äº§å“ç»“æœä¸­ï¼Œé€šè¿‡é€‰æ‹©æŒ‡å®šç‰¹å¾æ¥æ”¹å–„ä»–ä»¬çš„äº§å“æœç´¢ã€‚ æŒ‰ä¸åŒç»´åº¦å¯¹äº§å“è¿›è¡Œåˆ†ç±»æ˜¯æœ‰ç›Šçš„ï¼Œå…¶ä¸­æ¯ä¸ªç»´åº¦ï¼ˆå³ã€Œåˆ†é¢facetã€ï¼‰å¯¹åº”äºäº§å“è®°å½•ä¸­çš„ç‰¹å®šå­—æ®µï¼ˆä¾‹å¦‚ã€Œäº§å“è¯„çº§ã€ã€ã€Œäº§å“ä»·æ ¼ã€ï¼‰ã€‚æ¯ä¸ªåˆ†é¢éƒ½åº”åˆ†è§£ä¸ºå­èŒƒå›´ï¼Œä»¥ä¾¿å®¢æˆ·å¯ä»¥ä¸ºç‰¹å®šåˆ†é¢ï¼ˆä¾‹å¦‚ã€Œè¯„çº§ã€ï¼‰é€‰æ‹©ç‰¹å®šçš„å­èŒƒå›´ï¼ˆä¾‹å¦‚4~5æ˜Ÿï¼‰ã€‚ èšåˆç®¡é“å°†æ ¹æ®æ¯ä¸ªåˆ†é¢çš„å­—æ®µï¼ˆratingå’Œpriceï¼‰æ¥åˆ†æproductsé›†åˆï¼Œä»¥ç¡®å®šæ¯ä¸ªåˆ†é¢çš„å€¼çš„åˆ†å¸ƒã€‚ äº§å“é›†åˆproductsåŒ…å«å¦‚ä¸‹16ä¸ªæ–‡æ¡£ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&#123; &quot;name&quot;: &quot;Asus Laptop&quot;, &quot;category&quot;: &quot;ELECTRONICS&quot;, &quot;description&quot;: &quot;Good value laptop for students&quot;, &quot;price&quot;: NumberDecimal(&quot;431.43&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.2&quot;)&#125;, &#123; &quot;name&quot;: &quot;The Day Of The Triffids&quot;, &quot;category&quot;: &quot;BOOKS&quot;, &quot;description&quot;: &quot;Classic post-apocalyptic novel&quot;, &quot;price&quot;: NumberDecimal(&quot;5.01&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.8&quot;)&#125;, &#123; &quot;name&quot;: &quot;Morphy Richardds Food Mixer&quot;, &quot;category&quot;: &quot;KITCHENWARE&quot;, &quot;description&quot;: &quot;Luxury mixer turning good cakes into great&quot;, &quot;price&quot;: NumberDecimal(&quot;63.13&quot;), &quot;rating&quot;: NumberDecimal(&quot;3.8&quot;)&#125;, &#123; &quot;name&quot;: &quot;Karcher Hose Set&quot;, &quot;category&quot;: &quot;GARDEN&quot;, &quot;description&quot;: &quot;Hose + nosels + winder for tidy storage&quot;, &quot;price&quot;: NumberDecimal(&quot;22.13&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.3&quot;)&#125;, &#123; &quot;name&quot;: &quot;Oak Coffee Table&quot;, &quot;category&quot;: &quot;HOME&quot;, &quot;description&quot;: &quot;size is 2m x 0.5m x 0.4m&quot;, &quot;price&quot;: NumberDecimal(&quot;22.13&quot;), &quot;rating&quot;: NumberDecimal(&quot;3.8&quot;)&#125;, &#123; &quot;name&quot;: &quot;Lenovo Laptop&quot;, &quot;category&quot;: &quot;ELECTRONICS&quot;, &quot;description&quot;: &quot;High spec good for gaming&quot;, &quot;price&quot;: NumberDecimal(&quot;1299.99&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.1&quot;)&#125;, &#123; &quot;name&quot;: &quot;One Day in the Life of Ivan Denisovich&quot;, &quot;category&quot;: &quot;BOOKS&quot;, &quot;description&quot;: &quot;Brutal life in a labour camp&quot;, &quot;price&quot;: NumberDecimal(&quot;4.29&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.9&quot;)&#125;, &#123; &quot;name&quot;: &quot;Russell Hobbs Chrome Kettle&quot;, &quot;category&quot;: &quot;KITCHENWARE&quot;, &quot;description&quot;: &quot;Nice looking budget kettle&quot;, &quot;price&quot;: NumberDecimal(&quot;15.76&quot;), &quot;rating&quot;: NumberDecimal(&quot;3.9&quot;)&#125;, &#123; &quot;name&quot;: &quot;Tiffany Gold Chain&quot;, &quot;category&quot;: &quot;JEWELERY&quot;, &quot;description&quot;: &quot;Looks great for any age and gender&quot;, &quot;price&quot;: NumberDecimal(&quot;582.22&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.0&quot;)&#125;, &#123; &quot;name&quot;: &quot;Raleigh Racer 21st Century Classic&quot;, &quot;category&quot;: &quot;BICYCLES&quot;, &quot;description&quot;: &quot;Modern update to a classic 70s bike design&quot;, &quot;price&quot;: NumberDecimal(&quot;523.00&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.5&quot;)&#125;, &#123; &quot;name&quot;: &quot;Diesel Flare Jeans&quot;, &quot;category&quot;: &quot;CLOTHES&quot;, &quot;description&quot;: &quot;Top end casual look&quot;, &quot;price&quot;: NumberDecimal(&quot;129.89&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.3&quot;)&#125;, &#123; &quot;name&quot;: &quot;Jazz Silk Scarf&quot;, &quot;category&quot;: &quot;CLOTHES&quot;, &quot;description&quot;: &quot;Style for the winder months&quot;, &quot;price&quot;: NumberDecimal(&quot;28.39&quot;), &quot;rating&quot;: NumberDecimal(&quot;3.7&quot;)&#125;, &#123; &quot;name&quot;: &quot;Dell XPS 13 Laptop&quot;, &quot;category&quot;: &quot;ELECTRONICS&quot;, &quot;description&quot;: &quot;Developer edition&quot;, &quot;price&quot;: NumberDecimal(&quot;1399.89&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.4&quot;)&#125;, &#123; &quot;name&quot;: &quot;NY Baseball Cap&quot;, &quot;category&quot;: &quot;CLOTHES&quot;, &quot;description&quot;: &quot;Blue &amp; white&quot;, &quot;price&quot;: NumberDecimal(&quot;18.99&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.0&quot;)&#125;, &#123; &quot;name&quot;: &quot;Tots Flower Pots&quot;, &quot;category&quot;: &quot;GARDEN&quot;, &quot;description&quot;: &quot;Set of three&quot;, &quot;price&quot;: NumberDecimal(&quot;9.78&quot;), &quot;rating&quot;: NumberDecimal(&quot;4.1&quot;)&#125;, &#123; &quot;name&quot;: &quot;Picky Pencil Sharpener&quot;, &quot;category&quot;: &quot;Stationery&quot;, &quot;description&quot;: &quot;Ultra budget&quot;, &quot;price&quot;: NumberDecimal(&quot;0.67&quot;), &quot;rating&quot;: NumberDecimal(&quot;1.2&quot;)&#125; èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233var pipeline = [ // Group products by 2 facets: 1) by price ranges, 2) by rating ranges &#123;&quot;$facet&quot;: &#123; // â‘ Group by price ranges &quot;by_price&quot;: [ // Group into 3 ranges: inexpensive small price range to expensive large price range &#123;&quot;$bucketAuto&quot;: &#123; &quot;groupBy&quot;: &quot;$price&quot;, &quot;buckets&quot;: 3, &quot;granularity&quot;: &quot;1-2-5&quot;, &quot;output&quot;: &#123;&quot;count&quot;: &#123;&quot;$sum&quot;: 1&#125;, &quot;products&quot;: &#123;&quot;$push&quot;: &quot;$name&quot;&#125;,&#125;, &#125;&#125;, // Tag range info as &quot;price_range&quot; &#123;&quot;$set&quot;: &#123;&quot;price_range&quot;: &quot;$_id&quot;,&#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;,]&#125;, ], // â‘¡Group by rating ranges &quot;by_rating&quot;: [ // Group products evenly across 5 rating ranges from low to high &#123;&quot;$bucketAuto&quot;: &#123; &quot;groupBy&quot;: &quot;$rating&quot;, &quot;buckets&quot;: 5, &quot;output&quot;: &#123;&quot;count&quot;: &#123;&quot;$sum&quot;: 1&#125;, &quot;products&quot;: &#123;&quot;$push&quot;: &quot;$name&quot;&#125;,&#125;, &#125;&#125;, &#123;&quot;$set&quot;: &#123;&quot;rating_range&quot;: &quot;$_id&quot;,&#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;,]&#125;, ], &#125;&#125;, ]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›ä¸€ä¸ªå•ç‹¬çš„æ–‡æ¡£ï¼Œæ–‡æ¡£åŒ…å« 2 ä¸ªåˆ†é¢ï¼ˆåˆ†åˆ«å…³é—­by_priceå’Œå…³é—­by_ratingï¼‰ï¼Œæ¯ä¸ªåˆ†é¢æ˜¾ç¤ºã€Œå…¶å€¼çš„å­èŒƒå›´ã€ä»¥åŠã€Œå±äºæ¯ä¸ªå­èŒƒå›´çš„äº§å“ã€ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ Multiple Pipelines. The $facet stage doesnâ€™t have to be employed for you to use the $bucketAuto stage. In most faceted search scenarios, you will want to understand a collection by multiple dimensions at once (price &amp; rating in this case). The $facet stage is convenient because it allows you to define various $bucketAuto dimensions in one go in a single pipeline. Otherwise, a client application must invoke an aggregation multiple times, each using a new $bucketAuto stage to process a different field. In fact, each section of a $facet stage is just a regular aggregation [sub-]pipeline, able to contain any type of stage (with a few specific documented exceptions) and may not even contain $bucketAuto or $bucket stages at all. Single Document Result. If the result of a $facet based aggregation is allowed to be multiple documents, this will cause a problem. The results will contain a mix of records originating from different facets but with no way of ascertaining the facet each result record belongs to. Consequently, when using $facet, a single document is always returned, containing top-level fields identifying each facet. Having only a single result record is not usually a problem. A typical requirement for faceted search is to return a small amount of grouped summary data about a collection rather than large amounts of raw data from the collection. Therefore the 16MB document size limit should not be an issue. Spread Of Ranges. In this example, each of the two employed bucketing facets uses a different granularity number scheme for spreading out the sub-ranges of values. You choose a numbering scheme based on what you know about the nature of the facet. For instance, most of the ratings values in the sample collection have scores bunched between late 3s and early 4s. If a numbering scheme is defined to reflect an even spread of ratings, most products will appear in the same sub-range bucket and some sub-ranges would contain no products (e.g. ratings 2 to 3 in this example). This wouldnâ€™t provide website customers with much selectivity on product ratings. (2)æœ€å¤§å›¾ç½‘ç»œ åŸºäºç±»ä¼¼äº Twitter çš„ç¤¾äº¤ç½‘ç»œæ•°æ®åº“ï¼Œæ‚¨çš„ç»„ç»‡å¸Œæœ›äº†è§£æ–°è¥é”€æ´»åŠ¨çš„æœ€ä½³ç›®æ ‡ã€‚ æ‚¨æƒ³è¦æœç´¢ã€Œç¤¾äº¤ç½‘ç»œç”¨æˆ·ã€çš„é›†åˆï¼Œå…¶ä¸­æ¯ä¸ªç”¨æˆ·è®°å½•æ–‡æ¡£éƒ½åŒ…å«ä¸€ä¸ªç”¨æˆ·åå’Œè¯¥ç”¨æˆ·çš„å…³æ³¨è€…ã€‚ æ‚¨å°†æ‰§è¡Œä¸€ä¸ªèšåˆç®¡é“æŸ¥è¯¢ï¼Œéå†æ¯ä¸ªç”¨æˆ·è®°å½•çš„followed_byæ•°ç»„ï¼Œä»è€Œç¡®å®šå“ªä¸ªç”¨æˆ·å…·æœ‰æœ€å¤§çš„ network reach ï¼Œå³æœ€å¹¿çš„æœ‹å‹åœˆã€‚ è¯·æ³¨æ„ï¼Œä¸ºç®€æ´èµ·è§ï¼Œæ­¤ç¤ºä¾‹ä»…ä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„æ•°æ®æ¨¡å‹ã€‚ç„¶è€Œè¿™ä¸å¤ªå¯èƒ½æ˜¯ä¸€ä¸ªæœ€ä½³æ•°æ®æ¨¡å‹ï¼Œä¾‹å¦‚æ‹¥æœ‰å¾ˆå¤šç²‰ä¸çš„ç¤¾äº¤ç½‘ç»œç”¨æˆ·å¯¹äº$graphLookupçš„å¤§è§„æ¨¡ä½¿ç”¨ï¼ŒæŠ‘æˆ–æ˜¯åœ¨åˆ†ç‰‡ç¯å¢ƒä¸­è¿è¡Œã€‚æœ‰å…³æ­¤ç±»é—®é¢˜çš„æ›´å¤šæŒ‡å¯¼ï¼Œè¯·å‚é˜…Socialiteã€‚ ç”¨æˆ·é›†åˆusersåŒ…å«ä»¥ä¸‹10ä¸ªç¤¾äº¤ç½‘ç»œç”¨æˆ·æ–‡æ¡£ï¼Œå¯è€ƒè™‘åŠ ä¸Šä¸€ä¸ªç´¢å¼•db.users.createIndex(&#123;&quot;name&quot;: 1&#125;)æ¥å¸®åŠ©ä¼˜åŒ– å›¾çš„éå† ã€‚ 12345678910&#123; &quot;name&quot;: &quot;Paul&quot;, &quot;followed_by&quot;: [] &#125;,&#123; &quot;name&quot;: &quot;Toni&quot;, &quot;followed_by&quot;: [&quot;Paul&quot;] &#125;,&#123; &quot;name&quot;: &quot;Janet&quot;, &quot;followed_by&quot;: [&quot;Paul&quot;, &quot;Toni&quot;] &#125;,&#123; &quot;name&quot;: &quot;David&quot;, &quot;followed_by&quot;: [&quot;Janet&quot;, &quot;Paul&quot;, &quot;Toni&quot;] &#125;,&#123; &quot;name&quot;: &quot;Fiona&quot;, &quot;followed_by&quot;: [&quot;David&quot;, &quot;Paul&quot;] &#125;,&#123; &quot;name&quot;: &quot;Bob&quot;, &quot;followed_by&quot;: [&quot;Janet&quot;] &#125;,&#123; &quot;name&quot;: &quot;Carl&quot;, &quot;followed_by&quot;: [&quot;Fiona&quot;] &#125;,&#123; &quot;name&quot;: &quot;Sarah&quot;, &quot;followed_by&quot;: [&quot;Carl&quot;, &quot;Paul&quot;] &#125;,&#123; &quot;name&quot;: &quot;Carol&quot;, &quot;followed_by&quot;: [&quot;Helen&quot;, &quot;Sarah&quot;] &#125;,&#123; &quot;name&quot;: &quot;Helen&quot;, &quot;followed_by&quot;: [&quot;Paul&quot;] &#125;, èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š123456789101112131415161718192021222324var pipeline = [ // å¯¹äºæ¯ä¸ªç”¨æˆ·ï¼Œå›¾éå†ä»–ä»¬çš„followed_byæ•°ç»„ &#123;&quot;$graphLookup&quot;: &#123; &quot;from&quot;: &quot;users&quot;, &quot;startWith&quot;: &quot;$followed_by&quot;, &quot;connectFromField&quot;: &quot;followed_by&quot;, &quot;connectToField&quot;: &quot;name&quot;, &quot;depthField&quot;: &quot;depth&quot;, &quot;as&quot;: &quot;extended_network&quot;, &#125;&#125;, &#123;&quot;$set&quot;: &#123; // Count the extended connection reach &quot;network_reach&quot;: &#123;&quot;$size&quot;: &quot;$extended_network&quot;&#125;, // Gather the list of the extended connections&#x27; names &quot;extended_connections&quot;: &#123; &quot;$map&quot;: &#123;&quot;input&quot;: &quot;$extended_network&quot;, &quot;as&quot;: &quot;connection&quot;,&quot;in&quot;: &quot;$$connection.name&quot;&#125; &#125;, &#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;, &quot;followed_by&quot;, &quot;extended_network&quot;,]&#125;, &#123;&quot;$sort&quot;: &#123;&quot;network_reach&quot;: -1,&#125;&#125;, ]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›å¯¹åº”åŸæ¥çš„10ä¸ªæºç¤¾äº¤ç½‘ç»œç”¨æˆ·çš„10ä¸ªæ–‡æ¡£ï¼Œæ¯ä¸ªæ–‡æ¡£åŒ…æ‹¬ç”¨æˆ·çš„ ç½‘ç»œåˆ°è¾¾æ•°network reach count å’Œ æ‰©å±•è¿æ¥åç§°extended connection names ï¼ŒæŒ‰ç½‘ç»œè¦†ç›–é¢æœ€å¹¿çš„ç”¨æˆ·æ’åºï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ Following Graphs. The $graphLookup stage helps you traverse relationships between records, looking for patterns that arenâ€™t necessarily evident from looking at each record in isolation. In this example, by looking at Paulâ€™s record in isolation, it is evident that Paul has no friends and thus has the lowest network reach. However, it is not obvious that Carol has the greatest network reach just by looking at the number of people Carol is directly followed by, which is two. David, for example, is followed by three people (one more than Carol). However, the executed aggregation pipeline can deduce that Carol has the most extensive network reach. Index Use. The $graphLookup stage can leverage the index on the field name for each of its connectToField hops. (3)å¢é‡åˆ†æ æ‚¨æœ‰ä¸€ç»„ç´¯ç§¯å¤šå¹´çš„ å•†åº—è®¢å• ï¼Œé›¶å”®æ¸ é“åœ¨æ¯ä¸ªäº¤æ˜“æ—¥ä¸æ–­å‘ordersé›†åˆæ·»åŠ æ–°è®¢å•è®°å½•ã€‚ æ‚¨å¸Œæœ›ç»å¸¸ç”Ÿæˆæ±‡æ€»æŠ¥å‘Šï¼Œä»¥ä¾¿ç®¡ç†å±‚äº†è§£ä¸šåŠ¡çŠ¶æ€å¹¶å¯¹ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡è¶‹åŠ¿åšå‡ºååº”ã€‚å¤šå¹´æ¥ï¼Œç”Ÿæˆæ‰€æœ‰æ¯æ—¥æ€»å’Œå’Œå¹³å‡å€¼çš„æŠ¥å‘Šæ‰€éœ€çš„æ—¶é—´è¶Šæ¥è¶Šé•¿ï¼Œå› ä¸ºéœ€è¦å¤„ç†çš„æ•°æ®å¤©æ•°è¶Šæ¥è¶Šå¤šã€‚ ä»ç°åœ¨å¼€å§‹ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨å°†åªåœ¨ä¸€å¤©ç»“æŸæ—¶ç”Ÿæˆå½“å¤©çš„æ‘˜è¦åˆ†æï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸åŒçš„é›†åˆä¸­ï¼Œè¯¥é›†åˆä¼šéšç€æ—¶é—´çš„æ¨ç§»ç§¯ç´¯æ¯æ—¥æ‘˜è¦è®°å½•ã€‚ ä¸æœ¬æ–‡ä¸­çš„å¤§å¤šæ•°ç¤ºä¾‹ä¸åŒï¼Œèšåˆç®¡é“å°†å…¶è¾“å‡ºå†™å…¥ä¸€ä¸ªé›†åˆï¼Œè€Œä¸æ˜¯å°†ç»“æœä»¥æµçš„å½¢å¼ä¼ è¾“å›è°ƒç”¨åº”ç”¨ç¨‹åºã€‚ è®¢å•é›†åˆordersåŒ…å«9ä¸ªæ–‡æ¡£ï¼Œåˆ†åˆ«ä»£è¡¨ 2021-02-01 çš„ 5 ä¸ªè®¢å•å’Œ 2021-02-02 çš„ 4 ä¸ªè®¢å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 123456789&#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-01T08:35:52Z&quot;), &quot;value&quot;: NumberDecimal(&quot;231.43&quot;),&#125;,&#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-01T09:32:07Z&quot;), &quot;value&quot;: NumberDecimal(&quot;99.99&quot;),&#125;,&#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-01T08:25:37Z&quot;), &quot;value&quot;: NumberDecimal(&quot;63.13&quot;),&#125;,&#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-01T19:13:32Z&quot;), &quot;value&quot;: NumberDecimal(&quot;2.01&quot;),&#125;, &#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-01T22:56:53Z&quot;), &quot;value&quot;: NumberDecimal(&quot;187.99&quot;),&#125;,&#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-02T23:04:48Z&quot;), &quot;value&quot;: NumberDecimal(&quot;4.59&quot;),&#125;,&#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-02T08:55:46Z&quot;), &quot;value&quot;: NumberDecimal(&quot;48.50&quot;),&#125;,&#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-02T07:49:32Z&quot;), &quot;value&quot;: NumberDecimal(&quot;1024.89&quot;),&#125;,&#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-02T13:49:44Z&quot;), &quot;value&quot;: NumberDecimal(&quot;102.24&quot;),&#125;, å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºèšåˆç®¡é“ï¼Œå°†ã€Œå¼€å§‹æ—¥æœŸã€å’Œã€Œç»“æŸæ—¥æœŸã€ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œä»¥ä¾¿äºåœ¨ä¸åŒçš„æ—¥æœŸå¤šæ¬¡æ‰§è¡Œèšåˆï¼š 1234567891011121314151617181920212223242526272829303132function getDayAggPipeline(startDay, endDay) &#123; return [ &#123;&quot;$match&quot;: &#123; &quot;orderdate&quot;: &#123;&quot;$gte&quot;: ISODate(startDay), &quot;$lt&quot;: ISODate(endDay)&#125; &#125;&#125;, // å°†å½“å¤©çš„æ‰€æœ‰è®¢å•ç»„åˆæˆä¸€ä¸ªæ±‡æ€»è®°å½• &#123;&quot;$group&quot;: &#123; &quot;_id&quot;: null, &quot;date_parts&quot;: &#123;&quot;$first&quot;: &#123;&quot;$dateToParts&quot;: &#123;&quot;date&quot;: &quot;$orderdate&quot;&#125;&#125;&#125;, &quot;total_value&quot;: &#123;&quot;$sum&quot;: &quot;$value&quot;&#125;, &quot;total_orders&quot;: &#123;&quot;$sum&quot;: 1&#125;, &#125;&#125;, // ä»1ä¸ªè®¢å•ä¸­è·å–æ—¥æœŸéƒ¨åˆ†ï¼ˆå¯¹äºUTCè€Œè¨€éœ€è¦å¹´ã€æœˆã€æ—¥ï¼‰ &#123;&quot;$set&quot;: &#123; &quot;day&quot;: &#123;&quot;$dateFromParts&quot;: &#123; &quot;year&quot;: &quot;$date_parts.year&quot;, &quot;month&quot;: &quot;$date_parts.month&quot;, &quot;day&quot;:&quot;$date_parts.day&quot; &#125;&#125;, &#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;, &quot;date_parts&quot;, ]&#125;, // å°†æ—¥æœŸæ‘˜è¦æ·»åŠ åˆ°æ‘˜è¦é›†åˆä¸­ï¼ˆè‹¥å·²å­˜åœ¨åˆ™è¦†ç›–ï¼‰ &#123;&quot;$merge&quot;: &#123; &quot;into&quot;: &quot;daily_orders_summary&quot;, &quot;on&quot;: &quot;day&quot;, &quot;whenMatched&quot;: &quot;replace&quot;, &quot;whenNotMatched&quot;: &quot;insert&quot; &#125;&#125;, ];&#125; ä»…å¯¹äº 2021-02-01 çš„è®¢å•ï¼Œè°ƒç”¨ä¸Šè¿°getDayAggPipelineå‡½æ•°æ„å»ºèšåˆç®¡é“ï¼Œæ‰§è¡Œèšåˆåå°†ç»“æœå†™å…¥æ±‡æ€»é›†åˆdaily_orders_summaryï¼ŒæŸ¥çœ‹æ±‡æ€»é›†åˆå†…å®¹åº”è¯¥åªæœ‰1æ¡è®°å½•ã€ä»…ç”Ÿæˆäº† 2021-02-01 çš„å•ä¸ªè®¢å•æ‘˜è¦ï¼Œå…¶ä¸­åŒ…å«å½“å¤©çš„æ€»ä»·å€¼å’Œè®¢å•æ•°é‡ã€‘ã€‚ 1234// ã€ç¬¬ä¸€å¤©ã€‘var pipeline = getDayAggPipeline(&quot;2021-02-01T00:00:00Z&quot;, &quot;2021-02-02T00:00:00Z&quot;);db.orders.aggregate(pipeline);db.daily_orders_summary.find() ç°åœ¨ä»…åœ¨ç¬¬äºŒå¤©ï¼ˆå³ä»…å¯¹äº 2021-02-02 çš„è®¢å•ï¼‰ï¼Œæ„å»ºç®¡é“å¹¶æ‰§è¡Œèšåˆã€‚ä»ç»“æœä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°è¿™ä¸¤å¤©çš„è®¢å•æ‘˜è¦éƒ½å­˜åœ¨ï¼ˆåœ¨ç¬¬ä¸€å¤©çš„åŸºç¡€ä¸Šè¿½åŠ äº†ç¬¬äºŒå¤©ï¼‰ã€‚ 1234// ã€ç¬¬äºŒå¤©ã€‘var pipeline = getDayAggPipeline(&quot;2021-02-02T00:00:00Z&quot;, &quot;2021-02-03T00:00:00Z&quot;);db.orders.aggregate(pipeline);db.daily_orders_summary.find() ä¸ºäº†æ¨¡æ‹Ÿç»„ç»‡å¶å°”éœ€è¦è¿½æº¯æ›´æ­£æ—§è®¢å•ï¼Œå›åˆ°ç¬¬ä¸€å¤©å¹¶æ·»åŠ æ–°çš„ã€Œé«˜ä»·å€¼ã€è®¢å•ã€‚ç„¶åä»…åœ¨ç¬¬ä¸€å¤©ï¼ˆ2021-02-01ï¼‰é‡æ–°è¿è¡Œèšåˆï¼Œä»¥è¡¨æ˜æ‚¨å¯ä»¥å®‰å…¨æ­£ç¡®åœ°é‡æ–°è®¡ç®— ä»…ä¸€å¤© çš„æ‘˜è¦ï¼š 123456789// å›é¡¾æ€§åœ°å°†è®¢å•æ·»åŠ åˆ°ç¬¬ä¸€å¤©ï¼ˆ2021-02-01ï¼‰ä»¥æ¨¡æ‹Ÿã€Œæ¼æ‰ä¸€å•ã€db.orders.insertOne( &#123;&quot;orderdate&quot;: ISODate(&quot;2021-02-01T09:32:07Z&quot;), &quot;value&quot;: NumberDecimal(&quot;11111.11&quot;)&#125; )// ã€ç¬¬ä¸€å¤©ï¼ˆæ–°ï¼‰ã€‘é‡æ–°ä¸ºç¬¬ä¸€å¤©æ„å»ºè¿è¡Œèšåˆç®¡é“ï¼Œè¦†ç›–æ±‡æ€»é›†åˆdaily_orders_summaryä¸­çš„ç¬¬ä¸€æ¡è®°å½•var pipeline = getDayAggPipeline(&quot;2021-02-01T00:00:00Z&quot;, &quot;2021-02-02T00:00:00Z&quot;);db.orders.aggregate(pipeline);db.daily_orders_summary.find() æ‰§è¡Œä¸Šè¿°ä¸‰ä¸ªèšåˆæ“ä½œåï¼Œæ±‡æ€»é›†åˆdaily_orders_summaryå¦‚å›¾æ‰€ç¤ºï¼š ä»ç»“æœä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ä»ç„¶å­˜åœ¨ä¸¤ä¸ªè®¢å•æ‘˜è¦ï¼Œä¸¤ä¸ªäº¤æ˜“æ—¥å„ä¸€ä¸ªï¼Œä½†ç¬¬ä¸€å¤©çš„æ€»ä»·å€¼å’Œè®¢å•æ•°é‡å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“éœ€è¦æ›´æ­£æŸå¤©çš„è®¢å•æ‘˜è¦æ—¶ï¼Œåªè¦é‡æ–°ä¸ºé‚£ä¸€å¤©æ„å»ºè¿è¡Œèšåˆç®¡é“å³å¯ä¿®æ­£ã€‚ Merging Results. The pipeline uses a $merge stage to instruct the aggregation engine to write the output to a collection rather than returning a stream of results. In this example, with the options you provide to $merge, the aggregation inserts a new record in the destination collection if a matching one doesnâ€™t already exist. If a matching record already exists, it replaces the previous version. Incremental Updates. The example illustrates just two days of shop orders, albeit with only a few orders, to keep the example simple. At the end of each new trading day, you run the aggregation pipeline to generate the current dayâ€™s summary only. Even after the source collection has increased in size over many years, the time it takes you to bring the summary collection up to date again stays constant. In a real-world scenario, the business might expose a graphical chart showing the changing daily orders trend over the last rolling year. This charting dashboard is not burdened by the cost of periodically regenerating values for all days in the year. There could be hundreds of thousands of orders received per day for real-world retailers, especially large ones. A dayâ€™s summary may take many seconds to generate in that situation. Without an incremental analytics approach, if you need to generate a yearâ€™s worth of daily summaries every time, it would take hours to refresh the business dashboard. Idempotency. If a retailer is aggregating tens of thousands of orders per day, then during end-of-day processing, it may choose to generate 24 hourly summary records rather than a single daily record. This provides the business with finer granularity to understand trends better. As with any software process, when generating hourly results into the summary collection, there is the risk of not fully completing if a system failure occurs. If an in-flight aggregation terminates abnormally, it may not have written all 24 summary collection records. The failure leaves the summary collection in an indeterminate and incomplete state for one of its days. However, this isnâ€™t a problem because of the way the aggregation pipeline uses the $merge stage. When an aggregation fails to complete, it can just be re-run. When re-run, it will regenerate all the results for the day, replacing existing summary records and filling in the missing ones. The aggregation pipeline is idempotent, and you can run it repeatedly without damaging the summary collection. The overall solution is self-healing and naturally tolerant of inadvertently aborted aggregation jobs. Retrospective Changes. Sometimes, an organisation may need to go back and correct records from the past, as illustrated in this example. For instance, a bank may need to fix a past payment record due to a settlement issue that only comes to light weeks later. With the approach used in this example, it is straightforward to re-execute the aggregation pipeline for a prior date, using the updated historical data. This will correctly update the specific dayâ€™s summary data only, to reflect the businessâ€™s current state. 5.æ•°æ®å®‰å…¨(1)ä¸¥æ ¼è§†å›¾ æ‚¨æœ‰ä¸€ä¸ª persons é›†åˆï¼Œå…¶ä¸­ä¸åº”å…è®¸ç‰¹å®šå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæŸ¥çœ‹æ•æ„Ÿä¿¡æ¯ã€‚å› æ­¤ï¼Œæ‚¨å°†ä»…æä¾›ä¸€ä¸ªç­›é€‰åçš„äººå‘˜æ•°æ®å­é›†çš„åªè¯»è§†å›¾ã€‚ åœ¨å®é™…æƒ…å†µä¸­ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ MongoDB çš„åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRole-Based Access Controlï¼ŒRBACï¼‰æ¥é™åˆ¶å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºåªèƒ½è®¿é—®è§†å›¾è€Œä¸æ˜¯åŸå§‹é›†åˆã€‚ æ‚¨å°†ä½¿ç”¨ adults è§†å›¾ä»¥ä¸¤ç§æ–¹å¼é™åˆ¶å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„ä¸ªäººæ•°æ®ï¼š ä»…æ˜¾ç¤º 18 å²åŠä»¥ä¸Šçš„äººï¼ˆé€šè¿‡æ£€æŸ¥æ¯ä¸ªäººçš„dateofbirthå­—æ®µï¼‰ï¼› ä»ç»“æœä¸­æ’é™¤æ¯ä¸ªäººçš„social_security_numå­—æ®µã€‚ æœ¬è´¨ä¸Šï¼Œè¿™æ˜¯å¯¹ MongoDB ä¸­å®ç°ã€Œè®°å½•çº§ï¼ˆrecord-levelï¼‰ã€è®¿é—®æ§åˆ¶çš„ä¸€ä¸ªè¯´æ˜ã€‚ personsé›†åˆåŒ…å«5æ¡è®°å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041&#123; &quot;person_id&quot;: &quot;6392529400&quot;, &quot;firstname&quot;: &quot;Elise&quot;, &quot;lastname&quot;: &quot;Smith&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1972-01-13T09:32:07Z&quot;), &quot;gender&quot;: &quot;FEMALE&quot;, &quot;email&quot;: &quot;elise_smith@myemail.com&quot;, &quot;social_security_num&quot;: &quot;507-28-9805&quot;, &quot;address&quot;: &#123;&quot;number&quot;: 5625, &quot;street&quot;: &quot;Tipa Circle&quot;, &quot;city&quot;: &quot;Wojzinmoj&quot;&#125;,&#125;, &#123; &quot;person_id&quot;: &quot;1723338115&quot;, &quot;firstname&quot;: &quot;Olive&quot;, &quot;lastname&quot;: &quot;Ranieri&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1985-05-12T23:14:30Z&quot;), &quot;gender&quot;: &quot;FEMALE&quot;, &quot;email&quot;: &quot;oranieri@warmmail.com&quot;, &quot;social_security_num&quot;: &quot;618-71-2912&quot;, &quot;address&quot;: &#123;&quot;number&quot;: 9303, &quot;street&quot;: &quot;Mele Circle&quot;, &quot;city&quot;: &quot;Tobihbo&quot;&#125;,&#125;, &#123; &quot;person_id&quot;: &quot;8732762874&quot;, &quot;firstname&quot;: &quot;Toni&quot;, &quot;lastname&quot;: &quot;Jones&quot;, &quot;dateofbirth&quot;: ISODate(&quot;2014-11-23T16:53:56Z&quot;), &quot;gender&quot;: &quot;FEMALE&quot;, &quot;email&quot;: &quot;tj@wheresmyemail.com&quot;, &quot;social_security_num&quot;: &quot;001-10-3488&quot;, &quot;address&quot;: &#123;&quot;number&quot;: 1, &quot;street&quot;: &quot;High Street&quot;, &quot;city&quot;: &quot;Upper Abbeywoodington&quot;&#125;,&#125;, &#123; &quot;person_id&quot;: &quot;7363629563&quot;, &quot;firstname&quot;: &quot;Bert&quot;, &quot;lastname&quot;: &quot;Gooding&quot;, &quot;dateofbirth&quot;: ISODate(&quot;1941-04-07T22:11:52Z&quot;), &quot;gender&quot;: &quot;MALE&quot;, &quot;email&quot;: &quot;bgooding@tepidmail.com&quot;, &quot;social_security_num&quot;: &quot;230-43-7633&quot;, &quot;address&quot;: &#123;&quot;number&quot;: 13, &quot;street&quot;: &quot;Upper Bold Road&quot;, &quot;city&quot;: &quot;Redringtonville&quot;&#125;,&#125;, &#123; &quot;person_id&quot;: &quot;1029648329&quot;, &quot;firstname&quot;: &quot;Sophie&quot;, &quot;lastname&quot;: &quot;Celements&quot;, &quot;dateofbirth&quot;: ISODate(&quot;2013-07-06T17:35:45Z&quot;), &quot;gender&quot;: &quot;FEMALE&quot;, &quot;email&quot;: &quot;sophe@celements.net&quot;, &quot;social_security_num&quot;: &quot;377-30-5364&quot;, &quot;address&quot;: &#123;&quot;number&quot;: 5, &quot;street&quot;: &quot;Innings Close&quot;, &quot;city&quot;: &quot;Basilbridge&quot;&#125;,&#125; èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š123456var pipeline = [ &#123;&quot;$match&quot;: &#123;&quot;$expr&quot;:&#123; &quot;$lt&quot;: [&quot;$dateofbirth&quot;, &#123;&quot;$subtract&quot;: [&quot;$$NOW&quot;, 18*365.25*24*60*60*1000]&#125;] &#125;&#125;&#125;, &#123;&quot;$unset&quot;: [&quot;_id&quot;, &quot;social_security_num&quot;]&#125;, ]; é¦–å…ˆï¼Œåœ¨åˆ›å»ºè§†å›¾ä¹‹å‰æ‰§è¡Œèšåˆæ“ä½œï¼ˆå¹¶è§‚å¯Ÿexplainï¼‰ï¼Œä»¥æµ‹è¯•è¯¥å®šä¹‰çš„èšåˆç®¡é“ã€‚ç„¶ååˆ›å»ºæ–°çš„adultsè§†å›¾ï¼Œå®ƒä¼šåœ¨ä»»ä½•äººæŸ¥è¯¢è§†å›¾æ—¶è‡ªåŠ¨åº”ç”¨èšåˆç®¡é“ã€‚ 123db.persons.aggregate(pipeline);db.persons.explain(&quot;executionStats&quot;).aggregate(pipeline);db.createView(&quot;adults&quot;, &quot;persons&quot;, pipeline); å¯¹åˆ›å»ºçš„è§†å›¾æ‰§è¡Œå¸¸è§„ MQL æŸ¥è¯¢ï¼Œæ²¡æœ‰ä»»ä½•è¿‡æ»¤æ¡ä»¶ï¼Œå¹¶è§‚å¯Ÿå…¶explainï¼›æˆ–è€…åˆ›å»ºçš„è§†å›¾æ‰§è¡Œ MQL æŸ¥è¯¢ï¼ŒæŒ‡å®šè¿‡æ»¤å™¨ä¸ºä»…è¿”å›å¥³æ€§æˆå¹´äººï¼Œè§‚å¯Ÿexplainæ³¨æ„æ€§åˆ«è¿‡æ»¤å™¨genderæ˜¯å¦‚ä½•å½±å“å®ƒçš„ã€‚ 1234567// å¸¸è§„MQLæŸ¥è¯¢db.adults.find();db.adults.explain(&quot;executionStats&quot;).find();// å¸¦æ€§åˆ«è¿‡æ»¤å™¨çš„MQLæŸ¥è¯¢db.adults.find(&#123;&quot;gender&quot;: &quot;FEMALE&quot;&#125;);db.adults.explain(&quot;executionStats&quot;).find(&#123;&quot;gender&quot;: &quot;FEMALE&quot;&#125;); å¯¹äºaggregate()å’Œfind()å‘½ä»¤åœ¨ è§†å›¾ ä¸Šæ‰§è¡Œçš„ç»“æœåº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œéƒ½è¿”å›3ä¸ªæ–‡æ¡£ï¼Œè¡¨ç¤ºè¶…è¿‡18å²çš„3ä¸ªäººï¼Œä½†æ˜¯æ²¡æœ‰æ˜¾ç¤ºä»–ä»¬å®é™…çš„å‡ºç”Ÿæ—¥æœŸï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å¸¦æœ‰&quot;gender&quot;: &quot;FEMALE&quot;è¿‡æ»¤å™¨çš„find()å‘½ä»¤åœ¨ è§†å›¾ ä¸Šè¿è¡Œçš„ç»“æœåº”è¯¥ä»…æœ‰2æ¡ å¥³æ€§ è®°å½•ï¼Œå› ä¸ºç”·æ€§è®°å½•å·²è¢«æ’é™¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š Expr &amp; Indexes. The â€œNOWâ€ system variable used here returns the current system date-time. However, you can only access this system variable via an aggregation expression and not directly via the regular MongoDB query syntax used by MQL and $match. You must wrap an expression using $$NOW inside an $expr operator. As described in the section Restrictions When Using Expressions in an earlier chapter, if you use an $expr query operator to perform a range comparison, you canâ€™t make use of an index in versions of MongoDB earlier then 5.0. Therefore, in this example, unless you use MongoDB 5.0, the aggregation will not take advantage of an index on dateofbirth. For a view, because you specify the pipeline earlier than it is ever run, you cannot obtain the current date-time at runtime by other means. View Finds &amp; Indexes. Even for versions of MongoDB before 5.0, the explain plan for the gender query run against the view shows an index has been used (the index defined for the gender field). At runtime, a view is essentially just an aggregation pipeline defined â€œahead of timeâ€. When db.adults.find(&#123;&quot;gender&quot;: &quot;FEMALE&quot;&#125;) is executed, the database engine dynamically appends a new $match stage to the end of the pipeline for the gender match. It then optimises the pipeline by moving the new $match stage to the pipelineâ€™s start. Finally, it adds the filter extracted from the new $match stage to the aggregationâ€™s initial query, and hence it can then leverage an index containing the gender field. The following two excerpts, from an explain plan from a MongoDB version before 5.0, illustrate how the filter on gender and the filter on dateofbirth combine at runtime and how the index for gender is used to avoid a full collection scan: 123456789101112&#x27;$cursor&#x27;: &#123; queryPlanner: &#123; plannerVersion: 1, namespace: &#x27;book-restricted-view.persons&#x27;, indexFilterSet: false, parsedQuery: &#123; &#x27;$and&#x27;: [ &#123; gender: &#123; &#x27;$eq&#x27;: &#x27;FEMALE&#x27; &#125; &#125;, &#123; &#x27;$expr&#x27;: &#123; &#x27;$lt&#x27;: [ &#x27;$dateofbirth&#x27;, &#123; &#x27;$subtract&#x27;: [ &#x27;$$NOW&#x27;, &#123; &#x27;$const&#x27;: 568036800000 &#125; ] ... 1234567inputStage: &#123; stage: &#x27;IXSCAN&#x27;, keyPattern: &#123; gender: 1 &#125;, indexName: &#x27;gender_1&#x27;, direction: &#x27;forward&#x27;, indexBounds: &#123; gender: [ &#x27;[&quot;FEMALE&quot;, &quot;FEMALE&quot;]&#x27; ] &#125;&#125; In MongoDB 5.0, the explain plan will show the aggregation runtime executing the pipeline more optimally by entirely using the compound index based on both the fields gender and dateofbirth. Further Reading. The ability for find operations on a view to automatically push filters into the viewâ€™s aggregation pipeline, and then be further optimised, is described in the blog post: Is Querying A MongoDB View Optimised? (2)éšè—æ•æ„Ÿå­—æ®µç”±äºä½¿ç”¨$randè¿ç®—ç¬¦ï¼Œè¦æ±‚MongoDBç‰ˆæœ¬æœ€ä½ä¸º 4.4ã€‚ æ‚¨æƒ³å¯¹ ä¿¡ç”¨å¡ä»˜æ¬¾ é›†åˆçš„æ•æ„Ÿå­—æ®µæ‰§è¡Œä¸å¯é€†å±è”½ï¼Œå‡†å¤‡å°†è¾“å‡ºæ•°æ®é›†æä¾›ç»™ç¬¬ 3 æ–¹è¿›è¡Œåˆ†æï¼Œè€Œä¸ä¼šå°†æ•æ„Ÿä¿¡æ¯æš´éœ²ç»™ç¬¬ 3 æ–¹ã€‚ æ‚¨éœ€è¦å¯¹ä»˜æ¬¾å­—æ®µè¿›è¡Œçš„å…·ä½“æ›´æ”¹æ˜¯ï¼š éƒ¨åˆ†æ··æ·†æŒå¡äººå§“åï¼› æ··æ·†å¡å·çš„å‰ 12 ä½æ•°å­—ï¼Œåªä¿ç•™æœ€å 4 ä½æ•°å­—ï¼› é€šè¿‡æ·»åŠ æˆ–å‡å»æœ€å¤š 30 å¤©ï¼ˆçº¦ 1 ä¸ªæœˆï¼‰çš„éšæœºé‡‘é¢æ¥è°ƒæ•´å¡çš„åˆ°æœŸæ—¶é—´ï¼› ç”¨ä¸€ç»„éšæœºçš„ 3 ä½æ•°å­—æ›¿æ¢å¡çš„ 3 ä½å®‰å…¨ç ï¼› é€šè¿‡æ·»åŠ æˆ–å‡å»æœ€å¤šä¸ºåŸå§‹é‡‘é¢ 10% çš„éšæœºé‡‘é¢æ¥è°ƒæ•´äº¤æ˜“é‡‘é¢ï¼› å°†å¤§çº¦ 20% çš„è®°å½•ä¸­reportedå­—æ®µçš„å¸ƒå°”å€¼æ›´æ”¹ä¸ºç›¸åå€¼ï¼› å¦‚æœåµŒå¥—å­æ–‡æ¡£customer_infoçš„categoryå­—æ®µä¸º RESTRICTED ï¼Œåˆ™æ’é™¤æ•´ä¸ªå­æ–‡æ¡£customer_infoã€‚ paymentsé›†åˆåŒ…å«2æ¡ä¿¡ç”¨å¡ä»˜æ¬¾è®°å½•çš„æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«æ•æ„Ÿæ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 1234567891011121314151617181920212223&#123; &quot;card_name&quot;: &quot;Mrs. Jane A. Doe&quot;, &quot;card_num&quot;: &quot;1234567890123456&quot;, &quot;card_expiry&quot;: ISODate(&quot;2023-08-31T23:59:59Z&quot;), &quot;card_sec_code&quot;: &quot;123&quot;, &quot;card_type&quot;: &quot;CREDIT&quot;, &quot;transaction_id&quot;: &quot;eb1bd77836e8713656d9bf2debba8900&quot;, &quot;transaction_date&quot;: ISODate(&quot;2021-01-13T09:32:07Z&quot;), &quot;transaction_amount&quot;: NumberDecimal(&quot;501.98&quot;), &quot;reported&quot;: false, &quot;customer_info&quot;: &#123;&quot;category&quot;: &quot;RESTRICTED&quot;, &quot;rating&quot;: 89, &quot;risk&quot;: 3,&#125;,&#125;, &#123; &quot;card_name&quot;: &quot;Jim Smith&quot;, &quot;card_num&quot;: &quot;9876543210987654&quot;, &quot;card_expiry&quot;: ISODate(&quot;2022-12-31T23:59:59Z&quot;), &quot;card_sec_code&quot;: &quot;987&quot;, &quot;card_type&quot;: &quot;DEBIT&quot;, &quot;transaction_id&quot;: &quot;634c416a6fbcf060bb0ba90c4ad94f60&quot;, &quot;transaction_date&quot;: ISODate(&quot;2020-11-24T19:25:57Z&quot;), &quot;transaction_amount&quot;: NumberDecimal(&quot;64.01&quot;), &quot;reported&quot;: true, &quot;customer_info&quot;: &#123;&quot;category&quot;: &quot;NORMAL&quot;, &quot;rating&quot;: 78, &quot;risk&quot;: 55,&#125;,&#125; èšåˆç®¡é“å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425var pipeline = [ &#123;&quot;$set&quot;: &#123; &quot;card_name&quot;: &#123;&quot;$regexFind&quot;: &#123;&quot;input&quot;: &quot;$card_name&quot;, &quot;regex&quot;: /(\\S+)$/&#125;&#125;, &quot;card_num&quot;: &#123;&quot;$concat&quot;: [&quot;XXXXXXXXXXXX&quot;, &#123;&quot;$substrCP&quot;: [&quot;$card_num&quot;, 12, 4]&#125;,]&#125;, &quot;card_expiry&quot;: &#123;&quot;$add&quot;: [&quot;$card_expiry&quot;, &#123;&quot;$floor&quot;: &#123;&quot;$multiply&quot;: [&#123;&quot;$subtract&quot;: [&#123;&quot;$rand&quot;: &#123;&#125;&#125;, 0.5]&#125;, 2*30*24*60*60*1000]&#125;&#125;,]&#125;, &quot;card_sec_code&quot;: &#123;&quot;$concat&quot;: [ &#123;&quot;$toString&quot;: &#123;&quot;$floor&quot;: &#123;&quot;$multiply&quot;: [&#123;&quot;$rand&quot;: &#123;&#125;&#125;, 10]&#125;&#125;&#125;, &#123;&quot;$toString&quot;: &#123;&quot;$floor&quot;: &#123;&quot;$multiply&quot;: [&#123;&quot;$rand&quot;: &#123;&#125;&#125;, 10]&#125;&#125;&#125;, &#123;&quot;$toString&quot;: &#123;&quot;$floor&quot;: &#123;&quot;$multiply&quot;: [&#123;&quot;$rand&quot;: &#123;&#125;&#125;, 10]&#125;&#125;&#125;, ]&#125;, &quot;transaction_amount&quot;: &#123;&quot;$add&quot;: [&quot;$transaction_amount&quot;, &#123;&quot;$multiply&quot;: [&#123;&quot;$subtract&quot;: [&#123;&quot;$rand&quot;: &#123;&#125;&#125;, 0.5]&#125;, 0.2, &quot;$transaction_amount&quot;]&#125;,]&#125;, &quot;reported&quot;: &#123;&quot;$cond&quot;: &#123; &quot;if&quot;: &#123;&quot;$lte&quot;: [&#123;&quot;$rand&quot;: &#123;&#125;&#125;, 0.8]&#125;, &quot;then&quot;: &quot;$reported&quot;, &quot;else&quot;: &#123;&quot;$not&quot;: [&quot;$reported&quot;]&#125;, &#125;&#125;, &quot;customer_info&quot;: &#123;&quot;$cond&quot;: &#123; &quot;if&quot;: &#123;&quot;$eq&quot;: [&quot;$customer_info.category&quot;, &quot;RESTRICTED&quot;]&#125;, &quot;then&quot;: &quot;$$REMOVE&quot;, &quot;else&quot;: &quot;$customer_info&quot;, &#125;&#125;, &quot;_id&quot;: &quot;$$REMOVE&quot;, &#125;&#125;, &#123;&quot;$set&quot;: &#123;&quot;card_name&quot;: &#123;&quot;$concat&quot;: [&quot;Mx. Xxx &quot;, &#123;&quot;$ifNull&quot;: [&quot;$card_name.match&quot;, &quot;Anonymous&quot;]&#125;]&#125;,&#125;&#125;,]; æ‰§è¡Œèšåˆæ“ä½œååº”è¯¥è¿”å›ä¸æºæ–‡æ¡£å¯¹åº”çš„2ä¸ªæ–‡æ¡£ï¼Œä½†å®ƒä»¬çš„è®¸å¤šå­—æ®µéƒ½è¢«ç¼–è¾‘å’Œæ··æ·†äº†ï¼Œå¹¶ä¸”æ ‡è®°ä¸ºRESTRICTEDçš„customer_infoå­—æ®µè¢«çœç•¥äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ Targeted Redaction. The pipeline uses a $cond operator to return the $$REMOVE marker variable if the category field is equal to RESTRICTED. This informs the aggregation engine to exclude the whole customer_info sub-document from the stageâ€™s output for the record. Alternatively, the pipeline could have used a $redact stage to achieve the same. However, $redact typically has to perform more processing work due to needing to check every field in the document. Hence, if a pipeline is only to redact out one specific sub-document, use the approach outlined in this example. Regular Expression. For masking the card_name field, a regular expression operator is used to extract the last word of the fieldâ€™s original value. $regexFind returns metadata into the stageâ€™s output records, indicating if the match succeeded and what the matched value is. Therefore, an additional $set stage is required later in the pipeline to extract the actual matched word from this metadata and prefix it with some hard-coded text. Meaningful Insight. Even though the pipeline is irreversibly obfuscating fields, it doesnâ€™t mean that the masked data is useless for performing analytics to gain insight. The pipeline masks some fields by fluctuating the original values by a small but limited random percentage (e.g. card_expiry, transaction_amount), rather than replacing them with completely random values (e.g. card_sec_code). In such cases, if the input data set is sufficiently large, then minor variances will be equalled out. For the fields that are only varied slightly, users can derive similar trends and patterns from analysing the masked data as they would the original data. Further Reading. This example is based on the output of two blog posts: 1) MongoDB Irreversible Data Masking, and 2) MongoDB Reversible Data Masking. 6.æ—¶é—´åºåˆ—(1)IOTç”µåŠ›æ¶ˆè€—ç”±äºä½¿ç”¨æ—¶é—´åºåˆ—é›†åˆã€$setWindowFieldsé˜¶æ®µå’Œ$integralè¿ç®—ç¬¦ï¼Œè¦æ±‚MongoDBç‰ˆæœ¬æœ€ä½ä¸º 5.0ã€‚ æ‚¨æ­£åœ¨ç›‘æ§å·¥ä¸šå›­åŒºä¸¤æ ‹å»ºç­‘ä¸­è¿è¡Œçš„å„ç§ç©ºè°ƒæœºç»„ã€‚æ¯ 30 åˆ†é’Ÿï¼Œæ¯ä¸ªæœºç»„ä¸­çš„ä¸€ä¸ªè®¾å¤‡å°†è¯¥æœºç»„å½“å‰çš„åŠŸè€—è¯»æ•°å‘é€å›åŸºåœ°ï¼Œä¸­å¤®æ•°æ®åº“å°†ä¿ç•™è¯¥è¯»æ•°ã€‚ æ‚¨æƒ³åˆ†ææ­¤æ•°æ®ï¼Œä»¥æŸ¥çœ‹æ¯ä¸ªç©ºè°ƒæœºç»„åœ¨è¿‡å»ä¸€å°æ—¶å†…é’ˆå¯¹æ”¶åˆ°çš„æ¯ä¸ªè¯»æ•°æ‰€æ¶ˆè€—çš„èƒ½é‡ï¼ˆä»¥åƒç“¦æ—¶ (kWh) ä¸ºå•ä½ï¼‰ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜æƒ³è®¡ç®—æ¯ä¸ªå»ºç­‘ç‰©ä¸­æ‰€æœ‰ç©ºè°ƒæœºç»„æ¯å°æ—¶æ¶ˆè€—çš„æ€»èƒ½é‡ã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªdevice_readingsé›†åˆï¼ŒåŒ…å«äº†ä¸¤æ ‹ä¸åŒå»ºç­‘ç‰©ä¸€å¤©å†…çš„3ä¸ªå°æ—¶ä¹‹é—´çš„è®¾å¤‡è¯»æ•°ï¼Œä½¿ç”¨ã€Œæ—¶é—´åºåˆ—é›†åˆã€è¿›è¡Œä¼˜åŒ–å¤„ç†ï¼š123db.createCollection(&quot;device_readings&quot;, &#123;&quot;timeseries&quot;: &#123;&quot;timeField&quot;: &quot;timestamp&quot;, &quot;metaField&quot;: &quot;deviceID&quot;, &quot;granularity&quot;: &quot;minutes&quot;&#125;&#125; );æ³¨æ„ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥è¢«æ³¨é‡Šæ‰ï¼Œå®Œæ•´çš„ä¾‹å­ä»ç„¶æœ‰æ•ˆã€‚device_readingsé›†åˆçš„18æ¡æ•°æ®å¦‚ä¸‹ï¼Œåˆ†åˆ«ä¸ºABCå’ŒXYZä¸¤æ ‹å»ºç­‘ç‰©çš„111ã€222å’Œ666ä¸‰å°è®¾å¤‡åœ¨11:29amã€11:59amã€12:29pmã€12:59pmã€13:29pmã€13:59pmçš„ä¸‰ä¸ªå°æ—¶6ä¸ªæ—¶æ®µçš„ç”µè¡¨è¯»æ•°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-111&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T11:29:59Z&quot;), &quot;powerKilowatts&quot;: 8, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-222&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T11:29:59Z&quot;), &quot;powerKilowatts&quot;: 7, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-XYZ&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-666&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T11:29:59Z&quot;), &quot;powerKilowatts&quot;: 10, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-222&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T11:59:59Z&quot;), &quot;powerKilowatts&quot;: 9, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-111&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T11:59:59Z&quot;), &quot;powerKilowatts&quot;: 8, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-XYZ&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-666&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T11:59:59Z&quot;), &quot;powerKilowatts&quot;: 11, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-222&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T12:29:59Z&quot;), &quot;powerKilowatts&quot;: 9, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-111&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T12:29:59Z&quot;), &quot;powerKilowatts&quot;: 9, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-XYZ&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-666&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T12:29:59Z&quot;), &quot;powerKilowatts&quot;: 10, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-222&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T12:59:59Z&quot;), &quot;powerKilowatts&quot;: 8, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-111&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T12:59:59Z&quot;), &quot;powerKilowatts&quot;: 8, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-XYZ&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-666&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T12:59:59Z&quot;), &quot;powerKilowatts&quot;: 11, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-222&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T13:29:59Z&quot;), &quot;powerKilowatts&quot;: 9, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-111&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T13:29:59Z&quot;), &quot;powerKilowatts&quot;: 9, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-XYZ&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-666&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T13:29:59Z&quot;), &quot;powerKilowatts&quot;: 10, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-222&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T13:59:59Z&quot;), &quot;powerKilowatts&quot;: 8, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-ABC&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-111&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T13:59:59Z&quot;), &quot;powerKilowatts&quot;: 8, &#125;, &#123; &quot;buildingID&quot;: &quot;Building-XYZ&quot;, &quot;deviceID&quot;: &quot;UltraAirCon-666&quot;, &quot;timestamp&quot;: ISODate(&quot;2021-07-03T13:59:59Z&quot;), &quot;powerKilowatts&quot;: 11, &#125; ä¸ºäº†è®¡ç®—ç©ºè°ƒæœºç»„åœ¨è¿‡å»ä¸€å°æ—¶å†…é’ˆå¯¹æ”¶åˆ°çš„æ¯ä¸ªè¯»æ•°æ‰€æ¶ˆè€—çš„èƒ½é‡ï¼Œå®šä¹‰ä¸€ä¸ªã€ŒåŸå§‹è¯»æ•°ã€çš„èšåˆç®¡é“å¦‚ä¸‹ï¼š 12345678910var pipelineRawReadings = [ &#123;&quot;$setWindowFields&quot;: &#123; &quot;partitionBy&quot;: &quot;$deviceID&quot;, &quot;sortBy&quot;: &#123;&quot;timestamp&quot;: 1&#125;, &quot;output&quot;: &#123;&quot;consumedKilowattHours&quot;: &#123; &quot;$integral&quot;: &#123;&quot;input&quot;: &quot;$powerKilowatts&quot;, &quot;unit&quot;: &quot;hour&quot;,&#125;, &quot;window&quot;: &#123;&quot;range&quot;: [-1, &quot;current&quot;],&quot;unit&quot;: &quot;hour&quot;,&#125;, &#125;&#125;, &#125;&#125;,]; ä¸ºäº†è®¡ç®—æ¯ä¸ªå»ºç­‘ç‰©ä¸­æ‰€æœ‰ç©ºè°ƒæœºç»„æ¯å°æ—¶æ¶ˆè€—çš„æ€»èƒ½é‡ï¼Œå®šä¹‰ä¸€ä¸ªã€Œå»ºç­‘ç‰©æ¦‚è¦ã€çš„èšåˆç®¡é“å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728var pipelineBuildingsSummary = [ &#123;&quot;$setWindowFields&quot;: &#123; &quot;partitionBy&quot;: &quot;$deviceID&quot;, &quot;sortBy&quot;: &#123;&quot;timestamp&quot;: 1&#125;, &quot;output&quot;: &#123;&quot;consumedKilowattHours&quot;: &#123; &quot;$integral&quot;: &#123;&quot;input&quot;: &quot;$powerKilowatts&quot;, &quot;unit&quot;: &quot;hour&quot;,&#125;, &quot;window&quot;: &#123;&quot;range&quot;: [-1, &quot;current&quot;], &quot;unit&quot;: &quot;hour&quot;,&#125;, &#125;&#125;, &#125;&#125;, &#123;&quot;$sort&quot;: &#123;&quot;deviceID&quot;: 1, &quot;timestamp&quot;: 1&#125;&#125;, &#123;&quot;$group&quot;: &#123; &quot;_id&quot;: &#123; &quot;deviceID&quot;: &quot;$deviceID&quot;, &quot;date&quot;: &#123;&quot;$dateTrunc&quot;: &#123;&quot;date&quot;: &quot;$timestamp&quot;,&quot;unit&quot;: &quot;hour&quot;&#125;&#125;, &#125;, &quot;buildingID&quot;: &#123;&quot;$last&quot;: &quot;$buildingID&quot;&#125;, &quot;consumedKilowattHours&quot;: &#123;&quot;$last&quot;: &quot;$consumedKilowattHours&quot;&#125;, &#125;&#125;, &#123;&quot;$group&quot;: &#123; &quot;_id&quot;: &#123; &quot;buildingID&quot;: &quot;$buildingID&quot;, &quot;dayHour&quot;: &#123;&quot;$dateToString&quot;: &#123;&quot;format&quot;: &quot;%Y-%m-%d %H&quot;, &quot;date&quot;: &quot;$_id.date&quot;&#125;&#125;, &#125;, &quot;consumedKilowattHours&quot;: &#123;&quot;$sum&quot;: &quot;$consumedKilowattHours&quot;&#125;, &#125;&#125;, &#123;&quot;$sort&quot;: &#123;&quot;_id.buildingID&quot;: 1, &quot;_id.dayHour&quot;: 1&#125;&#125;, &#123;&quot;$set&quot;: &#123;&quot;buildingID&quot;: &quot;$_id.buildingID&quot;, &quot;dayHour&quot;: &quot;$_id.dayHour&quot;, &quot;_id&quot;: &quot;$$REMOVE&quot;&#125;&#125;, ]; æ‰§è¡Œã€ŒåŸå§‹è¯»æ•°ã€çš„èšåˆç®¡é“pipelineRawReadingsï¼Œæ¥è®¡ç®—ç©ºè°ƒæœºç»„åœ¨è¿‡å»ä¸€å°æ—¶å†…é’ˆå¯¹æ”¶åˆ°çš„æ¯ä¸ªè¯»æ•°æ‰€æ¶ˆè€—çš„èƒ½é‡ï¼Œè¿”å›çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼ˆç®€æ´èµ·è§ï¼Œçœç•¥_idå­—æ®µï¼‰ï¼š æ‰§è¡Œã€Œå»ºç­‘ç‰©æ¦‚è¦ã€çš„èšåˆç®¡é“pipelineBuildingsSummaryï¼Œæ¥è®¡ç®—æ¯ä¸ªå»ºç­‘ç‰©ä¸­æ‰€æœ‰ç©ºè°ƒæœºç»„æ¯å°æ—¶æ¶ˆè€—çš„æ€»èƒ½é‡ï¼Œè¿”å›çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š Integral Trapezoidal Rule. As documented in the MongoDB Manual, $integral â€œreturns an approximation for the mathematical integral value, which is calculated using the trapezoidal ruleâ€. For non-mathematicians, this explanation may be hard to understand. You may find it easier to comprehend the behaviour of the $integral operator by studying the illustration below and the explanation that follows: Essentially the trapezoidal rule determines the area of a region between two points under a graph by matching the region with a trapezoid shape that approximately fits this region and then calculating the area of this trapezoid. You can see a set of points on the illustrated graph with the matched trapezoid shape underneath each pair of points. For this IOT Power Consumption example, the points on the graph represent an air-conditioning unitâ€™s power readings captured every 30 minutes. The Y-axis is the power rate in Kilowatts, and the X-axis is time to indicate when the device captured each reading. Consequently, for this example, the energy consumed by the air-conditioning unit for a given hourâ€™s span is the area of the hourâ€™s specific section under the graph. This sectionâ€™s area is approximately the area of the two trapezoids shown. Using the $integral operator for the window of time you define in the $setWindowFields stage, you are asking for this approximate area to be calculated, which is the Kilowatt-hours consumed by the air-conditioning unit in one hour. Window Range Definition. For every captured document representing a device reading, this exampleâ€™s pipeline identifies a window of 1-hour of previous documents relative to this current document. The pipeline uses this set of documents as the input for the $integral operator. It defines this window range in the setting range: [-1, &quot;current&quot;], unit: &quot;hour&quot;. The pipeline assigns the output of the $integral calculation to a new field called consumedKilowattHours. One Hour Range Vs Hours Output. The fact that the $setWindowFields stage in the pipeline defines unit: &quot;hour&quot; in two places may appear redundant at face value. However, this is not the case, and each serves a different purpose. As described in the previous observation, unit: &quot;hour&quot; for the &quot;window&quot; option helps dictate the size of the window of the previous number of documents to analyse. However, unit: &quot;hour&quot; for the $integral operator defines that the output should be in hours (â€œKilowatt-hoursâ€ in this example), yielding the result consumedKilowattHours: 8.5 for one of the processed device readings. However, if the pipeline defined this $integral parameter to be &quot;unit&quot;: &quot;minute&quot; instead, which is perfectly valid, the output value would be 510 Kilowatt-minutes (i.e. 8.5 x 60 minutes). Optional Time Series Collection. This example uses a time series collection to store sequences of device measurements over time efficiently. Employing a time series collection is optional, as shown in the NOTE Javascript comment in the example code. The aggregation pipeline does not need to be changed and achieves the same output if you use a regular collection instead. However, when dealing with large data sets, the aggregation will complete quicker by employing a time series collection. Index for Partition By &amp; Sort By. In this example, you define the index &#123;deviceID: 1, timestamp: 1&#125; to optimise the use of the combination of the partitionBy and sortBy parameters in the $setWindowFields stage. This means that the aggregation runtime does not have to perform a slow in-memory sort based on these two fields, and it also avoids the pipeline stage memory limit of 100 MB. It is beneficial to use this index regardless of whether you employ a regular collection or adopt a time series collection.","categories":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://hwame.top/categories/MongoDB/"}],"tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://hwame.top/tags/MongoDB/"}]},{"title":"MongoDBèšåˆæ“ä½œ","slug":"mongodb-aggregation-operation","date":"2021-08-06T13:37:49.000Z","updated":"2021-08-10T16:15:06.000Z","comments":true,"path":"20210806/mongodb-aggregation-operation.html","link":"","permalink":"https://hwame.top/20210806/mongodb-aggregation-operation.html","excerpt":"æ‘˜è¦ï¼š7.26~8.6å‚åŠ äº†ä¸ºæœŸ12å¤©çš„åŸ¹è®­ï¼ŒMongoDBæœ€é‡è¦çš„èšåˆä¹Ÿè¿Ÿè¿Ÿæœªèƒ½æ›´æ–°ã€‚","text":"æ‘˜è¦ï¼š7.26~8.6å‚åŠ äº†ä¸ºæœŸ12å¤©çš„åŸ¹è®­ï¼ŒMongoDBæœ€é‡è¦çš„èšåˆä¹Ÿè¿Ÿè¿Ÿæœªèƒ½æ›´æ–°ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20210806/mongodb-aggregation-operation.htmlå‚è€ƒèµ„æ–™ï¼š Aggregation: Version 5.0 latest Practical MongoDB Aggregationsï¼ˆby Paul Doneï¼‰ èšåˆæ“ä½œMongDDBä¸­é›†åˆæ“ä½œï¼ˆaggregationï¼‰å¤„ç†æ•°æ®è®°å½•å¹¶è¿”å›è®¡ç®—ç»“æœï¼Œèšåˆæ“ä½œå°†æ¥è‡ªå¤šä¸ªæ–‡æ¡£çš„å€¼ç»“åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸”å¯ä»¥å¯¹åˆ†ç»„æ•°æ®æ‰§è¡Œå„ç§æ“ä½œä»¥è¿”å›å•ä¸ªç»“æœã€‚ MongoDBæä¾›äº†ä¸‰ç§æ‰§è¡Œèšåˆæ“ä½œçš„æ–¹æ³•ï¼šèšåˆç®¡é“ã€æœ€å¸¸ç”¨ã€‘ã€map-reduceå‡½æ•° å’Œ å•ä¸€ç”¨é€”èšåˆæ–¹æ³•ã€‚ èšåˆæ“ä½œæ–¹æ³•ï¼šdb.collection.aggregate(pipeline=&lt;arr&gt;, options=[doc])ã€‚ pipelineï¼Œä¸€ç³»åˆ—æ•°æ®èšåˆã€Œæ“ä½œoperationã€æˆ–ã€Œé˜¶æ®µstageã€ï¼Œè¯¦è§èšåˆç®¡é“è¿ç®—ç¬¦ã€‚ æˆ‘çš„ç†è§£æ˜¯ï¼Œpipelineæ˜¯ç”±ã€Œé˜¶æ®µstageï¼ˆå°†operationä¹Ÿç§°stageæ›´æ˜“äºç†è§£ï¼‰ã€ç»„æˆçš„æ•°ç»„ï¼Œå®˜æ–¹æ–‡æ¡£æè¿°ä¸è´´åˆ‡ / æˆ–è€…è¯´ç¿»è¯‘å­—é¢æ„æ€è¿‡äºè¿‘ä¼¼ï¼Œè€Œä¸”å®˜æ–¹æ–‡æ¡£éƒ½åœ¨https://docs.mongodb.com/manual/reference/operator/aggregation/*åŒä¸€è·¯ç”±ä¸‹ï¼Œæ²¡æœ‰åŒºåˆ†ã€Œaggregation-stageã€å’Œã€Œaggregation-operatorã€ã€‚ A sequence of data aggregation oparotions or stages.ç†è§£ä¸ºstageï¼Œoperationå’Œoperatorçš„åŒºåˆ«å¯ä»¥æ„ä¼šã€‚ åœ¨ç¦ç”¨optionså‚æ•°æ—¶ï¼Œå¯ä»¥å°†ã€Œç®¡é“é˜¶æ®µã€ä½œä¸ºå•ç‹¬çš„å‚æ•°è€Œä¸æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ ã€‚ é€šå¸¸ã€Œèšåˆç®¡é“ã€åŒ…æ‹¬äº†ã€Œèšåˆç®¡é“ é˜¶æ®µstageã€ å’Œã€Œèšåˆç®¡é“ æ“ä½œç¬¦operatorã€ã€‚ ç®¡é“é˜¶æ®µhttps://docs.mongodb.com/manual/aggregation/#aggregation-pipelineï¼š æœ€åŸºæœ¬çš„ ç®¡é“é˜¶æ®µ æä¾›ã€Œè¿‡æ»¤å™¨ï¼ˆä¸æŸ¥è¯¢ç±»ä¼¼ï¼‰ã€å’Œã€Œæ–‡æ¡£è½¬æ¢ï¼ˆä¿®æ”¹è¾“å‡ºå½¢å¼ï¼‰ã€ã€‚ å…¶ä»– ç®¡é“æ“ä½œ æä¾›å·¥å…·ï¼Œç”¨äºâ‘ æŒ‰å­—æ®µå¯¹æ–‡æ¡£è¿›è¡Œåˆ†ç»„å’Œæ’åºï¼Œâ‘¡èšåˆæ•°ç»„å†…å®¹æˆ–æ–‡æ¡£æ•°ç»„ã€‚ æ­¤å¤–ï¼Œ ç®¡é“é˜¶æ®µ å¯ä»¥ä½¿ç”¨ã€Œè¿ç®—ç¬¦ï¼ˆæ“ä½œç¬¦ï¼‰operatorã€æ‰§è¡Œè¯¸å¦‚è®¡ç®—å¹³å‡å€¼æˆ–è¿æ¥å­—ç¬¦ä¸²ä¹‹ç±»çš„ä»»åŠ¡ã€‚ ç®¡é“æ“ä½œç¬¦ã€‚ Accumulators used in GROUP stage aggregateä¾‹å­$groupå½“ä¸­çš„{$sum: 1}ï¼ŒæŒ‰ç…§$groupçš„æ¡ä»¶ï¼Œæ»¡è¶³ä¸€æ¡å°±åŠ 1ã€‚å¦‚ä¸‹ä¾‹ï¼Œä¹Ÿå°±æ˜¯countæ˜¯$groupä¸­ï¼Œæ¯ç§zipcodeçš„æ•°é‡ï¼š123456db.restaurants.aggregate([ &#123;$match: &#123;&quot;borough&quot;: &quot;Queens&quot;, &quot;cuisine&quot;: &quot;Brazilian&quot;&#125;&#125; &#123;$group: &#123;&quot;_id&quot;: &quot;$address.zipcode&quot;, &quot;count&quot;: &#123;$sum: 1&#125;&#125;&#125;]); &#123;$sum: 1&#125;ç­‰ä»·äº&#123;$count: &#123;&#125;&#125;ã€‚ 1234567SELECT COUNT(*)FROM (SELECT cust_id, ord_date FROM orders GROUP BY cust_id, ord_date) as DerivedTable","categories":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://hwame.top/categories/MongoDB/"}],"tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://hwame.top/tags/MongoDB/"}]},{"title":"MongoDBå¢åˆ æ”¹æŸ¥","slug":"mongodb-crud-operations","date":"2021-07-16T00:37:42.000Z","updated":"2021-07-24T18:02:28.000Z","comments":true,"path":"20210716/mongodb-crud-operations.html","link":"","permalink":"https://hwame.top/20210716/mongodb-crud-operations.html","excerpt":"æ‘˜è¦ï¼šMongoDBå­¦ä¹ è¿‡ç¨‹ä¸­å¯¹CRUDç”¨æ³•çš„è®°å½•ï¼Œæ¯•ç«Ÿå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚","text":"æ‘˜è¦ï¼šMongoDBå­¦ä¹ è¿‡ç¨‹ä¸­å¯¹CRUDç”¨æ³•çš„è®°å½•ï¼Œæ¯•ç«Ÿå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20210716/mongodb-crud-operations.htmlå‚è€ƒèµ„æ–™ï¼šMongoDB CRUD Operations: Version 5.0 latest 1.æ¦‚è¿°1.1.å†™ä½œçš„åŠ¨æœºç”±äºå·¥ä½œéœ€è¦ï¼Œæ¡èµ·äº†é—å¿˜å¤šæ—¶çš„MongoDBï¼Œé¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯4.2ç‰ˆæœ¬ï¼Œæ°å¥½æœ¬åœ°ç”µè„‘ä¸Šå¤šå¹´å‰è£…çš„ä¹Ÿæ˜¯4.2ç‰ˆæœ¬ï¼Œå¦‚ä»Šå®˜æ–¹æ–‡æ¡£éƒ½å·²ç»æ›´æ–°åˆ°5.0äº†ã€‚ ç›¸æ¯”æ—§ç‰ˆæœ¬ï¼Œ5.0å¢åŠ äº†ä¸€äº›æ–°åŠŸèƒ½ï¼Œæ¯”å¦‚èšåˆé‡Œçš„ä¸€äº›stageï¼Œ4.2ç‰ˆæœ¬ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„ç‰ˆæœ¬å§ï¼ˆå°±å¥½æ¯”mysqlçš„5.7å’Œ8.0ï¼‰ã€‚ å†³å®šè®°å½•çš„å¦ä¸€ä¸ªåŠ¨æœºï¼Œåˆ™æ˜¯ç½‘ä¸Šçš„æ•™ç¨‹ä¸å¤Ÿå…¨é¢ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿæ²¡æœ‰ä¸­æ–‡ç‰ˆçš„ï¼Œæœ‰äº›ç¿»è¯‘å¾ˆç”Ÿç¡¬ä¸”ä¸å‡†ç¡®ï¼š ä¹¦æ ˆç½‘ è‹±æ–‡ç‰ˆæ•™ç¨‹MongoDB v4.2 Manualï¼Œä¸å®˜æ–¹æ–‡æ¡£æ— å¼‚ã€‚ MongoDB (v3.4) ä¸­æ–‡æ‰‹å†Œç¿»è¯‘ä¸å…¨ï¼Œå¾ˆå¤šç« èŠ‚ä»ç„¶æ˜¯è‹±æ–‡ã€‚ MongoDBå…¥é—¨æŒ‡å—å’ŒMongoDBå­¦ä¹ æ€»ç»“è¿‡äºç®€æ´ã€ä¸å¤Ÿå…¨é¢ã€‚ MongoDBæ•°æ®åº“æœ€ä½³å®è·µæ›´ä¾§é‡äºå®é™…åº”ç”¨ï¼Œé€‚åˆäºè¿›é˜¶å®æˆ˜ã€‚ èœé¸Ÿæ•™ç¨‹çš„MongoDBæ•™ç¨‹ç›¸æ¯”ä¸Šé¢å‡ ä¸ªè¦å¥½å¾—å¤šï¼Œä½†æ˜¯æ¯•ç«Ÿåå‘å…¥é—¨ï¼Œå¾ˆå¤šç»†èŠ‚æ²¡æœ‰å±•å¼€ã€‚ åœ¨æ¯”è¾ƒä¹‹åé‚å†³å®šå•ƒæœ€æ–°çš„5.0å®˜æ–¹æ–‡æ¡£ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œä»»ä½•é—®é¢˜éƒ½å¯ä»¥ä»ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚ MongoDBæä¾›äº†ä¸€ä¸ªåœ¨çº¿ç‰ˆçš„Mongo shellï¼Œé»˜è®¤ä¸ºlatestå³v5.0ï¼Œå¯ä»¥é€šè¿‡å‚æ•°é€‰æ‹©ç‰ˆæœ¬ï¼Œä¾‹å¦‚https://mws.mongodb.com/?version=4.2ã€‚å”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯è¿æ¥ç»´æŒçš„æ—¶é—´æ¯”è¾ƒçŸ­ï¼Œä¸€ä¸ç•™ç¥å°±æ–­å¼€äº†ï¼Œé‡è¿ä¼šä¸¢å¤±ä¹‹å‰çš„æ•°æ®ã€‚ 1.2.å•ƒæ–‡æ¡£çš„ä¸€äº›æ„Ÿå—è¿™ç¯‡æ–‡ç« å†™çš„æ˜¯CRUDï¼Œæ˜¯ç›¸å¯¹æ¯”è¾ƒåŸºç¡€çš„éƒ¨åˆ†ï¼Œç›®å‰åœ¨çœ‹ç®¡é“èšåˆï¼Œå‡†å¤‡å†™ä¸‹ä¸€ç¯‡ã€‚ åœ¨çœ‹è¿‡å‡ å¤©æ–‡æ¡£ï¼ˆå°¤å…¶æ˜¯ç®¡é“èšåˆéƒ¨åˆ†ï¼‰åæœ‰ä¸€äº›æ„Ÿå—ï¼Œä¸»è¦æ¥è‡ªç®¡é“èšåˆï¼Œä½†æ˜¯ä¼°è®¡ä¸‹ä¸€ç¯‡å†…å®¹ä¼šå¾ˆå¤šï¼Œè¿™ç¯‡å†…å®¹è¾ƒå°‘å°±æ”¾åœ¨è¿™é‡Œå§ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š â‘ å®˜æ–¹æ–‡æ¡£å†™çš„å¾ˆç»†ï¼Œä¾‹å¦‚Aggregation Pipeline Stageså’ŒAggregation Pipeline Operatorséƒ½æœ‰åä¸º$countçš„ç´¯ç§¯å™¨accumulatorå’Œç®¡é“é˜¶æ®µstageï¼ŒAggregation Pipeline Operatorsé‡Œæœ‰åˆ†åˆ«åä¸º$firstå’Œ$lastçš„åŒåç´¯ç§¯å™¨accumulatorå’Œæ“ä½œç¬¦operatorã€‚æ–‡æ¡£ä¸åŒå…¶çƒ¦åœ°åœ¨æ¯ä¸ªå‡ºç°çš„åœ°æ–¹éƒ½æœ‰ã€Œæ¶ˆé™¤æ­§ä¹‰Disambiguationã€çš„æç¤ºï¼Œä½†è¿™ä¹Ÿå¯¼è‡´äº†æ–‡æ¡£æ¯”è¾ƒå†—æ‚ã€‚ â‘¡å®˜æ–¹æ–‡æ¡£å†…å®¹æ¯”è¾ƒæ··ä¹±ï¼Œä»è·¯ç”±ä¸Šå°±å¯ä»¥çœ‹å‡ºæ¥ã€‚æ¯”å¦‚Aggregation Pipeline Stageså’ŒAggregation Pipeline Operatorsè·¯ç”±çš„å‘½ååˆ†åˆ«ä¸ºaggregation-pipelineå’Œaggregationï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªå¯¹åº”çš„ç±»ä¼¼$xxxçš„æ ¼å¼å´éƒ½æ˜¯https://docs.mongodb.com/manual/reference/operator/aggregation/xxx/ï¼Œè¿™éš¾å…è®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚ä¸ºä½•ä¸å°†è·¯ç”±å‘½åä¸ºaggregation-pipeline-stageså’Œaggregation-pipeline-operatorsï¼Œä¸”å°†å¯¹åº”$xxxæ”¾åˆ°å„è‡ªè·¯å¾„ä¸‹å‘¢ï¼Ÿ â‘¢å®˜æ–¹æ–‡æ¡£å†…å®¹åˆ†ç±»ä¸å¤Ÿå…·ä½“ï¼Œå¦‚æœèƒ½æŒ‰åˆ†ç±»æ·»åŠ ä¸‹çº§è·¯ç”±ï¼Œé‚£ä¹ˆæ–‡æ¡£çš„ç»“æ„å’Œå±‚æ¬¡ä¼šæ›´æ¸…æ¥šäº†ã€‚å¦‚ä¸‹ä¸¤ä¾‹ï¼š ä¾‹å¦‚ï¼ŒAggregation Pipeline Stageså¯åˆ†ä¸ºã€Œdb.collection.aggregate()Stagesã€ã€ã€Œdb.aggregate()Stagesã€å’Œã€ŒStages Available for Updatesã€ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå®Œå…¨å¯ä»¥æ·»åŠ ä¸‰ä¸ªå­è·¯ç”±å•Šã€‚ è¿˜æœ‰ï¼ŒAggregation Pipeline Operatorsæ“ä½œè¡¨è¾¾å¼åˆ†ä¸ºã€Œç®—æœ¯è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œæ•°ç»„è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œå¸ƒå°”è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œæ¯”è¾ƒè¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œæ¡ä»¶è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œè‡ªå®šä¹‰èšåˆè¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œæ•°æ®å°ºå¯¸æ“ä½œç¬¦ã€ã€ã€Œæ—¥æœŸè¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œå­—é¢è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œæ‚é¡¹æ“ä½œç¬¦ã€ã€ã€Œå¯¹è±¡è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œsetè¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œå­—ç¬¦ä¸²è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œæ–‡æœ¬è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œä¸‰è§’å‡½æ•°è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œç±»å‹è¡¨è¾¾å¼æ“ä½œç¬¦ã€ã€ã€Œ$groupé˜¶æ®µçš„ç´¯ç§¯å™¨ã€ã€ã€Œé$groupé˜¶æ®µçš„ç´¯ç§¯å™¨ã€ã€ã€Œå˜é‡è¡¨è¾¾å¼æ“ä½œç¬¦ã€å’Œã€Œçª—å£æ“ä½œç¬¦ã€ã€‚å•å•æ˜¯åˆ†ç±»å°±å·²ç»æœ‰20ä¸ªä¹‹å¤šï¼Œå†…å®¹é‚£å°±æ›´å¤šäº†ã€‚å¦‚æœæŒ‰åˆ†ç±»æ·»åŠ 20ä¸ªå­è·¯ç”±ï¼Œæ–‡æ¡£çš„ç»“æ„å’Œå±‚æ¬¡ä¼šæ›´æ¸…æ¥šäº†ã€‚ å½“ç„¶ï¼Œæ–‡æ¡£å¾ˆè´´å¿ƒåœ°åœ¨Aggregation Pipeline Stageså’ŒAggregation Pipeline Operatorsæœ€åæ·»åŠ äº†æŒ‰å­—æ¯æ’åºçš„åˆ—è¡¨ï¼ˆAlphabetical Listingï¼‰ä»¥ä¾›ç´¢å¼•æŸ¥é˜…ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå„åˆ†ç±»å¹¶ä¸æ˜¯äº’æ–¥çš„ï¼Œå„ç±»é‡Œé¢æœ‰é‡å çš„é¡¹ï¼Œå¤§æ¦‚è¿™å°±æ˜¯å®˜æ–¹ä¸äºˆæ·»åŠ å­è·¯ç”±çš„åŸå› å§ã€‚ â‘£ç›¸è¿‘çš„æ¦‚å¿µæ²¡æœ‰è¾¨ææ¸…æ¥šã€è¿™é‡Œåº”è¯¥ä¸ç¿»è¯‘å’Œè¡¨è¾¾æœ‰å…³ï¼Œä¸å…¨æ˜¯å®˜æ–¹çš„é”…ã€‘ï¼Œæ¯”å¦‚ã€Œç®¡é“èšåˆã€é‡Œçš„stageå’Œoperationæ˜¯å¹¶åˆ—çš„ï¼Œoperatorç”¨äºstage/operationé‡Œï¼Œä¸­æ–‡é‡Œã€Œæ“ä½œã€ä¸€è¯å³å¯ä½œåè¯ä¹Ÿå¯åšåŠ¨è¯ï¼Œç¿»è¯‘é˜…è¯»èµ·æ¥å°±ä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œæ‰€ä»¥æˆ‘æŠŠstageå’Œoperationç»Ÿä¸€å½“æˆã€Œé˜¶æ®µã€ï¼Œoperatoråˆ™ç§°ä¸ºã€Œæ“ä½œç¬¦ã€æˆ–ã€Œæ“ä½œè¡¨è¾¾å¼ã€ã€‚ä»è¿™ä¸ªå±‚é¢ä¸Šè¯´ï¼Œå®˜æ–¹æ–‡æ¡£çš„æè¿°è¿˜æ˜¯å¾ˆå‡†ç¡®çš„ï¼Œåªä¸è¿‡å…¨æ˜¯é•¿éš¾å¥ä¸€è¿ä¸²çš„å®šè¯­æœ‰æ—¶å€™éƒ½åˆ†ä¸æ¸…ä¿®é¥°çš„åˆ°åº•æ˜¯è°ï¼Œå¼•èµ·ç†è§£ä¸Šçš„æ­§ä¹‰ã€‚ æˆ‘ä»¬å¸¸è¯´çš„CRUDå³æ˜¯ã€Œå¢åˆ æ”¹æŸ¥ã€ï¼Œå…·ä½“è¯´æ¥ï¼š Cï¼Createï¼Œå¢ï¼Œå³åˆ›å»ºæ“ä½œï¼› Rï¼ Read ï¼ŒæŸ¥ï¼Œå³æŸ¥è¯¢æ“ä½œï¼› Uï¼Updateï¼Œæ”¹ï¼Œå³æ›´æ–°æ“ä½œï¼› Dï¼Deleteï¼Œåˆ ï¼Œå³åˆ é™¤æ“ä½œã€‚ 2.åˆ›å»ºæ“ä½œåˆ›å»º/æ’å…¥æ˜¯é’ˆå¯¹å•ä¸ªé›†åˆè€Œè¨€ï¼Œã€Œå†™æ“ä½œã€åœ¨å•ä¸ªæ–‡æ¡£çº§åˆ«ä¸Šå…·æœ‰ã€ŒåŸå­æ€§ã€ã€‚å¦‚æœå½“å‰é›†åˆä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥æ“ä½œå°†åˆ›å»ºè¯¥é›†åˆã€‚1234# æ’å…¥å•ä¸ªæ–‡æ¡£æ˜¯ã€Œ&#123;&#125;ã€ï¼Œå¤šä¸ªæ˜¯ã€Œ[&#123;&#125;, &#123;&#125;, ...]ã€db.collection.insertOne() # å•ä¸ªdb.collection.insertMany() # å¤šä¸ªdb.collection.insert() # å•ä¸ªæˆ–å¤šä¸ªä¸upsert: true é€‰é¡¹ ä¸€èµ·ä½¿ç”¨æ—¶ä¹Ÿå¯å®ç°æ’å…¥: db.collection.update()ï¼Œdb.collection.updateOne()ï¼Œdb.collection.updateMany()ï¼› db.collection.findAndModify()ï¼Œdb.collection.findOneAndUpdate()ï¼Œdb.collection.findOneAndReplace()ï¼› db.collection.bulkWrite()ï¼šPerforms multiple write operations with controls for order of executionã€‚ 3.æŸ¥è¯¢æ“ä½œæŸ¥è¯¢æ“ä½œè¯­æ³•ä¸ºdb.collection.find(query, projection)ï¼Œå…¶ä¸­queryæŒ‡å®šæŸ¥è¯¢æ¡ä»¶ï¼ŒprojectionæŒ‡å®šè¿”å›çš„å­—æ®µã€‚ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨inventoryé›†åˆï¼ŒåŒ…å«å¦‚ä¸‹æ•°æ®ï¼š12345&#123; item: &quot;journal&quot;, qty: 25, size: &#123; h: 14, w: 21, uom: &quot;cm&quot; &#125;, status: &quot;A&quot; &#125;&#123; item: &quot;notebook&quot;, qty: 50, size: &#123; h: 8.5, w: 11, uom: &quot;in&quot; &#125;, status: &quot;A&quot; &#125;&#123; item: &quot;paper&quot;, qty: 100, size: &#123; h: 8.5, w: 11, uom: &quot;in&quot; &#125;, status: &quot;D&quot; &#125;&#123; item: &quot;planner&quot;, qty: 75, size: &#123; h: 22.85, w: 30, uom: &quot;cm&quot; &#125;, status: &quot;D&quot; &#125;&#123; item: &quot;postcard&quot;, qty: 45, size: &#123; h: 10, w: 15.25, uom: &quot;cm&quot; &#125;, status: &quot;A&quot; &#125; é€‰æ‹©é›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£ï¼šquery=&#123;&#125;æˆ–query=ï¼ˆç•™ç©ºä¸å†™ï¼‰ï¼Œç›¸å½“äºSELECT * FROM inventoryã€‚ æŒ‡å®šç›¸ç­‰æ¡ä»¶ï¼šquery=&#123;&lt;field1&gt;: &lt;valve1&gt;, ...&#125;ï¼Œä¾‹å¦‚&#123;status: &quot;D&quot;&#125;ç›¸å½“äºSELECT * FROM inventory WHERE status = &quot;D&quot;ã€‚ ä½¿ç”¨æŸ¥è¯¢è¿ç®—ç¬¦ï¼ˆQuery Operatorsï¼‰æŒ‡å®šæ¡ä»¶ï¼š&#123;&lt;field1&gt;: &#123;&lt;operator1&gt;: &lt;value1&gt;&#125;, ...&#125;ï¼Œä¾‹å¦‚&#123;status: &#123;$in: [&quot;A&quot;, &quot;D&quot;]&#125;&#125;ç›¸å½“äºSELECT * FROM inventory WHERE status in (&quot;A&quot;, &quot;D&quot;)ã€æ­¤å¤„ä¹Ÿå¯ç”¨$orï¼Œä½†å¯¹åŒä¸€å­—æ®µåº”è¯¥ç”¨$inè€Œé$orã€‘ã€‚ æŒ‡å®šANDæ¡ä»¶ï¼š&#123;&lt;and1&gt;: &lt;value1&gt;, &lt;and2&gt;: &lt;value2&gt;, ...&#125;ï¼Œä¾‹å¦‚&#123;status: &quot;A&quot;, qty: &#123;$lt: 30&#125;&#125;ç›¸å½“äºSELECT * FRON inventory WHERE status = &quot;A&quot; AND qty &lt; 30ã€‚ æŒ‡å®šORæ¡ä»¶ï¼š&#123;$or: [&lt;query1&gt;, &lt;query2&gt;, ...]&#125;ï¼Œä¾‹å¦‚&#123;$or: [&#123;status: â€œA&quot;&#125;, &#123;qty: &#123;$lt: 30&#125;&#125;]&#125;ç›¸å½“äºSELECT * FROM inventory WHERE status = &quot;A&quot; OR qty &lt; 30ã€‚ æŒ‡å®šANDä»¥åŠORæ¡ä»¶ã€å³ 4ï¼‹5 ç»„å«ã€‘ï¼š&lt;and&gt;: &lt;value&gt;, $or: [&lt;query1&gt;, &lt;query2&gt;, ...]ï¼Œä¾‹å¦‚&#123;status: &quot;A&quot;, $or: [qty: &#123;$lt: 30&#125;&#125;, &#123;item: /^p/&#125;]&#125;ç›¸å½“äºSELECT * FROM inventory WHERE status = &quot;A&quot; AND (qty &lt; 30 OR item LIKE &quot;p%&quot;)ã€æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‘ã€‚ 3.1.æŸ¥è¯¢åµŒå…¥/åµŒå¥—æ–‡æ¡£ åµŒå¥—æ–‡æ¡£åŒ¹é…å³&lt;value = document&gt;ï¼Œæ ¼å¼ä¸ºï¼šquery=&#123;&lt;field1&gt;: &lt;doc1&gt;, ...&#125;ï¼Œä¾‹å¦‚&#123;size: &#123;h: 14, w: 21ï¼Œuom: &quot;cm&quot;&#125;&#125;ï¼›æ³¨æ„: æ•´ä¸ªåµŒå…¥æ–‡æ¡£çš„ç›¸ç­‰åŒ¹é…éœ€è¦ç²¾ç¡®åŒ¹é…ï¼ŒåŒ…æ‹¬é¡ºåº! åµŒå¥—å­—æ®µåŒ¹é…å³åµŒå¥—æ–‡æŒ¡ä¸­å­—æ®¿çš„åŒ¹é…ï¼Œå­—æ®µä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•ï¼šfield.subFieldã€‚ ç›¸ç­‰åŒ¹é…ï¼š&#123;&lt;field.subField&gt;: &lt;value&gt;, ...&#125;ï¼Œä¾‹å¦‚&#123;&quot;size.uom&quot;: &quot;in&quot;&#125;ï¼› æŸ¥è¯¢è¿ç®—ç¬¦ï¼š&#123;&lt;field1&gt;: &#123;&lt;operator1&gt;: &lt;value1&gt;&#125;, ...&#125;ï¼Œä¾‹å¦‚&#123;&quot;size.h&quot;: &#123;$lt: 15&#125;&#125;ï¼Œä¸ 3. ç›¸åŒï¼› æŒ‡å®šANDæ¡ä»¶ï¼š&#123;&lt;field1.subField1&gt;: &lt;valuel&gt;, ...&#125;ï¼Œä¾‹åŠ &#123;&quot;size.h&quot;: &#123;$lt: 15&#125;, &quot;size.uom&quot;: &quot;in&quot;, states: &quot;D&quot;&#125;ï¼Œä¸ 4. ç›¸åŒã€‚ 3.2.æŸ¥è¯¢æ•°ç»„ åŒ¹é…ä¸€ä¸ªæ•°ç»„ï¼Œå³value = arrayï¼Œç²¾ç¡®åŒ¹é…åŒ…æ‹¬é¡ºåºã€‚ ä¾‹å¦‚&#123;tags: [&quot;red&quot;, &quot;black&quot;]&#125;åªåŒ¹é…åŒ…å«2ä¸ªå…ƒç´ çš„å®šåºçš„[&quot;red&quot;, &quot;black&quot;]ï¼› è‹¥è¦åŒ¹é…æ— åºçš„åŒ…å«æ­¤2å…ƒç´ çš„æ•°ç»„ï¼ˆlen â‰¥ 2ï¼‰ï¼Œåˆ™éœ€ä½¿ç”¨$allè¿ç®—ç¬¦ï¼š&#123;tags: &#123;$all: [&quot;red&quot;, &quot;black&quot;]&#125;&#125;ã€‚ æŸ¥è¯¢ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ï¼ˆåŒ…å«æŒ‡å®šå…ƒç´ çš„æ•°ç»„ï¼‰ï¼Œå³arrField = arrValueã€‚ ä¾‹å¦‚&#123;tags: &quot;red&quot;&#125;åŒ¹é…&quot;red&quot; in array(tags)ï¼› å¯ä»¥å¯¹arrValueæŒ‡å®šæ¡ä»¶è¿‡æ»¤å™¨ï¼Œå³&#123;arrField1: &#123;operator1: value1, ...&#125;&#125;ï¼Œä¾‹å¦‚&#123;dim_cm: &#123;$gt: 25&#125;&#125;åŒ¹é…any(dim_cm[i] &gt; 25)ï¼Œå³dim_cmä¸­å­˜åœ¨å¤§äº25çš„å…ƒç´ ã€‚ ä¸ºæ•°ç»„å…ƒç´ æŒ‡å®šå¤šä¸ªæ¡ä»¶ï¼ˆå¤åˆæ¡ä»¶ï¼‰ï¼Œä½¿ å•ä¸ªæ•°ç»„å…ƒç´  æ»¡è¶³è¿™äº›æ¡ä»¶æˆ– æ•°ç»„å…ƒç´ çš„ä»»æ„ç»„åˆ æ»¡è¶³æ¡ä»¶ã€‚ åœ¨æ•°ç»„å…ƒç´ ä¸Šä½¿ç”¨å¤åˆè¿‡æ»¤æ¡ä»¶æŸ¥è¯¢æ•°ç»„ï¼šæ•°ç»„ä¸­å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼ˆè¿™äº›å…ƒç´ åŒæ—¶å­˜åœ¨äºè¯¥æ•°ç»„å³å¯ï¼Œæ— éœ€æ˜¯åŒä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œä¾‹å¦‚&#123;dim_cm: &#123;Sgt: 15, slt: 20&#125;&#125;è¡¨ç¤ºdim_cm[i] &gt; 15 AND dim_cm[j] &lt; 20æˆ–15 &lt; dim_cm[kJ &lt; 20ï¼› æŸ¥è¯¢æ»¡è¶³å¤šä¸ªæ¡ä»¶çš„æ•°ç»„å…ƒç´ ï¼šä¸€ä¸ªå…ƒç´ åŒæ—¶æ»¡è¶³æ¡ä»¶ï¼Œä¾‹å¦‚&#123;dim_cm: &#123;$elemMatch: &#123;Sgt: 15, $lt: 20&#125;&#125;&#125;è¡¨ç¤º15 &lt; dim_cm[i] &lt; 20ï¼› é€šè¿‡æ•°ç»„ç´¢å¼•ä½ç½®æŸ¥è¯¢å…ƒç´ ï¼šç‚¹è¡¨ç¤ºæ³•ï¼ˆdot notationï¼‰å¯ä»¥ä¸ºæŒ‡å®šä½ç½®çš„å…ƒç´ è®¾ç½®æ¡ä»¶ï¼Œç´¢å¼•ä»0å¼€å§‹ã€ å­—æ®µå’ŒåµŒå¥—å­—æ®µå¿…é¡»åœ¨å¼•å·å†… ã€‘ï¼Œä¾‹å¦‚&#123;&quot;dim_cm.1&quot;: &#123;$gt: 25&#125;&#125;è¡¨ç¤ºdim_cm[1] &gt; 25ï¼› æŒ‰æ•°ç»„é•¿åº¦æŸ¥è¯¢æ•°ç»„ï¼š&#123;&quot;tags&quot;: &#123;$size: 3&#125;&#125;è¡¨ç¤ºlen(tags) = 3ã€‚ 3.3.æŸ¥è¯¢åµŒå¥—æ–‡æ¡£æ•°ç»„ åµŒå¥—æ–‡æ¡£æ•°ç»„ï¼ˆArray of Embedded Documentsï¼‰å³ä»¥æ–‡æ¡£ä¸ºå…ƒç´ çš„æ•°ç»„ï¼Œé›†åˆinventoryæ–‡æ¡£æ ¼å¼ä¸º&#123;item: &quot;xx&quot;, instock: [&#123;warehouse: &quot;A&quot;, qty: 5&#125;, &#123;&#125;...]&#125;ã€‚ æŸ¥è¯¢åµŒå¥—åœ¨æ•°ç»„ä¸­çš„æ–‡æ¡£ï¼š&#123;field: doc&#125;å³doc in array(field)ï¼ˆæŸ¥è¯¢æ•°ç»„2ï¼šåŒ…å«æŒ‡å®šå…ƒç´ çš„æ•°ç»„ï¼‰ï¼Œdocç²¾ç¡®åŒ¹é…åŒ…æ‹¬é¡ºåºã€‚ä¾‹å¦‚&#123;&quot;instock&quot;: &#123;warehouse: &quot;A&quot;, qty: 5&#125;&#125;åŒ¹é…çš„æ•°ç»„instockåŒ…å«æ•´ä¸ªã€Œæœ‰åºã€æ–‡æ¡£&#123;warehouse: &quot;A&quot;, qty: 5&#125;ã€‚ åœ¨æ–‡æ¡£æ•°ç»„ä¸­çš„å­—æ®µä¸ŠæŒ‡å®šæŸ¥è¯¢æ¡ä»¶ã€ç‚¹è¡¨ç¤ºæ³• å­—æ®µå’ŒåµŒå¥—å­—æ®µå¿…é¡»åœ¨å¼•å·å†… ã€‘ã€‚ å¯¹åµŒå…¥åœ¨æ–‡æ¡£æ•°ç»„ä¸­çš„å­—æ®µæŒ‡å®šæŸ¥è¯¢æ¡ä»¶ï¼šä¾‹å¦‚&#123;&#39;instock.qty&#39;: &#123;$lte: 20&#125;&#125;åŒ¹é…æ•°ç»„å…ƒç´ instock[i] = docï¼Œdoc.qty â‰¤ 20ï¼Œä¸æ£€æŸ¥docä½ç½®ï¼› ä½¿ç”¨æ•°ç»„ç´¢å¼•æŸ¥è¯¢åµŒå…¥æ–‡æ¡£ä¸­çš„å­—æ®µ: ä¾‹å¦‚&#123;&#39;instock.0.qty&#39;: &#123;$lte: 20&#125;&#125;åŒ¹é…æ•°ç»„å…ƒç´ instock[0] = docï¼Œdoc.qty â‰¤ 20ï¼ŒæŒ‡å®šdocä½ç½®ä¸º0ï¼Œå› æ­¤ç»“æœæ˜¯ä¸Šä¸€ä¸ªçš„ å­é›† ã€‚ ä¸ºæ–‡æ¡£æ•°ç»„æŒ‡å®šå¤šä¸ªæ¡ä»¶ï¼Œä½¿å¾—æ•°ç»„ä¸­çš„æ–‡æ¡£æˆ–æ–‡æ¡£ç»„åˆæ»¡è¶³æ¡ä»¶ã€‚ å•ä¸ªåµŒå¥—æ–‡æ¡£åœ¨åµŒå¥—å­—æ®µä¸Šæ»¡è¶³å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œä¾‹å¦‚&#123;&quot;instock&quot;: &#123;$elemMatch: &#123;qty: 5, warehouse: &quot;A&quot;&#125;&#125;&#125;åŒ¹é…instock[i]=docï¼Œ&#123;qty: 5, warehouse: &quot;A&quot;&#125; in docï¼Œæ­¤å¤„docåŒ…å«è¿™ä¸¤å€¼å³å¯ä¸”æ— åºã€‚å†å¦‚&#123;&quot;instock&quot;: &#123;$elemMatch: &#123;qty: &#123;$gt: 10, $lte: 20&#125;&#125;&#125;&#125;åŒ¹é…instock[i]=docï¼Œ10 &lt; doc.qty &lt; 20ï¼› å…ƒç´ ç»„åˆæ»¡è¶³æ¡ä»¶ï¼Œ è‹¥æ•°ç»„å­—æ®µä¸Šçš„å¤åˆæŸ¥è¯¢æ¡ä»¶ä¸ä½¿ç”¨$elemMatchè¿ç®—è¡Œï¼Œåˆ™åŒ¹é…ã€Œæ–‡æ¡£ç»„åˆæ»¡è¶³æ¡ä»¶çš„æ•°ç»„ã€ï¼Œæ³¨æ„æ˜¯ æ–‡æ¡£ç»„åˆ æ»¡è¶³è€Œé æ–‡æ¡£ æ»¡è¶³ã€‚ä¾‹å¦‚&#123;&quot;instock.qty&quot;: &#123;$gt: 10, $lte: 20&#125;&#125;åŒ¹é…instock[i].qty &gt; 10ï¼Œinstock[j].qty &lt; 20ã€ä¸Šä¸€ä¸ªæ˜¯å•ä¸ªæ–‡æ¡£åŒæ—¶æ»¡è¶³ï¼Œä½¿ç”¨äº†$elemMatchã€‘ã€‚ç±»ä¼¼çš„ï¼Œ&#123;&quot;instock.qty&quot;: 5, &quot;instock.warehouse&quot;: &quot;A&quot;&#125;å°†åŒ¹é…instock[i].qty = 5ï¼Œinstock[j].warehouse = &quot;A&quot;è€Œä¸è¦æ±‚ä½äºåŒä¸€æ–‡æ¡£ä¸­ã€‚ 3.4.ä»æŸ¥è¯¢è¿”å›æŒ‡å®šå­—æ®µ ä»æŸ¥è¯¢è¿”å›æŒ‡å®šå­—æ®µå³æŠ•å½±ï¼ˆProjectionï¼‰ï¼ŒæŸ¥è¯¢è¯­æ³•db.inventory.find(query, projection)ï¼Œå…¶ä¸­projection.field = (1=true | 0=false)ã€‚æŸ¥è¯¢é»˜è®¤è¿”å›æ‰€æœ‰å­—æ®µã€ç›¸å½“äºSELECT *ã€‘ï¼Œä½¿ç”¨æŠ•å½±ï¼ˆProjectionï¼‰æ¥æŒ‡å®šæˆ–é™åˆ¶è¿”å›çš„å­—æ®µã€ç›¸å½“äºSELECT field1, field2...ã€‘ã€‚ è¿”å›åŒ¹é…æ–‡æ¡£ä¸­çš„æ‰€æœ‰å­—æ®µï¼šä¸æŒ‡å®šprojectionç›¸å½“äºSELECT *ã€‚ ä»…è¿”å›æŒ‡å®šå­—æ®µå’Œ_idï¼šprojection = &#123;field1: 1, field2: 1&#125;ï¼Œé»˜è®¤ä¼šè¿”å›_idå­—æ®µï¼Œç›¸å½“äºSELECT _id, field1, field2ã€‚ ç¦ç”¨_idå­—æ®µï¼Œé€šè¿‡ æ˜¾å¼åœ°ç½®0 ä»ç»“æœä¸­åˆ é™¤_idå­—æ®µï¼šprojection = &#123;field1: 1, field2: 1, _id: 0&#125;ã€‚ è¿”å›é™¤æ’é™¤å­—æ®µä¹‹å¤–çš„æ‰€æœ‰å­—æ®µï¼ˆè¡¥é›†æ€æƒ³ï¼‰ï¼Œé€šè¿‡ç½®0æ¥æ’é™¤å­—æ®µï¼Œè¿”å›å‰©ä¸‹çš„å­—æ®µã€‚ æ³¨æ„ï¼š é™¤äº†_idå­—æ®µä»¥å¤–ï¼Œä¸èƒ½åœ¨projectionæ–‡æ¡£ä¸­å¯¹ã€ŒåŒ…å«å’Œæ’é™¤è¯­å¥ã€è¿›è¡Œç»„åˆï¼Œå³ä¸èƒ½åŒæ—¶å‡ºç°0å’Œ1ã€‚ è¿”å›/ç¦ç”¨åµŒå¥—æ–‡æ¡£ä¸­çš„ç‰¹å®šå­—æ®µï¼šä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•æŒ‡å®šåµŒå¥—æ–‡æ¡£ä¸­çš„ç‰¹å®šå­—æ®µï¼Œå¦‚projection = &#123;item: 1, status: 1, &quot;size.uom&quot;: 1&#125;ã€projection = &#123;&quot;size.uom&quot;: 0&#125;ã€‚ æ•°ç»„ä¸­åµŒå…¥æ–‡æ¡£çš„æŠ•å½±ï¼Œä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•åœ¨åµŒå…¥æ•°ç»„çš„æ–‡æ¡£ä¸­æŠ•å½±ç‰¹å®šå­—æ®µï¼Œä¾‹å¦‚projection = &#123;item: 1, status: 1, &quot;instock.qty&quot;: 1&#125;çš„æŸ¥è¯¢ç»“æœä¸­instockæ•°ç»„å…ƒç´ ï¼ˆå³docæ–‡æ¡£ï¼‰åªæœ‰qtyå­—æ®µã€‚ åœ¨è¿”å›çš„æ•°ç»„ä¸­æŠ•å½±æŒ‡å®šæ•°ç»„å…ƒç´ ï¼šå¯¹äºåŒ…å«äº†æ•°ç»„çš„å­—æ®µï¼ŒæŠ•å½±ç®—å­elemMatch`ã€`$slice`å’Œ`ç”¨æ¥æ“ä½œæ•°ç»„ã€‚ä¾‹å¦‚projection = &#123;item: 1, status: 1, instock: &#123;$slice: -1&#125;&#125; è¡¨ç¤ºåªå–instockæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ã€‚ ä¸Šè¿°3ä¸ªæŠ•å½±ç®—å­æ˜¯ã€Œä»è¿”å›æ•°ç»„ä¸­ã€æŠ•å½±ã€ŒæŒ‡å®šå…ƒç´ ã€çš„ å”¯ä¸€ æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½ä½¿ç”¨ç´ å¼•&#123;&quot;instock.0&quot;: 1&#125;ï¼Œå°†æŠ¥é”™SyntaxError expected property name, got &#39;&#123;&#39;ã€‚ 3.5.æŸ¥è¯¢ç©ºå­—æ®µæˆ–ç¼ºå¤±å­—æ®µMongoDBä¸­çš„ä¸åŒæŸ¥è¯¢è¿ç®—ç¬¦å¯¹nullå€¼çš„å¤„ç†æ–¹å¼ä¸åŒã€‚æŸ¥è¯¢è¯­æ³•db.inventory.find(query, projection)ï¼Œç¤ºä¾‹é›†åˆinventoryä¸ºï¼š12&#123; _id: 1, item: null&#125;&#123; _id: 2&#125; ç›¸ç­‰è¿‡æ»¤å™¨ï¼šquery = &#123;item: null&#125;æŸ¥è¯¢åŒ¹é…item = null OR !itemï¼Œç»“æœè¿”å›æ‰€æœ‰çš„ä¸¤ä¸ªæ–‡æ¡£ã€‚ ç±»å‹æ£€æŸ¥ï¼šquery = &#123;item: &#123;$type: 10&#125;&#125;æŸ¥è¯¢åŒ¹é…item = nullå³å­—æ®µitemçš„å€¼ä¸ºã€ŒBSONç±»å‹å€¼Nullï¼Œå…¶ç±»å‹ç¼–å·ä¸º10ã€ï¼Œç»“æœè¿”å›_id = 1çš„æ–‡æ¡£ã€‚ å­˜åœ¨æ£€æŸ¥ï¼Œ$existsæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŒ‡å®šå­—æ®µï¼šquery = &#123;item: &#123;$exists: false&#125;&#125;æŸ¥è¯¢åŒ¹é…!itemå³exists(item) = falseï¼Œç»“æœè¿”å›_id = 2çš„æ–‡æ¡£ï¼ˆä¸åŒ…å«itemå­—æ®µï¼‰ã€‚ 4.æ›´æ–°æ“ä½œæ›´æ–°æ“ä½œç”¨äºä¿®æ”¹é›†åˆä¸­å·²æœ‰çš„æ–‡æ¡£ï¼Œåœ¨å•ä¸ªæ–‡æ¡£çº§åˆ«ä¸Šå…·æœ‰ã€ŒåŸå­æ€§ã€ï¼Œï¼ˆä¸ã€Œå¢ã€ç›¸åŒï¼‰ã€‚å¯ä»¥æŒ‡å®šæ¡ä»¶æˆ–è¿‡æ»¤å™¨ï¼Œæ¥è¿›è¡Œæ›´æ–°ï¼š123db.collection.updateOne(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)db.collection.updateMany(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)db.collection.replaceOne(&lt;filter&gt;, &lt;update&gt;, &lt;options&gt;)åˆ©ç”¨æ›´æ–°æ“ä½œç¬¦å¦‚$setæ¥ä¿®æ”¹å­—æ®µå€¼ï¼Œã€Œæ›´æ–°æ–¹æ³•ã€çš„æ ¼å¼ï¼šæ³¨æ„ï¼šå¦‚æœå­—æ®µä¸å­˜åœ¨ï¼ŒæŸäº›æ›´æ–°è¿ç®—ç¬¦ï¼ˆä¾‹å¦‚$setï¼‰å°†åˆ›å»ºè¯¥å­—æ®µã€‚1234&#123; &lt;update_operator1&gt;: &#123;&lt;field1&gt;: &lt;value1&gt;, ...&#125;, &lt;update_operator2&gt;: &#123;&lt;field2&gt;: &lt;value2&gt;, ...&#125;,&#125; ä¾‹1ï¼šæ›´æ–°å•ä¸ªæ–‡æ¡£ä¾‹å¦‚åŸæ–‡æ¡£ï¼š&#123;item: &quot;paper&quot;, qty: 100, size: &#123;h: 8.5, w: 11, uom: &quot;in&quot;&#125;, status: &quot;D&quot;&#125;ï¼›æ›´æ–°åæ–‡æ¡£ï¼š&#123;item: &quot;paper&quot;, qty: 100, size: &#123;h: 8.5, w: 11, uom: &quot;cm&quot;&#125;, status: &quot;P&quot;, lastModified: ISODate(&quot;2021-07-21T02:40:43.515Z&quot;)&#125;ã€‚æ›´æ–°æ“ä½œï¼š ä½¿ç”¨$setä¿®æ”¹&quot;size.uom&quot; = &quot;cm&quot;å’Œstatus = &quot;p&quot;ï¼› ä½¿ç”¨$currentDateå°†lastModifiedæ›´æ–°ä¸ºå½“å‰æ—¥æœŸï¼Œä¸å­˜åœ¨çš„å­—æ®µå°†è¢«åˆ›å»ºã€‚ 1234567db.inventory.updateOne( &#123;item: &quot;paper&quot;&#125;, &#123; $set: &#123;&quot;size.uom&quot;: &quot;cm&quot;, status: &quot;P&quot;&#125;, $currentDate: &#123;lastModified: true&#125; &#125;) ä¾‹2ï¼šæ›´æ–°å¤šä¸ªæ–‡æ¡£123456789# ä¾‹å¦‚åŸæ–‡æ¡£&#123;item: &quot;journal&quot;, qty: 25, size: &#123;h: 14, w: 21, uom: &quot;cm&quot;&#125;, status: &quot;A&quot;&#125;,&#123;item: &quot;mousepad&quot;, qty: 25, size: &#123;h: 19, w: 22.85, uom: &quot;cm&quot;&#125;, status: &quot;P&quot;&#125;,&#123;item: &quot;postcard&quot;, qty: 45, size: &#123;h: 10, w: 15.25, uom: &quot;cm&quot;&#125;, status: &quot;A&quot;&#125;# æ›´æ–°åæ–‡æ¡£&#123;item: &quot;journal&quot;, qty: 25, size: &#123;h: 14, w: 21, uom: &quot;in&quot;&#125;, status: &quot;P&quot;, lastModified: ISODate(&quot;2021-07-21T02:56:56.020Z&quot;)&#125;,&#123;item: &quot;mousepad&quot;, qty: 25, size: &#123;h: 19, w: 22.85, uom: &quot;in&quot;&#125;, status: &quot;P&quot;, lastModified: ISODate(&quot;2021-07-21T02:56:56.020Z&quot;)&#125;,&#123;item: &quot;postcard&quot;, qty: 45, size: &#123;h: 10, W: 15.25, uom: &quot;in&quot;&#125;, status: &quot;P&quot;, lastModified: ISODate(&quot;2021-07-21T02:56:56.020Z&quot;)&#125; æ›´æ–°æ“ä½œ: æ›´æ–°æ»¡è¶³qty &lt; 50çš„æ‰€æœ‰æ–‡æ¡£ï¼ˆä¾‹1ä¸­qty = 100ï¼‰ï¼› ä½¿ç”¨$setä¿®æ”¹&quot;size.uom&quot; = &quot;in&quot;å’Œstatus = &quot;p&quot;ï¼› ä½¿ç”¨$currentDateå°†lastModifiedæ›´æ–°ä¸ºå½“å‰æ—¥æœŸï¼Œä¸å­˜åœ¨çš„å­—æ®µå°†è¢«åˆ›å»ºã€‚ 1234567db.inventory.updateMany( &#123;&quot;qty&quot;: &#123;$lt: 50&#125;&#125;, &#123; $set: &#123;&quot;size.uom&quot;: &quot;in&quot;, status: &quot;P&quot;&#125;, $currentDate: &#123;LastModified: true&#125; &#125;) ä¾‹3:æ›¿æ¢å•ä¸ªæ–‡æ¡£ä¾‹å¦‚æ–‡æ¡£çš„æ›´æ–°æƒ…å†µï¼š åŸå§‹ç¤ºä¾‹æ–‡æ¡£ï¼š&#123;item: &quot;paper&quot;, qty: 100, size: &#123;h: 8.5, w: 11, uom: &quot;in&quot;&#125;, status: &quot;D&quot;&#125;ï¼› ä¾‹1ä¿®æ”¹åæ–‡æ¡£ï¼š&#123;item: &quot;paper&quot;, qty: 100, size: &#123;h: 8.5, w: 11, uom: &quot;cm&quot;&#125;, status: &quot;P&quot;, lastModified: ISODate(&quot;2021-07-21T02:40:43.515Z&quot;)&#125;ï¼› ä¾‹3ä¿®æ”¹åæ–‡æ¡£ï¼š&#123;item: &quot;paper&quot;, instock: [&#123;warehouse: &quot;A&quot;, qty: 60&#125;, &#123;warehouse: &quot;B&quot;, qty: 40&#125;]&#125;ã€‚ æ›´æ–°æ“ä½œï¼Œç›´æ¥ä¿®æ”¹æ•´ä¸ªitemå­—æ®µä¸ºpaperçš„æ–‡æ¡£ï¼š1234db.inventory.replaceOne( &#123;item: &quot;paper&quot;&#125;, &#123;item: &quot;paper&quot;, instock: [&#123;warehouse: &quot;A&quot;, qty: 60&#125;, &#123;warehouse: &quot;B&quot;, qty: 40&#125;]&#125;) ä½¿ç”¨èšåˆç®¡é“æ›´æ–°ä»MongoDB 4.2å¼€å§‹ï¼Œæ›´æ–°æ“ä½œå¯ä»¥ä½¿ç”¨èšåˆç®¡é“ï¼ˆAggregation Pipelineï¼‰ï¼Œèšåˆç®¡é“å¯ä»¥ç”±ä»¥ä¸‹stageç»„æˆï¼š$addFieldsã€$setã€$projectã€$unsetã€$replaceRootå’Œ$repaceWithã€‚ ä½¿ç”¨èšåˆç®¡é“å…è®¸æ›´å…·è¡¨ç°åŠ›çš„updateè¯­å¥ï¼Œä¾‹å¦‚åŸºäºå½“å‰å­—æ®µå€¼æ¥è¡¨ç¤ºæ¡ä»¶æ›´æ–°ï¼Œæˆ–è€…ä½¿ç”¨å¦ä¸€ä¸ªå­—æ®µçš„å€¼æ›´æ–°ä¸€ä¸ªå­—æ®µã€‚ ç¤ºä¾‹1ã€‚db.students.updateOne(&#123;_id: 3&#125;, [&#123;$set: &#123;&quot;test3&quot;: 98ï¼Œmodified: &quot;$$NOW&quot;&#125;&#125;])æ›´æ–°æ–‡æ¡£_id: 3ï¼Œå…¶ä¸­$setstageå°†åˆ›å»ºä¸å­˜åœ¨çš„å­—æ®µtest3 = 98ï¼Œå¹¶å°†å­—æ®µmodifiedæ›´æ–°ä¸ºå½“å‰æ—¶é—´ã€‚è¯¥æ“ä½œä½¿ç”¨ã€Œèšåˆå˜é‡ï¼ˆaggregation variableï¼‰ã€NOWè·å–å½“å‰æ—¶é—´ï¼Œä½¿ç”¨ã€ŒåŒdollarç¬¦å‰ç¼€ã€å¹¶ã€ŒåŠ å¼•å·ã€æ¥è®¿é—®å˜é‡ï¼š&quot;$$NOW&quot;ã€‚ ç¤ºä¾‹2ã€‚ä½¿ç”¨èšåˆç®¡é“æ¥æ ‡å‡†åŒ–æ–‡æ¡£ä¸­çš„å­—æ®µï¼Œå³é›†åˆä¸­çš„æ–‡æ¡£åº”å…·æœ‰ç›¸åŒçš„å­—æ®µï¼ŒåŒæ—¶æ›´æ–°modifiedå­—æ®µã€‚å…¶ä¸­ï¼š å¸¦æœ‰$mergeObjectsè¡¨è¾¾å¼çš„$replaceRootstageç”¨æ¥ä¸ºquiz1ã€quiz2ã€test1å’Œtest2å­—æ®µè®¾ç½®é»˜è®¤å€¼ï¼Œèšåˆå˜é‡ROOTæŒ‡çš„æ˜¯å½“å‰æ­£åœ¨ä¿®æ”¹çš„æ–‡æ¡£ã€‚å½“å‰æ–‡æ¡£å­—æ®µå°†è¦†ç›–é»˜è®¤å€¼ã€‚ $setstageå°†modifiedå­—æ®µæ›´æ–°ä¸ºå½“å‰æ—¶é—´ã€‚123456789101112131415161718db.students2.insertMany([ &#123;&quot;_id&quot;: 1, quiz1: 8, test2: 100, quiz2: 9, modified: new Date(&quot;01/05/2020&quot;)&#125;, &#123;&quot;_id&quot;: 2, quiz2: 5, test1: 80, test2: 89, modified: new Date(&quot;01/05/2020&quot;)&#125;,])db.students2.updateMany(&#123;&#125;, [ &#123;$replaceRoot: &#123;newRoot: &#123;$mergeObjects: [&#123;quiz1: 0, quiz2: 0, test1: 0, test2: 0&#125;, &quot;$$ROOT&quot;]&#125; &#125; &#125;, &#123;$set: &#123;modified: &quot;$$NOW&quot;&#125;&#125; ])# ç»“æœï¼š# &#123;_id: 1, quiz1: 8, quiz2: 9, test1: 0, test2: 100, modified: ISODate(&quot;2021-07-21T04:03:43.185Z&quot;)&#125;,# &#123;_id: 2, quiz1: 0, quiz2: 5, test1: 80, test2: 89, modified: ISODate(&quot;2021-07-21T04:03:43.185Z&quot;)&#125; ç¤ºä¾‹3ã€‚ä½¿ç”¨èšåˆç®¡é“æ¥è®¡ç®—ã€Œå¹³å‡åˆ†æ•°å’Œæˆç»©ç­‰çº§ã€ï¼ŒåŒæ—¶æ›´æ–°modifiedå­—æ®µã€‚å…¶ä¸­ï¼š ç¬¬ä¸€ä¸ª$setstageç”¨æ¥â‘ è®¡ç®—testsæ•°ç»„çš„å¹³å‡å€¼ï¼ˆ&#123;$avg: &quot;$tests&quot;&#125;ï¼‰å¹¶æˆªæ–­å–æ•´ï¼ˆ&#123;$trunc: [&lt;number&gt;, 0]&#125;ï¼‰ï¼Œå°†å–æ•´çš„å€¼èµ‹ç»™averageå¹¶åˆ›å»ºï¼›â‘¡å°†modifiedå­—æ®µæ›´æ–°ä¸ºå½“å‰æ—¶é—´ã€‚ã€$truncç”¨æ³•ã€‘ ç¬¬äºŒä¸ª$setstageæ ¹æ®ä¸Šä¸€æ­¥çš„averageï¼Œä½¿ç”¨$switchè¡¨è¾¾å¼åˆ›å»ºgradeã€‚ã€$switchç”¨æ³•ã€‘12345678910111213141516171819202122232425db.students3.insert([ &#123;&quot;_id&quot;: 1, &quot;tests&quot;: [95, 92, 98], &quot;modified&quot;: ISODate(&quot;2019-01-01T00:00:00Z&quot;)&#125;, &#123;&quot;_id&quot;: 2, &quot;tests&quot;: [94, 88, 90], &quot;modified&quot;: ISODate(&quot;2019-01-01T00:00:00Z&quot;)&#125;, &#123;&quot;_id&quot;: 3, &quot;tests&quot;: [70, 75, 82], &quot;modified&quot;: ISODate(&quot;2019-01-01T00:00:00Z&quot;)&#125;]);db.students3.updateMany(&#123;&#125;, [ &#123;$set: &#123;average: &#123;$trunc [&#123;$avg: &quot;$tests&quot;&#125;, 0]&#125;, modified: &quot;$$NOW&quot;&#125;&#125;, &#123;$set: &#123;grade: &#123;$switch: &#123; branches: [ &#123;case: &#123;$gte: [&quot;$average&quot;, 90]&#125;, then: &quot;A&quot;&#125;, &#123;case: &#123;$gte: [&quot;$average&quot;, 80]&#125;, then: &quot;B&quot;&#125;, &#123;case: &#123;$gte: [&quot;$average&quot;, 70]&#125;, then: &quot;C&quot;&#125;, &#123;case: &#123;$gte: [&quot;$average&quot;, 60]&#125;, then: &quot;D&quot;&#125; ], default: &quot;F&quot; &#125;&#125;&#125;&#125; ])# ç»“æœï¼š# &#123;&quot;_id&quot;: 1, &quot;tests&quot;: [95, 92, 90], &quot;modified&quot;: ISODate(&quot;2021-07-21T06:06:50.533Z&quot;), &quot;average&quot;: 92, &quot;grade&quot;: &quot;A&quot;&#125;,# &#123;&quot;_id&quot;: 2, &quot;tests&quot;: [94, 88, 90], &quot;modified&quot;: ISODate(&quot;2021-07-21T06:06:50.533Z&quot;), &quot;average&quot;: 90, &quot;grade&quot;: &quot;A&quot;&#125;,# &#123;&quot;_id&quot;: 3, &quot;tests&quot;: [70, 75, 82], &quot;modified&quot;: ISODate(&quot;2021-07-21T06:06:50.533Z&quot;), &quot;average&quot;: 75, &quot;grade&quot;: &quot;C&quot;&#125;, ç¤ºä¾‹4ã€‚ä½¿ç”¨èšåˆç®¡é“è¿›è¡Œarrayçš„æ‹¼æ¥:12345678910111213141516db.students4.insertMany([ &#123;&quot;_id&quot;: 1, &quot;quizzes&quot;: [4, 6, 7]&#125;, &#123;&quot;_id&quot;: 2, &quot;quizzes&quot;: [5]&#125;, &#123;&quot;_id&quot;: 3, &quot;quizzes&quot;: [10, 10, 10]&#125;])db.students4.updateOne(&#123;_id: 2&#125;, [ &#123;$set: &#123;quizzes: &#123;$concatArrays: [&quot;$quizzes&quot;, [8, 6]]&#125;&#125;&#125; ])# ç»“æœ:# &#123;&quot;_id&quot;: 1, &quot;quizzes&quot;: [4, 6, 7]&#125;,# &#123;&quot;_id&quot;: 2, &quot;quizzes&quot;: [5, 8, 6]&#125;,# &#123;&quot;_id&quot;: 3, &quot;quizzes&quot;: [10, 10, 10]&#125; ç¤ºä¾‹5ã€‚ä½¿ç”¨èšåˆç®¡é“å°†ã€Œæ‘„æ°æ¸©åº¦ã€è½¬æ¢ä¸ºã€Œåæ°æ¸©åº¦ã€ï¼Œå…¶ä¸­ï¼š ç®¡é“åŒ…å«$addFieldsstageï¼ˆä¸$setç­‰ä»·ï¼‰ï¼Œç”¨ä»¥åˆ›å»ºæ–°çš„æ•°ç»„å­—æ®µtempsFï¼ˆåŒ…å«åæ°æ¸©åº¦çš„æ•°ç»„ï¼‰ï¼› è¯¥stageä½¿ç”¨$map``$addå’Œ$multiplyè¡¨è¾¾å¼æ¥è¿›è¡Œæ¸©åº¦è½¬æ¢$F=C\\times \\frac{9}{5}+32$ã€‚ã€$mapç”¨æ³•ï¼Œå¯¹len(tempsC)æ— è¦æ±‚ã€‘12345678910111213141516171819202122db.temperatures.insertMany([ &#123;&quot;_id&quot;: 1, &quot;date&quot;: ISODate(&quot;2019-06-23&quot;), &quot;tempsC&quot;: [ 4, 12, 17]&#125;, &#123;&quot;_id&quot;: 2, &quot;date&quot;: ISODate(&quot;2019-07-07&quot;), &quot;tempsC&quot;: [14, 24, 11]&#125;, &#123;&quot;_id&quot;: 3, &quot;date&quot;: ISODate(&quot;2019-10-30&quot;), &quot;tempsC&quot;: [18, 6, 8]&#125;])db.temperatures.updateMany(&#123;&#125;, [ &#123;$addFields: &#123;&quot;tempsF&quot;: &#123; $map: &#123; input: &quot;$tempsC&quot;, as: &quot;celsius&quot;, in: &#123;$add: [&#123;$multiply: [&quot;$$celsius&quot;, 9/5]&#125;, 32]&#125; &#125; &#125;&#125;&#125; ])# ç»“æœï¼š# &#123;&quot;_id&quot;: 1, &quot;date&quot;: ISODate(&quot;2019-06-23T00:00:00.000Z&quot;), &quot;tempsC&quot;: [ 4, 12, 17], &quot;tempsF&quot;: [39.2, 53.6, 62.6]&#125;,# &#123;&quot;_id&quot;: 2, &quot;date&quot;: ISODate(&quot;2019-07-07T00:00:00.000Z&quot;), &quot;tempsC&quot;: [14, 24, 11], &quot;tempsF&quot;: [57.2, 75.2, 51.8]&#125;,# &#123;&quot;_id&quot;: 3, &quot;date&quot;: ISODate(&quot;2019-10-30T00:00:00.000Z&quot;), &quot;tempsC&quot;: [18, 6, 8], &quot;tempsF&quot;: [64.4, 42.8, 46.4]&#125; updateæ–¹æ³•12345678db.collection.updateOne()db.collection.updateMany()db.collection.replaceOne()db.collection.update()db.collection.findOneAndReplace()db.collection.findOneAndUpdate()db.collection.findAndModify()db.collection.bulkWrite() 5.åˆ é™¤æ“ä½œä»é›†åˆä¸­åˆ é™¤æ–‡æ¡£ï¼Œå…·æœ‰ã€ŒåŸå­æ€§ã€ï¼Œä¹Ÿå¯æŒ‡å®šæ¡ä»¶æˆ–è¿‡æ»¤å™¨ï¼š12db.collection.deleteOne(filter)db.collection.deleteMany(filter) åˆ é™¤æ‰€æœ‰æ–‡æ¡£ã€‚å°†è¿‡æ»¤å™¨æ–‡æ¡£ç½®ç©ºï¼šdb.inventory.deleteMany(&#123;&#125;)ã€‚ åˆ é™¤æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚æŒ‡å®šç”¨äºæ ‡è¯†è¦åˆ é™¤æ–‡æ¡£çš„æ¡ä»¶æˆ–è¿‡æ»¤å™¨ï¼Œè¿‡æ»¤å™¨è¯­æ³•ä¸æŸ¥è¯¢æ“ä½œç›¸åŒã€‚åœ¨ã€ŒæŸ¥è¯¢è¿‡æ»¤å™¨æ–‡æ¡£ï¼ˆquery filter docuentï¼‰ã€ä¸­ä½¿ç”¨field: valueè¡¨è¾¾å¼æ¥æŒ‡å®šç›¸ç­‰åŒ¹é…æ¡ä»¶ï¼š&#123;&lt;field1&gt;: &lt;value1&gt;, ...&#125;ï¼ŒåŒç†ï¼Œå°†valueæ›¿æ¢æˆã€ŒæŸ¥è¯¢æ“ä½œç¬¦ã€æ¥æŒ‡å®šåŒ¹é…æ¡ä»¶ï¼š&#123;&lt;field1&gt;: &#123;&lt;operator1&gt;: &lt;value1&gt;&#125;, ...&#125;ã€‚ åªåˆ é™¤ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚å³ä½¿å¤šä¸ªæ–‡æ¡£ç›¸åŒ¹é…ï¼Œä¹Ÿåªåˆ é™¤ç¬¬ä¸€ä¸ªï¼šdb.collection.deleteOne(filter)ã€‚ åˆ é™¤æ–¹æ³•ï¼š db.collection.deleteOne()ï¼› db.collection.deleteMany()ï¼› db.collection.remove()ï¼› db.collection.findOneAndDelete()ï¼› db.collection.findAndModify()ï¼› db.collection.bulkWrite()ã€‚","categories":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://hwame.top/categories/MongoDB/"}],"tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://hwame.top/tags/MongoDB/"}]},{"title":"Pythonè™šæ‹Ÿç¯å¢ƒ","slug":"python-virtual-environment","date":"2021-06-28T23:54:48.000Z","updated":"2021-07-08T00:04:25.000Z","comments":true,"path":"20210629/python-virtual-environment.html","link":"","permalink":"https://hwame.top/20210629/python-virtual-environment.html","excerpt":"æ‘˜è¦ï¼šæœ¬æ–‡ä»‹ç»Pythonä¸­å¸¸ç”¨è™šæ‹Ÿç¯å¢ƒçš„ç”¨æ³•ã€‚","text":"æ‘˜è¦ï¼šæœ¬æ–‡ä»‹ç»Pythonä¸­å¸¸ç”¨è™šæ‹Ÿç¯å¢ƒçš„ç”¨æ³•ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µå‚è€ƒèµ„æ–™ï¼š Pythonä¸­æ–‡æŒ‡å—ç¬¬åäºŒç« ï¼šè™šæ‹Ÿç¯å¢ƒ 12.1 ã€è™šæ‹Ÿç¯å¢ƒã€‘ä¸ºä»€ä¹ˆè¦æœ‰è™šæ‹Ÿç¯å¢ƒï¼Ÿ 12.2 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ virtualenv 12.3 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ pipenv 12.4 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ pipx 12.5 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆå››ï¼šä½¿ç”¨ poetry Pythonæ ‡å‡†åº“venv-åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ Python è™šæ‹Ÿç¯å¢ƒçš„ä½¿ç”¨-virtualenv/virtualenvwrapperã€pycharmä½¿ç”¨ Runoob Python tutorial-è™šæ‹Ÿç¯å¢ƒå’ŒåŒ…-pyvenv Pythonä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ-Pythonè™šæ‹Ÿç¯å¢ƒçš„å®‰è£…å’Œé…ç½®-virtualenv çŸ¥ä¹ï¼šæœ€å…¨çš„Pythonè™šæ‹Ÿç¯å¢ƒä½¿ç”¨æ–¹æ³•-virtualenv/conda/pipenv æ–‡ç« é“¾æ¥ï¼šPythonè™šæ‹Ÿç¯å¢ƒæ–‡ç« è¯´æ˜æ¥ï¼šè¿™ç‰‡æ–‡ç« æ˜¯å¤åˆ¶çš„Pythonä¸­æ–‡æŒ‡å—ç¬¬åäºŒç« ï¼šè™šæ‹Ÿç¯å¢ƒï¼Œåé¢å†æ…¢æ…¢æ•´ç†å§æ…¢æ…¢æ”¹å§ã€‚ è™šæ‹Ÿç¯å¢ƒæ‰€è°“è™šæ‹Ÿç¯å¢ƒï¼ˆvirtual environmentï¼‰ï¼Œæ˜¯æŒ‡ä¸€ç§é‡‡ç”¨åä½œå¼éš”ç¦»çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå…è®¸ Python ç”¨æˆ·å’Œåº”ç”¨ç¨‹åºåœ¨å®‰è£…å’Œå‡çº§ Python åˆ†å‘åŒ…æ—¶ä¸ä¼šå¹²æ‰°åˆ°åŒä¸€ç³»ç»Ÿä¸Šè¿è¡Œçš„å…¶ä»– Python åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚ ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š ä½¿ä¸åŒåº”ç”¨å¼€å‘ç¯å¢ƒç‹¬ç«‹ï¼› ç¯å¢ƒå‡çº§ä¸å½±å“å…¶ä»–åº”ç”¨ï¼Œä¹Ÿä¸ä¼šå½±å“å…¨å±€çš„pythonç¯å¢ƒï¼› å¯ä»¥é˜²æ­¢ç³»ç»Ÿä¸­å‡ºç°åŒ…ç®¡ç†æ··ä¹±å’Œç‰ˆæœ¬çš„å†²çªï¼› ä¸åŒç¯å¢ƒä¸­Pythonä¾èµ–åŒ…ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ã€‚ ç®¡ç†Pythonç‰ˆæœ¬å’Œç¯å¢ƒçš„å·¥å…·æœ‰å¾ˆå¤šï¼Œå¸¸ç”¨çš„æœ‰ä»¥ä¸‹å‡ ç§ï¼š venvï¼šPythonè‡ªå¸¦çš„æ¨¡å—ï¼Œ virtualenvï¼š virtualenvwrapperï¼š pipenvï¼š pyvenvï¼š 12.1ã€è™šæ‹Ÿç¯å¢ƒã€‘ä¸ºä»€ä¹ˆè¦æœ‰è™šæ‹Ÿç¯å¢ƒï¼Ÿè™šæ‹Ÿç¯å¢ƒçš„æ„ä¹‰ï¼Œå°±å¦‚åŒè™šæ‹Ÿæœº ä¸€æ ·ï¼Œå®ƒå¯ä»¥å®ç°ä¸åŒç¯å¢ƒä¸­Pythonä¾èµ–åŒ…ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ã€‚ ä¸¾ä¸ªä¾‹å­å§ã€‚ å‡è®¾æˆ‘ä»¬çš„ç”µè„‘é‡Œæœ‰ä¸¤ä¸ªé¡¹ç›®ï¼Œä»–ä»¬éƒ½ç”¨åˆ°åŒä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œæœ¬æ¥ä¸€åˆ‡éƒ½é¡ºåˆ©ã€‚ä½†æ˜¯ç”±äºæŸç§åŸå› ï¼Œé¡¹ç›®Bç”±äºæŸäº›åŸå› è¦ä½¿ç”¨è¿™ä¸ªç¬¬ä¸‰æ–¹åŒ…çš„ä¸€äº›æ–°ç‰¹æ€§ï¼ˆæ–°ç‰ˆæœ¬æ‰æœ‰ï¼‰ï¼Œè€Œå¦‚æœå°±è¿™æ ·è´¸ç„¶å‡çº§äº†ï¼Œå¯¹é¡¹ç›®Açš„å½±å“æˆ‘ä»¬æ— æ³•è¯„ä¼°ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ç‰¹åˆ«éœ€è¦æœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆå¯ä»¥è®©é¡¹ç›®Aå’ŒBï¼Œå¤„äºä¸¤ä¸ªä¸åŒçš„Pythonç¯å¢ƒä¸­ã€‚äº’ä¸å½±å“ã€‚ ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¯¹è™šæ‹Ÿç¯å¢ƒæœ‰ä¸ªè®¤è¯†ï¼Œæˆ‘åˆ—ä¸¾äº†ä¸‹å…¶ä¼˜ç‚¹ï¼š ä½¿ä¸åŒåº”ç”¨å¼€å‘ç¯å¢ƒç‹¬ç«‹ ç¯å¢ƒå‡çº§ä¸å½±å“å…¶ä»–åº”ç”¨ï¼Œä¹Ÿä¸ä¼šå½±å“å…¨å±€çš„pythonç¯å¢ƒ å¯ä»¥é˜²æ­¢ç³»ç»Ÿä¸­å‡ºç°åŒ…ç®¡ç†æ··ä¹±å’Œç‰ˆæœ¬çš„å†²çª å¸‚åœºä¸Šç®¡ç† Python ç‰ˆæœ¬å’Œç¯å¢ƒçš„å·¥å…·æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåˆ—ä¸¾å‡ ä¸ªï¼š pï¼šéå¸¸ç®€å•çš„äº¤äº’å¼ python ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚ pyenvï¼šç®€å•çš„ Python ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚ Vexï¼šå¯ä»¥åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ‰§è¡Œå‘½ä»¤ã€‚ virtualenvï¼šåˆ›å»ºç‹¬ç«‹ Python ç¯å¢ƒçš„å·¥å…·ã€‚ virtualenvwrapperï¼švirtualenv çš„ä¸€ç»„æ‰©å±•ã€‚ å·¥å…·å¾ˆå¤šï¼Œä½†ä¸ªäººè®¤ä¸ºæœ€å¥½ç”¨çš„ï¼Œå½“å± virtualenvwrapperï¼Œæ¨èå¤§å®¶ä¹Ÿä½¿ç”¨ã€‚ 12.2 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ virtualenv1. å®‰è£…virtualenvç”±äº virtualenvwrapper æ˜¯ virtualenv çš„ä¸€ç»„æ‰©å±•ï¼Œæ‰€ä»¥å¦‚æœè¦ä½¿ç”¨ virtualenvwrapperï¼Œå°±å¿…é¡»å…ˆå®‰è£… virtualenvã€‚ åŸºæœ¬ä½¿ç”¨ ç”±äºvirtualenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ˜¯åœ¨å½“å‰ç¯å¢ƒä¸‹åˆ›å»ºçš„ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å‡†å¤‡ä¸€ä¸ªä¸“é—¨å­˜æ”¾è™šæ‹Ÿç¯å¢ƒçš„ç›®å½•ã€‚ï¼ˆä»¥ä¸‹æ“ä½œåœ¨Linuxåœ¨å®Œæˆï¼Œwindowsç›¸å¯¹ç®€å•ï¼Œè¯·è‡ªè¡Œå®Œæˆï¼Œæœ‰ä¸æ˜ç™½çš„è¯·å¾®ä¿¡ä¸æˆ‘è”ç³»ã€‚ï¼‰ åˆ›å»º 123456789101112131415## å‡†å¤‡ç›®å½•å¹¶è¿›å…¥$ mkdir -p /home/wangbm/Envs$ cd !$## åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæŒ‰é»˜è®¤çš„Pythonç‰ˆæœ¬ï¼‰## æ‰§è¡Œå®Œï¼Œå½“å‰ç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ªmy_env01çš„ç›®å½•$ virtualenv my_env01## ä½ ä¹Ÿå¯ä»¥æŒ‡å®šç‰ˆæœ¬$ virtualenv -p /usr/bin/python2.7 my_env01$ virtualenv -p /usr/bin/python3.6 my_env02## ä½ è‚¯å®šè§‰å¾—æ¯æ¬¡éƒ½è¦æŒ‡å®šç‰ˆæœ¬ï¼Œç›¸å½“éº»çƒ¦å§ï¼Ÿ## åœ¨Linuxä¸‹ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªé€‰é¡¹å†™è¿›å…¥ç¯å¢ƒå˜é‡ä¸­$ echo &quot;export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python2.7&quot; &gt;&gt; ~/.bashrc è¿›å…¥/é€€å‡º 1234567$ cd /home/wangbm/Envs## è¿›å…¥$ source my_env01/bin/activate## é€€å‡º$ deactivate åˆ é™¤åˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼Œåªéœ€åˆ é™¤å¯¹åº”çš„æ–‡ä»¶å¤¹å°±è¡Œäº†ã€‚å¹¶ä¸ä¼šå½±å“å…¨å±€çš„Pythonå’Œå…¶ä»–ç¯å¢ƒã€‚ 12$ cd /home/wangbm/Envs$ rm -rf my_env01 æ³¨æ„ï¼šåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒï¼Œä¸ä¼šåŒ…å«åŸç”Ÿå…¨å±€ç¯å¢ƒçš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œå…¶ä¼šä¿è¯æ–°å»ºè™šæ‹Ÿç¯å¢ƒçš„å¹²å‡€ã€‚ å¦‚æœä½ éœ€è¦å’Œå…¨å±€ç¯å¢ƒä½¿ç”¨ç›¸åŒçš„ç¬¬ä¸‰æ–¹åŒ…ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š 12345## å¯¼å‡ºä¾èµ–åŒ…$ pip freeze &gt; requirements.txt## å®‰è£…ä¾èµ–åŒ…$ pip install -r requirements.txt 2. ä½¿ç”¨ virtualenvwrappervirtualenv è™½ç„¶å·²ç»ç›¸å½“å¥½ç”¨äº†ï¼Œå¯æ˜¯åŠŸèƒ½è¿˜æ˜¯ä¸å¤Ÿå®Œå–„ã€‚ ä½ å¯èƒ½ä¹Ÿå‘ç°äº†ï¼Œè¦è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œå¿…é¡»å¾—ç‰¢è®°ä¹‹å‰è®¾ç½®çš„è™šæ‹Ÿç¯å¢ƒç›®å½•ï¼Œå¦‚æœä½ æ¯æ¬¡æŒ‰è§„çŸ©æ¥ï¼Œéƒ½å°†ç¯å¢ƒå®‰è£…åœ¨å›ºå®šç›®å½•ä¸‹ä¹Ÿæ²¡å•¥äº‹ã€‚ä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œäººæ˜¯ä¼šæ‡’æƒ°çš„ï¼Œåˆ°æ—¶å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªè™šæ‹Ÿç¯å¢ƒæ•£è½åœ¨ç³»ç»Ÿå„å¤„ï¼Œä½ å°†æœ‰å¯èƒ½å¿˜è®°å®ƒä»¬çš„åå­—æˆ–è€…ä½ç½®ã€‚ è¿˜æœ‰ä¸€ç‚¹ï¼Œvirtualenv åˆ‡æ¢ç¯å¢ƒéœ€è¦ä¸¤æ­¥ï¼Œé€€å‡º -&gt; è¿›å…¥ã€‚ä¸å¤Ÿç®€ä¾¿ã€‚ ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œvirtualenvwrapperå°±è¯ç”Ÿäº†ã€‚ å®‰è£… 12345## å®‰è£… - Linuxpip install virtualenvwrapper## å®‰è£… - Windowspip install virtualenvwrapper-win é…ç½®å…ˆfindä¸€ä¸‹virtualenvwrapper.shæ–‡ä»¶çš„ä½ç½® 12find / -name virtualenvwrapper.sh## /usr/bin/virtualenvwrapper.sh è‹¥æ˜¯ windows åˆ™ä½¿ç”¨everything æŸ¥æ‰¾ virtualenvwrapper.bat è„šæœ¬ 1D:\\Program Files (x86)\\Python38-32\\Scripts\\virtualenvwrapper.bat åœ¨~/.bashrc æ–‡ä»¶æ–°å¢é…ç½® 1234export WORKON_HOME=$HOME/.virtualenvsexport PROJECT_HOME=$HOME/workspaceexport VIRTUALENVWRAPPER_SCRIPT=/usr/bin/virtualenvwrapper.shsource /usr/bin/virtualenvwrapper.sh è‹¥æ˜¯ windows åˆ™æ–°å¢ç¯å¢ƒå˜é‡ï¼šWORKON_HOME åŸºæœ¬è¯­æ³•ï¼š mkvirtualenv [-a project_path] [-i package] [-r requirements_file] [virtualenv options] ENVNAME å¸¸ç”¨æ–¹æ³• 123456789101112131415161718## åˆ›å»º$ mkvirtualenv my_env01## è¿›å…¥$ workon my_env01## é€€å‡º$ deactivate## åˆ—å‡ºæ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒï¼Œä¸¤ç§æ–¹æ³•$ workon$ lsvirtualenv## åœ¨è™šæ‹Ÿç¯å¢ƒå†…ç›´æ¥åˆ‡æ¢åˆ°å…¶ä»–ç¯å¢ƒ$ workon my_env02## åˆ é™¤è™šæ‹Ÿç¯å¢ƒ$ rmvirtualenv my_env01 å…¶ä»–å‘½ä»¤ 1234567891011121314151617181920## åˆ—å‡ºå¸®åŠ©æ–‡æ¡£$ virtualenvwrapper## æ‹·è´è™šæ‹Ÿç¯å¢ƒ$ cpvirtualenv ENVNAME [TARGETENVNAME]## åœ¨æ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒä¸Šæ‰§è¡Œå‘½ä»¤$ allvirtualenv pip install -U pip## åˆ é™¤å½“å‰ç¯å¢ƒçš„æ‰€æœ‰ç¬¬ä¸‰æ–¹åŒ…$ wipeenv## è¿›å…¥åˆ°å½“å‰è™šæ‹Ÿç¯å¢ƒçš„ç›®å½•$ cdsitepackages## è¿›å…¥åˆ°å½“å‰è™šæ‹Ÿç¯å¢ƒçš„site-packagesç›®å½•$ cdvirtualenv## æ˜¾ç¤º site-packages ç›®å½•ä¸­çš„å†…å®¹$ lssitepackages æ›´å¤šå†…å®¹ï¼Œå¯æŸ¥çœ‹ å®˜æ–¹æ–‡æ¡£https://virtualenvwrapper.readthedocs.io/en/latest/command_ref.html 3. å®æˆ˜æ¼”ç¤ºä»¥ä¸Šå†…å®¹ï¼Œæ˜¯ä¸€ä»½ä½¿ç”¨æŒ‡å—ã€‚æ¥ä¸‹æ¥ï¼Œä¸€èµ·æ¥çœ‹çœ‹ï¼Œå¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒã€‚ å¦‚ä½•ä½¿ç”¨åœ¨æˆ‘ä»¬çš„å¼€å‘ä¸­ä½¿ç”¨æˆ‘ä»¬çš„è™šæ‹Ÿç¯å¢ƒå‘¢ é€šå¸¸æˆ‘ä»¬ä½¿ç”¨çš„åœºæ™¯æœ‰å¦‚ä¸‹å‡ ç§ äº¤äº’å¼ä¸­ PyCharmä¸­ å·¥ç¨‹ä¸­ æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä¸€ä¸€å±•ç¤ºã€‚ 3.1 äº¤äº’å¼ä¸­å…ˆå¯¹æ¯”ä¸‹ï¼Œå…¨å±€ç¯å¢ƒå’Œè™šæ‹Ÿç¯å¢ƒçš„åŒºåˆ«ï¼Œå…¨å±€ç¯å¢ƒä¸­æœ‰requestsåŒ…ï¼Œè€Œè™šæ‹Ÿç¯å¢ƒä¸­å¹¶æœªå®‰è£…ã€‚å½“æˆ‘ä»¬æ•²å…¥ workon my_env01ï¼Œå‰é¢æœ‰my_env01çš„æ ‡è¯†ï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»å¤„åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ã€‚åé¢æ‰€æœ‰çš„æ“ä½œï¼Œéƒ½å°†åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹æ‰§è¡Œã€‚ 3.2 å·¥ç¨‹é¡¹ç›®ä¸­æˆ‘ä»¬çš„å·¥ç¨‹é¡¹ç›®ï¼Œéƒ½æœ‰ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œä»”ç»†è§‚å¯Ÿï¼Œå…¶é¦–è¡Œå¯ä»¥æŒ‡å®šPythonè§£é‡Šå™¨ã€‚ å€˜è‹¥æˆ‘ä»¬è¦åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œè¿™ä¸ªé¡¹ç›®ï¼Œåªè¦æ›´æ”¹è¿™ä¸ªæ–‡ä»¶å¤´éƒ¨å³å¯ã€‚ ç°åœ¨æˆ‘è¿˜æ˜¯ä»¥ï¼Œimport requests ä¸ºä¾‹ï¼Œæ¥è¯´æ˜ï¼Œæ˜¯å¦æ˜¯åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œçš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å’Œä¸Šé¢ä¸€æ ·ï¼Œä¼šæŠ¥é”™ã€‚ æ–‡ä»¶å†…å®¹ï¼š 1234#!/root/.virtualenvs/my_env01/bin/pythonimport requestsprint &quot;ok&quot; è¿è¡Œå‰ï¼Œæ³¨æ„æ·»åŠ æ‰§è¡Œæƒé™ã€‚ 1$ chmod +x ming.py å¥½äº†ã€‚æ¥æ‰§è¡Œä¸€ä¸‹ 1$ ./ming.py å‘ç°å’Œé¢„æœŸä¸€æ ·ï¼ŒçœŸçš„æŠ¥é”™äº†ã€‚è¯´æ˜æˆ‘ä»¬æŒ‡å®šçš„è™šæ‹Ÿç¯å¢ƒæœ‰æ•ˆæœã€‚ 3.3 PyCharmä¸­ç‚¹å‡» File - Settings - Project - Interpreterç‚¹å‡»å°é½¿è½®ã€‚å¦‚å›¾ç‚¹å‡»æ·»åŠ ï¼ŒæŒ‰æç¤ºæ·»åŠ ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚ç„¶åç‚¹ OK å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œä¹‹åçš„é¡¹ç›®éƒ½ä¼šåœ¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œã€‚ 12.3 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ pipenvä»¥å‰ä¸€ç›´ä½¿ç”¨pip+virtualenv+virtualwrapperç®¡ç†æ¨¡å—å’Œç¯å¢ƒï¼Œ ä½†æ˜¯virtualwrapperåœ¨windowsä¸Šä½¿ç”¨ä¸å¤ªæ–¹ä¾¿ï¼Œè€Œä¸”åŒ…å’Œç¯å¢ƒåˆ†å¼€ç®¡ç†ç¡®å®ç»å¸¸ä¸è®°å¾—å“ªä¸ªæ˜¯å“ªä¸ªäº†ã€‚ ä¸ºä»€ä¹ˆ ä¼šæ¨è pipenv å‘¢ï¼Ÿ å®ƒæ˜¯ virtualenv å’Œ pip çš„åˆä½“ï¼Œå¯ä»¥åˆèµ·æ¥ä½¿ç”¨ï¼› ä½¿ç”¨Pipfile å’Œ Pipfile.lockæ›¿ä»£requirements.txt å¯ä»¥ä½¿ç”¨ pipenv graphå¾ˆæ–¹ä¾¿çš„çœ‹å‡ºåŒ…çš„ä¾èµ–å…³ç³»ã€‚ é€šè¿‡åŠ è½½.envæ–‡ä»¶ç®€åŒ–å¼€å‘å·¥ä½œæµç¨‹ 1. å®‰è£…pipenvå¦‚æœä½ çš„ç”µè„‘ä¸Šæ²¡æœ‰å®‰è£… pipenvï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å®‰è£… 12345## mac$ brew install pipenv## windows$ pip install [--user] pipenv å¦‚æœä½ çš„ç”µè„‘æ˜¯ windows çš„ã€‚ éœ€è¦å°†å¦‚æ ‡ç¤ºè·¯å¾„ï¼ŒåŠ å…¥åˆ° ç¯å¢ƒå˜é‡ PATH ä¸­ã€‚ ç„¶åéœ€è¦é‡å¯ä¸€ä¸‹ï¼ŒCMD ç»ˆç«¯æ‰èƒ½å¤Ÿåˆ·æ–°ç¯å¢ƒå˜é‡ã€‚ 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒDjangoWebBlog æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ï¼Œè¿›å…¥è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ 1234$ mkdir DjangoWebBlog &amp;&amp; cd DjangoWebBlog## åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼ˆé»˜è®¤çš„Pythonç‰ˆæœ¬ï¼‰$ pipenv install ä½ ä¹Ÿå¯ä»¥æŒ‡å®šç‰ˆæœ¬åˆ›å»º 12345$ pipenv --two # ç›¸å½“äº pipenv --python /usr/bin/python2$ pipenv --three # ç›¸å½“äº pipenv --python /usr/bin/python3$ pipenv --python 3.7 # ä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“çš„ç‰ˆæœ¬pipenv install --python 2 è¿™è¾¹ä»¥å®‰è£… python2 ç‰ˆæœ¬çš„è™šæ‹Ÿç¯å¢ƒä¸ºä¾‹è¯´æ˜ã€‚ å¦‚æœä½ åŸé¡¹ç›®ä½¿ç”¨çš„æ˜¯ requirements.txt è¿™ä¸ªç®¡ç†åŒ…çš„æ–¹å¼ï¼Œè¿™æ—¶å€™æ‰§è¡Œ pipenv --tow åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒåï¼Œä¼šæ‰¾åˆ° requirements.txt ï¼Œå¹¶æ ¹æ®è¿™é‡Œé¢çš„ä¾èµ–åŒ…ç”Ÿæˆ Pipfileæ–‡ä»¶ã€‚ 3. æŸ¥è¯¢è™šæ‹Ÿç¯å¢ƒ12345678## è¿”å›é¡¹ç›®çš„è·¯å¾„$ pipenv --where## è¿”å›è™šæ‹Ÿç¯å¢ƒè·¯å¾„$ pipenv --venv## è¿”å›è¯¥è™šæ‹Ÿç¯å¢ƒçš„è§£é‡Šå™¨$ pipenv --py æ¼”ç¤ºå¦‚ä¸‹ï¼š 4. æ“ä½œè™šæ‹Ÿç¯å¢ƒ123456789## è¿›å…¥è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒ$ pipenv shell## é€€å‡ºè¿™ä¸ªè™šæ‹Ÿç¯å¢ƒ$ exit$ deactivate## ç§»é™¤å½“å‰ç›®å½•çš„è™šæ‹Ÿç¯å¢ƒ$ pipenv --rm æ‰§è¡Œ pipenv shell å°±å¯ä»¥è¿›å…¥è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œåœ¨å¤´éƒ¨ä¼šæœ‰è™šæ‹Ÿç¯å¢ƒçš„æ ‡è¯†åç§°ã€‚æœ‰è¿™ä¸ªæ ‡è¯†ï¼Œè¯´æ˜å·²ç»è¿›å…¥è™šæ‹Ÿç¯å¢ƒã€‚ 1234## åœ¨å½“å‰è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œ$ pipenv run python # è¿›å…¥äº¤äº’å¼,è·Ÿç›´æ¥æ‰§è¡Œ python ä¸€æ ·$ pipenv run python æ–‡ä»¶å # è¿è¡Œæ–‡ä»¶$ pipenv run pip ... # è¿è¡Œpip 5. è™šæ‹Ÿç¯å¢ƒåŒ…ç®¡ç†1234567891011121314151617181920212223## å®‰è£…ä¸€ä¸ªæœ¬åœ°åŒ…ï¼ˆsetup.pyï¼‰åˆ°è™šæ‹Ÿç¯å¢ƒï¼ˆPipfileï¼‰$ pipenv install -e .## å®‰è£…ã€å¸è½½æ¨¡å—$ pipenv install requests$ pipenv uninstall requests$ pipenv uninstall --all # å¸è½½å…¨éƒ¨åŒ…$ pipenv install -r path/to/requirements.txt ## å®‰è£…æ‰€æœ‰ä¾èµ–$ pipenv install --dev## æ›´æ–°åŒ…$ pipenv update # æ›´æ–°æ‰€æœ‰åŒ…$ pipenv update --outdated # æ‰“å°æ‰€æœ‰è¦æ›´æ–°çš„åŒ…$ pipenv update &lt;åŒ…å&gt; # æ›´æ–°æŒ‡å®šçš„åŒ…## å°†Pipfileå’ŒPipfile.lockæ–‡ä»¶é‡Œé¢çš„åŒ…å¯¼å‡ºä¸ºrequirements.txtæ–‡ä»¶$ pipenv run pip freeze # ç›¸å½“äºpipenv run pip freeze &gt;requirements.txt$ pipenv lock -r &gt; requirements.txt $ pipenv lock -r --dev # è‹¥åªæƒ³å¯¼å‡ºå¼€å‘ç”¨çš„åŒ… 6. å…¶ä»–å‘½ä»¤12345678## åˆ›å»ºä¸€ä¸ªåŒ…å«é¢„å‘å¸ƒçš„é”æ–‡ä»¶:$ pipenv lock --pre## æ‰“å°æ‰€æœ‰åŒ…çš„ä¾èµ–å…³ç³»å›¾$ pipenv graph## æ£€æŸ¥å®‰å…¨æ¼æ´$ pipenv check æ‰“å°è¯¥è™šæ‹Ÿç¯å¢ƒä¸‹æ‰€æœ‰åŒ…çš„ä¾èµ–å…³ç³»å›¾ æœ‰çš„pythonç¬¬ä¸‰æ–¹åŒ…æ—§ç‰ˆæœ¬ä¼šæœ‰å®‰å…¨æ¼æ´ï¼Œä½¿ç”¨ pipenv check å¯ä»¥æ£€æŸ¥å®‰å…¨æ¼æ´ã€‚ 12.4 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ pipx1. ä»€ä¹ˆæ˜¯ pipxpipx æ˜¯ä¸€æ¬¾ç”¨äºå¸®åŠ©ä½ å®‰è£…å’Œè¿è¡Œé‚£äº›ç”¨ python ç¼–å†™çš„ç»ˆç«¯ç¨‹åºï¼Œå®ƒç±»ä¼¼äº macOS ä¸Šçš„ brewï¼ŒUbuntu ä¸Šçš„ aptï¼ŒCentOS ä¸Šçš„ yumã€‚ pipx ä¾èµ– pip å’Œ venvï¼Œå®ƒåªèƒ½åœ¨ python 3.6+ çš„ Python ç‰ˆæœ¬ä¸­æ‰èƒ½ä½¿ç”¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œpipx å’Œ pip ä¸€æ ·ä¼šä» pypi ä¸Šå®‰è£…åŒ…ï¼ŒåŒæ—¶ pipx ä¹Ÿèƒ½åƒ pip ä¸€æ ·ä»æœ¬åœ°ã€gitä»“åº“ã€wheel æ–‡ä»¶ä¸­å®‰è£…åŒ…ã€‚ ä¸ºäº†é¿å…ä½ åœ¨å®‰è£… python appæ—¶ï¼Œç”±äºå¤šç‰ˆæœ¬è€Œå¯¼è‡´å†²çªï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ venv æˆ–è€… virtualenv æ–°å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œç„¶åå°† app å®‰è£…åˆ°è™šæ‹Ÿç¯å¢ƒä¸­ã€‚ åç»­ä½ å¯¹è¿™ä¸ª app çš„ç®¡ç†æ“ä½œï¼Œéƒ½å¾—å…ˆè¿›å…¥è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚ å‘ç°æ²¡æœ‰ï¼Ÿå¥½åƒæœ‰ç‚¹éº»çƒ¦ã€‚ pipx çš„å­˜åœ¨ä½¿è¿™ä¸ªæµç¨‹å˜å¾—æ›´åŠ èˆ’ç•…ï¼Œä½¿ç”¨ pipx ä½ å¯ä»¥æ— éœ€å…³æ³¨è™šæ‹Ÿç¯å¢ƒçš„å­˜åœ¨ï¼Œå¹¶åœ¨ä½ çš„æœºå™¨ä¸Šå®‰è£…å¤šä¸ªç‰ˆæœ¬çš„ python appã€‚ 2. å®‰è£…ä½¿ç”¨å®‰è£… pipx 123$ python3 -m pip install --user pipx$ python3 -m userpath append ~/.local/binSuccess! ä½¿ç”¨ Pipx éœ€è¦æ³¨æ„ä¸¤ä¸ªè·¯å¾„ äºŒè¿›åˆ¶æ–‡ä»¶çš„ä¿å­˜ä½ç½®ï¼šé»˜è®¤æ˜¯ ~/.local/binï¼Œå¯ä½¿ç”¨ç¯å¢ƒå˜é‡ PIPX_BIN_DIR è¿›è¡Œæ›´æ”¹ï¼Œæˆ–è€…æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤(python3 -m userpath append $&#123;you_path&#125;) è™šæ‹Ÿç¯å¢ƒçš„ä¿å­˜ä½ç½®ï¼šé»˜è®¤æ˜¯ ~/.local/pipxï¼Œå¯ä½¿ç”¨ç¯å¢ƒå˜é‡ PIPX_HOME è¿›è¡Œæ›´æ”¹ åœ¨æˆ‘å®‰è£…å¥½ pipx ï¼Œå‡†å¤‡ä½¿ç”¨çš„æ—¶å€™ï¼Œå‘ç°å…¨å±€æ‰¾ä¸åˆ° pipx è¿™ä¸ªå‘½ä»¤ã€‚ æŒ‰ç…§å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œéš¾é“ä½¿ç”¨å…¨è·¯å¾„æ‰§è¡Œå‘½ä»¤ï¼Ÿ ä¸ï¼Œæ€ä¹ˆéƒ½è§‰å¾—ä¸å¤ªå¯¹åŠ²ã€‚ã€‚ æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å¾ˆç®€å•ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼ˆä¸¤ç§éƒ½å¯ä»¥ï¼Œæˆ‘æ¼”ç¤ºä½¿ç”¨çš„ç¬¬ä¸€ç§æ–¹æ³•ï¼‰ï¼š æ·»åŠ ä¸ªè½¯é“¾æ¥æŒ‡å‘åˆšåˆšé‚£ä¸ªå…¨è·¯å¾„å°±å¥½å•¦ å°†è¿™ä¸ªè·¯å¾„æ·»åŠ åˆ° PATH ä¸­ /Users/MING/Library/Python/3.9/bin/ 1$ ln -s /Users/MING//Library/Python/3.9/bin/pipx /usr/local/bin/pipx è½¯é“¾æ¥å»ºå¥½åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ pipx çš„å‘½ä»¤å•¦ã€‚ åˆšåˆšæˆ‘ä½¿ç”¨ pipx å®‰è£…äº† youtube-dl åï¼Œå…¶å®å¹¶æ²¡æœ‰å°†è¿™ä¸ª youtube-dl å®‰è£…åˆ°ç³»ç»Ÿå…¨å±€çš„ Python ç¯å¢ƒä¸­ã€‚ è¿˜è®°å¾—æœ€å¼€å§‹ï¼Œæˆ‘å¼ºè°ƒè¿‡ä¸¤ä¸ªéå¸¸é‡è¦çš„è·¯å¾„å—ï¼Ÿ ç°åœ¨æ¥çœ‹ä¸€ä¸‹ï¼Œè¿™ä¸ªè·¯å¾„ä¸‹é¢éƒ½æœ‰å“ªäº›ä¸œè¥¿ï¼Ÿ ä»æˆªå›¾ä¸Šå¯ä»¥çœ‹å‡º pipx åœ¨ ~/.local/pipx/venvs ç›®å½•ä¸‹æ–°å»ºäº†ä¸ªåå« youtube-dl çš„è™šæ‹Ÿæœºç¯å¢ƒ å¹¶å°† youtube-dl å®‰è£…åˆ°è¿™ä¸ªè™šæ‹Ÿæœºç¯å¢ƒä¸­ ç„¶ååœ¨ ~/.local/bin çš„ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼ŒæŒ‡å‘è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒä¸­ è¿™æ · youtube-dl å°±å˜æˆå…¨å±€çš„å·¥å…·å•¦ã€‚ ä¸ºäº†é¿å…ä½ æ–°å®‰è£…çš„ youtube-dl ä¸å…¨å±€çš„å†²çªï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®š pipx çš„å‘½ä»¤æ¥è¿è¡Œ youtube-dl 1$ pipx run youtube-dl --no-check-certificate https://www.bilibili.com/video/BV1jK4y1h7uA è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š pip run ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œåœ¨çº¿çš„ python è„šæœ¬ 12$ pipx run https://gist.githubusercontent.com/cs01/fa721a17a326e551ede048c5088f9e0f/raw/6bdfbb6e9c1132b1c38fdd2f195d4a24c540c324/pipx-demo.pypipx is working! 3. æŸ¥çœ‹åŒ…æŸ¥çœ‹å·²å®‰è£…è¿‡çš„åŒ… 1$ pipx list 4. å®‰è£…åŒ…ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ python åŒ…ï¼Œå¹¶å®‰è£…åˆ°æ–°å»ºçš„è™šæ‹Ÿç¯å¢ƒä¸­ 1$ pipx install &lt;PACKAGE&gt; 4. è¿è¡ŒAPPpipx run åé¢å¯æ¥ä¸€ä¸ªåŒ…çš„ url é“¾æ¥ï¼Œä¼šå°†è¿™ä¸ªåŒ…ä¸‹è½½ä¸‹æ¥å¹¶è¿è¡Œï¼Œä¹Ÿå¯ä»¥æ¥å·²å®‰è£…è¿‡çš„åº”ç”¨åæ¥ç›´æ¥è¿è¡Œå®ƒ 1$ pipx run &lt;PACKAGE_URL/APP&gt; å¦‚æœä¸€ä¸ª app æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ spec æŒ‡å®šç‰ˆæœ¬å· 1$ pipx run --spec PACKAGE==1.0.0 app æ›´ç¥å¥‡çš„æ˜¯ï¼Œpipx æ”¯æŒæŒ‡å®š git ä»£ç ä»“åº“ç›´æ¥è¿è¡Œ 12345678910$ pipx run --spec git+https://github.com/psf/black.git black## æŒ‡å®šåˆ†æ”¯$ pipx run --spec git+https://github.com/psf/black.git@branch black ## æŒ‡å®šæŸä¸ªgit hash$ pipx run --spec git+https://github.com/psf/black.git@ce14fa8b497bae2b50ec48b3bd7022573a59cdb1 black ## æŒ‡å®šæŸä¸ªå‘è¡Œç‰ˆæœ¬$ pipx run --spec https://github.com/psf/black/archive/18.9b0.zip black # install a release 5. å‡çº§åŒ…å‡çº§æŸä¸ªåŒ… 1$ pipx upgrade &lt;pkg&gt; å‡çº§å…¨éƒ¨åŒ… 1$ pipx upgrade-all 6. å¸è½½åŒ…å¸è½½æŸä¸ªåŒ… 1$ pipx uninstall &lt;pkg&gt; å¸è½½å…¨éƒ¨åŒ… 1$ pipx uninstall-all é‡è£…å…¨éƒ¨åŒ… 1$ pipx reinstall-all 7. ä½¿ç”¨ pipæ¯æ‰§è¡Œä¸€æ¬¡ pipx install å°±ä¼šæ–°å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œé‚£æˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•ç®¡ç†è¿™äº›è™šæ‹Ÿæœºç¯å¢ƒå‘¢ï¼Ÿ æ¯”å¦‚æˆ‘æƒ³çœ‹è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒé‡Œå®‰è£…äº†å“ªäº›åŒ…ï¼Ÿ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°±å¯ä»¥åƒä½¿ç”¨ pip ä¸€æ ·ï¼Œæ¥ç®¡ç† pipx çš„è™šæ‹Ÿç¯å¢ƒ 1$ pipx runpip &lt;env_name&gt; &lt;args&gt; æ•ˆæœå¦‚ä¸‹ 8. å…¶ä»–æ‰§è¡Œ pipx completions å¯ä»¥å¯ç”¨ pipx çš„è¡¥å…¨è¯´æ˜ã€‚ å¯¹äºä¸åŒçš„ç»ˆç«¯å¼€å¯æ–¹å¼ä¸ä¸€æ ·ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ zshï¼Œæ–¹æ³•æ˜¯ 123$ autoload -U bashcompinit$ bashcompinit$ eval &quot;$(register-python-argcomplete pipx)&quot; æˆ‘å®‰è£…å¥½åï¼Œå¯ä»¥ä½¿ç”¨ tab é”®è¿›è¡Œå‘½ä»¤è¡¥å…¨ã€‚ æ‰§è¡Œ pipx ensurepath å¯ä»¥ç¡®ä¿ ~/.local/bin è¿™ä¸ªé‡è¦çš„ç›®å½•ï¼Œå·²ç»æ”¾å…¥åˆ° $PATH çš„å˜é‡ä¸­ã€‚ 9. pipx vs pippipx åªæ˜¯è§£å†³ pip çš„ä¸€ä¸ªç—›ç‚¹ï¼Œå› æ­¤ä»–çš„é€‚ç”¨åœºæ™¯æ¯”è¾ƒå•ä¸€ï¼Œå®ƒåªé€‚ç”¨äºå®‰è£…å’Œè¿è¡Œé‚£äº›æœ‰æä¾›å‘½ä»¤è¡Œå…¥å£çš„appã€‚ pip é€‚ç”¨äºå¤§å¤šæ•°çš„ Python ç‰ˆæœ¬ï¼Œè€Œ pipx éœ€è¦ Python 3.6+ æ‰å¯ä»¥ä½¿ç”¨ pipx ä¾èµ– pip å’Œ venvï¼Œå¯ä»¥ä½¿ç”¨ pip å®‰è£…pipx ï¼Œåè¿‡æ¥åˆ™ä¸è¡Œã€‚ pip å’Œ pipx é»˜è®¤éƒ½æ˜¯ä» pypi ä¸Šå®‰è£…åŒ… pipx åœ¨å®‰è£…å’Œç®¡ç† cli åº”ç”¨ç¨‹åºæ—¶ï¼Œæ¯” pip æ›´çµæ´»ï¼Œå®ƒå¯ä»¥åœ¨å…è®¸åœ¨éš”ç¦»ç¯å¢ƒä¸­å®‰è£…å’Œè¿è¡Œ Python åº”ç”¨ 10. å‚è€ƒæ–‡ç«  https://github.com/pipxproject/pipx https://pipxproject.github.io/pipx/comparisons/ 12.5 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆå››ï¼šä½¿ç”¨ poetry1. å®‰è£… poetrypoetryæä¾›å¤šç§å®‰è£…æ–¹å¼ï¼Œä¸ªäººæ¨èä»ä»¥ä¸‹2ç§æ–¹å¼ä¸­é€‰æ‹©ï¼š æ–¹å¼ä¸€ï¼šï¼ˆæ¨èï¼‰ä½¿ç”¨åœ¨çº¿è„šæœ¬è¿›è¡Œå®‰è£…ï¼Œæ˜¯æœ€ä¸ºæ¨èçš„å®‰è£…æ–¹å¼ 1$ curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python æ–¹å¼äºŒï¼šï¼ˆpipï¼‰ å®˜æ–¹ä¸å»ºè®®è¿™ä¹ˆåšï¼Œå› ä¸ºæœ‰å¯èƒ½ä¼šé€ æˆä¾èµ–å†²çªï¼Œå¯ä»¥è€ƒè™‘ç”¨ pipx æˆ– pipsi 1$ pip install --user poetry å®‰è£…åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ£€æµ‹æ˜¯å¦å¯ç”¨ 12$ poetry --versionPoetry version 1.1.4 2. åˆ›å»ºé¡¹ç›®å¦‚æœä½ æ˜¯åœ¨ä¸€ä¸ªå·²æœ‰çš„é¡¹ç›®é‡Œä½¿ç”¨ Poetryï¼Œä½ åªéœ€è¦æ‰§è¡Œ poetry init å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª pyproject.toml æ–‡ä»¶ï¼š 1$ poetry init è€Œå¦‚æœæ˜¯æ–°å»º ä¸€ä¸ªé¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ 1$ poetry new demo-priject è¿è¡Œå®Œåï¼Œåœ¨å½“å‰ç›®å½•ä¸‹å°±ä¼šå¤šä¸€ä¸ª demo-project çš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ 123456789$ tree demo-prijectdemo-prijectâ”œâ”€â”€ README.rstâ”œâ”€â”€ demo_prijectâ”‚ â””â”€â”€ __init__.pyâ”œâ”€â”€ pyproject.tomlâ””â”€â”€ tests â”œâ”€â”€ __init__.py â””â”€â”€ test_demo_priject.py å¦‚æœè¦æŠŠé¡¹ç›®ä»£ç æ”¾å…¥åˆ° src ç›®å½•ä¸‹ï¼Œåœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼Œå¯ä»¥åŠ ä¸Š --src å‚æ•°ã€‚ 3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒä½¿ç”¨ poetry install å‘½ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆç¡®ä¿å½“å‰ç›®å½•æœ‰ pyproject.toml æ–‡ä»¶ï¼‰ï¼š 1$ poetry install è¿™ä¸ªå‘½ä»¤ä¼šè¯»å– pyproject.toml ä¸­çš„æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬å¼€å‘ä¾èµ–ï¼‰å¹¶å®‰è£…ï¼Œå¦‚æœä¸æƒ³å®‰è£…å¼€å‘ä¾èµ–ï¼Œå¯ä»¥é™„åŠ  â€”no-dev é€‰é¡¹ã€‚å¦‚æœé¡¹ç›®æ ¹ç›®å½•æœ‰ poetry.lock æ–‡ä»¶ï¼Œä¼šå®‰è£…è¿™ä¸ªæ–‡ä»¶ä¸­åˆ—å‡ºçš„é”å®šç‰ˆæœ¬çš„ä¾èµ–ã€‚å¦‚æœæ‰§è¡Œ add/remove å‘½ä»¤çš„æ—¶å€™æ²¡æœ‰æ£€æµ‹åˆ°è™šæ‹Ÿç¯å¢ƒï¼Œä¹Ÿä¼šä¸ºå½“å‰ç›®å½•è‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚ 4. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒåˆ›å»ºè™šæ‹Ÿç¯å¢ƒåï¼Œå¦‚æœæƒ³è¦åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚å»æ‰§è¡Œè„šæœ¬ï¼Œå»ä½¿ç”¨ pip list ç­‰ç­‰ã€‚ å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ 1$ poetry run &lt;commands&gt; æ¯”å¦‚æˆ‘æŸ¥çœ‹è¯¥è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…äº†å“ªäº›åŒ… 1$ poetry run pip list å†æ¯”å¦‚æˆ‘æƒ³åœ¨è¯¥è™šæ‹Ÿç¯å¢ƒä¸‹æ‰§è¡Œ app.py 1$ poetry run python app.py æ¯æ¬¡åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹åšç‚¹å•¥äº‹ï¼Œå‘½ä»¤å‰é¢éƒ½è¦åŠ ä¸Š poetry runï¼Œæœ‰ç‚¹å¤ªéº»çƒ¦äº†ã€‚ è¿™æ—¶å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œç›´æ¥æ¿€æ´»å½“å‰çš„è™šæ‹Ÿç¯å¢ƒ 1$ poetry shell 5. åŒ…çš„ç®¡ç†å®‰è£…åŒ… 1$ poetry add &lt;pkg&gt; æ·»åŠ  â€”dev å‚æ•°å¯ä»¥æŒ‡å®šä¸ºå¼€å‘ä¾èµ– 1$ poetry add pytest --dev æŸ¥çœ‹æ‰€æœ‰å®‰è£…çš„ä¾èµ–åŒ… 1$ poetry show åŠ ä¸Š --tree å¯ä»¥æŸ¥çœ‹ä»–ä»¬çš„ä¾èµ–å…³ç³» 1$ poetry show --tree åŠ ä¸Š --outdated å¯ä»¥æŸ¥çœ‹å¯ä»¥æ›´æ–°çš„ä¾èµ– 1$ poetry show --outdated å¦‚æœè¦æ›´æ–°ä¾èµ–å¯ä»¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ 12345## æ›´æ–°å…¨éƒ¨$ poetry update## æ›´æ–°æŸä¸ªä¾èµ–$ poetry update foo æƒ³å¸è½½æŸä¸ªåŒ…ï¼Œç”¨è¿™ä¸ªå‘½ä»¤ 1$ poetry remove foo 6. å¸¸ç”¨é…ç½®Poetry çš„é…ç½®å­˜å‚¨åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œæ¯” Pipenv è®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹å¼è¦æ–¹ä¾¿ä¸€ç‚¹ã€‚é…ç½®é€šè¿‡ poetry config å‘½ä»¤è®¾ç½®ï¼Œæ¯”å¦‚ä¸‹é¢çš„å‘½ä»¤å¯ä»¥å†™å…¥ PyPI çš„è´¦å·å¯†ç ä¿¡æ¯ï¼š 1$ poetry config http-basic.pypi username password ä¸‹é¢çš„å‘½ä»¤è®¾ç½®åœ¨é¡¹ç›®å†…åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹ï¼š 1$ poetry config settings.virtualenvs.in-project true å¦ä¸€ä¸ªå¸¸ç”¨çš„é…ç½®æ˜¯è®¾ç½® PyPI é•œåƒæºï¼Œä»¥ä½¿ç”¨è±†ç“£æä¾›çš„ PyPI é•œåƒæºä¸ºä¾‹ï¼Œä½ éœ€è¦åœ¨ pyproject.toml æ–‡ä»¶é‡ŒåŠ å…¥è¿™éƒ¨åˆ†å†…å®¹ï¼š 123[[tool.poetry.source]]name = &quot;douban&quot;url = &quot;https://pypi.doubanio.com/simple/&quot; ä¸è¿‡ç»è¿‡æµ‹è¯• Poetry ä¼šä½¿ç”¨ pip.ini è®¾ç½®çš„ PyPI é•œåƒï¼Œè€Œä¸”è±†ç“£çš„æºå¥½åƒå¾ˆä¹…æ²¡æ›´æ–°äº†ï¼ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒå®‰è£…çš„é»˜è®¤ä¾èµ–é‡Œ importlib-metadata==0.20 æ‰¾ä¸åˆ°ï¼‰ï¼Œè¿™ç¯‡æ–‡ç« åˆ—å‡ºäº†ä¸€äº›å…¶ä»–å›½å†…çš„ PyPI æºã€‚ 7. å‚è€ƒæ–‡ç«  ç›¸æ¯” Pipenvï¼ŒPoetry æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹© 12.6 ã€è™šæ‹Ÿç¯å¢ƒã€‘æ–¹æ¡ˆäº”ï¼šä½¿ç”¨ venvåœ¨å‰é¢ä»‹ç»çš„å‡ ç§æ–¹æ³•ä¸­ï¼Œéƒ½éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹æ¨¡å—æ¥å®Œæˆè™šæ‹Ÿç¯å¢ƒçš„ç®¡ç†ã€‚ ä½†å…¶å®åœ¨ Python 3 ä¸­å°±è‡ªå¸¦äº†ä¸€ä¸ªä¸“é—¨ç”¨é—¨ç®¡ç†è™šæ‹Ÿç¯å¢ƒçš„æ¨¡å—ï¼Œå®ƒå« venvã€‚ 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒvenv åå¯ä»¥æ¥ä¸€ä¸ªç›®å½•ï¼ˆå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼‰ç”¨äºåˆ›å»ºä½ çš„è™šæ‹Ÿç¯å¢ƒï¼Œä»–å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚ 123456## mac or linux$ python3 -m venv [venv_dir]## windows: ä¸€å®šè¦æŒ‡å®š --without-pip ## æœ€åå†æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤å®‰è£… python -m ensurepip$ python3 -m venv --without-pip [venv_dir] ä½¿ç”¨ venv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„é€Ÿåº¦éå¸¸å¿«ï¼Œå¤§æ¦‚åªéœ€è¦ä¸¤ä¸‰ç§’çš„æ ·å­ã€‚ åˆ›å»ºå®Œæˆåï¼Œåœ¨ä½ æ‰€æŒ‡å®šçš„ç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ª pyvenv.cfg çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒè®°å½•ç€è™šæ‹Ÿç¯å¢ƒçš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½ ä½¿ç”¨çš„ Python çš„å®¶ç›®å½•ï¼Œè¿˜æœ‰å½“å‰è™šæ‹Ÿç¯å¢ƒçš„ Python ç‰ˆæœ¬ï¼Œæ˜¯å¦å¼€å¯ä½¿ç”¨ç³»ç»Ÿçš„ site-packages æ¨¡å—ï¼Œå¦‚æœå¼€å¯äº†ï¼Œé‚£ä¹ˆå½“ä½ å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç³»ç»Ÿä¸­å·²ç»è£…è¿‡çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä½†æ˜¯ä½ åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹è£…çš„æ¨¡å—å°±ä¸èƒ½è¢«å…¶ä»–åœ°æ–¹çš„ç¨‹åºä½¿ç”¨ã€‚ 123home = /usr/local/bininclude-system-site-packages = falseversion = 3.9.1 å¦‚æœä½ çš„ç¯å¢ƒä¸­æœ‰ Python 3.8 ä¹Ÿæœ‰ Python 3.9 ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ åªè¦ä½ åœ¨åˆ›å»ºæ—¶ï¼Œç”¨ä½ é¢„æœŸç‰ˆæœ¬çš„ Python å»æ‰§è¡Œå°±å¥½å•¦ 12$ python3.8 -m venv [venv_dir]$ python3.9 -m venv [venv_dir] å¯å¦‚æœä½ çš„ç¯å¢ƒä¸­æœ‰ä¸¤ä¸ª Python 3.9 å‘¢ï¼Ÿä½ æƒ³ä½¿ç”¨ä¸åœ¨ PATH çš„ä¸­çš„ Python å»åˆ›å»ºï¼Œå°±è¦ç”¨ç»å¯¹è·¯å¾„å»åˆ›å»ºäº†ã€‚ 1$ /usr/local/bin/python3 -m venv [venv_dir] 2. è¿›å…¥åˆ›å»ºç¯å¢ƒè¿›å…¥è™šæ‹Ÿç¯å¢ƒçš„æ–¹æ³•ï¼Œå¯¹æ¯”ä¹‹å‰ä»‹ç»çš„æ–¹æ¡ˆï¼Œvenv çš„æ–¹æ³•å°±ç›¸å½“åŸå§‹äº†ã€‚ å¦‚æœä½ ä½¿ç”¨ Windows ï¼Œé‚£ä¹ˆåœ¨ cmd ä¸‹è¿›è¡Œ Scripts ç›®å½•ï¼Œæ‰§è¡Œ activate.bat 12345## cmd.exe$ .\\Scripts\\activate.bat## PowserShell$ .\\Scripts\\Activate.ps1 å¦‚æœä½ ä½¿ç”¨PowserShellæ¿€æ´»è™šæ‹Ÿç¯å¢ƒå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œé‚£è¦å…ˆæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼šSet-ExecutionPolicy RemoteSignedï¼Œå†æŒ‰ Y è€Œå¦‚æœä½ ä½¿ç”¨çš„ Mac æˆ–è€… Linuxï¼Œé‚£ä¹ˆç›´æ¥æ‰§è¡Œä¸‹é¢å‘½ä»¤å°±è¡Œ 1$ source bin/activate æ‰§è¡Œå®Œåï¼Œè‹¥åœ¨ä½ çš„å‘½ä»¤è¡Œä¸‹æœ‰ demo å­—æ ·ï¼ˆä¹‹æ‰€ä»¥æ˜¯ demo ï¼Œå› ä¸ºæˆ‘ä»¬åˆ›å»ºæ—¶çš„ç›®å½•åå°±æ˜¯ demoï¼‰ï¼Œè¯´æ˜ä½ å·²ç»å¤„äºè™šæ‹Ÿç¯å¢ƒä¸‹ã€‚ ç”±äºè™šæ‹Ÿç¯å¢ƒæ˜¯å…¨æ–°çš„å¹²å‡€ç¯å¢ƒï¼Œæ­¤æ—¶ä½ ä½¿ç”¨ pip list ï¼Œä¼šçœ‹åˆ°å•¥åŒ…éƒ½æ²¡æœ‰ï¼Œåªæœ‰æœ€åŸºæœ¬çš„ pip å’Œ setuptools ã€‚ 3. é€€å‡ºè™šæ‹Ÿç¯å¢ƒé€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼Œæ— è®ºæ˜¯ Windows ã€ Mac ã€ è¿˜æ˜¯ Linux ï¼Œæ–¹æ³•éƒ½æ˜¯åŒä¸€æ¡å‘½ä»¤ã€‚é€€å‡ºåï¼Œä½ çš„è™šæ‹Ÿç¯å¢ƒåç§°ï¼ˆå¦‚ä¸Šé¢çš„ demo ï¼‰ä¹Ÿä¼šæ¶ˆå¤±ã€‚ 1$ deactivate 4. æ€»ç»“ä¸€ä¸‹venv æ˜¯ Python3 ä¸­è‡ªå¸¦çš„è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ï¼Œä¸éœ€è¦é¢å¤–å®‰è£…ï¼ŒåŠŸèƒ½ç®€å•ï¼Œç”¨æ³•ä¹Ÿç®€å•ã€‚ä½†æ˜¯å®ƒä¸èƒ½åƒ poetry å’Œ pipenv ç”¨äºé¡¹ç›®çš„ç®¡ç†ï¼Œå› æ­¤ venv å»ºè®®åªåšäº†è§£ï¼Œåœ¨ä¸€äº›ç®€å•çš„åœºæ™¯ä¸­å¯ä»¥ä½¿ç”¨ï¼Œå¦‚æœæ˜¯å¤æ‚çš„é¡¹ç›®ä¸­ï¼Œå¯ä»¥ç›´æ¥ä¸Š poetry å’Œ pipenvã€‚","categories":[{"name":"python","slug":"python","permalink":"https://hwame.top/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://hwame.top/tags/python/"}]},{"title":"Windowså‘½ä»¤è¡Œä¸­æ­£ç¡®æ˜¾ç¤ºé¢œè‰²","slug":"ansi-color-in-windows-cmd","date":"2021-06-18T12:03:20.000Z","updated":"2021-06-27T10:33:59.000Z","comments":true,"path":"20210618/ansi-color-in-windows-cmd.html","link":"","permalink":"https://hwame.top/20210618/ansi-color-in-windows-cmd.html","excerpt":"æ‘˜è¦ï¼šwin10çš„cmdå¯¹é¢œè‰²çš„æ˜¾ç¤ºä¸å¤ªå‹å¥½ï¼Œåœ¨æ¯é¥¬çš„è¿‡ç¨‹ä¸­å·®ç‚¹æŠŠç”µè„‘æå´©ã€‚","text":"æ‘˜è¦ï¼šwin10çš„cmdå¯¹é¢œè‰²çš„æ˜¾ç¤ºä¸å¤ªå‹å¥½ï¼Œåœ¨æ¯é¥¬çš„è¿‡ç¨‹ä¸­å·®ç‚¹æŠŠç”µè„‘æå´©ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µå‚è€ƒèµ„æ–™ï¼š è§£å†³CMDå‘½ä»¤è¡Œçª—å£ä¸æ˜¾ç¤ºé¢œè‰²é—®é¢˜python cmdå‘½ä»¤æç¤ºç¬¦æ–‡æœ¬é¢œè‰²è¾“å‡º Github ANSICON CMDçª—å£æ— æ³•æ˜¾ç¤ºå¸¦é¢œè‰²æ–‡å­—è¾“å‡º ç‰¹æ®Šå‘½ä»¤ä¹‹REGå‘½ä»¤ è½¬ä¹‰åºåˆ—Escape SequencesåŠLinux echoå‘½ä»¤å¤šç§é¢œè‰²æ˜¾ç¤º Linuxç»ˆç«¯å’Œwin32æ§åˆ¶å°æ–‡æœ¬é¢œè‰²è¾“å‡º æ§åˆ¶å°è¾“å‡ºé¢œè‰²æ§åˆ¶ï¼ˆConsole æ¨¡å¼ä¸‹çš„é¢œè‰²æ˜¾ç¤ºï¼‰ å‘½ä»¤è¡Œé‡Œè¾“å‡ºå¸¦é¢œè‰²çš„å­—ä½“ Windows cmd(DOS)å‘½ä»¤çª—å£ä¸­echoå‘½ä»¤ANSIè½¬ä¹‰æ˜¾ç¤ºå½©è‰²å­—æˆ–èƒŒæ™¯ æ–‡ç« é“¾æ¥ï¼šWindowså‘½ä»¤è¡Œä¸­æ­£ç¡®æ˜¾ç¤ºé¢œè‰² 1.èƒŒæ™¯ ä¸ºäº†æå¥½è¿™ä¸ªé—®é¢˜ï¼Œå·®ç‚¹æŠŠç”µè„‘ç»™æå´©äº†ï¼Œåœ¨è¿™é‡Œç‰¹æ„è®°å½•ä¸‹æ¥ï¼Œç®—æ˜¯ç•™ç»™è‡ªå·±çš„ä¸€ä¸ªæ•™è®­ã€‚ ä¸´è¿‘æ¯•ä¸šï¼Œè¿™ä¸¤å¤©ä»€ä¹ˆäº‹æƒ…éƒ½æ²¡æœ‰ï¼Œå°±ç­‰ç€å‚åŠ æ¯•ä¸šå…¸ç¤¼ç„¶åè·‘è·¯ã€‚å°±æƒ³ç€å†™ç‚¹ä¸œè¥¿å§ï¼Œhexoéƒ¨ç½²çš„æ—¶å€™æ— æ³•æ­£å¸¸æ˜¾ç¤ºé¢œè‰²ã€‚å¦‚å›¾ï¼ˆæ³¨æ„æœ€åä¸€è¡Œï¼‰ï¼š å…¶å®å‘¢ï¼Œè¿™ä¸ªé—®é¢˜æ—©å°±å‡ºç°äº†ï¼Œè§Hexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²ä¹‹éƒ¨ç½²Hexoï¼Œåªä¸è¿‡ä¸€ç›´æ²¡ç®¡å®ƒï¼Œç°åœ¨é—²ä¸‹æ¥äº†å°±æƒ³æ‹¯æ•‘ä¸€ä¸‹å¤„å¥³åº§å¼ºè¿«ç—‡ã€‚ ä¸ä»…å¦‚æ­¤ï¼Œcmdä¸­åªèƒ½è¯†åˆ«^[[35m æ–‡å­— ^[[0mè€Œä¸èƒ½è¯†åˆ«\\33[35m æ–‡å­— \\33[0mï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ­£ç¡®è½¬ä¹‰\\033ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ^[æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¸”åªèƒ½åœ¨å‘½ä»¤è¡Œä¸‹é€šè¿‡ç»„åˆé”®Ctrl + [è¾“å…¥ï¼ˆè¿˜æœ‰å…¶ä»–æ–¹å¼è¾“å…¥ï¼Œè§åæ–‡ï¼‰ã€‚ é‰´äºä»¥ä¸Šé—®é¢˜ï¼Œåœ¨ç»è¿‡è¾ƒé•¿æ—¶é—´çš„æŠ˜è…¾åï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå¯ç”¨çš„æ–¹æ³•ï¼šANSICONã€‚ 2.è§£å†³æ–¹æ¡ˆ2.1.coloramaåœ¨Pythonä¸­æ˜¾ç¤ºé¢œè‰²ä¸»è¦å‚è€ƒã€Œè§£å†³CMDå‘½ä»¤è¡Œçª—å£ä¸æ˜¾ç¤ºé¢œè‰²é—®é¢˜pythonã€ï¼Œç”¨åˆ°çš„åº“ä¸ºcoloramaï¼Œä»£ç å¦‚ä¸‹ï¼š1234from colorama import init init(autoreset=True) print(&quot;\\033[35m ç´«è‰² \\033[0m&quot;) #ç´«è‰² ä¸Šè¿°æ–¹æ³•é€šè¿‡é¢œè‰²ä»£ç å®ç°é¢œè‰²çš„æ˜¾ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Foreè®¾ç½®é¢œè‰²ï¼š123456from colorama import init, Foreinit(autoreset=True)print(Fore.YELLOW + &quot;é»„è‰²&quot;)print(&quot;æ™®é€šæ–‡å­—&quot;) print(Fore.MAGENTA + &quot;æ´‹çº¢è‰²&quot;)coloramaæ–¹æ³•åªé€‚ç”¨äºpythonç¨‹åºåœ¨ç»ˆç«¯ä¸Šæ‰“å°å½©è‰²æ–‡å­—ï¼Œå¹¶ä¸èƒ½è§£å†³å…¶ä»–ç¨‹åºçš„è¾“å‡ºã€‚ 2.2.ANSICONé‰´äºä¸Šè¿°é—®é¢˜ï¼Œåœ¨æŸ¥æ‰¾äº†æµ·é‡èµ„æ–™åï¼Œå‚è€ƒã€Œcmdå‘½ä»¤æç¤ºç¬¦æ–‡æœ¬é¢œè‰²è¾“å‡ºã€ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†ANSICONã€‚ANSICONåŸºæœ¬ä¸Šå¯ä»¥å®Œç¾è§£å†³é‡åˆ°çš„å…³äºcmdé¢œè‰²çš„æ‰€æœ‰é—®é¢˜ï¼Œè¿™æ˜¯å®ƒçš„è‡ªæˆ‘ä»‹ç»ï¼š ANSICON provides ANSI escape sequences for Windows console programs. It provides much the same functionality as ANSI.SYS does for MS-DOS. åœ¨64ä½Windowsä¸Šï¼ŒANSICONåŒ…å«äº†ä¸»ç¨‹åºansicon.exeå’Œæ‰©å±•ANSI64.dllï¼Œåœ¨cmdä¸­è¿è¡Œè¯¥ç¨‹åºå³å¯å¼€å¯ä¸€ä¸ªå­shellï¼Œåœ¨å­shellä¸­å³å¯æ­£å¸¸æ˜¾ç¤ºé¢œè‰²ï¼Œä¸ä¼šå‡ºç°å›¾ä¸€çš„é—®é¢˜ã€‚ ANSICONå¸®åŠ©ä¿¡æ¯å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526ANSICON by Jason Hood &lt;jadoxa@yahoo.com.au&gt;.Version 1.89 (29 April, 2019). Freeware.http://ansicon.adoxa.vze.com/Process ANSI escape sequences in Windows console programs.ansicon [-lLEVEL] [-i] [-I] [-u] [-U] [-m[ATTR]] [-p[u]] [-e|E STRING | -t|T [FILE...] | PROGRAM [ARGS]] -l set the logging level (1=process, 2=module, 3=function, +4=output, +8=append, +16=imports, +32=files) for PROGRAM -i install - add ANSICON to CMD&#x27;s AutoRun entry (also implies -p) -u uninstall - remove ANSICON from the AutoRun entry -I -U use local machine instead of current user -m use grey on black (&quot;monochrome&quot;) or ATTR as default color -p hook into the parent process -pu unhook from the parent process -e echo STRING -E echo STRING, don&#x27;t append newline -t display files (&quot;-&quot; for stdin), combined as a single stream -T display files, name first, blank line before and after PROGRAM run the specified program nothing run a new command processor, or display stdin if redirectedATTR is one or two hexadecimal digits; please use &quot;COLOR /?&quot; for details.It may start with &#x27;-&#x27; to reverse foreground and background (but not for -p). ç”±ä¸Šå¯çŸ¥ï¼Œç›´æ¥è¿è¡Œè¯¥ç¨‹åºå°†ä¸å¸¦ä»»ä½•å‚æ•°ï¼Œå¼€å¯ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œè¿›ç¨‹ï¼Œè¿™ä¹Ÿæ˜¯åæ¥æ‚²å‚¬çš„ç›´æ¥åŸå› ã€‚ç°åœ¨çœ‹æ¥ï¼Œè²Œä¼¼åªéœ€è¦åŠ ä¸Š-ié€‰é¡¹å°†å…¶æ·»åŠ åˆ°cmdçš„AutoRunå³å¯ã€‚ 3.é‡‡å‘ä¹‹è·¯3.1.é—®é¢˜äº§ç”Ÿåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¥½åƒä¸€åˆ‡æ­£å¸¸ï¼Œæ–‡ç« å¼€å§‹è¯´çš„ã€Œå·®ç‚¹æŠŠç”µè„‘æå´©ã€åˆæ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ å› ä¸ºæ‹…å¿ƒä¼šå‡ºç°å…¶ä»–é—®é¢˜ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰å®‰è£…ANSICONï¼Œå¼€å¯å­shellå¥½åƒä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ— éå°±æ˜¯æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨è¾“å…¥å‘½ä»¤/path/to/ansicon.exeã€‚è¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œåªè¦æŠŠansicon.exeæ–‡ä»¶è·¯å¾„åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­å³å¯ã€‚ä¸ºäº†çœäº‹æˆ‘ç›´æ¥æŠŠansicon.exeå’ŒANSI64.dllå¤åˆ¶åˆ°C:/Windows/System32/ç›®å½•ä¸‹ï¼Œè¿™æ ·ä¸€æ¥åœ¨ä»»ä½•å‘½ä»¤è¡Œä¸‹éƒ½å¯ä»¥ç›´æ¥è¿è¡Œansiconå‘½ä»¤äº†ã€‚ å½“éœ€è¦æ­£å¸¸æ˜¾ç¤ºé¢œè‰²æ—¶ï¼Œè¾“å…¥ansiconå³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šä¸Šå›¾ä¸­ï¼Œç›´æ¥æ‰“å°é¢œè‰²å°†æ˜¾ç¤ºä¹±ç ï¼Œåœ¨ansiconçš„å­shellä¸­åˆ™å¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œè¾“å…¥exitæ‰å¯é€€å‡ºshellã€‚æ­¤æ—¶å†æ‰“å°é¢œè‰²ä»ä¼šä¹±ç ï¼Œå› ä¸ºåªæœ‰åœ¨ansiconçš„shellä¸­æ‰å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚ åœ¨æŸ¥èµ„æ–™çš„æ—¶å€™ï¼Œå¶ç„¶çœ‹åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼šCMDçª—å£æ— æ³•æ˜¾ç¤ºå¸¦é¢œè‰²æ–‡å­—è¾“å‡ºã€‚æ–‡ç« ä¸­æåˆ°ï¼Œåˆ©ç”¨æ³¨å†Œè¡¨çš„AutoRunå­—ç¬¦ä¸²å€¼å¯ä»¥å®ç°åœ¨æ‰“å¼€CMDçª—å£æ—¶è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤ã€‚äºæ˜¯ï¼Œæˆ‘å°±è®¾æƒ³ä¿®æ”¹æ³¨å†Œè¡¨ï¼Œåœ¨æ¯æ¬¡æ‰“å¼€CMDçš„æ—¶å€™è®©ä»–è‡ªåŠ¨æ‰§è¡Œansiconå‘½ä»¤ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥äº†ã€‚ è¯´å¹²å°±å¹²ï¼ŒWin + Ræ‰“å¼€è¿è¡Œï¼Œè¾“å…¥regeditæ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œå®šä½åˆ°è®¡ç®—æœº\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Command Processorä¸‹ï¼Œæ–°å»ºå­—ç¬¦ä¸²å€¼AutoRunï¼ŒåŒå‡»è¯¥å€¼ï¼Œåœ¨æ•°å€¼æ•°æ®ä¸­å¡«å†™ansiconï¼Œä¸€æ°”å‘µæˆã€‚ æ­¤æ—¶æˆ‘å·²ç»è¿«ä¸åŠå¾…åœ°è¦æµ‹è¯•äº†ï¼Œç„¶è€Œï¼Œå½“æˆ‘æ‰“å¼€cmdçš„æ—¶å€™ï¼Œçª—å£ä¸­å´ç–¯ç‹‚æ‰“å°Microsoft Windows [ç‰ˆæœ¬ 10.0.18363.1556](c) 2019 Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚ï¼Œæ­¤æ—¶æˆ‘å·²ç»æ„Ÿè§‰ä¸å¦™ã€‚å¥½åœ¨å®ƒåªå¼€äº†ä¸€ä¸ªçª—å£ï¼ˆæ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªä¼ç¬”â€¦â€¦ï¼‰ï¼Œæˆ‘ä¸å¾—ä¸ä¸€ç›´æŒ‰Ctrl + Cè®©å®ƒåœä¸‹æ¥ï¼Œç”šè‡³ç›´æ¥å‰æ‰è¿™ä¸ªçª—å£ã€‚ æˆ‘åˆæŸ¥äº†åŠå¤©ï¼Œä¸€ç›´éƒ½ä»¥ä¸ºæ˜¯æ³¨å†Œè¡¨ä¿®æ”¹æ–¹å¼ä¸å¯¹ï¼Œåˆä¸çŸ¥é“åœ¨å“ªé‡Œçœ‹åˆ°äº†cmd /k xxxè¿™æ ·çš„ä¸€ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯è¿™ä¸ªå‘½ä»¤è®©æˆ‘çš„ç”µè„‘ç›´æ¥å´©æºƒã€‚è¯¥å‘½ä»¤ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çª—å£æ¥æ‰§è¡Œxxxå‘½ä»¤ã€‚äºæ˜¯æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€æˆ‘æŠŠä¸Šé¢æ³¨å†Œè¡¨çš„æ•°å€¼æ•°æ®æ”¹æˆäº†cmd /k ansiconï¼Œå½“æˆ‘æ‰“å¼€CMDçª—å£çš„ä¸€ç¬é—´ï¼Œç”µè„‘å†…å­˜æ€¥å‰§å¢åŠ ï¼Œæ— é™å¼€å¯æ–°çª—å£å¹¶æ‰§è¡Œansiconå‘½ä»¤ã€‚ è‡ªæ­¤èµ°ä¸Šäº†ä¿®ç”µè„‘çš„è‰°éš¾ä¹‹è·¯ã€‚ 3.2.è‰°éš¾è§£å†³ç”±äºç”µè„‘å†…å­˜å¡çˆ†ï¼Œæ— æ³•è¿›è¡Œä»»ä½•æ“ä½œï¼Œå°±ç®—æƒ³åˆ é™¤æ³¨å†Œè¡¨å€¼ä¹Ÿæ²¡åŠæ³•ï¼Œå› ä¸ºé¼ æ ‡é”®ç›˜æ ¹æœ¬åŠ¨ä¸äº†ã€‚æ— å¥ˆä¹‹ä¸‹ï¼Œå‡†å¤‡é‡å¯ç”µè„‘ï¼Œè·Ÿå®ƒæŠ¢é€Ÿåº¦ï¼Œåœ¨å†…å­˜çˆ†æ»¡ä¹‹å‰æŠŠæ³¨å†Œè¡¨æ”¹å›æ¥ã€‚äº‹å®è¯æ˜æˆ‘è¿˜æ˜¯å¤ªå¤©çœŸäº†ï¼Œç”µè„‘ä¸€å¼€æœºä»–å°±å¼€å§‹äº†ï¼Œæ ¹æœ¬ä¸ç»™æ—¶é—´ä½ å»åšå…¶ä»–æ“ä½œï¼Œå¦‚å›¾ï¼š åˆ°è¿™é‡Œå·²ç»æ²¡æœ‰ä»»ä½•åŠæ³•äº†ï¼Œç³»ç»Ÿè¿˜åŸä¹Ÿä¸è¡Œï¼Œå› ä¸ºæˆ‘å¾ˆæ—©å°±åˆ é™¤äº†ç³»ç»Ÿè¿˜åŸç‚¹ï¼ˆåªä¸ºèŠ‚çœé‚£ä¹ˆä¸€ä¸¢ä¸¢å†…å­˜â€¦ï¼‰ï¼Œç°åœ¨åªèƒ½é‡è£…ç³»ç»Ÿäº†ï¼Œç”šè‡³è¿Uç›˜å¯åŠ¨ç›˜éƒ½åšå¥½äº†ã€‚é‡è£…ç³»ç»Ÿå€’æ˜¯æ— æ‰€è°“ï¼Œä½†æ˜¯ç”µè„‘é‡Œæœ‰å¾ˆå¤šé‡è¦çš„æ–‡ä»¶ã€é…ç½®ã€å®‰è£…çš„è½¯ä»¶ç­‰ã€‚æˆ‘çœŸçš„ä¸æƒ³é‡è£…ç³»ç»Ÿï¼Œä½†æ˜¯æ²¡åŠæ³•å•Šï¼ ä¸Šå›¾æ˜¯å‡†å¤‡é‡è£…ç³»ç»Ÿä¹‹å‰æ‹çš„ç…§ï¼Œä¸ºçš„æ˜¯ç•™ä¸€ä¸ªæ¡Œé¢å¸ƒå±€ï¼Œå¯ä»¥çœ‹åˆ°å³ä¾§å‘½ä»¤è¡Œçª—å£è¾¹ç¼˜åšåšçš„ä¸€å±‚é»‘è¾¹ï¼Œéƒ½ä¸çŸ¥é“å¼€äº†å¤šå°‘ä¸ªçª—å£äº†ã€‚ ä»Uç›˜é‡è£…ç³»ç»Ÿè¿˜è¦è®¾ç½®ä¸€ä¸‹BIOSï¼Œå¼€å¯UEFIä»€ä¹ˆçš„ã€‚ç„¶è€Œå“ªæœ‰é‚£ä¹ˆé¡ºåˆ©ï¼Œå°±åœ¨æˆ‘å¤±è´¥äº†æ— æ•°æ¬¡ä¸€å¿ƒæƒ³è¦æ“ä½œç³»ç»Ÿçš„æ—¶å€™ï¼Œä»–å´æç¤ºå„ç§é”™è¯¯ï¼Œè¦ä¹ˆæ˜¯æŸä¸ªåœ°æ–¹è®¾ç½®ä¸å¯¹ã€è¦ä¹ˆæ˜¯æŸä¸ªé€‰é¡¹æ²¡æœ‰å¼€å¯ã€‚åœ¨åå¤çš„é‡å¯å’Œè®¾ç½®ä¸­ï¼Œçªç„¶å‘ç°äº†ä¸€ä¸ªä¿®å¤çš„é€‰é¡¹ã€‚åœ¨è¿™ç§è¿ç³»ç»Ÿéƒ½ä¸è®©æˆ‘é‡è£…çš„æƒ…å†µä¸‹ï¼Œæ— ç–‘ç»™äº†æˆ‘ä¸€ä¸å¸Œæœ›ã€‚ ç„¶è€Œï¼Œæ–°çš„é—®é¢˜åˆå‡ºç°äº†ï¼Œæ‰€æœ‰çš„ä¿®å¤é€‰é¡¹éƒ½è¯•è¿‡äº†è¿˜æ˜¯æ²¡ç”¨ï¼Œè¿™è®©æˆ‘æ•´ä¸ªäººéƒ½ä¸å¥½äº†ï¼Œä¸€åº¦æ¿’ä¸´å´©æºƒã€‚ ä¸–äº‹æ€»æ˜¯è¿™æ ·ï¼Œåœ¨ä½ æœ€ç»æœ›çš„æ—¶å€™æ‰ä¼šæ˜¾ç°ä¸€ä¸æ›™å…‰ã€‚ åœ¨æŸä¸€ä¸ªä¿®å¤é€‰é¡¹ä¸­ï¼Œå¯ä»¥æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œç›®æµ‹ç›˜ç¬¦Xåº”è¯¥æ˜¯Uç›˜å§ï¼ŒSourceç›®å½•å°±æ˜¯å¯åŠ¨ç›˜çš„ä½ç½®ã€‚å¦‚å›¾æ‰€ç¤ºï¼š ä½†æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œèƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œçš„å‘½ä»¤è¡Œæ˜¯æœ‰ç®¡ç†å‘˜æƒé™çš„ï¼Œæœ€ç›´æ¥çš„æƒ³æ³•å°±æ˜¯åœ¨è¿™é‡Œåˆ é™¤æ³¨å†Œè¡¨å€¼ï¼Œç„¶åé‡å¯å°±å®Œç¾äº†ã€‚æœäº†ä¸€ä¸‹ï¼Œå‘ç°è¿˜çœŸæœ‰æ“ä½œæ³¨å†Œè¡¨çš„å‘½ä»¤REGï¼Œè¿˜æœ‰å¯¹åº”çš„QUREYã€ADDã€DELETEç­‰é€‰é¡¹ï¼Œæ­¤å¤„å‚è€ƒäº†ç‰¹æ®Šå‘½ä»¤ä¹‹REGå‘½ä»¤ã€‚è¿™ä»¤æˆ‘å¤§å–œè¿‡æœ›ï¼Œæ„Ÿè§‰èƒœåˆ©å°±åœ¨çœ¼å‰ã€‚ç„¶è€Œï¼Œå½“æˆ‘æŸ¥è¯¢HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Command Processorä¸‹çš„å€¼æ—¶ï¼Œå´æ²¡æœ‰AutoRunè¿™ä¸€é¡¹ï¼ˆå¦‚ä¸Šå›¾ï¼‰ï¼Œåªæœ‰å¦‚ä¸‹å‡ é¡¹ï¼š1234CompletionChar REG_DWORD 0x9DefaultColor REG_DWORD 0x0EnableExtensions REG_DWORD 0x1PathCompletionChar REG_DWORD 0x9é€šè¿‡å¯¹æ¯”3.1èŠ‚ã€Šé—®é¢˜äº§ç”Ÿã€‹çš„å›¾äºŒå’Œä¸Šå›¾ï¼Œå”¯ç‹¬å°‘äº†AutoRunè¿™ä¸€é¡¹ã€‚è¿™å¦å¤–ç™¾æ€ä¸å¾—å…¶è§£çš„åŒæ—¶ï¼Œä¹Ÿæ˜¯ååˆ†éƒé—·ã€‚æˆ‘æµ‹è¯•è¿‡REG ADDå’ŒREG DELETEï¼Œå¥½åƒéƒ½æˆåŠŸäº†ï¼Œä¸ºä½•è¿™é‡Œå°±æŸ¥è¯¢ä¸åˆ°å‘¢ï¼Ÿçœ‹æ¥è¿™ä¸ªæ–¹æ³•åˆè¡Œä¸é€šäº†ã€‚ å°±åœ¨æˆ‘ä¸€ç­¹è«å±•çš„æ—¶å€™ï¼Œçªç„¶çµæœºä¸€åŠ¨ï¼Œäº§ç”Ÿé—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºæ— é™å¯åŠ¨æ–°çª—å£ä»è€Œè¿è¡Œansiconå‘½ä»¤ï¼Œé‚£æˆ‘å¯ä»¥äººä¸ºç ´åæ‰ä»–çš„è¿è¡Œç¯å¢ƒå•Šã€‚äºæ˜¯æˆ‘åœ¨å‘½ä»¤è¡Œé‡Œè¯•ç€åˆ é™¤æ–‡ä»¶C:\\Windows\\System32\\ANSI64.dllï¼Œç»“æœæˆåŠŸäº†ã€‚ èµ¶ç´§é‡å¯ç”µè„‘ï¼Œå°½ç®¡ä»ç„¶ä¼šæ— é™å¼€å¯æ–°çª—å£ï¼Œä½†æœç„¶æ²¡é‚£ä¹ˆå¡äº†ï¼Œå› ä¸ºansiconå‘½ä»¤æ— æ³•æ­£å¸¸è¿è¡Œã€‚äºæ˜¯å¯ä»¥æ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œåˆ é™¤æ‰ç½ªé­ç¥¸é¦–AutoRunï¼Œå†é‡å¯ç”µè„‘å°±æ¢å¤æ­£å¸¸äº†ã€‚ è‡³æ­¤ï¼Œå†ç»åƒè¾›ä¸‡è‹¦ï¼Œç”µè„‘æ€»ç®—æ˜¯ä¿®å¥½äº†ï¼Œå¯ç®—æ˜¯ä¸éœ€è¦é‡è£…ç³»ç»Ÿäº†ã€‚ 4.é™„å½•4.1.ANSIé¢œè‰²åºåˆ—æ ¼å¼ æœ¬æ®µæ¥è‡ªè½¬ä¹‰åºåˆ—Escape SequencesåŠLinux echoå‘½ä»¤å¤šç§é¢œè‰²æ˜¾ç¤ºã€‚åœ¨è®¡ç®—æœºç•Œï¼ŒANSIè½¬ä¹‰ç¼–ç ï¼ˆescape codeï¼‰æˆ–è€…è½¬ä¹‰åºåˆ—ï¼ˆescape sequencesï¼‰æ˜¯å¸¦å†…ä¿¡å·ï¼ˆå…ƒæ•°æ®å’Œæ§åˆ¶ä¿¡å·ï¼Œè¯‘è€…æ³¨ï¼‰æ§åˆ¶è§†é¢‘æ–‡å­—ç»ˆç«¯çš„æ ¼å¼ã€é¢œè‰²ã€å…¶ä»–è¾“å‡ºé€‰é¡¹çš„ä¸€ç§æ–¹æ³•ã€‚ä¸ºäº†ç¼–ç è¿™äº›æ ¼å¼ä¿¡æ¯ï¼Œå®ƒæŠŠæŸç§å­—èŠ‚åºåˆ—åµŒå…¥åˆ°æ–‡æœ¬ä¸­ï¼Œè¯¥åºåˆ—å¿…é¡»ç‰¹åˆ«çš„è§£é‡Šï¼Œä¸”ä¸åº”è¯¥ä½œä¸ºå­—ç¬¦çš„æœ¬ä¹‰ã€‚å°½ç®¡ç¡¬ä»¶å­—ç¬¦ç»ˆç«¯åœ¨21ä¸–çºªå·²ç»å˜å¾—å¾ˆæ„ˆæ¥æ„ˆå°‘è§ï¼Œè¿™ç§æ ‡å‡†ä¾ç„¶å…·æœ‰å®ç”¨ä»·å€¼ï¼Œæ˜¯å› ä¸ºå¤§å¤šæ•°ç»ˆç«¯ä»¿çœŸå™¨è‡³å°‘è¿˜èƒ½è§£é‡Šåœ¨è¾“å‡ºæ–‡æœ¬ä¸­çš„ä¸€äº›ANSIè½¬ä¹‰åºåˆ—ã€‚ä½†å¾®è½¯çš„win32æ§åˆ¶å°ç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„ä¾‹å¤–ã€‚ ä¸Šæ–‡ä¸­çš„ã€Œ\\033[35mã€å’Œã€Œ\\033[0mã€å°±æ˜¯ANSIè½¬ä¹‰åºåˆ—ï¼ˆANSI escape code/sequenceï¼‰ï¼Œè½¬ä¹‰åºåˆ—ä½¿ç”¨ESCæ§åˆ¶å­—ç¬¦å¼€å§‹ï¼ŒESCé”®ä½äºé”®ç›˜å·¦ä¸Šè§’ï¼Œå…¶å¯¹åº”çš„ASCIIç ä¸º\\033ï¼ˆå…«è¿›åˆ¶ï¼‰ã€\\27ï¼ˆåè¿›åˆ¶ï¼‰å’Œ\\0x1bï¼ˆåå…­è¿›åˆ¶ï¼‰ã€‚ é€šç”¨çš„æ§åˆ¶æ–‡æœ¬é¢œè‰²çš„è½¬ä¹‰åºåˆ—æ ¼å¼ä¸ºCSI n1[;n2[;...]] mï¼Œå…¶ä¸­CSIå…¨ç§°ä¸ºã€Œæ§åˆ¶åºåˆ—å¼•å¯¼å™¨ï¼ˆControl Sequence Introducer/Initiatorï¼‰ã€ï¼Œå³ä¸Šè¿°\\033ã€\\x1bå’Œ\\eç­‰ï¼›n1ã€n2ç­‰è¡¨ç¤ºSGRå‚æ•°ï¼Œå¤šä¸ªSGRå‚æ•°å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œè§ä¸‹è¡¨ã€‚ é€šå¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨åˆ°è¡¨ä¸­éƒ¨åˆ†å±æ€§ï¼Œæ›´è¯¦ç»†çš„å±æ€§å€¼å¯å‚è€ƒå‘½ä»¤è¡Œé‡Œè¾“å‡ºå¸¦é¢œè‰²çš„å­—ä½“ã€‚ ä¸€èˆ¬æ ¼å¼ï¼šCSI[æ˜¾ç¤ºæ–¹å¼;å‰æ™¯è‰²;èƒŒæ™¯è‰²m æ–‡å­— CSI[0mã€‚ æ³¨ï¼šç»æµ‹è¯•ï¼Œåœ¨Linuxä¸‹\\033ã€\\x1bå’Œ\\eå¯ç”¨ï¼Œ\\33ã€\\0x1bå’Œ\\27ä¸å¯ç”¨ã€‚æ³¨ï¼šåœ¨Windowsä¸‹åªæœ‰\\033ã€\\33ã€\\x1bã€^[å¯ç”¨ï¼ˆä¸ä¸€å®šå‡†ç¡®ï¼‰ï¼Œ\\eä¸å¯ç”¨ã€‚ ç¼–ç  è¯´æ˜ å¤‡æ³¨ 0 å…³é—­æ‰€æœ‰æ ¼å¼ï¼Œè¿˜åŸä¸ºåˆå§‹çŠ¶æ€ ç»ˆç«¯é»˜è®¤è®¾ç½® 1 ç²—ä½“/é«˜äº®æ˜¾ç¤º æ—  2 æ¨¡ç³Š/å¼±åŒ– ä¸æ˜¯æ‰€æœ‰çš„ç»ˆç«¯ä»¿çœŸå™¨éƒ½æ”¯æŒï¼Œåªæœ‰å°‘æ•°ä»¿çœŸå™¨æ”¯æŒ 3 æ–œä½“ ä¸æ˜¯æ‰€æœ‰çš„ç»ˆç«¯ä»¿çœŸå™¨éƒ½æ”¯æŒï¼Œåªæœ‰å°‘æ•°ä»¿çœŸå™¨æ”¯æŒ 4 ä¸‹åˆ’çº¿ï¼ˆå•çº¿ï¼‰ æ—  5 é—ªçƒï¼ˆæ…¢ï¼‰ æ—  6 é—ªçƒï¼ˆå¿«ï¼‰ ä¸æ˜¯æ‰€æœ‰çš„ç»ˆç«¯ä»¿çœŸå™¨éƒ½æ”¯æŒï¼Œåªæœ‰å°‘æ•°ä»¿çœŸå™¨æ”¯æŒ 7 äº¤æ¢èƒŒæ™¯è‰²ä¸å‰æ™¯è‰²ï¼ˆåæ˜¾ï¼‰ æ—  8 éšè—ï¼ˆä¼¸æ‰‹ä¸è§äº”æŒ‡ï¼Œå•¥ä¹Ÿçœ‹ä¸è§ï¼‰ ä¸æ˜¯æ‰€æœ‰çš„ç»ˆç«¯ä»¿çœŸå™¨éƒ½æ”¯æŒï¼Œåªæœ‰å°‘æ•°ä»¿çœŸå™¨æ”¯æŒ 22 è®¾ç½®ä¸€èˆ¬å¯†åº¦ æ—  24 å…³é—­ä¸‹åˆ’çº¿ æ—  25 å…³é—­é—ªçƒ æ—  27 å…³é—­åå‘å›¾åƒï¼Œå³å…³é—­7 æ—  30-37 å‰æ™¯è‰²ï¼Œå³30+xï¼Œxè¡¨ç¤ºä¸åŒçš„é¢œè‰²ï¼ˆå‚è§ä¸‹é¢çš„ã€Œé¢œè‰²è¡¨ã€ï¼‰ æ—  38 åœ¨ç¼ºçœçš„å‰æ™¯é¢œè‰²ä¸Šè®¾ç½®ä¸‹åˆ’çº¿ æ—  39 åœ¨ç¼ºçœçš„å‰æ™¯é¢œè‰²ä¸Šå…³é—­ä¸‹åˆ’çº¿ æ—  40-47 èƒŒæ™¯è‰²ï¼Œå³40+xï¼Œxè¡¨ç¤ºä¸åŒçš„é¢œè‰²ï¼ˆå‚è§ä¸‹é¢çš„ã€Œé¢œè‰²è¡¨ã€ï¼‰ æ—  49 è®¾ç½®ç¼ºçœé»‘è‰²èƒŒæ™¯ æ—  é¢œè‰²å€¼x å‰æ™¯è‰²ç¼–ç  èƒŒæ™¯è‰²ç¼–ç  é¢œè‰² æ•ˆæœ 0 30 40 é»‘è‰² é»‘è‰² 1 31 41 çº¢è‰² çº¢è‰² 2 32 42 ç»¿è‰² ç»¿è‰² 3 33 43 é»„è‰² é»„è‰² 4 34 44 è“è‰² è“è‰² 5 35 45 ç´«è‰² ç´«è‰² 6 36 46 é’è‰² é’è‰² 7 37 47 ç™½è‰² ç™½è‰² 4.2.è®¾ç½®é¢œè‰²ä¸€èˆ¬æ ¼å¼ï¼šCSI [ æ˜¾ç¤ºæ–¹å¼; å‰æ™¯è‰²; èƒŒæ™¯è‰² m æ–‡å­—éƒ¨åˆ† CSI [ 0 mã€‚ CSI æ˜¾ç¤ºæ–¹å¼ å‰æ™¯è‰² èƒŒæ™¯è‰² \\033 \\x1b \\eESCï¼ˆ^[ï¼‰ 0-9ç­‰ 30-37 40-47 éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨åŒä¸€å¤„çš„CSIæœ€å¥½ä¿æŒä¸€è‡´ï¼Œã€Œæ˜¾ç¤ºæ–¹å¼ã€ã€ã€Œå‰æ™¯è‰²ã€å’Œã€ŒèƒŒæ™¯è‰²ã€çš„é¡ºåºä¸é‡è¦ã€‚ å…³äºWindowsä¸‹CMDä¸­ESCï¼ˆ^[ï¼‰çš„è¾“å…¥æ–¹å¼ï¼Œå‚è€ƒã€ŠWindows cmd(DOS)å‘½ä»¤çª—å£ä¸­echoå‘½ä»¤ANSIè½¬ä¹‰æ˜¾ç¤ºå½©è‰²å­—æˆ–èƒŒæ™¯ã€‹ï¼š Windowsä¸‹CMDä¸­^[æ˜¯ANSIçš„ESCä¸€ä¸ªå­—ç¬¦ï¼ˆæ³¨æ„^å’Œ[æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œå°±å¥½æ¯”æˆ‘ä»¬Ctrl + Cæ—¶æ˜¾ç¤ºçš„^Cä¸€æ ·ï¼‰ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„é”®ç›˜ä¸Šå·¦ä¸Šè§’é‚£ä¸ªESCæŒ‰é”®ã€‚å…¶ASCIIç å€¼çš„åè¿›åˆ¶æ˜¯27ï¼Œ å…«è¿›åˆ¶æ˜¯33ï¼ˆä¸€èˆ¬å†™ä¸º\\033)ï¼Œåå…­è¿›åˆ¶æ˜¯1bï¼ˆä¸€èˆ¬å†™ä¸º\\x1bï¼‰ã€‚å…¶è¾“å…¥æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š æ–¹æ³•ä¸€ï¼ˆåªèƒ½åœ¨CMDçª—å£ä¸­è¾“å…¥ï¼‰ï¼šåœ¨CMDçª—å£ä¸­æŒ‰Ctrl + [ç»„åˆé”®å³å¯ï¼Œè¿™ç§æ–¹æ³•æœ€ç®€å•ã€‚ æ–¹æ³•äºŒï¼ˆåªèƒ½åœ¨CMDçª—å£ä¸­è¾“å…¥ï¼‰ï¼šåœ¨CMDçª—å£ä¸­æŒ‰Alt + 2 + 7ç»„åˆé”®å³å¯ï¼Œæ³¨æ„å¿…é¡»æ˜¯å°é”®ç›˜ä¸Šçš„æ•°å­—é”®2å’Œ7ï¼Œå…ˆæŒ‰ä½Altä¸æ”¾å†æŒ‰2å’Œ7æœ€åæ”¾å¼€Altã€‚å¦‚æœæ²¡æœ‰æ•°å­—å°é”®ç›˜ï¼Œåˆ™ä¸èƒ½ç”¨è¿™ç§æ–¹å¼ã€‚ æ–¹æ³•ä¸‰ï¼ˆç¼–è¾‘å™¨ä¸­å…ˆè¾“å…¥å†æ›¿æ¢ï¼‰ï¼šç•¥ã€‚åƒåœ¾è½¯ä»¶ä¸é…ã€‚","categories":[{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/categories/miscellanea/"}],"tags":[{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/tags/miscellanea/"}]},{"title":"å¦‚ä½•å°†åµŒå¥—åˆ—è¡¨å±•å¼€ä¸ºä¸€ç»´","slug":"flatten-a-nested-list","date":"2021-06-10T11:56:05.000Z","updated":"2021-06-20T10:43:21.000Z","comments":true,"path":"20210610/flatten-a-nested-list.html","link":"","permalink":"https://hwame.top/20210610/flatten-a-nested-list.html","excerpt":"","text":"æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µå‚è€ƒèµ„æ–™ï¼š How to make a flat list out of a list of lists? Right Foot In: More on python flattenï¼ˆæœ‰ç¼˜äººæ‰èƒ½æ‰“å¼€ï¼‰ Flatten an irregular list of lists How Not to Flatten a List of Lists in Python æ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20210610/flatten-a-nested-list.html 1.å¼•è¨€é—²æ¥æ— äº‹é€›Stack Overflowï¼Œå‘ç°äº†ä¸€ä¸ªæŒºæœ‰æ„æ€çš„é—®é¢˜ï¼šHow to make a flat list out of a list of lists?ã€‚ 123# æ€æ ·å¿«é€Ÿä¼˜é›…åœ°å°†srcè½¬æ¢æˆdstï¼Ÿsrc = [[1, 2, 3], [4, 5, 6], [7], [8, 9]]dst = [1, 2, 3, 4, 5, 6, 7, 8, 9] ä¹ä¸€çœ‹ï¼Œå¯¹äºæ‰€ç»™çš„äºŒç»´æ•°ç»„ï¼Œforå¾ªç¯æ˜¯æœ€å®¹æ˜“æƒ³åˆ°çš„æ€è·¯ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰some cool â€œone-linerâ€çš„åŠæ³•å‘¢ï¼Ÿé¡ºç€è¿™ä¸ªé—®é¢˜å¾€ä¸‹çœ‹ï¼Œè¿˜æŒºæœ‰æ„æ€ã€‚ è¯´æ˜ï¼šæ­¤å¤„ä»…è®¨è®ºå„æ–¹æ³•çš„æ­£ç¡®æ€§ï¼Œè‡³äºæ€§èƒ½å’Œæ•ˆç‡å¯è‡ªè¡Œæµ‹è¯•ã€‚ 2.è§£å†³æ–¹æ¡ˆ2.1.æ–¹æ³•ä¸€ï¼šfunctools.reduceè¯¥é—®é¢˜çš„æå‡ºè€…Emmaæä¾›äº†ä¸€ä¸ªæ€è·¯ï¼Œåˆ©ç”¨æ ‡å‡†åº“å‡½æ•°reduceï¼š1234from functools import reducesrc = [[1, 2, 3], [4, 5, 6], [7], [8, 9]]#reduce(lambda x, y: x.extend(y), src)reduce(lambda x, y: x + y, src)è¿™ä¸ªæ–¹æ³•æ˜¯å¯è¡Œçš„ï¼Œä½†ä¸ºä½•ä¸èƒ½ç”¨x.extend(y)å‘¢ï¼ŸåŸå› æ˜¯åˆ—è¡¨çš„extendæ–¹æ³•ä¸è¿”å›å€¼ï¼ˆè¿”å›Noneï¼‰ï¼Œæ•…åœ¨ä¸‹ä¸€è½®æ¬¡çš„reduceè¿‡ç¨‹ä¸­ä¼šå¯¼è‡´None.extendï¼Œä»è€Œraise AttributeError: &#39;NoneType&#39; object has no attribute &#39;extend&#39;ã€‚è€Œåˆ—è¡¨åŠ æ³•åˆ™ä¼šè¿”å›ã€Œextendedã€åˆ—è¡¨ã€‚ å¦‚æœéè¦ç”¨extendå‘¢ï¼Ÿæ—¢ç„¶è¿”å›Noneï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥äººä¸ºç»™è¿”å›èµ‹å€¼ï¼ŸLBarretç»™å‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆï¼šreduce(lambda x, y : x.extend(y) or x, src, [])ï¼Œæˆ–è€…çœç•¥initialå‚æ•°ï¼šreduce(lambda x, y : x.extend(y) or x, src)ã€‚å…¶ä¸­x.extend(y) or xå®ç°äº†x + yå¹¶è¿”å›xï¼Œå› ä¸ºbool(x.extend(y)) = Falseã€‚ Greg Hewgillæåˆ°ï¼Œextend()æ–¹æ³•ä¼šä¿®æ”¹åˆ—è¡¨xï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªfunctools.reduce()æ‰€æœŸæœ›çš„ã€Œæœ‰ç”¨çš„ã€å€¼ï¼Œå› æ­¤x + yä¼˜äºx.extend(y)ã€‚ éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™ç§reduceæ–¹æ³•åªèƒ½è§£å†³äºŒç»´æ•°ç»„ï¼Œå¤šå±‚åµŒå¥—æˆ–éåˆ—è¡¨å…ƒç´ å°†æŠ›é”™ï¼Œä¾‹å¦‚ï¼š12345678src1 = [[1], [], [2, 3, 4], 5] # å«æœ‰éåˆ—è¡¨å…ƒç´ 5src2 = [[1], [], [2, 3], [[4], [5, 6]]] # å¤šå±‚åµŒå¥—reduce(lambda x, y: x + y, src1)# TypeError: can only concatenate list (not &quot;int&quot;) to listreduce(lambda x, y: x + y, src2)# [1, 2, 3, [4], [5, 6]]# åªèƒ½å±•å¼€ä¸€å±‚ï¼Œè‹¥å†reduceä¸€æ¬¡åˆ™å«éåˆ—è¡¨å…ƒç´  2.2.æ–¹æ³•äºŒï¼šåˆ—è¡¨ç”Ÿæˆå¼åˆ—è¡¨ç”Ÿæˆå¼ä¹Ÿæ˜¯å¾ˆå®¹æ˜“æƒ³åˆ°çš„åŠæ³•ï¼Œå› ä¸ºå®ƒæœ¬è´¨ä¸Šå°±æ˜¯forå¾ªç¯ï¼š123456789101112# åˆ—è¡¨ç”Ÿæˆå¼dst = [item for sublist in src for item in sublist]# forå¾ªç¯ç­‰ä»·å†™æ³•dst = []for sublist in src: for item in sublist: dst.append(item)# lambdaè¡¨è¾¾å¼flatten = lambda t: [item for sublist in t for item in sublist]dst = flatten(src)ä¸¤å±‚forå¾ªç¯å†™æˆåˆ—è¡¨ç”Ÿæˆå¼ä¸å¤ªç›´è§‚ï¼Œå€Ÿç”¨John Meeçš„ä¾‹å­ä¼šæ›´å®¹æ˜“ç†è§£å’Œåº”ç”¨ï¼š[leaf for tree in forest for leaf in tree]ã€‚è¡¨è¾¾å¼ä¸­ã€Œå¶ â†’ æ ‘ â†’ æ—ã€çš„å…³ç³»å¾ˆæ¸…æ™°åœ°è¡¨ç°äº†å†…å¤–å¾ªç¯çš„å±‚çº§ã€‚ å½“ç„¶ä¹Ÿæœ‰ä¸åŒçš„è§‚ç‚¹ï¼Œä¾‹å¦‚Eric Duminilå’ŒDavosã€‚å°½ç®¡John Meeçš„å†™æ³•ä¸forå¾ªç¯ç›¸åŒï¼Œä½†é¡ºåºæ‚ä¹±ä¸æ˜“ç†è§£ï¼ˆç›´è§‚ä»…é™äºleafã€treeå’Œforestï¼‰ï¼ŒDavosæ›´æ¨èä½¿ç”¨leaf for leaf in tree for tree in forestè¿™ç§ã€Œé€’è¿›å¼å†™æ³•ã€ã€‚ 2.3.æ–¹æ³•ä¸‰ï¼šitertools.chainitertools.chainå…ˆå°†äºŒç»´æ•°ç»„è§£åŒ…ä¸ºä¸€ç»´ç„¶åè¿æ¥ä¸ºè¿­ä»£å™¨ï¼Œå†è½¬åŒ–ä¸ºåˆ—è¡¨ï¼›itertools.chain.from_iterableåˆ™æ— éœ€å…ˆè§£åŒ…ï¼š12345import itertoolssrc = [[1, 2, 3], [4, 5, 6], [7], [8, 9]]dst = list(itertools.chain(*src))dst = list(itertools.chain.from_iterable(src))å€Ÿç”¨è¯¥å›ç­”ä¸‹Tim Dierksçš„è¯„è®ºï¼Œ*å°†åˆ—è¡¨è§£åŒ…ä¸ºå¤šä¸ªå‚æ•°ä¼ é€’ç»™chainï¼Œå¯¼è‡´å°†é¡¶çº§åˆ—è¡¨ï¼ˆæœ€å¤–å±‚ï¼‰æ‰©å±•ä¸ºå‚æ•°ï¼Œå†å°†è¿™äº›å¯è¿­ä»£å¯¹è±¡è¿æ¥åœ¨ä¸€èµ·è€Œä¸ä¼šè¿›å…¥æ›´æ·±å±‚çº§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ—è¡¨ç”Ÿæˆå¼å°†æ¯”é“¾å¼ç”¨æ³•çš„å¯è¯»æ€§æ›´å¥½ã€‚ 2.4.æ–¹æ³•å››ï¼šsumè¿™ç§æ–¹æ³•æ—¢ä¸ç›´è§‚ä¹Ÿä¸é«˜æ•ˆï¼Œä½†æ˜¯å¾ˆæœ‰è¶£ï¼Œè®¡ç®—æœºç§‘å­¦ä¸­çš„monoidså®šä¹‰å¦‚ä¸‹ï¼š Monoids in computer scienceã€æ¥è‡ªç»´åŸºç™¾ç§‘ã€‘ åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè®¸å¤šæŠ½è±¡æ•°æ®ç±»å‹ï¼ˆAbstract Data Typesï¼ŒADTï¼‰éƒ½å…·æœ‰monoidç»“æ„ã€‚åœ¨ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼ä¸­ï¼Œmonoidçš„ä¸€ç³»åˆ—å…ƒç´ è¢«ã€ŒæŠ˜å )ã€æˆ–ã€Œç´¯ç§¯ã€ä»¥äº§ç”Ÿæœ€ç»ˆå€¼ã€‚ä¾‹å¦‚ï¼Œè®¸å¤šè¿­ä»£ç®—æ³•éœ€è¦åœ¨æ¯æ¬¡è¿­ä»£æ—¶æ›´æ–°æŸç§ã€Œè¿è¡Œæ€»æ•°ã€ï¼›è¿™ç§æ¨¡å¼å¯ä»¥é€šè¿‡monoidè¿ç®—ä¼˜é›…åœ°è¡¨è¾¾ã€‚æˆ–è€…ï¼Œmonoidè¿ç®—çš„å…³è”æ€§ç¡®ä¿å¯ä»¥é€šè¿‡ä½¿ç”¨å‰ç¼€å’Œæˆ–ç±»ä¼¼ç®—æ³•æ¥å¹¶è¡ŒåŒ–è¿ç®—ï¼Œä»¥ä¾¿æœ‰æ•ˆåœ°åˆ©ç”¨å¤šä¸ªå†…æ ¸æˆ–å¤„ç†å™¨ã€‚ç»™å®šä¸€ç³»åˆ—ã€Œ$M$ç±»å‹ã€ä¸”å…·æœ‰ã€Œæ ‡è¯†å…ƒç´ $\\varepsilon$ã€å’Œã€Œå…³è”æ“ä½œ$\\bullet$ã€çš„å€¼ï¼ŒæŠ˜å æ“ä½œå®šä¹‰å¦‚ä¸‹ï¼š \\displaystyle \\mathrm {fold:} M^{*}\\rightarrow M=\\ell \\mapsto {\\begin{cases}\\varepsilon &{\\mbox{if }}\\ell =\\mathrm {nil} \\\\m\\bullet \\mathrm {fold}\\,\\ell '&{\\mbox{if }}\\ell =\\mathrm {cons} \\,m\\,\\ell '\\end{cases}}æ­¤å¤–ï¼Œå¦‚æœç»™å®šå…¶å…ƒç´ çš„åºåˆ—åŒ–ï¼Œä»»ä½•æ•°æ®ç»“æ„éƒ½å¯ä»¥ä»¥ç±»ä¼¼çš„æ–¹å¼ã€ŒæŠ˜å ã€ã€‚ä¾‹å¦‚ï¼Œã€ŒæŠ˜å ã€äºŒå‰æ ‘çš„ç»“æœå¯èƒ½ä¼šå› éå†æ–¹å¼ï¼ˆå‰åºéå†pre-orderä¸ååºéå†post-orderï¼‰çš„ä¸åŒè€Œä¸åŒã€‚ ä»£ç å¦‚ä¸‹ï¼š12src = [[1, 2, 3], [4, 5, 6], [7], [8, 9]]dst = sum(src, [])è¿™åªæ˜¯å¯¹ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ä¼ é€’çš„iterableå…ƒç´ è¿›è¡Œæ±‚å’Œï¼Œè€Œå°†ç¬¬äºŒä¸ªå…ƒç´ è§†ä¸ºæ€»å’Œçš„åˆå§‹å€¼ã€‚sumå‡½æ•°çš„å£°æ˜ä¸ºsum(iterable, start=0, /)ï¼Œåœ¨ä¸Šä¾‹ä¸­å¦‚æœä¸ä¼ ä»…é™ä½ç½®å‚æ•°startï¼Œå°†å–é»˜è®¤å€¼0ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å°†æŠ›å‡ºTypeErrorï¼šä¸èƒ½å°†æ•´æ•°å’Œåˆ—è¡¨ç›¸åŠ ã€‚ æ¯«æ— ç–‘é—®ï¼Œè¿™ç§æ–¹æ³•æ˜¯æ‰€æœ‰ç­”æ¡ˆä¸­æœ€ã€Œç®€æ´ã€ã€æœ€ã€Œèªæ˜ã€çš„ï¼Œç­”æ¡ˆè¯„è®ºåŒºäº‰è®ºçš„ç„¦ç‚¹ä¹‹ä¸€å°±æ˜¯ä½æ•ˆï¼ŒåŸå› æ˜¯åˆ—è¡¨è¿æ¥æ—¶äº§ç”Ÿäº†å¤§é‡ä¸å¿…è¦çš„å¤åˆ¶ï¼Œæ—¶é—´å¤æ‚åº¦é«˜è¾¾$O(n^2)$ã€‚å½“ç„¶ï¼Œè¿™å¹¶éæœ¬æ–‡é‡ç‚¹ï¼Œæœ‰å…´è¶£å¯ç§»æ­¥Mathieu Laroseçš„æ–‡ç« ï¼šHow Not to Flatten a List of Lists in Pythonã€‚ åŒæ—¶ï¼Œè¯¥æ–¹æ³•ä»…ç”¨äºäºŒç»´åµŒå¥—åˆ—è¡¨ï¼Œå¯¹äºæ›´æ·±å±‚çº§çš„åµŒå¥—ï¼Œåˆ™éœ€å¯»æ±‚å…¶ä»–æ–¹æ³•ã€‚ 2.5.æ–¹æ³•äº”ï¼šç°æœ‰çš„è½®å­æœ‰è¿™ä¹ˆå¥è¯ï¼ŒDo not reinvent the wheel!ï¼Œå³ä¸è¦é‡å¤é€ è½®å­ã€‚Max Malyshå¯è°“æ˜¯è´¯å½»äº†è¿™ä¸€ç†å¿µï¼Œå¾ˆå¤šç¬¬ä¸‰æ–¹åº“ç”šè‡³æ˜¯pythonè‡ªå¸¦çš„åº“æˆ–å‡½æ•°ï¼Œéƒ½æä¾›äº†ç›¸åº”çš„æ–¹æ³•ï¼š123456789101112131415161718192021222324src = [[1, 2, 3], [4, 5, 6], [7], [8, 9]]# Djangofrom django.contrib.admin.utils import flattendst = flatten(src)# Pandasfrom pandas.core.common import flattendst = list(flatten(src))# Numpyfrom numpy import concatenatedst = list(concatenate(src))# Matplotlibfrom matplotlib.cbook import flattendst = list(flatten(src))# Unipathfrom unipath.path import flattendst = list(flatten(src))# Setuptoolsfrom setuptools.namespaces import flattendst = list(flatten(src))pandasæä¾›çš„flattenå‡½æ•°ä¸ä»…èƒ½è§£å†³å¤šå±‚åµŒå¥—ï¼Œè¿˜èƒ½è¿æ¥æ•´æ•°å’Œåˆ—è¡¨ï¼Œè¿™æˆ–è®¸æ˜¯ç»ˆæç­”æ¡ˆäº†ã€‚ å…³äºé€ è½®å­çš„è¯´æ³•ï¼Œä½¿ç”¨åˆ«äººé€ å¥½äº†çš„è½®å­å›ºç„¶å¯ä»¥æé«˜æ•ˆç‡ï¼Œä½†æ˜¯è‡ªå·±é€ è½®å­éš¾é“ä¸æ˜¯ä¸€ç§æ›´å¥½çš„å­¦ä¹ æ–¹å¼å—ï¼Ÿæ­£å¦‚Nathan Chappellæ‰€è¨€ï¼š All these great libraries reinvented the wheel, why shouldnâ€™t I? 2.6.æ–¹æ³•å…­ï¼šoperatoroperatoræ¨¡å—ä¸­æä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œä¾‹å¦‚concatã€addç­‰ï¼Œéœ€è¦é…åˆfunctools.reduceä¸€èµ·ä½¿ç”¨ï¼š123456from functools import reduceimport operatorsrc = [[1, 2, 3], [4, 5, 6], [7], [8, 9]]reduce(operator.concat, src)reduce(operator.add, src) 2.6.æ–¹æ³•ä¸ƒï¼šmapDaniel Braunç»™å‡ºçš„mapæ–¹æ³•ï¼Œä¸ªäººè®¤ä¸ºä¸æ˜¯å¾ˆå¥½ï¼ˆå¯èƒ½è¿™ä¹Ÿæ˜¯voteæ•°æ¯”è¾ƒå°‘çš„åŸå› å§ï¼‰ï¼š123456def flatten(src): dst = [] tmp = list(map(dst.extend, src)) return dstflatten([[1, 2, 3], [4, 5, 6], [7], [8, 9]]) 3.å…¶ä»–é—®é¢˜ä¸Šè¿°å„ç§æ–¹æ³•éƒ½æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œæœ€å¤§çš„é—®é¢˜å°±æ˜¯å¯¹äºæ•°æ®ç±»å‹çš„åˆ¶çº¦ä»¥åŠåµŒå¥—æ·±åº¦çš„é™åˆ¶ï¼Œpylangç»™å‡ºäº†ä¸€ç§é€‚ç”¨äºæ•°å­—ã€å­—ç¬¦ä¸²ã€åµŒå¥—åˆ—è¡¨åŠå…¶å¤åˆä½“çš„é€šç”¨æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å‚è€ƒäº†Cristiançš„åœ¨Flatten an irregular list of listsçš„å›ç­”ï¼š12345678910111213from typing import Iterable def flatten(items): for x in items: if isinstance(x, Iterable) and not isinstance(x, (str, bytes)): yield from flatten(x) # *æ³¨ï¼šä¸Šå¥å¯å±•å¼€ä¸º # for sub_x in flatten(x): # yield sub_x else: yield xlist(flatten([[1, 2, 3], [4, 5, 6], [7], [8, 9]])) # ç®€å•æƒ…å†µlist(flatten([[1, [2]], (3, 4, &#123;5, 6&#125;, 7), 8, &quot;9&quot;])) # å¤æ‚æƒ…å†µ","categories":[{"name":"python","slug":"python","permalink":"https://hwame.top/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://hwame.top/tags/python/"}]},{"title":"å‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£è¯­æ³•æ ¼å¼è¯¦è§£","slug":"command-line-description","date":"2021-01-12T12:40:13.000Z","updated":"2021-04-15T06:43:04.000Z","comments":true,"path":"20210112/command-line-description.html","link":"","permalink":"https://hwame.top/20210112/command-line-description.html","excerpt":"æ‘˜è¦ï¼šäº†è§£å‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£çš„è¯­æ³•æ ¼å¼æœ‰åŠ©äºæ­£ç¡®ä½¿ç”¨å…¶å‘½ä»¤ï¼Œä½†æ˜¯å‘½ä»¤é€‰é¡¹å‚æ•°éš¾æ‡‚éš¾è®°ï¼Œå› æ­¤åšä»¥è®°å½•ã€‚","text":"æ‘˜è¦ï¼šäº†è§£å‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£çš„è¯­æ³•æ ¼å¼æœ‰åŠ©äºæ­£ç¡®ä½¿ç”¨å…¶å‘½ä»¤ï¼Œä½†æ˜¯å‘½ä»¤é€‰é¡¹å‚æ•°éš¾æ‡‚éš¾è®°ï¼Œå› æ­¤åšä»¥è®°å½•ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µå‚è€ƒå†…å®¹ï¼š DOCOPT: Command-line interface description language Linuxå‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£å‘½ä»¤è¯­æ³•å…¬å¼æ ¼å¼è¯¦è§£å’ŒGitå‘½ä»¤è¯­æ³•æ ¼å¼è§£è¯» æ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20210112/command-line-description.html 1.èƒŒæ™¯åœ¨ç»ˆç«¯ä¸‹æŸ¥çœ‹æŸä¸ªå‘½ä»¤çš„ç”¨æ³•æ—¶ï¼Œé€šå¸¸ä¼šå‡ºç°ä¸€å¤§å †çš„é€‰é¡¹ å’Œå‚æ•°ï¼Œäº†è§£æŒæ¡å…¶è¯­æ³•æ ¼å¼å°±æ— éœ€æŸåº¦æŸæ­Œäº†ï¼Œå·¥ä½œæ•ˆç‡ä¹Ÿä¼šupupã€‚ æœ¬æ–‡ä¸»è¦ç¿»è¯‘è‡ªDOCOPT: Command-line interface description languageï¼Œå¹¶å‚è€ƒLinuxå‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£å‘½ä»¤è¯­æ³•å…¬å¼æ ¼å¼è¯¦è§£å’ŒGitå‘½ä»¤è¯­æ³•æ ¼å¼è§£è¯»ã€‚ 2.æ–‡æ¡£ç¿»è¯‘2.1.å‘½ä»¤è¡Œç•Œé¢æè¿°è¯­è¨€ï¼ˆæ¦‚è¿°ï¼‰docoptå¯ç”¨äºä¸ºå‘½ä»¤è¡Œåº”ç”¨å®šä¹‰æ¥å£ï¼Œå¹¶ä¸”è‡ªåŠ¨ç”Ÿæˆè§£æå™¨ã€‚ docoptåŸºäºå·²ä½¿ç”¨æ•°åå¹´çš„æƒ¯ä¾‹ï¼Œç”¨äºæè¿°ç¨‹åºæ¥å£çš„å¸®åŠ©ä¿¡æ¯ï¼ˆhelp messagesï¼‰å’Œæ‰‹å†Œé¡µï¼ˆman pagesï¼‰ã€‚docoptä¸­æ­£å¼çš„æ¥å£æè¿°å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š ä¸Šå›¾ä¸­çš„ä¾‹å­æè¿°äº†å¯æ‰§è¡Œç¨‹åºnaval_fateï¼ˆæµ·å†›å‘½è¿ï¼‰çš„è°ƒç”¨æ¥å£ï¼Œå¯ç”±å‘½ä»¤ï¼ˆcommandsï¼‰ã€é€‰é¡¹ï¼ˆoptionsï¼‰å’Œä½ç½®å‚æ•°ï¼ˆpositional argumentsï¼‰ä¸‰è€…çš„ä¸åŒç»„åˆæ¥ä½¿ç”¨ï¼š å‘½ä»¤ï¼ˆcommandsï¼‰ï¼šshipï¼Œnewï¼Œmoveç­‰ã€‚ é€‰é¡¹ï¼ˆoptionsï¼‰ï¼š-hï¼Œ--helpï¼Œ--speed=&lt;kn&gt;ç­‰ã€‚ ä½ç½®å‚æ•°ï¼ˆpositional argumentsï¼‰ï¼š&lt;name&gt;ï¼Œ&lt;x&gt;ï¼Œ&lt;y&gt;ç­‰ã€‚ è¯¥ç¤ºä¾‹ä½¿ç”¨æ–¹æ‹¬å·[]ã€åœ†æ‹¬å·()ã€ç®¡é“ç¬¦|å’Œçœç•¥å·...åˆ†åˆ«æè¿°å¯é€‰ã€å¿…éœ€ã€äº’æ–¥å’Œé‡å¤çš„å…ƒç´ ã€‚è¿™äº›å…ƒç´ ç»„æˆäº†æœ‰æ•ˆçš„ä½¿ç”¨æ¨¡å¼ï¼ˆusage patternsï¼‰ï¼Œæ¯ä¸ªä½¿ç”¨æ¨¡å¼éƒ½ä»¥ç¨‹åºçš„åç§°naval_fateå¼€å§‹ã€‚ ä½¿ç”¨æ¨¡å¼ä¸‹æ–¹ä¸ºå¸¦æœ‰æè¿°çš„é€‰é¡¹åˆ—è¡¨ï¼Œå®ƒä»¬æè¿°äº†ä¸€ä¸ªé€‰é¡¹æ˜¯å¦æœ‰ çŸ­æ ¼å¼ï¼ˆä¾‹å¦‚-hï¼‰æˆ–é•¿æ ¼å¼ï¼ˆä¾‹å¦‚-â€“helpï¼‰ ã€æ˜¯å¦æœ‰ä¸€ä¸ªå‚æ•°ï¼ˆä¾‹å¦‚â€“speed=&lt;kn&gt;ï¼‰ï¼Œä»¥åŠè¯¥å‚æ•°æ˜¯å¦æœ‰é»˜è®¤å€¼ï¼ˆä¾‹å¦‚[default: 10]ï¼‰ã€‚ ä¸€ä¸ªã€Œdocoptå®ç°ã€å°†æå–æ‰€æœ‰ä¸Šè¿°ä¿¡æ¯å¹¶ç”Ÿæˆå‘½ä»¤è¡Œå‚æ•°è§£æå™¨ï¼Œå½“ä½¿ç”¨-hæˆ–-â€“helpé€‰é¡¹è°ƒç”¨ç¨‹åºæ—¶ï¼Œç•Œé¢æè¿°çš„æ–‡æœ¬å°†ä½œä¸ºå¸®åŠ©æ¶ˆæ¯æ˜¾ç¤ºã€‚ 2.2.ä½¿ç”¨æ¨¡å¼ï¼ˆusage patternsï¼‰ä½äºå…³é”®å­—usage:ï¼ˆä¸åˆ†å¤§å°å†™ï¼‰å’Œæ˜æ˜¾ç©ºè¡Œ ä¹‹é—´çš„æ–‡æœ¬å°†è¢«è§£é‡Šä¸ºä½¿ç”¨æ¨¡å¼åˆ—è¡¨ï¼Œå…³é”®å­—usage:åçš„ç¬¬ä¸€ä¸ªå•è¯å°†è¢«è§£é‡Šä¸ºç¨‹åºåç§°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ— éœ€å‘½ä»¤è¡Œå‚æ•°ç¨‹åºçš„æœ€å°ç¤ºä¾‹ï¼š1Usage: my_programç¨‹åºå¯ä»¥æœ‰å¤šä¸ªä½¿ç”¨æ¨¡å¼ï¼Œä»¥å„ç§å…ƒç´ åˆ—å‡ºæ¥æè¿°è¯¥ä½¿ç”¨æ¨¡å¼ï¼š123456Usage: my_program command --option &lt;argument&gt; my_program [&lt;optional-argument&gt;] my_program --another-option=&lt;with-argument&gt; my_program (--either-that-option | &lt;--or-this-argument&gt;) my_program &lt;repeating-argument&gt; &lt;repeating-argument&gt; ...æ¯ä¸ªå…ƒç´ å’Œç»“æ„å°†åœ¨ä¸‹æ–‡ä»‹ç»ï¼Œç”¨wordè¡¨ç¤ºä¸€ä¸ªç”±ã€Œç©ºæ ¼ã€ã€ã€Œå­—ç¬¦ä¸²[]()|ã€ä¹‹ä¸€æˆ–ã€Œ...ã€åˆ†éš”çš„åºåˆ—ã€‚ â‘ å‚æ•°&lt;argument&gt; ARGUMENTä»¥&lt;å¼€å¤´ä¸”&gt;ç»“å°¾çš„å•è¯å’Œå¤§å†™å•è¯å°†è¢«è§£é‡Šä¸ºä½ç½®å‚æ•°ï¼ˆpositional argumentsï¼‰ï¼š1Usage: my_program &lt;host&gt; &lt;port&gt; â‘¡é€‰é¡¹-o --optionä»¥å•è¿å­—ç¬¦-æˆ–åŒè¿å­—ç¬¦--å¼€å¤´çš„å•è¯ å°†è¢«åˆ†åˆ«è§£é‡Šä¸ºçŸ­æ ¼å¼é€‰é¡¹ï¼ˆä¸€ä¸ªå­—æ¯çš„ã€Œå•è¯ã€ï¼‰å’Œé•¿æ ¼å¼é€‰é¡¹ï¼Œé™¤äº†-å’Œ--æœ¬èº«ä¹‹å¤–ã€ç‰¹æ®Šå«ä¹‰è¯¦è§ä¸‹æ–‡é€‰é¡¹å‚æ•°åˆ†éš”ç¬¦å’Œå¤„ç†æ ‡å‡†è¾“å…¥ã€‘ã€‚ çŸ­æ ¼å¼é€‰é¡¹å¯ä»¥å †å ï¼Œè¿™æ„å‘³ç€-abcå’Œ-a -b -cæ˜¯ç­‰ä»·çš„ï¼› é•¿æ ¼å¼é€‰é¡¹å¯ä»¥æœ‰ä½äºç©ºæ ¼æˆ–ç­‰å·ï¼ä¹‹åçš„æŒ‡å®šçš„å‚æ•°ï¼Œå³--input=ARGä¸--input ARGç­‰ä»·ï¼› çŸ­æ ¼å¼é€‰é¡¹å¯ä»¥æœ‰ä½äºå¯é€‰çš„ç©ºæ ¼ä¹‹åçš„æŒ‡å®šçš„å‚æ•°ï¼Œå³-f FILEä¸-fFILEç­‰ä»·ï¼› æ³¨1ï¼š--input ARGã€è€Œé--input=ARGã€‘è¿™ç§å†™æ³•è¯­ä¹‰æ¨¡æ£±ä¸¤å¯ï¼Œå› ä¸ºä¸çŸ¥é“ARGåˆ°åº•æ˜¯é€‰é¡¹å‚æ•°è¿˜æ˜¯ä½ç½®å‚æ•°ã€‚åœ¨ä½¿ç”¨æ¨¡å¼ä¸­ï¼Œåªæœ‰æä¾›äº†ã€Œé€‰é¡¹æè¿°ã€æ—¶æ‰ä¼šè¢«è§£é‡Šä¸ºå¸¦å‚æ•°çš„é€‰é¡¹ï¼Œå¦åˆ™å°†ä¼šè¢«è§£é‡Šä¸ºä¸€ä¸ªé€‰é¡¹å’Œç‹¬ç«‹çš„ä½ç½®å‚æ•°ã€‚æ³¨2ï¼šåŒæ ·ä¼šå¼•èµ·æ­§ä¹‰çš„æ˜¯-f FILEå’Œ-fFILEï¼Œå› ä¸ºåè€…ä¸çŸ¥é“æ˜¯å¤šä¸ªå †å çš„çŸ­æ ¼å¼é€‰é¡¹ï¼ˆ-f -F -I -L -Eï¼‰è¿˜æ˜¯å¸¦å‚æ•°çš„å•ä¸ªé€‰é¡¹ï¼ˆ-fä¸ºé€‰é¡¹ï¼ŒFILEä¸ºå¯¹åº”å‚æ•°ï¼‰ã€‚åªæœ‰æä¾›äº†é€‰é¡¹æè¿°æ—¶ï¼Œåè€…è¿™ç§å†™æ³•æ‰ä¼šè¢«è§£é‡Šä¸ºå¸¦å‚æ•°çš„å•ä¸ªé€‰é¡¹ã€‚ â‘¢å‘½ä»¤commandæ‰€æœ‰ä¸éµå¾ªä¸Šè¿°â‘ â‘¡çº¦å®šï¼ˆå³å‚æ•°&lt;argument&gt;å’Œé€‰é¡¹--optionï¼‰çš„ã€Œå•è¯ã€ï¼Œéƒ½å°†è¢«è§£é‡Šä¸ºå‘½ä»¤æˆ–å­å‘½ä»¤ã€‚ â‘£å¯é€‰å…ƒç´ [optional elements]åŒ…å«åœ¨æ–¹æ‹¬å·[]ä¸­çš„å…ƒç´ ï¼ˆé€‰é¡¹ã€å‚æ•°ã€å‘½ä»¤ï¼‰è¢«æ ‡ä¸ºã€Œå¯é€‰ã€ã€‚å…ƒç´ æ˜¯å¦åŒ…å«åœ¨ç›¸åŒæˆ–ä¸åŒçš„æ‹¬å·å†…å¹¶ä¸é‡è¦ï¼Œä¾‹å¦‚ä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š123Usage: my_program [command --option &lt;argument&gt;]Usage: my_program [command] [--option] [&lt;argument&gt;] â‘¤å¿…é€‰å…ƒç´ (required elements)å¦‚æœä¸åœ¨æ–¹æ‹¬å·[]é‡Œï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¿…é€‰çš„ã€‚ä½†æ˜¯æœ‰æ—¶å€™éœ€è¦ç”¨åœ†æ‹¬å·()å°†å¿…é€‰å…ƒç´ æ˜¾å¼åœ°æ ‡å‡ºï¼Œä¾‹å¦‚éœ€è¦å¯¹äº’æ–¥å…ƒç´ ï¼ˆè§ä¸‹èŠ‚äº’æ–¥å…ƒç´ ï¼‰åˆ†ç»„çš„æ—¶å€™ï¼š1Usage: my_program (--either-this &lt;and-that&gt; | &lt;or-this&gt;)å¦ä¸€ç§ç”¨æ³•æ˜¯ï¼Œå½“ä½ éœ€è¦åˆ¶å®šå¦‚æœæœ‰ä¸€ä¸ªå…ƒç´ å­˜åœ¨ï¼Œé‚£ä¹ˆå°±éœ€è¦å¦ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å¯ä»¥è¿™æ ·å®ç°ï¼š1Usage: my_program [(&lt;one-argument&gt; &lt;another-argument&gt;)]åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰æ•ˆçš„ç¨‹åºè°ƒç”¨è¦ä¹ˆæ²¡æœ‰å‚æ•°ï¼Œè¦ä¹ˆå°±æœ‰ä¸¤ä¸ªå‚æ•°ã€‚ â‘¥äº’æ–¥å…ƒç´ element | anotheräº’æ–¥å…ƒç´ ä»¥ç®¡é“ç¬¦|è¿›è¡Œåˆ†éš”ï¼š1Usage: my_program go (--up | --down | --left | --right)åœ¨å„ä¸ªäº’æ–¥æƒ…å†µä¸‹ï¼Œå½“æœ‰ä¸€ä¸ªä¸ºå¿…é€‰æ—¶ä½¿ç”¨åœ†æ‹¬å·()å¯¹å…ƒç´ è¿›è¡Œåˆ†ç»„ï¼Œå½“æ²¡æœ‰å¿…é€‰æ—¶ä½¿ç”¨æ–¹æ‹¬å·[]å¯¹å…ƒç´ è¿›è¡Œåˆ†ç»„ï¼š1Usage: my_program go [--up | --down | --left | --right]æ³¨æ„ï¼šæŒ‡å®šå¤šä¸ªä½¿ç”¨æ¨¡å¼çš„è¿è¡Œæ°å¦‚ç®¡é“ç¬¦|ï¼Œè¿™å°±æ˜¯è¯´ä»¥ä¸‹ä¸¤è€…å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š1234Usage: my_program run [--fast] my_program jump [--high]Usage: my_program (run [--fast] | jump [--high]) â‘¦é‡å¤å…ƒç´ element...ä½¿ç”¨çœç•¥å·...è¡¨ç¤ºå·¦è¾¹çš„ä¸€ä¸ªæˆ–ä¸€ç»„å‚æ•°å¯è¢«é‡å¤ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼š12Usage: my_program open &lt;file&gt;... my_program move (&lt;from&gt; &lt;to&gt;)...å¯ä»¥çµæ´»åœ°æŒ‡å®šå¿…éœ€å‚æ•°çš„æ•°é‡ï¼Œä¾‹å¦‚ï¼š123456789101112# é›¶ä¸ªæˆ–å¤šä¸ªå¿…é€‰å‚æ•°ï¼ˆ3ç§å†—ä½™çš„æ–¹æ³•ï¼‰ï¼šUsage: my_program [&lt;file&gt;...] my_program [&lt;file&gt;]... my_program [&lt;file&gt; [&lt;file&gt; ...]]# ä¸€ä¸ªæˆ–å¤šä¸ªå¿…é€‰å‚æ•°ï¼šUsage: my_program &lt;file&gt;...# ä¸¤ä¸ªæˆ–å¤šä¸ªå¿…é€‰å‚æ•°ï¼šUsage: my_program &lt;file&gt; &lt;file&gt;...# è¯¸å¦‚æ­¤ç±»... â‘§é€‰é¡¹ç®€å†™[options]ã€Œ[options]ã€æ˜¯ä¸€ç§é€‰é¡¹çš„ç®€å†™æ–¹å¼ï¼Œè¯¥æ–¹å¼å¯ä»¥é¿å…åœ¨ä½¿ç”¨æ¨¡å¼ä¸­åˆ—å‡ºæ‰€æœ‰çš„é€‰é¡¹ï¼ˆä»å¸¦æœ‰æè¿°çš„é€‰é¡¹åˆ—è¡¨ä¸­ï¼‰ã€‚ä¾‹å¦‚ä»¥ä¸‹ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š12345678910111213# ç®€å†™Usage: my_program [options] &lt;path&gt;--all List everything.--long Long output.--human-readable Display in human-readable format.# éç®€å†™Usage: my_program [--all --long --human-readable] &lt;path&gt;--all List everything.--long Long output.--human-readable Display in human-readable format.å¦‚æœæœ‰å¾ˆå¤šé€‰é¡¹ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½é€‚ç”¨äºå…¶ä¸­ä¸€ç§ä½¿ç”¨æ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ç§ç®€å†™å°†å¾ˆæœ‰ç”¨ã€‚æˆ–è€…ï¼Œå¦‚æœåŒæ—¶å…·æœ‰çŸ­æ ¼å¼å’Œé•¿æ ¼å¼ä¸¤ç§ç‰ˆæœ¬çš„é€‰é¡¹ï¼ˆè¯¦è§é€‰é¡¹æè¿°éƒ¨åˆ†ï¼‰ï¼Œåˆ™å¯ä»¥åœ¨ä¸€ä¸ªä½¿ç”¨æ¨¡å¼ä¸­åˆ—å‡ºå…¶ä¸­ä¹‹ä¸€ï¼š12345Usage: my_program [-alh] &lt;path&gt;-a, --all List everything.-l, --long Long output.-h, --human-readable Display in human-readable format.å…³äºå¦‚ä½•ä¹¦å†™ã€Œé€‰é¡¹æè¿°ã€å°†åœ¨ä¸‹æ–‡ä»‹ç»ã€‚ â‘¨é€‰é¡¹å‚æ•°åˆ†éš”ç¬¦[--]åŒè¿å­—ç¬¦--åœ¨ä¸å±äºé€‰é¡¹çš„ä¸€éƒ¨åˆ†æ—¶ï¼ŒæŒ‰ç…§æƒ¯ä¾‹é€šå¸¸ç”¨äºåˆ†éš”é€‰é¡¹å’Œä½ç½®å‚æ•°ï¼Œä»¥ä¾¿å¤„ç†è¯¸å¦‚å°†æ–‡ä»¶åè¯¯è®¤ä¸ºæ˜¯é€‰é¡¹çš„æƒ…å†µã€‚ä¸ºäº†æ”¯æŒè¯¥çº¦å®šï¼Œåªéœ€åœ¨ä½¿ç”¨æ¨¡å¼çš„ä½ç½®å‚æ•°å‰åŠ ä¸Š[--]å³å¯ï¼š1Usage: my_program [options] [--] &lt;file&gt;...é™¤æ­¤ä¹‹å¤–ï¼Œ--åªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‘½ä»¤ï¼Œå› æ­¤å¯åº”ç”¨äºä»»ä½•å‰è¿°æ“ä½œï¼Œè­¬å¦‚å»æ‰æ–¹æ‹¬å·[]ä½¿å…¶æˆä¸ºå¿…é€‰ã€‚ â‘©å¤„ç†æ ‡å‡†è¾“å…¥[-]å•è¿å­—ç¬¦-åœ¨ä¸å±äºé€‰é¡¹çš„ä¸€éƒ¨åˆ†æ—¶ï¼ŒæŒ‰ç…§æƒ¯ä¾‹é€šå¸¸è¡¨ç¤ºç¨‹åºç”¨äºå¤„ç†æ ‡å‡†è¾“å…¥stdinè€Œéæ–‡ä»¶ã€‚å¦‚æœè¦éµå¾ªè¯¥çº¦å®šï¼Œåªéœ€å°†[-]æ·»åŠ åˆ°ä½¿ç”¨æ¨¡å¼ä¸­ã€‚-è‡ªèº«ä»…ä»…æ˜¯ä¸€ä¸ªæ™®é€šå‘½ä»¤ï¼Œå¯èµ‹äºˆä»»ä½•æ„ä¹‰ã€‚ 2.3.é€‰é¡¹æè¿°é€‰é¡¹æè¿°æ˜¯ä½äºä½¿ç”¨æ¨¡å¼ä¸‹é¢çš„ä¸€ç³»åˆ—é€‰é¡¹ã€‚å¦‚æœä½¿ç”¨æ¨¡å¼ä¸å­˜åœ¨æ­§ä¹‰ï¼ˆè¯¦è§ä¸Šæ–‡é€‰é¡¹optionï¼‰ï¼Œåˆ™å¯ä»¥é€‰æ‹©æŒ‡å®šå®ƒä»¬ã€‚ ä¸€ä¸ªé€‰é¡¹æè¿°å…è®¸æŒ‡å®šï¼š æŸäº›çŸ­æ ¼å¼å’Œé•¿æ ¼å¼é€‰é¡¹ä¸ºåŒä¹‰è¯ï¼› ä¸€ä¸ªé€‰é¡¹æœ‰ä¸€ä¸ªå‚æ•°ï¼› é€‰é¡¹çš„å‚æ•°æä¾›é»˜è®¤å€¼ã€‚ è¿™äº›è§„åˆ™éµå¾ªï¼šä»¥ä¸è®¡ç©ºæ ¼çš„ä»¥-æˆ–--å¼€å¤´çš„æ¯ä¸€è¡Œéƒ½å°†è§†ä¸ºé€‰é¡¹æè¿°ã€‚ä¾‹å¦‚ï¼š1234Options: --verbose # GOODï¼Œä»¥ã€Œ--ã€å¼€å¤´ -o FILE # GOODï¼Œä»¥ã€Œ-ã€å¼€å¤´Other: --bad # BADï¼Œä¸ä»¥ã€Œ-ã€å¼€å¤´ è‹¥è¦æ˜ç¡®æŒ‡å®šä¸€ä¸ªé€‰é¡¹å¸¦æœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™éœ€ï¼š åœ¨ç©ºæ ¼æˆ–ç­‰å·=åæ”¾ä¸€ä¸ªæè¿°è¯¥å‚æ•°çš„è¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ é€‰é¡¹å‚æ•°éµå¾ªå°–æ‹¬å·&lt;argument&gt;æˆ–å…¨å¤§å†™ARGUMENTçš„çº¦å®šã€‚ å¦‚æœæœ‰å¿…è¦ï¼Œå¯ä»¥ä½¿ç”¨é€—å·,åˆ†éš”é€‰é¡¹ã€‚ å°½ç®¡ä¸‹ä¾‹ä¸­çš„ä¸¤è¡Œéƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯å»ºè®®åšæŒä½¿ç”¨å•ä¸€é£æ ¼è€Œä¸è¦æ··ç€ç”¨ï¼šã€æ³¨ï¼šæ ¹æ®ä¸‹æ–‡åˆ†æä¸­çš„è§„èŒƒä¹¦å†™å‘½ä»¤ç¬¬4ç‚¹ï¼Œæ¨èä½¿ç”¨å…¨å¤§å†™è€Œéå°–æ‹¬å·ã€‘ 12-o FILE --output=FILE # æœ‰ç­‰å·ã€å…¨å¤§å†™ã€æ— é€—å·ï¼ˆæ¨èï¼‰-i &lt;file&gt;, --input &lt;file&gt; # æ— ç­‰å·ã€å°–æ‹¬å·ã€æœ‰é€—å·ï¼ˆä¸æ¨èï¼‰ ç”¨ï¼ˆè‡³å°‘ï¼‰ä¸¤ä¸ªç©ºæ ¼æ¥åˆ†éš”é€‰é¡¹å’Œå®ƒä»¬çš„éæ­£å¼æè¿°ã€å¦‚æœåªç”¨ä¸€ä¸ªç©ºæ ¼ï¼Œå¯èƒ½ä¼šå°†æè¿°çš„é¦–ä¸ªè¯å½“åšé€‰é¡¹çš„å‚æ•°ã€‘ï¼š12345--verbose MORE text. # BADï¼Œå°†è¢«è§†ä¸ºé€‰é¡¹verboseæœ‰ä¸€ä¸ªå‚æ•°MOREï¼Œ # æ•…éœ€ä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼-q Quit. # GOODï¼Œ8ç©ºæ ¼-o FILE Output file. # GOODï¼Œ3ç©ºæ ¼--stdout Use stdout. # GOODï¼Œ2ç©ºæ ¼å¦‚æœè¦ä¸ºå¸¦æœ‰å‚æ•°çš„é€‰é¡¹è®¾ç½®é»˜è®¤å€¼ï¼Œåˆ™ä½¿ç”¨[default: the-default-value]çš„å½¢å¼å°†å…¶æ”¾åˆ°é€‰é¡¹æè¿°ä¸­ï¼š123--coefficient=K The K coefficient [default: 2.95]--output=FILE Output file [default: test.txt]--directory=DIR Some directory [default: ./] 2.4.å…¶ä»– åœ¨æµè§ˆå™¨ä¸­ä½“éªŒdocoptï¼šTry docoptã€‚ docoptå¯ç”¨äºå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œå…¶å®˜æ–¹å®ç°åˆ—åœ¨GitHubä¸Šçš„docoptç»„ç»‡ä¸­ã€‚ 3.æ³¨æ„äº‹é¡¹ ä¸ºäº†å’Œdocoptæ–‡æ¡£åŸæœ‰ç»“æ„ä¿æŒä¸€è‡´ï¼Œæœ¬æ–‡ç¬¬äºŒç« æ–‡æ¡£ç¿»è¯‘æ²¡æœ‰åœ¨å¯¹åº”ä½ç½®æ·»åŠ æ³¨é‡Šï¼Œæ•…æ­¤åˆ—å‡ºå„ä¸ªæ³¨æ„äº‹é¡¹ã€‚ (1)å…³äºã€Œå‘½ä»¤ã€åœ¨æœ¬æ–‡ä¸­ä½¿ç”¨æ¨¡å¼æ ¼å¼ä¸ºmy_program command --option &lt;argument&gt;ï¼Œå„å…ƒç´ ä¾æ¬¡ç§°ä¸ºç¨‹åºã€å‘½ä»¤ã€é€‰é¡¹å’Œå‚æ•°ï¼›è€Œä¸€èˆ¬Linuxå‘½ä»¤ä¸­å°†è¿™é‡Œçš„ç¨‹åºä¹Ÿç§°ä¸ºå‘½ä»¤ï¼Œåœ¨è¿™ç§æ¡ä»¶ä¸‹my_program command --option &lt;argument&gt;ä¸­å„å…ƒç´ ä¾æ¬¡ç§°ä¸ºå‘½ä»¤ã€å­å‘½ä»¤ã€é€‰é¡¹å’Œå‚æ•°ï¼Œä¾‹å¦‚yum install package_name -yã€‚æ³¨æ„ï¼šã€Œå­å‘½ä»¤ã€ä¸ä¸€å®šæ€»æœ‰ï¼Œä¾‹å¦‚du -h ./ã€‚ ç”±äºLinuxä¸­éƒ½æ˜¯ç§°cdã€lsç­‰ä¸ºã€Œå‘½ä»¤ã€ï¼Œå› æ­¤ä¸ªäººå€¾å‘äºã€Œå‘½ä»¤ å­å‘½ä»¤ã€çš„è¯´æ³•ï¼Œè€Œéã€Œç¨‹åº å‘½ä»¤ã€ã€‚ (2)å…³äºã€Œå‚æ•°ã€docoptæ–‡æ¡£å¯¹æŸäº›åè¯å’Œæ¦‚å¿µæ²¡æœ‰å…·ä½“è§£é‡Šï¼Œå®¹æ˜“è®©äººè¯¯è§£ï¼Œå°¤å…¶æ˜¯ç¿»è¯‘çš„æ—¶å€™åè¯çš„å½¢å®¹è¯åŒ–ã€‚ parameterå’Œargumentçš„åŒºåˆ«ï¼šThe term parameter is used to describe the names for values that are expected to be supplied.The term argument is used for the values provided for each parameter. parameteræŒ‡å‡½æ•°å®šä¹‰ä¸­çš„å½¢å¼å‚æ•°ï¼ˆFormal Parameterï¼‰ã€‚argumentæŒ‡å‡½æ•°è°ƒç”¨æ—¶çš„å®é™…å‚æ•°ï¼ˆActual Argumentï¼‰ã€‚ åœ¨æœ¬æ–‡ä¸­åªæœ‰å®é™…å‚æ•°ï¼ˆå› ä¸ºåªéœ€è°ƒç”¨ç¨‹åºå˜›ï¼‰ï¼Œä½†å‚æ•°åˆåˆ†ä¸ºä½ç½®å‚æ•°å’Œé€‰é¡¹å‚æ•°ï¼š ä½ç½®å‚æ•°æ˜¯æŒ‡åŒ…å«äºå°–æ‹¬å·&lt;&gt;ä¸­çš„å•è¯å’Œå¤§å†™å•è¯ï¼› é€‰é¡¹å‚æ•°æ˜¯æŒ‡ç´§è·Ÿåœ¨é€‰é¡¹åçš„å‚æ•°ï¼Œç”¨äºæŒ‡å®šé€‰é¡¹çš„æ“ä½œå¯¹è±¡ï¼Œå¦‚-o argumentæˆ–--option=argumentä¸­çš„ã€Œargumentã€å³é€‰é¡¹å‚æ•°ã€‚ (3)å…³äºã€Œé€‰é¡¹ã€åŠæ­§ä¹‰ã€Œé€‰é¡¹ã€ä¸»è¦ç”¨äºæ”¹å˜å‘½ä»¤æ‰§è¡ŒåŠ¨ä½œçš„ç±»å‹ã€‚ä¸€èˆ¬è€Œè¨€ï¼ŒçŸ­æ ¼å¼é€‰é¡¹æ˜¯é•¿æ ¼å¼é€‰é¡¹çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªçŸ­æ ¼å¼é€‰é¡¹ä¼šæœ‰å¯¹åº”çš„é•¿æ ¼å¼é€‰é¡¹ã€‚å½“ç„¶ä¹Ÿæœ‰ä¾‹å¤–ï¼Œæ¯”å¦‚lså‘½ä»¤çš„çŸ­æ ¼å¼é€‰é¡¹-lå°±æ²¡æœ‰å¯¹åº”çš„é•¿æ ¼å¼é€‰é¡¹ã€‚ ä¸Šæ–‡é€‰é¡¹optionä¸€èŠ‚æ³¨è§£ä¸­æåˆ°çš„æ­§ä¹‰é—®é¢˜ï¼š é•¿æ ¼å¼é€‰é¡¹--input ARGä¸­çš„ARGæ˜¯é€‰é¡¹å‚æ•°è¿˜æ˜¯ä½ç½®å‚æ•°ï¼Ÿ çŸ­æ ¼å¼é€‰é¡¹-f FILEä¸­çš„FILEæ˜¯é€‰é¡¹å‚æ•°è¿˜æ˜¯ä½ç½®å‚æ•°ï¼Ÿ çŸ­æ ¼å¼é€‰é¡¹-fFILEæ˜¯ç”±-f -F -I -L -Eå †å çš„å¤šä¸ªé€‰é¡¹è¿˜æ˜¯å¸¦å‚æ•°FILEçš„å•ä¸ªé€‰é¡¹-fï¼Ÿ ä¸ºäº†é¿å…å¼•èµ·ä¸Šè¿°æ­§ä¹‰ï¼Œæœ€å¥½è§„èŒƒä¹¦å†™å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1.ä¹¦å†™å¸¦å‚æ•°çš„çŸ­æ ¼å¼é€‰é¡¹å‘½ä»¤æ—¶ï¼Œæœ€å¥½å†™æˆå¸¦ç©ºæ ¼çš„å½¢å¼-f FILEï¼› 2.ä¹¦å†™å¸¦å‚æ•°çš„é•¿æ ¼å¼é€‰é¡¹å‘½ä»¤æ—¶ï¼Œæœ€å¥½å†™æˆå¸¦ç­‰å·çš„å½¢å¼--input=ARGï¼› 3.äº‹å®ä¸Šï¼Œå¸¦ç©ºæ ¼çš„å½¢å¼-f FILEä»ç„¶å­˜åœ¨æ­§ä¹‰ã€FILEæ˜¯é€‰é¡¹å‚æ•°è¿˜æ˜¯ä½ç½®å‚æ•°ã€‘ï¼Œè¿™æ˜¯ä¸å¯é¿å…çš„ï¼Œå”¯æœ‰å¼€å‘è€…åœ¨å¸®åŠ©æ–‡æ¡£ä¸­ç”¨-f FILEå’Œ-f &lt;FILE&gt;åˆ†åˆ«è¡¨ç¤ºé€‰é¡¹å‚æ•°å’Œä½ç½®å‚æ•°ï¼Œæ‰èƒ½ä½¿ä½¿ç”¨è€…æ›´æ˜ç¡®ã€‚ 4.å°½ç®¡æ–‡æ¡£ä¸­å‚æ•°argumentå°†&lt;argument&gt;å’ŒARGUMENTç»Ÿç§°ä¸ºã€Œä½ç½®å‚æ•°ã€ï¼Œä½†å¦‚æœå°†å…¶åˆ†åˆ«è¡¨ç¤ºä½ç½®å‚æ•°å’Œé€‰é¡¹å‚æ•°åˆ™å¯æ¶ˆé™¤è¯¥æ­§ä¹‰ã€‚ (4)å…³äºã€Œå¯é€‰å…ƒç´ ã€ç”±äºå¯é€‰å…ƒç´ æ˜¯å¦åŒ…å«åœ¨ç›¸åŒæˆ–ä¸åŒçš„æ‹¬å·å†…å¹¶ä¸é‡è¦ï¼Œå› æ­¤my_program [command --option &lt;argument&gt;]ä¸­çš„3ä¸ªå…ƒç´ å…±æœ‰8ç§ç»„åˆè€Œä¸æ˜¯2ç§ï¼š12345678910111213# é”™è¯¯çš„ã€Œæ‰€æœ‰å¯èƒ½æ€§ã€ï¼šmy_programmy_program command --option argument# æ­£ç¡®çš„ã€Œæ‰€æœ‰å¯èƒ½æ€§ã€ï¼šmy_programmy_program commandmy_program --optionmy_program argumentmy_program command --optionmy_program command argumentmy_program --option argumentmy_program command --option argumentå¦‚æœå°†å…¶æ”¹å†™ä¸ºå®ƒçš„ç­‰ä»·å½¢å¼my_program [command] [--option] [&lt;argument&gt;]åˆ™å¾ˆå®¹æ˜“ç†è§£ï¼Œéš¾çš„æ˜¯ç†è§£ä¸¤è€…ä¸ºä½•ç­‰ä»·ã€‚ (5)å…³äºã€Œè¿å­—ç¬¦ã€åŒè¿å­—ç¬¦å’Œå•è¿å­—ç¬¦é™¤å»ä¸Šæ–‡ç‰¹æ®Šå«ä¹‰å¤–ã€Œä»…ä»…æ˜¯ä¸€ä¸ªæ™®é€šå‘½ä»¤ï¼Œå¯èµ‹äºˆä»»ä½•æ„ä¹‰ã€ã€‚ æ–‡æ¡£æ²¡æœ‰å¯¹è¿™å¥è¯è¿›è¡Œè§£é‡Šï¼Œæˆ‘çš„ç†è§£æ˜¯my_program commandä¹Ÿå¯ä»¥å†™ä½œmy_program --æˆ–è€…my_program -ï¼Œå¦‚æœè¯¥å‘½ä»¤æ˜¯å¯é€‰çš„ï¼Œé‚£ä¹ˆmy_program [--]å²‚ä¸æ˜¯åˆä¼šæœ‰åˆ°åº•æ˜¯é€‰é¡¹å‚æ•°åˆ†éš”ç¬¦è¿˜æ˜¯å‘½ä»¤çš„æ­§ä¹‰äº†ã€‚ æ‰€ä»¥è¯´ï¼Œæœ€å¥½è¿˜æ˜¯å°†å®ƒä»¬é™åˆ¶åœ¨é€‰é¡¹å‚æ•°åˆ†éš”ç¬¦å’Œå¤„ç†æ ‡å‡†è¾“å…¥çš„ç‰¹å®šå«ä¹‰å§ã€‚ (6)å…³äºã€Œçº¦å®šæƒ¯ä¾‹ã€çº¦å®šæˆ–æƒ¯ä¾‹ï¼ˆconventionï¼‰åªæ˜¯ä¸ºäº†æ–¹ä¾¿å½¼æ­¤äº¤æµå’Œç†è§£è€Œå½¢æˆçš„è§„å®šï¼Œå¹¶ä¸æ˜¯ä¸€é¡¹å¸¦å¼ºåˆ¶æ€§çš„æ ‡å‡†ï¼Œå› æ­¤å¹¶éæ‰€æœ‰å¸®åŠ©ä¿¡æ¯éƒ½éµå¾ªäº†è¿™äº›è§„å®šï¼Œæ‰€ä»¥æ›´å¤šæ—¶å€™éœ€è¦ç»“åˆå…·ä½“æƒ…å†µæ¥æ¨æ–­ã€‚ ä»¥ä¸‹åˆ—ä¸¾å‡ ä¸ªä¾‹å­ï¼šâ‘ vimå‘½ä»¤ã€‚åŒ…æ‹¬ã€Œå‘½ä»¤çš„ç®€è¦æè¿°ã€ã€ã€Œä½¿ç”¨æ¨¡å¼ã€å’Œã€Œé€‰é¡¹æè¿°ã€ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå¦‚å›¾ï¼ˆæˆªå›¾ä¸å®Œæ•´ï¼‰ã€‚ å›¾ä¸­å°†ã€Œé€‰é¡¹ã€å†™ä½œã€ŒArgumentsã€ï¼Œéœ€è¦æ ¹æ®è¯¥å¸®åŠ©ä¿¡æ¯æ¥æ¨æ–­å„å…ƒç´ çš„å«ä¹‰ã€‚å…¶ä¸­ï¼Œç´«è‰²æ¡†ä¸­ä»¥å•è¿å­—ç¬¦-è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥stdinè¯»å–æ–‡æœ¬ï¼ŒåŒè¿å­—ç¬¦--è¡¨ç¤ºåé¢çš„å‚æ•°ä¸ºæ–‡ä»¶ã€‚ åŒç†ï¼Œåœ¨catå‘½ä»¤ä¸­å•è¿å­—ç¬¦-å«ä¹‰ä¸æ­¤ç›¸åŒï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆæˆªå›¾ä¸ºcat --helpçš„éƒ¨åˆ†å†…å®¹ï¼‰ï¼š åŒè¿å­—ç¬¦--åœ¨rmå‘½ä»¤ä¸­è¿˜å¯ä»¥æ ‡è¯†ä»¥å•è¿å­—ç¬¦-å¼€å¤´çš„æ–‡ä»¶ï¼Œä¾‹å¦‚åˆ é™¤å½“å‰æ–‡ä»¶å¤¹ä¸‹åä¸º-fooçš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨rm -- -fooæˆ–rm ./-fooï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆæˆªå›¾ä¸ºrm --helpçš„éƒ¨åˆ†å†…å®¹ï¼‰ï¼š â‘¡chmodå‘½ä»¤ã€‚åŒ…æ‹¬ã€Œä½¿ç”¨æ¨¡å¼ã€ã€ã€Œå‘½ä»¤æè¿°ã€ã€ã€Œé€‰é¡¹æè¿°ã€ä»¥åŠã€Œè¡¥å……ä¿¡æ¯ã€å››ä¸ªéƒ¨åˆ†ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ æ³¨æ„chmodå‘½ä»¤ç¬¬ä¸€ç§ä½¿ç”¨æ¨¡å¼ä¸­MODE[,MODE]...çš„é‡å¤å…ƒç´ å†™æ³•ã€‚ â‘¢whoå‘½ä»¤åŒ…æ‹¬ã€Œä½¿ç”¨æ¨¡å¼ã€ã€ã€Œå‘½ä»¤æè¿°ã€ã€ã€Œé€‰é¡¹æè¿°ã€ä»¥åŠã€Œè¡¥å……ä¿¡æ¯ã€å››ä¸ªéƒ¨åˆ†ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ æ³¨æ„whoå‘½ä»¤ä½¿ç”¨æ¨¡å¼ä¸­[FILE | ARG1 ARG2]çš„FILEå’ŒARG1 ARG2è¿™å¯¹äº’æ–¥å…ƒç´ å®é™…ä¸ŠåŒ…å«äº†ä¸¤ç§ä½¿ç”¨æ¨¡å¼ï¼Œè¿™åœ¨åé¢çš„ã€Œè¡¥å……ä¿¡æ¯ã€ä¸­ä¹Ÿæœ‰è¯´æ˜å³ï¼š12Usage: who [option]... [FILE]Usage: who [option]... [(ARG1 ARG2)] åŒæ—¶ï¼Œä¸Šæ–‡å…³äºã€Œé€‰é¡¹ã€åŠæ­§ä¹‰ä¸­æŒ‡å‡ºï¼šä¸€èˆ¬è€Œè¨€ï¼ŒçŸ­æ ¼å¼é€‰é¡¹æ˜¯é•¿æ ¼å¼é€‰é¡¹çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªçŸ­æ ¼å¼é€‰é¡¹ä¼šæœ‰å¯¹åº”çš„é•¿æ ¼å¼é€‰é¡¹ã€‚ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªé€‰é¡¹å¯ä»¥åªæœ‰çŸ­æ ¼å¼é€‰é¡¹ï¼ˆå¦‚-mï¼‰ï¼Œå¯ä»¥åªæœ‰é•¿æ ¼å¼é€‰é¡¹ï¼ˆå¦‚--versionï¼‰ï¼Œä¹Ÿå¯ä»¥åŒæ—¶éƒ½æœ‰ï¼ˆå¦‚-aï¼Œ--allï¼‰ã€‚ æ³¨æ„ï¼šå°½ç®¡å¤§å¤šæ•°å‘½ä»¤éƒ½æœ‰é€‰é¡¹æè¿°ï¼Œå› æ­¤ä¸Šè¿°æåˆ°çš„æ­§ä¹‰éƒ½å°†è§£é‡Šä¸ºå¸¦å‚æ•°çš„å•ä¸ªé€‰é¡¹ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›å‘½ä»¤æ²¡æœ‰é€‰é¡¹æè¿°ï¼Œä¾‹å¦‚sshå‘½ä»¤ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¸å¦‚-b bind_addressä¸­çš„addresså°†è¢«è§£é‡Šä¸ºç‹¬ç«‹çš„ä½ç½®å‚æ•°ã€è€Œä¸æ˜¯-bçš„é€‰é¡¹å‚æ•°ã€‘ã€‚ç„¶è€Œæ­¤å¤„è¿™ä¸¤ç§ç†è§£çš„è¿è¡Œæ•ˆæœæ²¡æœ‰åˆ†åˆ«ï¼Œå› æ­¤å°½ç®¡åœ¨ç†è®ºä¸Šä¼šå­˜åœ¨æ­§ä¹‰ï¼Œä½†å®é™…ä¸Šå¼€å‘è€…ä¼šé¿å…æ‰æ­§ä¹‰æƒ…å†µçš„å‡ºç°ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/tags/Linux/"}]},{"title":"Linuxä¸­æ˜“æ··æ·†çš„æ¦‚å¿µ","slug":"confusing-concepts-in-linux","date":"2020-11-29T05:52:55.000Z","updated":"2020-11-30T00:00:56.000Z","comments":true,"path":"20201129/confusing-concepts-in-linux.html","link":"","permalink":"https://hwame.top/20201129/confusing-concepts-in-linux.html","excerpt":"","text":"æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« è¯´æ˜ï¼šå­¦ä¹ Linux shellè¿‡ç¨‹ä¸­çš„è®°å½•ï¼Œå‚è€ƒä¹¦ç±ä¸»è¦æœ‰ã€ŠLinuxå‘½ä»¤è¡Œä¸shellè„šæœ¬ç¼–ç¨‹å¤§å…¨ï¼ˆç¬¬3ç‰ˆï¼‰ã€‹ï¼Œã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ã€‹ç³»åˆ—å’Œã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹ï¼Œå‚è€ƒèµ„æ–™ä¸»è¦æœ‰Linuxå‘½ä»¤å¤§å…¨ç­‰ã€‚æ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20201129/confusing-concepts-in-linux.html 1.å•å¼•å·ã€åŒå¼•å·å’Œåå¼•å·â‘ echoå‘½ä»¤å¯ç”¨å•å¼•å·æˆ–åŒå¼•å·æ¥åˆ’å®šæ–‡æœ¬å­—ç¬¦ä¸²ã€‚å¦‚æœåœ¨å­—ç¬¦ä¸²ä¸­ç”¨åˆ°äº†å®ƒä»¬ï¼Œä½ éœ€è¦åœ¨æ–‡æœ¬ä¸­ä½¿ç”¨å…¶ä¸­ä¸€ç§å¼•å·ï¼Œè€Œç”¨å¦å¤–ä¸€ç§æ¥å°†å­—ç¬¦ä¸²åˆ’å®šèµ·æ¥ã€‚ å•å¼•å·å­—ç¬¦ä¸²çš„é™åˆ¶ï¼š å•å¼•å·é‡Œçš„ä»»ä½•å­—ç¬¦éƒ½ä¼šåŸæ ·è¾“å‡ºï¼Œå•å¼•å·å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ˜¯æ— æ•ˆçš„ï¼› å•å¼•å·å­—ä¸²ä¸­ä¸èƒ½å‡ºç°å•ç‹¬ä¸€ä¸ªçš„å•å¼•å·ï¼ˆå¯¹å•å¼•å·ä½¿ç”¨è½¬ä¹‰ç¬¦åä¹Ÿä¸è¡Œï¼‰ï¼Œä½†å¯æˆå¯¹å‡ºç°ï¼Œä½œä¸ºå­—ç¬¦ä¸²æ‹¼æ¥ä½¿ç”¨ã€‚ åŒå¼•å·çš„ä¼˜ç‚¹ï¼š åŒå¼•å·é‡Œå¯ä»¥æœ‰å˜é‡ åŒå¼•å·é‡Œå¯ä»¥å‡ºç°è½¬ä¹‰å­—ç¬¦ â‘¡åå¼•å·Ë‹ç”¨äºä»å‘½ä»¤è¾“å‡ºä¸­æå–ä¿¡æ¯ï¼Œå°†å‘½ä»¤è¾“å‡ºèµ‹ç»™å˜é‡ï¼Œå¦ä¸€ç§æ ¼å¼æ˜¯$()ï¼Œä¾‹å¦‚ï¼š æ³¨æ„ï¼šèµ‹å€¼ç­‰å·å’Œå‘½ä»¤æ›¿æ¢å­—ç¬¦ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ã€‚12testing=`date`testing=$(date) 2.å„ç§æ‹¬å·çš„ä½œç”¨ æœ¬éƒ¨åˆ†å„ç§æ‹¬å·çš„ä½œç”¨å†…å®¹å‚è€ƒï¼šshellä¸­å„ç§æ‹¬å·çš„ä½œç”¨()ã€(())ã€[]ã€[[]]ã€{} 2.1.å°æ‹¬å·/åœ†æ‹¬å· å•å°æ‹¬å·() â‘ å‘½ä»¤ç»„ã€‚æ‹¬å·ä¸­çš„å‘½ä»¤å°†ä¼šæ–°å¼€ä¸€ä¸ªå­shellé¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥æ‹¬å·ä¸­çš„å˜é‡ä¸èƒ½å¤Ÿè¢«è„šæœ¬ä½™ä¸‹çš„éƒ¨åˆ†ä½¿ç”¨ã€‚æ‹¬å·ä¸­å¤šä¸ªå‘½ä»¤ä¹‹é—´ç”¨åˆ†å·éš”å¼€ï¼Œæœ€åä¸€ä¸ªå‘½ä»¤å¯ä»¥æ²¡æœ‰åˆ†å·ï¼Œå„å‘½ä»¤å’Œæ‹¬å·ä¹‹é—´ä¸å¿…æœ‰ç©ºæ ¼ã€‚ â‘¡å‘½ä»¤æ›¿æ¢ã€‚ç­‰åŒäºcmdï¼Œshellæ‰«æä¸€éå‘½ä»¤è¡Œï¼Œå‘ç°äº†$( cmd )ç»“æ„ï¼Œä¾¿å°†$( cmd )ä¸­çš„cmdæ‰§è¡Œä¸€æ¬¡ï¼Œå¾—åˆ°å…¶æ ‡å‡†è¾“å‡ºï¼Œå†å°†æ­¤è¾“å‡ºæ”¾åˆ°åŸæ¥å‘½ä»¤ã€‚æœ‰äº›shellä¸æ”¯æŒï¼Œå¦‚tcshã€‚ â‘¢åˆå§‹åŒ–æ•°ç»„ã€‚å¦‚ï¼šarray=(a b c d)ã€‚ åŒå°æ‹¬å·(( )) â‘ æ•´æ•°æ‰©å±•ã€‚è¿™ç§æ‰©å±•è®¡ç®—æ˜¯æ•´æ•°å‹çš„è®¡ç®—ï¼Œä¸æ”¯æŒæµ®ç‚¹å‹ã€‚((exp))ç»“æ„æ‰©å±•å¹¶è®¡ç®—ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼çš„å€¼ï¼Œå¦‚æœè¡¨è¾¾å¼çš„ç»“æœä¸º0ï¼Œé‚£ä¹ˆè¿”å›çš„é€€å‡ºçŠ¶æ€ç ä¸º1ï¼ˆæˆ–è€…æ˜¯ã€Œå‡ã€ï¼‰ï¼Œè€Œä¸€ä¸ªéé›¶å€¼çš„è¡¨è¾¾å¼æ‰€è¿”å›çš„é€€å‡ºçŠ¶æ€ç å°†ä¸º0ï¼ˆæˆ–è€…æ˜¯ã€ŒçœŸã€ï¼‰ã€‚è‹¥æ˜¯é€»è¾‘åˆ¤æ–­ï¼Œè¡¨è¾¾å¼expä¸ºçœŸåˆ™ä¸º1ï¼Œå‡åˆ™ä¸º0ã€‚ â‘¡Cè¯­è¨€è¿ç®—è§„åˆ™ã€‚åªè¦æ‹¬å·ä¸­çš„è¿ç®—ç¬¦ã€è¡¨è¾¾å¼ç¬¦åˆCè¯­è¨€è¿ç®—è§„åˆ™ï¼Œéƒ½å¯ç”¨åœ¨$(( exp ))ä¸­ï¼Œç”šè‡³æ˜¯ä¸‰ç›®è¿ç®—ç¬¦ã€‚ä½œä¸åŒè¿›ä½(å¦‚äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶)è¿ç®—æ—¶ï¼Œè¾“å‡ºç»“æœå…¨éƒ½è‡ªåŠ¨è½¬åŒ–æˆäº†åè¿›åˆ¶ã€‚å¦‚ï¼šecho $(( 16#5f ))ç»“æœä¸º95(16è¿›ä½è½¬åè¿›åˆ¶)ã€‚ â‘¢å•çº¯ç”¨ (( )) ä¹Ÿå¯é‡å®šä¹‰å˜é‡å€¼ï¼Œæ¯”å¦‚a=5; (( a++ ))å¯å°†$aé‡å®šä¹‰ä¸º6ã€‚ â‘£å¸¸ç”¨äºç®—æœ¯è¿ç®—æ¯”è¾ƒï¼ŒåŒæ‹¬å·ä¸­çš„å˜é‡å¯ä»¥ä¸ä½¿ç”¨$ç¬¦å·å‰ç¼€ã€‚æ‹¬å·å†…æ”¯æŒå¤šä¸ªè¡¨è¾¾å¼ç”¨é€—å·åˆ†å¼€ã€‚ åªè¦æ‹¬å·ä¸­çš„è¡¨è¾¾å¼ç¬¦åˆCè¯­è¨€è¿ç®—è§„åˆ™ï¼Œæ¯”å¦‚å¯ä»¥ç›´æ¥ä½¿ç”¨for (( i = 0; i &lt; 5; i++ ))ï¼Œå¦‚æœä¸ä½¿ç”¨åŒæ‹¬å·ï¼Œåˆ™ä¸ºfor i in Ë‹seq 0 4Ë‹æˆ–è€…for i in &#123;0..4&#125;ã€‚å†å¦‚å¯ä»¥ç›´æ¥ä½¿ç”¨if (($i&lt;5))ï¼Œå¦‚æœä¸ä½¿ç”¨åŒæ‹¬å·ï¼Œåˆ™ä¸ºif [ $i -lt 5 ]ã€‚ 2.2.ä¸­æ‹¬å·/æ–¹æ‹¬å· å•ä¸­æ‹¬å·[] â‘ bashçš„å†…éƒ¨å‘½ä»¤ï¼Œ[å’Œtestæ˜¯ç­‰åŒçš„ã€‚å¦‚æœæˆ‘ä»¬ä¸ç”¨ç»å¯¹è·¯å¾„æŒ‡æ˜ï¼Œé€šå¸¸æˆ‘ä»¬ç”¨çš„éƒ½æ˜¯bashè‡ªå¸¦çš„å‘½ä»¤ã€‚if/testç»“æ„ä¸­çš„å·¦ä¸­æ‹¬å·æ˜¯è°ƒç”¨testçš„å‘½ä»¤æ ‡è¯†ï¼Œå³ä¸­æ‹¬å·æ˜¯å…³é—­æ¡ä»¶åˆ¤æ–­çš„ã€‚è¿™ä¸ªå‘½ä»¤æŠŠå®ƒçš„å‚æ•°ä½œä¸ºæ¯”è¾ƒè¡¨è¾¾å¼æˆ–è€…ä½œä¸ºæ–‡ä»¶æµ‹è¯•ï¼Œå¹¶ä¸”æ ¹æ®æ¯”è¾ƒçš„ç»“æœæ¥è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ç ã€‚if/testç»“æ„ä¸­å¹¶ä¸æ˜¯å¿…é¡»å³ä¸­æ‹¬å·ï¼Œä½†æ˜¯æ–°ç‰ˆçš„Bashä¸­è¦æ±‚å¿…é¡»è¿™æ ·ã€‚ â‘¡testå’Œ[]ä¸­å¯ç”¨çš„æ¯”è¾ƒè¿ç®—ç¬¦åªæœ‰==å’Œ!=ï¼Œä¸¤è€…éƒ½æ˜¯ç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒçš„ï¼Œä¸å¯ç”¨äºæ•´æ•°æ¯”è¾ƒï¼Œæ•´æ•°æ¯”è¾ƒåªèƒ½ä½¿ç”¨-eqã€-gtè¿™ç§å½¢å¼ã€‚æ— è®ºæ˜¯å­—ç¬¦ä¸²æ¯”è¾ƒè¿˜æ˜¯æ•´æ•°æ¯”è¾ƒéƒ½ä¸æ”¯æŒå¤§äºå·å°äºå·ã€‚å¦‚æœå®åœ¨æƒ³ç”¨ï¼Œå¯¹äºå­—ç¬¦ä¸²æ¯”è¾ƒå¯ä»¥ä½¿ç”¨è½¬ä¹‰å½¢å¼ï¼Œä¾‹å¦‚ï¼š[ ab \\&lt; bc ]ï¼Œç»“æœä¸ºçœŸï¼Œä¹Ÿå°±æ˜¯è¿”å›çŠ¶æ€ä¸º0ã€‚[ ]ä¸­çš„é€»è¾‘ä¸å’Œé€»è¾‘æˆ–ä½¿ç”¨-aå’Œ-oè¡¨ç¤ºã€‚ â‘¢å­—ç¬¦èŒƒå›´ã€‚ç”¨ä½œæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œæè¿°ä¸€ä¸ªåŒ¹é…çš„å­—ç¬¦èŒƒå›´ï¼Œä½œä¸ºtestç”¨é€”çš„ä¸­æ‹¬å·å†…ä¸èƒ½ä½¿ç”¨æ­£åˆ™ã€‚ â‘£åœ¨ä¸€ä¸ªarrayç»“æ„çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸­æ‹¬å·ç”¨æ¥å¼•ç”¨æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ç¼–å·ã€‚ åŒä¸­æ‹¬å·[[ ]] â‘ [[æ˜¯bashç¨‹åºè¯­è¨€çš„å…³é”®å­—ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œ[[ ]]ç»“æ„æ¯”[ ]ç»“æ„æ›´åŠ é€šç”¨ã€‚åœ¨[[å’Œ]]ä¹‹é—´æ‰€æœ‰çš„å­—ç¬¦éƒ½ä¸ä¼šå‘ç”Ÿæ–‡ä»¶åæ‰©å±•æˆ–è€…å•è¯åˆ†å‰²ï¼Œä½†æ˜¯ä¼šå‘ç”Ÿå‚æ•°æ‰©å±•å’Œå‘½ä»¤æ›¿æ¢ã€‚ â‘¡æ”¯æŒå­—ç¬¦ä¸²çš„æ¨¡å¼åŒ¹é…ï¼Œä½¿ç”¨=~æ“ä½œç¬¦æ—¶ç”šè‡³æ”¯æŒshellçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶å¯ä»¥æŠŠå³è¾¹çš„ä½œä¸ºä¸€ä¸ªæ¨¡å¼ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚[[ hello == hell? ]]ï¼Œç»“æœä¸ºçœŸã€‚[[ ]]ä¸­åŒ¹é…å­—ç¬¦ä¸²æˆ–é€šé…ç¬¦ï¼Œä¸éœ€è¦å¼•å·ã€‚ â‘¢ä½¿ç”¨[[ ... ]]æ¡ä»¶åˆ¤æ–­ç»“æ„è€Œé[ ... ]ï¼Œèƒ½å¤Ÿé˜²æ­¢è„šæœ¬ä¸­çš„è®¸å¤šé€»è¾‘é”™è¯¯ã€‚æ¯”å¦‚ï¼Œ&amp;&amp;ã€||ã€&lt;å’Œ&gt;æ“ä½œç¬¦èƒ½å¤Ÿæ­£å¸¸å­˜åœ¨äº[[ ]]æ¡ä»¶åˆ¤æ–­ç»“æ„ä¸­ï¼Œä½†æ˜¯å¦‚æœå‡ºç°åœ¨[ ]ç»“æ„ä¸­çš„è¯ä¼šæŠ¥é”™ã€‚æ¯”å¦‚å¯ä»¥ç›´æ¥ä½¿ç”¨if [[ $a != 1 &amp;&amp; $a != 2 ]]ï¼Œå¦‚æœä¸ä½¿ç”¨åŒæ‹¬å·åˆ™ä¸ºif [ $a -ne 1] &amp;&amp; [ $a != 2 ]æˆ–è€…if [ $a -ne 1 -a $a != 2 ]ã€‚ â‘£bashæŠŠåŒä¸­æ‹¬å·ä¸­çš„è¡¨è¾¾å¼çœ‹ä½œä¸€ä¸ªå•ç‹¬çš„å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ç ã€‚ 2.3.å¤§æ‹¬å·/èŠ±æ‹¬å·â‘´å¸¸è§„ç”¨æ³• å¤§æ‹¬å·æ‹“å±•ã€‚é€šé…ï¼ˆglobbingï¼‰å°†å¯¹å¤§æ‹¬å·ä¸­çš„æ–‡ä»¶ååšæ‰©å±•ã€‚åœ¨å¤§æ‹¬å·ä¸­ï¼Œä¸å…è®¸æœ‰ç©ºç™½ï¼Œé™¤éè¿™ä¸ªç©ºç™½è¢«å¼•ç”¨æˆ–è½¬ä¹‰ã€‚ ç¬¬ä¸€ç§ï¼šå¯¹å¤§æ‹¬å·ä¸­çš„ä»¥é€—å·åˆ†å‰²çš„æ–‡ä»¶åˆ—è¡¨è¿›è¡Œæ‹“å±•ã€‚å¦‚touch &#123;a,b&#125;.txtç»“æœä¸ºa.txt b.txtã€‚ ç¬¬äºŒç§ï¼šå¯¹å¤§æ‹¬å·ä¸­ä»¥ç‚¹ç‚¹..åˆ†å‰²çš„é¡ºåºæ–‡ä»¶åˆ—è¡¨èµ·æ‹“å±•ä½œç”¨ï¼Œå¦‚ï¼štouch &#123;a..d&#125;.txtç»“æœä¸ºa.txt b.txt c.txt d.txtã€‚ æ³¨ï¼šåœ¨å‚è€ƒæ–‡ç« å…³äºå¤§æ‹¬å·æ‹“å±•ä¸¾ä¾‹ä¸­ï¼Œls &#123;ex[1-3],ex4&#125;.shå¯ä»¥æ‰©å±•ï¼Œä½†touch &#123;ex[1-3],ex4&#125;.shåªåˆ›å»ºäº†ä¸¤ä¸ªæ–‡ä»¶ã€‚ ä»£ç å—ï¼Œåˆè¢«ç§°ä¸ºå†…éƒ¨ç»„ï¼Œè¿™ä¸ªç»“æ„äº‹å®ä¸Šåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ä¸å°æ‹¬å·ä¸­çš„å‘½ä»¤ä¸åŒï¼Œå¤§æ‹¬å·å†…çš„å‘½ä»¤ä¸ä¼šæ–°å¼€ä¸€ä¸ªå­shellè¿è¡Œï¼Œå³è„šæœ¬ä½™ä¸‹éƒ¨åˆ†ä»å¯ä½¿ç”¨æ‹¬å·å†…å˜é‡ã€‚æ‹¬å·å†…çš„å‘½ä»¤é—´ç”¨åˆ†å·éš”å¼€ï¼Œæœ€åä¸€ä¸ªä¹Ÿå¿…é¡»æœ‰åˆ†å·ã€‚&#123;&#125;çš„ç¬¬ä¸€ä¸ªå‘½ä»¤å’Œå·¦æ‹¬å·ä¹‹é—´å¿…é¡»è¦æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚ â‘µå‡ ç§ç‰¹æ®Šçš„æ›¿æ¢ç»“æ„ â‘ $&#123;var:-string&#125;ï¼šè‹¥å˜é‡varä¸ºç©ºï¼Œåˆ™ç”¨åœ¨å‘½ä»¤è¡Œä¸­ç”¨stringæ¥æ›¿æ¢$&#123;var:-string&#125;ï¼›å˜é‡varä¸ä¸ºç©ºæ—¶ï¼Œåˆ™ç”¨å˜é‡varçš„å€¼æ¥æ›¿æ¢$&#123;var:-string&#125;ã€‚ â‘¡$&#123;var:=string&#125;ï¼šæ›¿æ¢è§„åˆ™å’Œâ‘ ç›¸åŒï¼Œæ‰€ä¸åŒä¹‹å¤„æ˜¯$&#123;var:=string&#125;è‹¥varä¸ºç©ºæ—¶ï¼Œç”¨stringæ›¿æ¢$&#123;var:=string&#125;çš„åŒæ—¶è¿˜æŠŠstringèµ‹ç»™å˜é‡varã€‚$&#123;var:=string&#125;å¾ˆå¸¸ç”¨çš„ä¸€ç§ç”¨æ³•æ˜¯ï¼Œåˆ¤æ–­æŸä¸ªå˜é‡æ˜¯å¦èµ‹å€¼ï¼Œæ²¡æœ‰çš„è¯åˆ™ç»™å®ƒèµ‹ä¸Šä¸€ä¸ªé»˜è®¤å€¼ã€‚ â‘¡$&#123;var:+string&#125;çš„æ›¿æ¢è§„åˆ™å’Œä¸Šé¢â‘ â‘¡ç›¸åï¼Œå³åªæœ‰å½“varä¸æ˜¯ç©ºçš„æ—¶å€™æ‰æ›¿æ¢æˆstringï¼Œè‹¥varä¸ºç©ºæ—¶åˆ™ä¸æ›¿æ¢æˆ–è€…è¯´æ˜¯æ›¿æ¢æˆå˜é‡varå³ç©ºå€¼ã€‚ â‘¢$&#123;var:?string&#125;æ›¿æ¢è§„åˆ™ä¸ºï¼šè‹¥å˜é‡varä¸ä¸ºç©ºï¼Œåˆ™ç”¨å˜é‡varçš„å€¼æ¥æ›¿æ¢$&#123;var:?string&#125;ï¼›è‹¥å˜é‡varä¸ºç©ºï¼Œåˆ™æŠŠstringè¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯ä¸­ï¼Œå¹¶ä»è„šæœ¬ä¸­é€€å‡ºã€‚æˆ‘ä»¬å¯åˆ©ç”¨æ­¤ç‰¹æ€§æ¥æ£€æŸ¥æ˜¯å¦è®¾ç½®äº†å˜é‡çš„å€¼ã€‚ è¡¥å……æ‰©å±•ï¼šåœ¨ä¸Šé¢çš„æ›¿æ¢ç»“æ„ä¸­stringä¸ä¸€å®šæ˜¯å¸¸å€¼çš„ï¼Œå¯ç”¨å¦å¤–ä¸€ä¸ªå˜é‡çš„å€¼æˆ–æ˜¯ä¸€ç§å‘½ä»¤çš„è¾“å‡ºã€‚ â‘¶å››ç§æ¨¡å¼åŒ¹é…æ›¿æ¢ç»“æ„ æ¨¡å¼åŒ¹é…è®°å¿†æ–¹æ³•ï¼š #æ˜¯å»æ‰å·¦è¾¹(åœ¨é”®ç›˜ä¸Š#åœ¨$ä¹‹å·¦è¾¹) %æ˜¯å»æ‰å³è¾¹(åœ¨é”®ç›˜ä¸Š%åœ¨$ä¹‹å³è¾¹) #å’Œ%ä¸­çš„å•ä¸€ç¬¦å·æ˜¯æœ€å°åŒ¹é…ï¼Œä¸¤ä¸ªç›¸åŒç¬¦å·æ˜¯æœ€å¤§åŒ¹é… ç¬¬ä¸€ç§æ¨¡å¼ï¼š$&#123;variable%pattern&#125;ã€‚shellåœ¨variableä¸­æŸ¥æ‰¾ï¼Œçœ‹å®ƒæ˜¯å¦ä»¥ç»™çš„æ¨¡å¼patternç»“å°¾ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä»å‘½ä»¤è¡ŒæŠŠvariableä¸­çš„å†…å®¹å»æ‰å³è¾¹æœ€çŸ­çš„åŒ¹é…æ¨¡å¼ï¼› ç¬¬äºŒç§æ¨¡å¼ï¼š$&#123;variable%%pattern&#125;ã€‚shellåœ¨variableä¸­æŸ¥æ‰¾ï¼Œçœ‹å®ƒæ˜¯å¦ä»¥ç»™çš„æ¨¡å¼patternç»“å°¾ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä»å‘½ä»¤è¡ŒæŠŠvariableä¸­çš„å†…å®¹å»æ‰å³è¾¹æœ€é•¿çš„åŒ¹é…æ¨¡å¼ï¼› ç¬¬ä¸‰ç§æ¨¡å¼ï¼š$&#123;variable#pattern&#125;ã€‚shellåœ¨variableä¸­æŸ¥æ‰¾ï¼Œçœ‹å®ƒæ˜¯å¦ä»¥ç»™çš„æ¨¡å¼patternå¼€å§‹ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä»å‘½ä»¤è¡ŒæŠŠvariableä¸­çš„å†…å®¹å»æ‰å·¦è¾¹æœ€çŸ­çš„åŒ¹é…æ¨¡å¼ï¼› ç¬¬å››ç§æ¨¡å¼ï¼š$&#123;variable##pattern&#125;ã€‚shellåœ¨variableä¸­æŸ¥æ‰¾ï¼Œçœ‹å®ƒæ˜¯å¦ä»¥ç»™çš„æ¨¡å¼patternç»“å°¾ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä»å‘½ä»¤è¡ŒæŠŠvariableä¸­çš„å†…å®¹å»æ‰å·¦è¾¹æœ€é•¿çš„åŒ¹é…æ¨¡å¼ã€‚ è¿™å››ç§æ¨¡å¼ä¸­éƒ½ä¸ä¼šæ”¹å˜variableçš„å€¼ï¼Œå…¶ä¸­ï¼Œåªæœ‰åœ¨patternä¸­ä½¿ç”¨äº†*åŒ¹é…ç¬¦å·æ—¶ï¼Œ%å’Œ%%ã€#å’Œ##æ‰æœ‰åŒºåˆ«ã€‚ç»“æ„ä¸­çš„patternæ”¯æŒé€šé…ç¬¦ï¼Œ*è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦ï¼Œ?è¡¨ç¤ºä»…ä¸ä¸€ä¸ªä»»æ„å­—ç¬¦åŒ¹é…ï¼Œ[...]è¡¨ç¤ºåŒ¹é…ä¸­æ‹¬å·é‡Œé¢çš„å­—ç¬¦ï¼Œ[!...]è¡¨ç¤ºä¸åŒ¹é…ä¸­æ‹¬å·é‡Œé¢çš„å­—ç¬¦ ã€‚ â‘·å­—ç¬¦ä¸²æå–å’Œæ›¿æ¢ ç¬¬ä¸€ç§æ¨¡å¼ï¼š$&#123;var:num&#125;ã€‚shellåœ¨varä¸­æå–ç¬¬numä¸ªå­—ç¬¦åˆ°æœ«å°¾çš„æ‰€æœ‰å­—ç¬¦ã€‚è‹¥numä¸ºæ­£æ•°ï¼Œä»å·¦è¾¹0å¤„å¼€å§‹ï¼›è‹¥numä¸ºè´Ÿæ•°ï¼Œä»å³è¾¹å¼€å§‹æå–å­—ä¸²ï¼Œä½†å¿…é¡»åœ¨å†’å·åé¢åŠ ç©ºæ ¼æˆ–ä¸€ä¸ªæ•°å­—æˆ–æ•´ä¸ªnumåŠ ä¸Šæ‹¬å·ï¼Œå¦‚$&#123;var: -2&#125;ã€$&#123;var:1-3&#125;æˆ–$&#123;var:(-2)&#125;ã€‚ ç¬¬äºŒç§æ¨¡å¼ï¼š$&#123;var:num1:num2&#125;ã€‚num1æ˜¯ä½ç½®ï¼Œnum2æ˜¯é•¿åº¦ã€‚è¡¨ç¤ºä»$varå­—ç¬¦ä¸²çš„ç¬¬$num1ä¸ªä½ç½®å¼€å§‹æå–é•¿åº¦ä¸º$num2çš„å­ä¸²ã€‚ä¸èƒ½ä¸ºè´Ÿæ•°ã€‚ ç¬¬ä¸‰ç§æ¨¡å¼ï¼š$&#123;var/pattern/pattern&#125;ã€‚å°†varå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªåŒ¹é…çš„patternæ›¿æ¢ä¸ºå¦ä¸€ä¸ªpatternã€‚ ç¬¬å››ç§æ¨¡å¼ï¼š$&#123;var//pattern/pattern&#125;ã€‚å°†varå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰èƒ½åŒ¹é…çš„patternæ›¿æ¢ä¸ºå¦ä¸€ä¸ªpatternã€‚ 2.4.ç¬¦å·$åçš„æ‹¬å· ï¼ˆ1ï¼‰$&#123;a&#125;ï¼šå˜é‡açš„å€¼ï¼Œåœ¨ä¸å¼•èµ·æ­§ä¹‰çš„æƒ…å†µä¸‹å¯ä»¥çœç•¥å¤§æ‹¬å·ã€‚ ï¼ˆ2ï¼‰$(cmd)ï¼šå‘½ä»¤æ›¿æ¢ï¼Œå’Œcmdæ•ˆæœç›¸åŒï¼Œç»“æœä¸ºcmdå‘½ä»¤çš„è¾“å‡ºï¼Œä¸è¿‡æŸäº›Shellç‰ˆæœ¬ä¸æ”¯æŒ$()å½¢å¼çš„å‘½ä»¤æ›¿æ¢ï¼Œå¦‚tcshã€‚ ï¼ˆ3ï¼‰$((expression))ï¼šæ•ˆæœå’Œexpr expressionç›¸åŒï¼Œè®¡ç®—æ•°å­¦è¡¨è¾¾å¼expressionçš„æ•°å€¼ï¼Œå…¶ä¸­expressionåªè¦ç¬¦åˆCè¯­è¨€çš„è¿ç®—è§„åˆ™å³å¯ï¼Œç”šè‡³ä¸‰ç›®è¿ç®—ç¬¦å’Œé€»è¾‘è¡¨è¾¾å¼éƒ½å¯ä»¥è®¡ç®—ã€‚ 2.5.ä½¿ç”¨æ‹¬å·å°†å¤šæ¡å‘½ä»¤æ‰§è¡Œ ï¼ˆ1ï¼‰å•å°æ‹¬å·ï¼š(cmd1; cmd2; cmd3)ã€‚æ–°å¼€ä¸€ä¸ªå­shellé¡ºåºæ‰§è¡Œå‘½ä»¤cmd1, cmd2, cmd3ï¼Œå„å‘½ä»¤ä¹‹é—´ç”¨åˆ†å·éš”å¼€ï¼Œæœ€åä¸€ä¸ªå‘½ä»¤åå¯ä»¥æ²¡æœ‰åˆ†å·ã€‚ ï¼ˆ2ï¼‰å•å¤§æ‹¬å·ï¼š&#123; cmd1; cmd2; cmd3;&#125;ã€‚åœ¨å½“å‰shellé¡ºåºæ‰§è¡Œå‘½ä»¤cmd1, cmd2, cmd3ï¼Œå„å‘½ä»¤ä¹‹é—´ç”¨åˆ†å·éš”å¼€ï¼Œæœ€åä¸€ä¸ªå‘½ä»¤åå¿…é¡»æœ‰åˆ†å·ï¼Œç¬¬ä¸€æ¡å‘½ä»¤å’Œå·¦æ‹¬å·ä¹‹é—´å¿…é¡»ç”¨ç©ºæ ¼éš”å¼€ã€‚ æ³¨æ„ï¼šå¯¹&#123;&#125;å’Œ()è€Œè¨€ï¼Œæ‹¬å·ä¸­çš„é‡å®šå‘ç¬¦åªå½±å“è¯¥æ¡å‘½ä»¤ï¼Œ è€Œæ‹¬å·å¤–çš„é‡å®šå‘ç¬¦å½±å“åˆ°æ‹¬å·ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€‚ 3.é‡å®šå‘å’Œç®¡é“ è¾“å‡ºé‡å®šå‘ï¼ˆ&gt;ï¼‰ï¼šå°†å‘½ä»¤çš„è¾“å‡ºå‘é€åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå…¶ä¸­å•å¤§äºå·ï¼ˆ&gt;ï¼‰ä¼šè¦†ç›–æ–‡ä»¶å†…å®¹ï¼ŒåŒå¤§äºå·ï¼ˆ&gt;&gt;ï¼‰ç”¨ä»¥å‘æ–‡ä»¶è¿½åŠ æ•°æ®ã€‚ è¾“å…¥é‡å®šå‘ï¼ˆ&lt;ï¼‰ï¼šå°†æ–‡ä»¶çš„å†…å®¹é‡å®šå‘åˆ°å‘½ä»¤ï¼Œä¸è¾“å‡ºé‡å®šå‘æ­£å¥½ç›¸åã€‚ å†…è”è¾“å…¥é‡å®šå‘ï¼ˆ&lt;&lt;ï¼‰ï¼šè¾“å…¥é‡å®šå‘çš„å¦ä¸€ç§æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•æ— éœ€ä½¿ç”¨æ–‡ä»¶è¿›è¡Œé‡å®šå‘ï¼Œåªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šç”¨äºè¾“å…¥é‡å®šå‘çš„æ•°æ®å°±å¯ä»¥äº†ã€‚å¿…é¡»æŒ‡å®šä¸€ä¸ªæ–‡æœ¬æ ‡è®°æ¥åˆ’åˆ†è¾“å…¥æ•°æ®çš„å¼€å§‹å’Œç»“å°¾ã€‚ä»»ä½•å­—ç¬¦ä¸²éƒ½å¯ä½œä¸ºæ–‡æœ¬æ ‡è®°ï¼Œä½†åœ¨æ•°æ®çš„å¼€å§‹å’Œç»“å°¾æ–‡æœ¬æ ‡è®°å¿…é¡»ä¸€è‡´ã€‚ è®°å¿†æ–¹æ³•ï¼šåœ¨å‘½ä»¤è¡Œä¸Šï¼Œå‘½ä»¤æ€»æ˜¯åœ¨å·¦ä¾§ï¼Œè€Œé‡å®šå‘ç¬¦å·ã€ŒæŒ‡å‘ã€æ•°æ®æµåŠ¨çš„æ–¹å‘ã€‚å°äºå·è¯´æ˜æ•°æ®æ­£åœ¨ä»è¾“å…¥æ–‡ä»¶æµå‘å‘½ä»¤ã€‚ ç®¡é“ï¼ˆ|ï¼‰ï¼šå°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ï¼ˆè™½ç„¶å¯ä»¥ç”¨é‡å®šå‘æ¥å®ç°ï¼Œä½†æ˜¯æœ‰äº›ç¬¨æ‹™ï¼‰ã€‚ æ³¨æ„ï¼š â‘ ä¸è¦ä»¥ä¸ºç”±ç®¡é“ä¸²èµ·çš„ä¸¤ä¸ªå‘½ä»¤ä¼šä¾æ¬¡æ‰§è¡Œã€‚ Linuxç³»ç»Ÿå®é™…ä¸Šä¼šåŒæ—¶è¿è¡Œè¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œåœ¨ç³»ç»Ÿå†…éƒ¨å°†å®ƒä»¬è¿æ¥èµ·æ¥ã€‚åœ¨ç¬¬ä¸€ä¸ªå‘½ä»¤äº§ç”Ÿè¾“å‡ºçš„åŒæ—¶ï¼Œè¾“å‡ºä¼šè¢«ç«‹å³é€ç»™ç¬¬äºŒä¸ªå‘½ä»¤ã€‚æ•°æ®ä¼ è¾“ä¸ä¼šç”¨åˆ°ä»»ä½•ä¸­é—´æ–‡ä»¶æˆ–ç¼“å†²åŒºã€‚ â‘¡å¯ä»¥åœ¨ä¸€æ¡å‘½ä»¤ä¸­ä½¿ç”¨ä»»æ„å¤šæ¡ç®¡é“ã€‚ 4.é€€å‡ºçŠ¶æ€ç shellä¸­è¿è¡Œçš„æ¯ä¸ªå‘½ä»¤éƒ½ä½¿ç”¨é€€å‡ºçŠ¶æ€ç ï¼ˆexit statusï¼‰å‘Šè¯‰shellå®ƒå·²ç»è¿è¡Œå®Œæ¯•ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼Œä¸€ä¸ªæˆåŠŸç»“æŸçš„å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç æ˜¯0ã€‚å¦‚æœä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶æœ‰é”™è¯¯ï¼Œé€€å‡ºçŠ¶æ€ç å°±æ˜¯ä¸€ä¸ªæ­£æ•°å€¼ã€‚ é€€å‡ºçŠ¶æ€ç æ˜¯ä¸€ä¸ª0ï½255çš„æ•´æ•°å€¼ï¼Œåœ¨å‘½ä»¤ç»“æŸè¿è¡Œæ—¶ç”±å‘½ä»¤ä¼ ç»™shellï¼Œå¯ä»¥ä½¿ç”¨å˜é‡$?æ•è·è¿™ä¸ªå€¼ï¼ˆä¸Šä¸ªå·²æ‰§è¡Œå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ï¼‰å¹¶åœ¨è„šæœ¬ä¸­ä½¿ç”¨ã€‚è‡ªå®šä¹‰é€€å‡ºçŠ¶æ€ç ï¼ˆexit nï¼‰æ—¶ï¼Œè‹¥nè¶…å‡º0~255åŒºé—´åˆ™å¯¹256å–ä½™ã€‚ çŠ¶æ€ç  æè¿° 0 å‘½ä»¤æˆåŠŸç»“æŸ 1 ä¸€èˆ¬æ€§æœªçŸ¥é”™è¯¯ 2 ä¸é€‚åˆçš„shellå‘½ä»¤ 126 å‘½ä»¤ä¸å¯æ‰§è¡Œ 127 æ²¡æ‰¾åˆ°å‘½ä»¤ 128 æ— æ•ˆçš„é€€å‡ºå‚æ•° 128+x ä¸Linuxä¿¡å·xç›¸å…³çš„ä¸¥é‡é”™è¯¯ 130 é€šè¿‡Ctrl+Cç»ˆæ­¢çš„å‘½ä»¤ 255 æ­£å¸¸èŒƒå›´ä¹‹å¤–çš„é€€å‡ºçŠ¶æ€ç  5.å¾…ç»­","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/tags/Linux/"},{"name":"shell","slug":"shell","permalink":"https://hwame.top/tags/shell/"}]},{"title":"Linuxä¸–ç•Œçš„è§„åˆ™","slug":"rules-of-linux","date":"2020-11-29T05:51:52.000Z","updated":"2020-12-03T13:05:34.000Z","comments":true,"path":"20201129/rules-of-linux.html","link":"","permalink":"https://hwame.top/20201129/rules-of-linux.html","excerpt":"","text":"æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« è¯´æ˜ï¼šå­¦ä¹ Linuxè¿‡ç¨‹ä¸­çš„è®°å½•ï¼Œå‚è€ƒä¹¦ç±ä¸»è¦æœ‰ã€ŠLinuxå‘½ä»¤è¡Œä¸shellè„šæœ¬ç¼–ç¨‹å¤§å…¨ï¼ˆç¬¬3ç‰ˆï¼‰ã€‹ï¼Œã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ã€‹ç³»åˆ—å’Œã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹ï¼Œå‚è€ƒèµ„æ–™ä¸»è¦æœ‰Linuxå‘½ä»¤å¤§å…¨ç­‰ã€‚æ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20201129/rules-of-linux.html 1.å¸¸è§Linuxç›®å½•åç§° ç›®å½• ç”¨é€” / è™šæ‹Ÿç›®å½•çš„æ ¹ç›®å½•ï¼Œä¸‡ç‰©èµ·æºã€‚é€šå¸¸ä¸ä¼šåœ¨è¿™é‡Œå­˜å‚¨æ–‡ä»¶ /bin äºŒè¿›åˆ¶ç›®å½•ï¼Œå­˜æ”¾è®¸å¤šç”¨æˆ·çº§çš„GNUå·¥å…· /boot å¯åŠ¨ç›®å½•ï¼ŒåŒ…å«Linuxå†…æ ¸ï¼Œå­˜æ”¾å¯åŠ¨æ–‡ä»¶/boot/grub/grub.conf or menu.lstï¼Œè¢«ç”¨æ¥é…ç½®å¯åŠ¨åŠ è½½ç¨‹åº/boot/vmlinuzï¼ŒLinux å†…æ ¸ /dev è®¾å¤‡ç›®å½•ï¼ŒLinuxåœ¨è¿™é‡Œåˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ /etc ç³»ç»Ÿé…ç½®æ–‡ä»¶ç›®å½•ï¼Œä¹ŸåŒ…å«ä¸€ç³»åˆ—çš„shellè„šæœ¬/etc/crontabï¼Œå®šä¹‰è‡ªåŠ¨è¿è¡Œçš„ä»»åŠ¡/etc/fstabï¼ŒåŒ…å«å­˜å‚¨è®¾å¤‡çš„åˆ—è¡¨ï¼Œä»¥åŠä¸ä»–ä»¬ç›¸å…³çš„æŒ‚è½½ç‚¹/etc/passwdï¼ŒåŒ…å«ç”¨æˆ·å¸å·åˆ—è¡¨ /home ä¸»ç›®å½•ï¼ŒLinuxåœ¨è¿™ é‡Œåˆ›å»ºç”¨æˆ·ç›®å½• /lib åº“ç›®å½•ï¼Œå­˜æ”¾ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„åº“æ–‡ä»¶ /media åª’ä½“ç›®å½•ï¼Œå¯ç§»åŠ¨åª’ä½“è®¾å¤‡çš„å¸¸ç”¨æŒ‚è½½ç‚¹ /mnt æŒ‚è½½ç›®å½•ï¼Œå¦ä¸€ä¸ªå¯ç§»åŠ¨åª’ä½“è®¾å¤‡çš„å¸¸ç”¨æŒ‚è½½ç‚¹ /opt å¯é€‰ç›®å½•ï¼Œå¸¸ç”¨äºå­˜æ”¾ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…å’Œæ•°æ®æ–‡ä»¶ /proc è¿›ç¨‹ç›®å½•ï¼Œå­˜æ”¾ç°æœ‰ç¡¬ä»¶åŠå½“å‰è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯ /root rootç”¨æˆ·çš„ä¸»ç›®å½• /sbin ç³»ç»ŸäºŒè¿›åˆ¶ç›®å½•ï¼Œå­˜æ”¾è®¸å¤šGNUç®¡ç†å‘˜çº§å·¥å…· /run è¿è¡Œç›®å½•ï¼Œå­˜æ”¾ç³»ç»Ÿè¿ä½œæ—¶çš„è¿è¡Œæ—¶æ•°æ® /srv æœåŠ¡ç›®å½•ï¼Œå­˜æ”¾æœ¬åœ°æœåŠ¡çš„ç›¸å…³æ–‡ä»¶ /sys ç³»ç»Ÿç›®å½•ï¼Œå­˜æ”¾ç³»ç»Ÿç¡¬ä»¶ä¿¡æ¯çš„ç›¸å…³æ–‡ä»¶ /tmp ä¸´æ—¶ç›®å½•ï¼Œå¯ä»¥åœ¨è¯¥ç›®å½•ä¸­åˆ›å»ºå’Œåˆ é™¤ä¸´æ—¶å·¥ä½œæ–‡ä»¶ /usr ç”¨æˆ·äºŒè¿›åˆ¶ç›®å½•ï¼Œå¤§é‡ç”¨æˆ·çº§çš„GNUå·¥å…·å’Œæ•°æ®æ–‡ä»¶éƒ½å­˜å‚¨åœ¨è¿™é‡Œï¼Œå®ƒå¯èƒ½æ˜¯Linuxç³»ç»Ÿä¸­æœ€å¤§çš„ä¸€ä¸ª/usr/binï¼ŒåŒ…å«ç³»ç»Ÿå®‰è£…çš„å¯æ‰§è¡Œç¨‹åºï¼Œé€šå¸¸ä¼šåŒ…å«è®¸å¤šç¨‹åº/usr/libï¼ŒåŒ…å«ç”±/usr/binç›®å½•ä¸­çš„ç¨‹åºæ‰€ç”¨çš„å…±äº«åº“/usr/localï¼Œéç³»ç»Ÿå‘è¡Œç‰ˆè‡ªå¸¦å´æ‰“ç®—è®©ç³»ç»Ÿä½¿ç”¨çš„ç¨‹åºçš„å®‰è£…ç›®å½•/usr/sbinï¼ŒåŒ…å«è®¸å¤šç³»ç»Ÿç®¡ç†ç¨‹åº/usr/shareï¼ŒåŒ…å«è®¸å¤šç”±/usr/binç›®å½•ä¸­çš„ç¨‹åºä½¿ç”¨çš„å…±äº«æ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬åƒé»˜è®¤çš„é…ç½®æ–‡ä»¶ã€å›¾æ ‡ã€æ¡Œé¢èƒŒæ™¯ã€éŸ³é¢‘æ–‡ä»¶ç­‰ç­‰/usr/share/docï¼Œå¤§å¤šæ•°å®‰è£…åœ¨ç³»ç»Ÿä¸­çš„è½¯ä»¶åŒ…ä¼šåŒ…å«ä¸€äº›æ–‡æ¡£ /var å¯å˜ç›®å½•ï¼Œç”¨ä»¥å­˜æ”¾ç»å¸¸å˜åŒ–çš„æ–‡ä»¶ï¼Œæ¯”å¦‚æ—¥å¿—æ–‡ä»¶ 2.é€šé…ç¬¦2.1.é€šé…ç¬¦ é€šé…ç¬¦ æ„ä¹‰ * åŒ¹é…ä»»æ„å¤šä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬é›¶ä¸ªæˆ–ä¸€ä¸ªï¼‰ ? åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼ˆä¸åŒ…æ‹¬é›¶ä¸ªï¼‰ [characters] åŒ¹é…ä»»æ„ä¸€ä¸ªå±äºå­—ç¬¦é›†ä¸­çš„å­—ç¬¦ [!characters] åŒ¹é…ä»»æ„ä¸€ä¸ªä¸æ˜¯å­—ç¬¦é›†ä¸­çš„å­—ç¬¦ [[:class:]] åŒ¹é…ä»»æ„ä¸€ä¸ªå±äºæŒ‡å®šå­—ç¬¦ç±»ä¸­çš„å­—ç¬¦ æ³¨æ„ï¼šä¸åŒäºæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„.ï¼Œæ­¤å¤„çš„.ä»è¡¨ç¤ºå…¶è‡ªèº«ã€‚ å‚è€ƒã€Œé€šé…ç¬¦ã€å’Œã€Œæ­£åˆ™è¡¨è¾¾å¼ã€çš„åŒºåˆ«ï¼šé€šé…ç¬¦æ˜¯ç³»ç»Ÿçº§çš„ï¼Œå¤šç”¨äºæ–‡ä»¶åä¸Šï¼Œå¦‚findã€lsã€cpç­‰ï¼›æ­£åˆ™è¡¨è¾¾å¼åˆ™éœ€è¦ç›¸å…³å·¥å…·çš„æ”¯æŒï¼Œå¦‚egrepã€awkã€viã€perlç­‰ï¼Œå¤šç”¨äºé’ˆå¯¹æ–‡ä»¶å†…å®¹çš„æ–‡æœ¬è¿‡æ»¤å·¥å…·ï¼Œå¦‚awkã€sedç­‰ã€‚ 2.2.å¸¸ç”¨çš„å­—ç¬¦ç±» é€šé…ç¬¦ æ„ä¹‰ [:alnum:] åŒ¹é…ä»»æ„ä¸€ä¸ªå­—æ¯æˆ–æ•°å­— [:alpha:] åŒ¹é…ä»»æ„ä¸€ä¸ªå­—æ¯ [:digit:] åŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­— [:lower:] åŒ¹é…ä»»æ„ä¸€ä¸ªå°å†™å­—æ¯ [:upper:] åŒ¹é…ä»»æ„ä¸€ä¸ªå¤§å†™å­—æ¯ 2.3.é€šé…ç¬¦èŒƒä¾‹ æ¨¡å¼ åŒ¹é…å¯¹è±¡ * æ‰€æœ‰æ–‡ä»¶ g* æ–‡ä»¶åä»¥gå¼€å¤´çš„æ–‡ä»¶ b*.txt ä»¥bå¼€å¤´ï¼Œä¸­é—´ä»»æ„å¤šä¸ªï¼ˆ$\\ge 0$ï¼‰å­—ç¬¦ï¼Œå¹¶ä»¥.txtç»“å°¾çš„æ–‡ä»¶ Data??? ä»¥Dataå¼€å¤´ï¼Œå…¶åç´§æ¥ç€ 3 ä¸ªå­—ç¬¦çš„æ–‡ä»¶ [abc]* æ–‡ä»¶åä»¥aæˆ–bæˆ–cå¼€å¤´çš„æ–‡ä»¶ BACK.[0-9][0-9] ä»¥BACK.å¼€å¤´å¹¶ç´§æ¥2ä¸ªæ•°å­—çš„æ–‡ä»¶ [[:upper:]]* ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„æ–‡ä»¶ [![:digit:]]* ä¸ä»¥æ•°å­—å¼€å¤´çš„æ–‡ä»¶ *[[:lower:]123] ä»¥å°å†™å­—æ¯ã€1ã€2ã€3å››ç§ä¹‹ä¸€ç»“å°¾çš„æ–‡ä»¶ 3.å‘½ä»¤è¡¨ç¤ºæ³•å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦å‚è€ƒæŸä¸ªå‘½ä»¤çš„ç”¨æ³•ï¼Œä¾‹å¦‚ç”¨command --helpæˆ–man commandæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼Œä½†æ˜¯é€‰é¡¹å‚æ•°å¤ªå¤šï¼Œè¯­æ³•è§„åˆ™ä¸çŸ¥é“æ„ä¹‰ï¼Œä»¥ä¸‹æ˜¯ç®€å•ä»‹ç»å„ç¬¦å·çš„æ„ä¹‰ï¼š ç¬¦å· æ„ä¹‰ [] è¡¨ç¤ºå¯é€‰çš„é¡¹ç›® &lt;&gt; ä½ç½®å‚æ•° () å¿…éœ€ ä¸¨ è¡¨ç¤ºäº’æ–¥é€‰é¡¹ ... è¡¨ç¤ºå‚æ•°å¯é‡å¤ è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š Linuxå‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£å‘½ä»¤è¯­æ³•å…¬å¼æ ¼å¼è¯¦è§£å’ŒGitå‘½ä»¤è¯­æ³•æ ¼å¼è§£è¯» DOCOPT: Command-line interface description language å‘½ä»¤è¡Œå¸®åŠ©æ–‡æ¡£è¯­æ³•æ ¼å¼è¯¦è§£ 4.æ–‡ä»¶æè¿°ç¬¦ä¸é‡å®šå‘Linuxä¸­ä¸‡ç‰©çš†æ–‡ä»¶ï¼Œç”¨æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorï¼‰æ¥æ ‡è¯†æ¯ä¸ªæ–‡ä»¶å¯¹è±¡ã€‚æ¯ä¸ªè¿›ç¨‹ä¸€æ¬¡æœ€å¤šå¯ä»¥æœ‰ä¹ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚å‡ºäºç‰¹æ®Šç›®çš„ï¼Œbash shellä¿ç•™äº†å‰ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼š æ–‡ä»¶æè¿°ç¬¦ ç¼©å†™ æè¿° 0 STDIN æ ‡å‡†è¾“å…¥ 1 STDOUT æ ‡å‡†è¾“å‡º 2 STDERR æ ‡å‡†é”™è¯¯ é»˜è®¤æƒ…å†µä¸‹ï¼ŒSTDERRæ–‡ä»¶æè¿°ç¬¦ä¼šå’ŒSTDOUTæ–‡ä»¶æè¿°ç¬¦æŒ‡å‘åŒæ ·çš„åœ°æ–¹ï¼ˆå°½ç®¡åˆ†é…ç»™å®ƒä»¬çš„æ–‡ä»¶æè¿°ç¬¦å€¼ä¸åŒï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé”™è¯¯æ¶ˆæ¯ä¹Ÿä¼šè¾“å‡ºåˆ°æ˜¾ç¤ºå™¨è¾“å‡ºä¸­ã€‚ä½†STDERRå¹¶ä¸ä¼šéšç€STDOUTçš„é‡å®šå‘è€Œå‘ç”Ÿæ”¹å˜ï¼Œä¾‹å¦‚å°†STDOUTé‡å®šå‘åˆ°æŸæ–‡ä»¶ä½†æ˜¯STDERRä¾ç„¶ä¼šæ‰“å°åˆ°å±å¹•ã€‚ åªé‡å®šå‘é”™è¯¯ï¼šåªé‡å®šå‘é”™è¯¯æ¶ˆæ¯éœ€è¦å°†è¯¥æ–‡ä»¶æè¿°ç¬¦å€¼æ”¾åœ¨é‡å®šå‘ç¬¦å·å‰ï¼Œè¯¥å€¼å¿…é¡»ç´§ç´§åœ°æ”¾åœ¨é‡å®šå‘ç¬¦å·å‰ï¼Œå¦åˆ™ä¸ä¼šå·¥ä½œï¼šcommand 2&gt; error.txtã€‚æ³¨æ„ï¼Œshellä¼šåªé‡å®šå‘é”™è¯¯æ¶ˆæ¯ï¼Œæ­£å¸¸è¾“å‡ºä»ä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ é‡å®šå‘é”™è¯¯å’Œæ•°æ®ï¼šå¦‚æœæƒ³é‡å®šå‘é”™è¯¯å’Œæ­£å¸¸è¾“å‡ºï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªé‡å®šå‘ç¬¦å·ã€‚éœ€è¦åœ¨ç¬¦å·å‰é¢æ”¾ä¸Šå¾…é‡å®šå‘æ•°æ®æ‰€å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œç„¶åæŒ‡å‘ç”¨äºä¿å­˜æ•°æ®çš„è¾“å‡ºæ–‡ä»¶ï¼šcommand 2&gt; error.txt 1&gt; output.txtã€‚å¯ä»¥ç”¨è¿™ç§æ–¹æ³•å°†è„šæœ¬çš„æ­£å¸¸è¾“å‡ºå’Œè„šæœ¬ç”Ÿæˆçš„é”™è¯¯æ¶ˆæ¯åˆ†ç¦»å¼€æ¥ã€‚å¦‚æœæƒ³å°†é”™è¯¯å’Œæ­£å¸¸è¾“å‡ºé‡å®šå‘åˆ°åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œåˆ™éœ€ä½¿ç”¨ç‰¹æ®Šçš„é‡å®šå‘ç¬¦å·&amp;&gt;ï¼Œå³command &amp;&gt; allinfo.txtã€‚æ³¨æ„ï¼Œå½“ä½¿ç”¨&amp;&gt;ç¬¦æ—¶å‘½ä»¤ç”Ÿæˆçš„æ‰€æœ‰è¾“å‡ºéƒ½ä¼šå‘é€åˆ°åŒä¸€ä½ç½®ï¼ŒåŒ…æ‹¬æ•°æ®å’Œé”™è¯¯ï¼Œä½†æ˜¯é”™è¯¯æ¶ˆæ¯å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡ºï¼šåŒ…æ‹¬ã€Œä¸´æ—¶é‡å®šå‘è¡Œè¾“å‡ºã€å’Œã€Œæ°¸ä¹…é‡å®šå‘è„šæœ¬ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€ã€‚ â‘ ä½¿ç”¨è¾“å‡ºé‡å®šå‘ç¬¦æ¥å°†è¾“å‡ºä¿¡æ¯é‡å®šå‘åˆ°STDERRæ–‡ä»¶æè¿°ç¬¦ï¼Œåœ¨é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦æ—¶å¿…é¡»åœ¨æ–‡ä»¶æè¿°ç¬¦æ•°å­—ä¹‹å‰åŠ ä¸€ä¸ª&amp;ï¼šcommand &gt;&amp;2ã€‚å› ä¸ºLinuxé»˜è®¤ä¼šå°†STDERRå¯¼å‘STDOUTï¼Œå› æ­¤ç›´æ¥è¿è¡Œæ²¡æœ‰åŒºåˆ«ï¼Œå¿…é¡»ä½¿ç”¨./mz.sh 2&gt; stderr.txtæ‰èƒ½å°†è„šæœ¬ä¸­æ‰€æœ‰å¯¼å‘STDERRçš„æ–‡æœ¬é‡å®šå‘åˆ°txtæ–‡ä»¶ã€‚è§ä¸‹ä¾‹ï¼š123456#!/bin/bashecho &quot;This is an error&quot; &gt;&amp;2echo &quot;This is normal output&quot;# æ‰§è¡Œå°†è¾“å‡ºä¸¤å¥ï¼š./mz.sh# æ‰§è¡Œå°†è¾“å‡ºä¸€å¥ï¼š./mz.sh 2&gt; stderr.txt â‘¡å¦‚æœè„šæœ¬ä¸­æœ‰å¤§é‡æ•°æ®éœ€è¦é‡å®šå‘ï¼Œé‚£ä¹ˆæ¯å¥éƒ½é‡å®šå‘ä¼šå¾ˆçƒ¦çï¼Œå› æ­¤å¯ä»¥ç”¨execå‘½ä»¤å‘Šè¯‰shellåœ¨è„šæœ¬æ‰§è¡ŒæœŸé—´é‡å®šå‘æŸä¸ªç‰¹å®šæ–‡ä»¶æè¿°ç¬¦ï¼Œè§ä¸‹ä¾‹ï¼š12345678#!/bin/bashexec 2&gt;testerrorecho &quot;This is the start of the script&quot;echo &quot;now redirecting all output to another location&quot;exec 1&gt;testoutecho &quot;This output should go to the testout file&quot;echo &quot;but this should go to the testerror file&quot; &gt;&amp;2 è¿è¡Œè¯¥è„šæœ¬ï¼Œå››ä¸ªechoè¯­å¥ä¸­çš„ä¸€äºŒå¥ä¼šæ‰“å°åˆ°å±å¹•ï¼Œç¬¬ä¸‰å¥é‡å®šå‘åˆ°testoutï¼Œç¬¬å››å¥é‡å®šå‘åˆ°testerrorã€‚æ³¨æ„ï¼šä¸€æ—¦é‡å®šå‘äº†STDOUTæˆ–STDERRï¼Œå°±å¾ˆéš¾å†å°†å®ƒä»¬é‡å®šå‘å›åŸæ¥çš„ä½ç½®ã€‚å¦‚æœä½ éœ€è¦åœ¨é‡å®šå‘ä¸­æ¥å›åˆ‡æ¢çš„è¯ï¼Œè§ä¸‹æ–‡ã€‚ åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å…¥ï¼šexecå‘½ä»¤å…è®¸ä½ å°†STDINé‡å®šå‘åˆ°Linuxç³»ç»Ÿä¸Šçš„æ–‡ä»¶ä¸­ï¼šexec 0&lt; stdin.txtã€‚è¿™ä¸ªå‘½ä»¤ä¼šå‘Šè¯‰shellå®ƒåº”è¯¥ä»æ–‡ä»¶stdin.txtä¸­è·å¾—è¾“å…¥ï¼Œè€Œä¸æ˜¯STDINã€‚è¿™ä¸ªé‡å®šå‘åªè¦åœ¨è„šæœ¬éœ€è¦è¾“å…¥æ—¶å°±ä¼šä½œç”¨ã€‚è§ä¸‹ä¾‹ï¼šreadå‘½ä»¤è¯»å–ç”¨æˆ·åœ¨é”®ç›˜ä¸Šè¾“å…¥çš„æ•°æ®ã€‚å°†STDINé‡å®šå‘åˆ°æ–‡ä»¶åï¼Œå½“readå‘½ä»¤è¯•å›¾ä»STDINè¯»å…¥æ•°æ®æ—¶ï¼Œå®ƒä¼šåˆ°æ–‡ä»¶å»å–æ•°æ®ï¼Œè€Œä¸æ˜¯é”®ç›˜ã€‚12345678#!/bin/bashexec 0&lt; testfilecount=1while read linedo echo &quot;Line #$count: $line&quot; count=$[ $count + 1 ]done åœ¨shellä¸­æœ€å¤šå¯ä»¥æœ‰9ä¸ªæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ã€‚å…¶ä»–6ä¸ªä»3~8çš„æ–‡ä»¶æè¿°ç¬¦å‡å¯ç”¨ä½œè¾“å…¥æˆ–è¾“å‡ºé‡å®šå‘ã€‚ä½ å¯ä»¥å°†è¿™äº›æ–‡ä»¶æè¿°ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ªåˆ†é…ç»™æ–‡ä»¶ï¼Œç„¶ååœ¨è„šæœ¬ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ä½ å¯ä»¥åˆ†é…å¦å¤–ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ç»™æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å°†STDOUTçš„åŸæ¥ä½ç½®é‡å®šå‘åˆ°å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œç„¶åå†åˆ©ç”¨è¯¥æ–‡ä»¶æè¿°ç¬¦é‡å®šå‘å›STDOUTã€‚è§ä¸‹ä¾‹ï¼š12345678#!/bin/bashexec 3&gt;&amp;1exec 1&gt;testoutecho &quot;This should store in the output file&quot;echo &quot;along with this line.&quot;exec 1&gt;&amp;3echo &quot;Now things should be back to normal&quot;é¦–å…ˆï¼Œè„šæœ¬å°†æ–‡ä»¶æè¿°ç¬¦3é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦1(STDOUT)çš„å½“å‰ä½ç½®ï¼Œè¿™æ„å‘³ç€ä»»ä½•å‘é€ç»™æ–‡ä»¶æè¿°ç¬¦3çš„è¾“å‡ºéƒ½å°†å‡ºç°åœ¨æ˜¾ç¤ºå™¨ä¸Šã€‚ç¬¬äºŒä¸ªexecå‘½ä»¤å°†STDOUTé‡å®šå‘åˆ°æ–‡ä»¶ï¼Œ shellç°åœ¨ä¼šå°†å‘é€ç»™STDOUTçš„è¾“å‡ºç›´æ¥é‡å®šå‘åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ã€‚ä½†æ˜¯ï¼Œæ–‡ä»¶æè¿°ç¬¦3ä»ç„¶æŒ‡å‘STDOUTåŸæ¥çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºå™¨ã€‚å¦‚æœæ­¤æ—¶å°†è¾“å‡ºæ•°æ®å‘é€ç»™æ–‡ä»¶æè¿°ç¬¦3ï¼Œå®ƒä»ç„¶ä¼šå‡ºç°åœ¨æ˜¾ç¤ºå™¨ä¸Šï¼Œå°½ç®¡STDOUTå·²ç»è¢«é‡å®šå‘äº†ã€‚åœ¨å‘STDOUTï¼ˆç°åœ¨æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶ï¼‰å‘é€ä¸€äº›è¾“å‡ºä¹‹åï¼Œè„šæœ¬å°†STDOUTé‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦3çš„å½“å‰ä½ç½®ï¼ˆç°åœ¨ä»ç„¶æ˜¯æ˜¾ç¤ºå™¨ï¼‰ã€‚è¿™æ„å‘³ç€ç°åœ¨STDOUTåˆæŒ‡å‘äº†å®ƒåŸæ¥çš„ä½ç½®ï¼šæ˜¾ç¤ºå™¨ã€‚è¿™ä¸ªæ–¹æ³•å¯èƒ½æœ‰ç‚¹å«äººå›°æƒ‘ï¼Œä½†è¿™æ˜¯ä¸€ç§åœ¨è„šæœ¬ä¸­ä¸´æ—¶é‡å®šå‘è¾“å‡ºï¼Œç„¶åæ¢å¤é»˜è®¤è¾“å‡ºè®¾ç½®çš„å¸¸ç”¨æ–¹æ³•ã€‚ åŒæ ·ï¼Œåœ¨é‡å®šå‘åˆ°æ–‡ä»¶ä¹‹å‰ï¼Œå…ˆå°†STDINæ–‡ä»¶æè¿°ç¬¦ä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œç„¶ååœ¨è¯»å–å®Œæ–‡ä»¶ä¹‹åå†å°†STDINæ¢å¤åˆ°å®ƒåŸæ¥çš„ä½ç½®ã€‚è§ä¸‹ä¾‹ï¼š1234567891011121314#!/bin/bashexec 6&lt;&amp;0exec 0&lt; testfilecount=1while read line; do echo &quot;Line #$count: $line&quot; count=$[ $count + 1 ]doneexec 0&lt;&amp;6read -p &quot;Are you done now? &quot; answercase $answer in Y|y) echo &quot;Goodbye&quot;;; N|n) echo &quot;Sorry, this is the end.&quot;;;esacæ–‡ä»¶æè¿°ç¬¦6ç”¨æ¥ä¿å­˜STDINçš„ä½ç½®ï¼Œç„¶åè„šæœ¬å°†STDINé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶testfileã€‚readå‘½ä»¤çš„æ‰€æœ‰è¾“å…¥éƒ½æ¥è‡ªé‡å®šå‘åçš„STDINï¼ˆä¹Ÿå°±æ˜¯è¾“å…¥æ–‡ä»¶ï¼‰ã€‚åœ¨è¯»å–äº†æ‰€æœ‰è¡Œä¹‹åï¼Œè„šæœ¬ä¼šå°†STDINé‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦6ï¼Œä»è€Œå°†STDINæ¢å¤åˆ°åŸå…ˆçš„ä½ç½®ã€‚è¯¥è„šæœ¬ç”¨äº†å¦å¤–ä¸€ä¸ªreadå‘½ä»¤æ¥æµ‹è¯•STDINæ˜¯å¦æ¢å¤æ­£å¸¸äº†ï¼Œè¿™æ¬¡å®ƒä¼šç­‰å¾…é”®ç›˜çš„è¾“å…¥ã€‚ 5.å¾…ç»­","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/tags/Linux/"},{"name":"shell","slug":"shell","permalink":"https://hwame.top/tags/shell/"}]},{"title":"Linuxä¸‹shellè„šæœ¬ç¼–ç¨‹å­¦ä¹ ","slug":"learning-linux-shell-script","date":"2020-11-27T06:19:03.000Z","updated":"2020-12-09T11:14:50.000Z","comments":true,"path":"20201127/learning-linux-shell-script.html","link":"","permalink":"https://hwame.top/20201127/learning-linux-shell-script.html","excerpt":"æ‘˜è¦ï¼šä»11æœˆ27æ—¥åˆ°12æœˆ9æ—¥ï¼Œå¤§æ¦‚èŠ±äº†ä¸€ä¸ªæ˜ŸæœŸçš„æ—¶é—´ï¼Œç»ˆäºå•ƒå®Œäº†621é¡µçš„ã€ŠLinuxå‘½ä»¤è¡Œä¸shellè„šæœ¬ç¼–ç¨‹å¤§å…¨ã€‹ã€‚","text":"æ‘˜è¦ï¼šä»11æœˆ27æ—¥åˆ°12æœˆ9æ—¥ï¼Œå¤§æ¦‚èŠ±äº†ä¸€ä¸ªæ˜ŸæœŸçš„æ—¶é—´ï¼Œç»ˆäºå•ƒå®Œäº†621é¡µçš„ã€ŠLinuxå‘½ä»¤è¡Œä¸shellè„šæœ¬ç¼–ç¨‹å¤§å…¨ã€‹ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« è¯´æ˜ï¼šå­¦ä¹ shellè¿‡ç¨‹ä¸­çš„è®°å½•ï¼Œå‚è€ƒä¹¦ç±ä¸»è¦æœ‰ã€ŠLinuxå‘½ä»¤è¡Œä¸shellè„šæœ¬ç¼–ç¨‹å¤§å…¨ï¼ˆç¬¬3ç‰ˆï¼‰ã€‹ï¼Œã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ã€‹ç³»åˆ—å’Œã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹ï¼Œå‚è€ƒèµ„æ–™ä¸»è¦æœ‰Linuxå‘½ä»¤å¤§å…¨ç­‰ã€‚æ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20201127/learning-linux-shell-script.html 1.æ„å»ºåŸºæœ¬è„šæœ¬1.1.åˆ›å»ºshellè„šæœ¬æ–‡ä»¶åˆ›å»ºshellè„šæœ¬æ–‡ä»¶æ—¶ï¼Œå¿…é¡»åœ¨æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒæŒ‡å®šè¦ä½¿ç”¨çš„shellã€‚å…¶æ ¼å¼ä¸ºï¼š1#!/bin/bashåœ¨æŒ‡å®šäº†shellä¹‹åï¼Œå°±å¯ä»¥åœ¨æ–‡ä»¶çš„æ¯ä¸€è¡Œä¸­è¾“å…¥å‘½ä»¤ï¼Œç„¶ååŠ ä¸€ä¸ªå›è½¦ç¬¦ã€‚ åœ¨é€šå¸¸çš„shellè„šæœ¬ä¸­ï¼Œäº•å·ï¼ˆ#ï¼‰ç”¨ä½œæ³¨é‡Šè¡Œã€‚shellä¸ä¼šè§£é‡Šä»¥#å¼€å¤´çš„è¡Œï¼ˆé™¤äº†ä»¥#!å¼€å¤´çš„ç¬¬ä¸€è¡Œï¼‰ã€‚ 1.2.è¿è¡Œè„šæœ¬â‘ ä½œä¸ºå¯æ‰§è¡Œç¨‹åºé¦–å…ˆéœ€è¦å…·æœ‰æ‰§è¡Œæƒé™ï¼šchmod +x ./myfileï¼Œç„¶ååœ¨è„šæœ¬æ‰€åœ¨ç›®å½•è¾“å…¥./myfileæ‰§è¡Œè„šæœ¬ã€‚æ³¨æ„ï¼šè‹¥ç›´æ¥è¾“å…¥myfileåˆ™ä¼šæŠ¥é”™ã€Œå‘½ä»¤æœªæ‰¾åˆ°ã€ï¼Œå› ä¸ºshellä¼šé€šè¿‡PATHç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾å‘½ä»¤ï¼Œæ‰€ä»¥å¯ä»¥é‡‡å–ä¸¤ç§æ–¹æ³•ï¼š å°†shellè„šæœ¬æ–‡ä»¶æ‰€å¤„çš„ç›®å½•æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ï¼› ç”¨ç»å¯¹æˆ–ç›¸å¯¹æ–‡ä»¶è·¯å¾„æ¥å¼•ç”¨shellè„šæœ¬æ–‡ä»¶ï¼Œå¦‚ä¸Šä½¿ç”¨ç›¸å¯¹è·¯å¾„ã€‚ â‘¡ä½œä¸ºè§£é‡Šå™¨å‚æ•°ç›´æ¥è¿è¡Œè§£é‡Šå™¨ï¼Œå…¶å‚æ•°å°±æ˜¯shellè„šæœ¬çš„æ–‡ä»¶åã€‚ä¾‹å¦‚/bin/sh myfileã€‚æ³¨æ„ï¼ŒLinuxä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸éœ€è¦æ‹“å±•åï¼Œåªéœ€è¦æ‹¥æœ‰æ‰§è¡Œæƒé™å³å¯ï¼Œå› æ­¤æ–‡ä»¶åä¸ºmyfileæˆ–myfile.shéƒ½è¡Œã€‚ 2.ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤2.1.ä½¿ç”¨if-thenè¯­å¥æœ€åŸºæœ¬çš„ç»“æ„åŒ–å‘½ä»¤å°±æ˜¯if-thenè¯­å¥ã€‚if-thenè¯­å¥æœ‰å¦‚ä¸‹æ ¼å¼ï¼š1234if commandthen commandsfiæ³¨æ„ï¼šåœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œifè¯­å¥ä¹‹åçš„å¯¹è±¡æ˜¯ä¸€ä¸ªç­‰å¼ï¼Œè¿™ä¸ªç­‰å¼çš„æ±‚å€¼ç»“æœä¸ºTRUEæˆ–FALSEï¼Œæ¡ä»¶ä¸ºçœŸæ—¶æ‰æ‰§è¡Œthenéƒ¨åˆ†ã€‚bash shellçš„ifè¯­å¥ä¼šè¿è¡Œifåé¢çš„é‚£ä¸ªå‘½ä»¤ï¼Œå¦‚æœè¯¥å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç æ˜¯0ï¼ˆå³è¯¥å‘½ä»¤æˆåŠŸè¿è¡Œï¼‰ï¼Œä½äºthenéƒ¨åˆ†çš„å‘½ä»¤å°±ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœè¯¥å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç æ˜¯å…¶ä»–å€¼ï¼Œthenéƒ¨åˆ†çš„å‘½ä»¤å°±ä¸ä¼šè¢«æ‰§è¡Œã€‚æ³¨æ„ï¼šå†è¯´ä¸€éï¼Œcommandä¸€å®šä¼šæ‰§è¡Œï¼æ³¨æ„ï¼šif-thenè¯­å¥çš„å¦ä¸€ç§å½¢å¼å¦‚ä¸‹ï¼Œé€šè¿‡æŠŠåˆ†å·æ”¾åœ¨å¾…æ±‚å€¼çš„å‘½ä»¤å°¾éƒ¨ï¼Œå°±å¯ä»¥å°†thenè¯­å¥æ”¾åœ¨åŒä¸€è¡Œä¸Šäº†ï¼Œè¿™æ ·çœ‹èµ·æ¥æ›´åƒå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­çš„if-thenè¯­å¥ã€‚123if command; then commandsfi 2.2.ä½¿ç”¨if-then-elseè¯­å¥å½“ifè¯­å¥ä¸­çš„å‘½ä»¤è¿”å›é€€å‡ºçŠ¶æ€ç 0æ—¶ï¼Œthenéƒ¨åˆ†ä¸­çš„å‘½ä»¤ä¼šè¢«æ‰§è¡Œï¼Œè¿™è·Ÿæ™®é€šçš„if-thenè¯­å¥ä¸€æ ·ã€‚å½“ifè¯­å¥ä¸­çš„å‘½ä»¤è¿”å›éé›¶é€€å‡ºçŠ¶æ€ç æ—¶ï¼Œbash shellä¼šæ‰§è¡Œelseéƒ¨åˆ†ä¸­çš„å‘½ä»¤ã€‚123456if commandthen commands1else commands2fi 2.3.ä½¿ç”¨åµŒå¥—çš„ifè¯­å¥æœ‰æ—¶ä½ éœ€è¦æ£€æŸ¥è„šæœ¬ä»£ç ä¸­çš„å¤šç§æ¡ä»¶ã€‚å¯¹æ­¤ï¼Œå¯ä»¥ä½¿ç”¨åµŒå¥—çš„if-thenè¯­å¥ã€‚ä¹¦å†™å¤šä¸ªif-thenè¯­å¥ä¼šä½¿ä»£ç ä¸æ˜“é˜…è¯»ï¼Œå¾ˆéš¾ç†æ¸…é€»è¾‘æµç¨‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨elseéƒ¨åˆ†çš„å¦ä¸€ç§å½¢å¼ï¼šelifã€‚ è¿™æ ·å°±ä¸ç”¨å†ä¹¦å†™å¤šä¸ªif-thenè¯­å¥äº†ã€‚elifä½¿ç”¨å¦ä¸€ä¸ªif-thenè¯­å¥å»¶ç»­elseéƒ¨åˆ†ã€‚1234567if command1then commands1elif command2then commands2fi 2.4.testå‘½ä»¤testå‘½ä»¤æä¾›äº†åœ¨if-thenè¯­å¥ä¸­æµ‹è¯•ä¸åŒæ¡ä»¶çš„é€”å¾„ï¼Œå¯ä»¥æµ‹è¯•å‘½ä»¤é€€å‡ºçŠ¶æ€ç ä¹‹å¤–çš„æ¡ä»¶ã€‚ å¦‚æœtestå‘½ä»¤ä¸­åˆ—å‡ºçš„æ¡ä»¶æˆç«‹ï¼Œtestå‘½ä»¤å°±ä¼šé€€å‡ºå¹¶è¿”å›é€€å‡ºçŠ¶æ€ç 0ã€‚è¿™æ ·if-thenè¯­å¥å°±ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­çš„if-thenè¯­å¥ä»¥ç±»ä¼¼çš„æ–¹å¼å·¥ä½œäº†ã€‚å¦‚æœæ¡ä»¶ä¸æˆç«‹ï¼Œtestå‘½ä»¤å°±ä¼šé€€å‡ºå¹¶è¿”å›éé›¶çš„é€€å‡ºçŠ¶æ€ç ï¼Œè¿™ä½¿å¾—if-thenè¯­å¥ä¸ä¼šå†è¢«æ‰§è¡Œã€‚testå‘½ä»¤çš„æ ¼å¼éå¸¸ç®€å•ï¼š12test condition# conditionæ˜¯testå‘½ä»¤è¦æµ‹è¯•çš„ä¸€ç³»åˆ—å‚æ•°å’Œå€¼æ³¨æ„ï¼šå¦‚æœä¸å†™testå‘½ä»¤çš„conditionéƒ¨åˆ†ï¼Œå®ƒä¼šä»¥éé›¶çš„é€€å‡ºçŠ¶æ€ç é€€å‡ºï¼Œå¹¶æ‰§è¡Œelseè¯­å¥å—ã€‚æ³¨æ„ï¼šbash shellæä¾›äº†å¦ä¸€ç§æ¡ä»¶æµ‹è¯•æ–¹æ³•ï¼Œæ— éœ€åœ¨if-thenè¯­å¥ä¸­å£°æ˜testå‘½ä»¤ï¼Œå³ä½¿ç”¨æ–¹æ‹¬å·å®šä¹‰æµ‹è¯•æ¡ä»¶ï¼Œå¦‚if [ condition ]æ³¨æ„ï¼Œç¬¬ä¸€ä¸ªæ–¹æ‹¬å·ä¹‹åå’Œç¬¬äºŒä¸ªæ–¹æ‹¬å·ä¹‹å‰å¿…é¡»åŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚ testå‘½ä»¤åˆ¤æ–­ä¸‰ç±»æ¡ä»¶ï¼šâ‘ æ•°å€¼æ¯”è¾ƒï¼›â‘¡å­—ç¬¦ä¸²æ¯”è¾ƒï¼›â‘¢æ–‡ä»¶æ¯”è¾ƒã€‚ æ•°å€¼æ¯”è¾ƒ æ¯”è¾ƒ å«ä¹‰ æè¿° n1 -eq n2 equal æ£€æŸ¥n1æ˜¯å¦ä¸n2ç›¸ç­‰ n1 -ge n2 greater or equal æ£€æŸ¥n1æ˜¯å¦å¤§äºæˆ–ç­‰äºn2 n1 -gt n2 greater than æ£€æŸ¥n1æ˜¯å¦å¤§äºn2 n1 -le n2 less or equal æ£€æŸ¥n1æ˜¯å¦å°äºæˆ–ç­‰äºn2 n1 -lt n2 less than æ£€æŸ¥n1æ˜¯å¦å°äºn2 n1 -ne n2 not equal æ£€æŸ¥n1æ˜¯å¦ä¸ç­‰äºn2 æ³¨æ„ï¼šbash shellåªèƒ½å¤„ç†æ•´æ•°ï¼Œä¸èƒ½åœ¨testå‘½ä»¤ä¸­ä½¿ç”¨æµ®ç‚¹å€¼ã€‚ å­—ç¬¦ä¸²æ¯”è¾ƒ æ¯”è¾ƒ æè¿° å¤‡æ³¨ str1 = str2 æ£€æŸ¥str1æ˜¯å¦å’Œstr2ç›¸åŒ è€ƒè™‘æ ‡ç‚¹å’Œå¤§å°å†™æƒ…å†µ str1 != str2 æ£€æŸ¥str1æ˜¯å¦å’Œstr2ä¸åŒ è€ƒè™‘æ ‡ç‚¹å’Œå¤§å°å†™æƒ…å†µ str1 &lt; str2 æ£€æŸ¥str1æ˜¯å¦æ¯”str2å° éœ€è½¬ä¹‰ï¼Œæ³¨æ„é¡ºåº str1 &gt; str2 æ£€æŸ¥str1æ˜¯å¦æ¯”str2å¤§ éœ€è½¬ä¹‰ï¼Œæ³¨æ„é¡ºåº -n str1 æ£€æŸ¥str1æ˜¯å¦é•¿åº¦é0 ã€Œé0ã€å’Œã€Œä¸º0ã€æ°å¥½ç›¸å -z str1 æ£€æŸ¥str1æ˜¯å¦é•¿åº¦ä¸º0 ç©ºçš„å’Œæœªåˆå§‹åŒ–çš„å˜é‡é•¿åº¦ä¸º0 æ³¨æ„ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„å¤§å°æ—¶ï¼Œå¤§äºå·å’Œå°äºå·å¿…é¡»è½¬ä¹‰ï¼Œå¦åˆ™shellä¼šæŠŠå®ƒä»¬å½“ä½œé‡å®šå‘ç¬¦å·ï¼ŒæŠŠå­—ç¬¦ä¸²å€¼å½“ä½œæ–‡ä»¶åã€‚æ³¨æ„ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„å¤§å°æ—¶ï¼Œå¤§äºå’Œå°äºé¡ºåºå’Œsortå‘½ä»¤æ‰€é‡‡ç”¨çš„ä¸åŒï¼šåœ¨æ¯”è¾ƒæµ‹è¯•ä¸­ï¼Œå¤§å†™å­—æ¯è¢«è®¤ä¸ºæ˜¯å°äºå°å†™å­—æ¯çš„ï¼Œä½†sortå‘½ä»¤æ°å¥½ç›¸åã€‚æ³¨æ„ï¼šç©ºçš„å’Œæœªåˆå§‹åŒ–çš„å˜é‡ä¼šå¯¹shellè„šæœ¬æµ‹è¯•é€ æˆç¾éš¾æ€§çš„å½±å“ã€‚å¦‚æœä¸æ˜¯å¾ˆç¡®å®šä¸€ä¸ªå˜é‡çš„å†…å®¹ï¼Œæœ€å¥½åœ¨å°†å…¶ç”¨äºæ•°å€¼æˆ–å­—ç¬¦ä¸²æ¯”è¾ƒä¹‹å‰å…ˆé€šè¿‡-næˆ–-zæ¥æµ‹è¯•ä¸€ä¸‹å˜é‡æ˜¯å¦å«æœ‰å€¼ã€‚ æ–‡ä»¶æ¯”è¾ƒæ–‡ä»¶æ¯”è¾ƒå¾ˆæœ‰å¯èƒ½æ˜¯shellç¼–ç¨‹ä¸­æœ€ä¸ºå¼ºå¤§ã€ä¹Ÿæ˜¯ç”¨å¾—æœ€å¤šçš„æ¯”è¾ƒå½¢å¼ã€‚å®ƒå…è®¸ä½ æµ‹è¯•Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šæ–‡ä»¶å’Œç›®å½•çš„çŠ¶æ€ã€‚ æ¯”è¾ƒ å«ä¹‰ æè¿° å¤‡æ³¨ -d file directory æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªç›®å½• â€”â€” -e file exist æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨ å¯ç”¨äºæ–‡ä»¶å’Œç›®å½• -f file file æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªæ–‡ä»¶ â€”â€” -r file readable æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨å¹¶å¯è¯» â€”â€” -s file â€”â€” æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨å¹¶éç©º çŠ¶æ€ç 0è¯´æ˜æœ‰æ•°æ® -w file writable æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨å¹¶å¯å†™ åˆ¤æ–­ä½ å¯¹æ–‡ä»¶æ˜¯å¦æœ‰å¯å†™æƒé™ -x file executable æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨å¹¶å¯æ‰§è¡Œ â€”â€” -O file Owner æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨å¹¶å±å½“å‰ç”¨æˆ·æ‰€æœ‰ æµ‹è¯•ä½ æ˜¯å¦æ˜¯æ–‡ä»¶çš„å±ä¸» -G file Group æ£€æŸ¥fileæ˜¯å¦å­˜åœ¨å¹¶ä¸”é»˜è®¤ç»„ä¸å½“å‰ç”¨æˆ·ç›¸åŒ æ£€æŸ¥æ–‡ä»¶çš„é»˜è®¤ç»„éç”¨æˆ·æ‰€å±æ‰€æœ‰ç»„ file1 -nt file2 new than æ£€æŸ¥file1æ˜¯å¦æ¯”file2æ–° æŒ‡åˆ›å»ºæ—¥æœŸï¼Œè¶Šæ—©åˆ›å»ºè¶Šæ—§ file1 -ot file2 old than æ£€æŸ¥file1æ˜¯å¦æ¯”file2æ—§ æŒ‡åˆ›å»ºæ—¥æœŸï¼Œè¶Šæ—©åˆ›å»ºè¶Šæ—§ æ³¨æ„ï¼šåœ¨ä½¿ç”¨-ntæˆ–-otæ¯”è¾ƒæ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»å…ˆç¡®è®¤æ–‡ä»¶æ˜¯å­˜åœ¨çš„ï¼Œå› ä¸ºä»–ä»¬éƒ½ä¸ä¼šå…ˆæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ç›´æ¥è¿è¡Œäº†elseéƒ¨åˆ†ã€‚ 2.5.å¤åˆæ¡ä»¶æµ‹è¯•if-thenè¯­å¥å…è®¸ä½¿ç”¨å¸ƒå°”é€»è¾‘æ¥ç»„åˆæµ‹è¯•ï¼Œå¸ƒå°”é€»è¾‘æ˜¯ä¸€ç§èƒ½å¤Ÿå°†å¯èƒ½çš„è¿”å›å€¼ç®€åŒ–ä¸ºTRUEæˆ–FALSEçš„æ–¹æ³•ã€‚æœ‰ANDå’ŒORä¸¤ç§å¸ƒå°”è¿ç®—ç¬¦å¯ç”¨ï¼š12[ condition1 ] &amp;&amp; [ condition2 ][ condition1 ] || [ condition2 ] 2.6.if-thençš„é«˜çº§ç‰¹æ€§bash shellæä¾›äº†ä¸¤é¡¹å¯åœ¨if-thenè¯­å¥ä¸­ä½¿ç”¨çš„é«˜çº§ç‰¹æ€§ï¼š â‘ ç”¨äºæ•°å­¦è¡¨è¾¾å¼çš„åŒæ‹¬å·(( expression ))ã€‚expressionå¯ä»¥æ˜¯ä»»æ„çš„æ•°å­¦èµ‹å€¼æˆ–æ¯”è¾ƒè¡¨è¾¾å¼ã€‚é™¤äº†testå‘½ä»¤ä½¿ç”¨çš„æ ‡å‡†æ•°å­¦è¿ç®—ç¬¦ï¼ŒåŒæ‹¬å·å‘½ä»¤ä¸­ä¼šç”¨åˆ°çš„å…¶ä»–è¿ç®—ç¬¦è¿˜æœ‰ï¼šval++ï¼Œåå¢ï¼›val--ï¼Œåå‡ï¼›++valï¼Œå…ˆå¢ï¼›--valï¼Œå…ˆå‡ï¼›!ï¼Œé€»è¾‘æ±‚åï¼›~ï¼Œä½æ±‚åï¼›**ï¼Œå¹‚è¿ç®—ï¼›&lt;&lt;ï¼Œå·¦ä½ç§»ï¼›&gt;&gt;ï¼Œå³ä½ç§»ï¼›&amp;ï¼Œä½å¸ƒå°”å’Œï¼›|ï¼Œä½å¸ƒå°”æˆ–ï¼›&amp;&amp;ï¼Œé€»è¾‘å’Œï¼›||ï¼Œé€»è¾‘æˆ–ã€‚æ³¨æ„â‘´ï¼šå¯ä»¥åœ¨ifè¯­å¥ä¸­ç”¨åŒæ‹¬å·å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥åœ¨è„šæœ¬ä¸­çš„æ™®é€šå‘½ä»¤é‡Œä½¿ç”¨æ¥èµ‹å€¼ã€‚æ³¨æ„â‘µï¼šä¸éœ€è¦å°†åŒæ‹¬å·ä¸­è¡¨è¾¾å¼é‡Œçš„å¤§äºå·è½¬ä¹‰ï¼Œè¿™æ˜¯åŒæ‹¬å·å‘½ä»¤æä¾›çš„å¦ä¸€ä¸ªé«˜çº§ç‰¹æ€§ã€‚ â‘¡ç”¨äºé«˜çº§å­—ç¬¦ä¸²å¤„ç†åŠŸèƒ½çš„åŒæ–¹æ‹¬å·[[ expression ]]ï¼Œæ³¨æ„ä¸æ˜¯æ‰€æœ‰çš„shelléƒ½æ”¯æŒåŒæ–¹æ‹¬å·ã€‚ä¸testå‘½ä»¤ç›¸æ¯”ä¸»è¦æ˜¯æŒ‡ã€Œæ¨¡å¼åŒ¹é…ï¼ˆpattern matchingï¼‰ã€ï¼Œä¾‹å¦‚ï¼š1234567#!/bin/bash# using pattern matchingif [[ $USER == h* ]]; then echo &quot;Hello $USER.&quot;else echo &quot;Sorry, I do not know you.&quot;fi åœ¨ä¸Šä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨äº†åŒç­‰å·ï¼ˆ==ï¼‰å°†å³è¾¹çš„å­—ç¬¦ä¸²ï¼ˆh*ï¼‰è§†ä¸ºä¸€ä¸ªæ¨¡å¼ï¼Œå¹¶åº”ç”¨æ¨¡å¼åŒ¹é…è§„åˆ™ã€‚è¿è¡Œè¯¥è„šæœ¬å°†è¾“å‡ºã€ŒHello hwame.ã€ã€‚ 2.7.caseå‘½ä»¤caseå‘½ä»¤é‡‡ç”¨åˆ—è¡¨æ ¼å¼æ¥æ£€æŸ¥å•ä¸ªå˜é‡çš„å¤šä¸ªå€¼ï¼Œè€Œä¸éœ€è¦å†å†™å‡ºæ‰€æœ‰çš„elifè¯­å¥æ¥ä¸åœåœ°æ£€æŸ¥åŒä¸€ä¸ªå˜é‡çš„å€¼äº†ï¼š12345case variable inpattern1 | pattern2) commands1;; pattern3) commands2;; *) commands_default;;esaccaseå‘½ä»¤æä¾›äº†ä¸€ä¸ªæ›´æ¸…æ™°çš„æ–¹æ³•æ¥ä¸ºå˜é‡æ¯ä¸ªå¯èƒ½çš„å€¼æŒ‡å®šä¸åŒçš„é€‰é¡¹ï¼Œå°†æŒ‡å®šçš„å˜é‡ä¸ä¸åŒæ¨¡å¼è¿›è¡Œæ¯”è¾ƒã€‚ å¦‚æœå˜é‡å’Œæ¨¡å¼æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆshellä¼šæ‰§è¡Œä¸ºè¯¥æ¨¡å¼æŒ‡å®šçš„å‘½ä»¤ã€‚å¯ä»¥é€šè¿‡å•ç«–çº¿æ“ä½œç¬¦åœ¨ä¸€è¡Œä¸­åˆ†éš”å‡ºå¤šä¸ªæ¨¡å¼æ¨¡å¼ã€‚æ˜Ÿå·ä¼šæ•è·æ‰€æœ‰ä¸å·²çŸ¥æ¨¡å¼ä¸åŒ¹é…çš„å€¼ã€‚ 3.å¾ªç¯è¯­å¥3.1.forå‘½ä»¤é‡å¤æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤åœ¨ç¼–ç¨‹ä¸­å¾ˆå¸¸è§ï¼Œforå¾ªç¯ä¸ç”¨è¯´ï¼ŒåŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š1234for var in listdo commandsdoneforå‘½ä»¤è¯»å–å€¼çš„æ–¹å¼æœ‰ï¼šâ‘ ä»åˆ—è¡¨ä¸­è¯»å–å€¼ï¼›â‘¡ä»å˜é‡è¯»å–åˆ—è¡¨ï¼›â‘¢ä»å‘½ä»¤è¯»å–å€¼ï¼›â‘£ç”¨é€šé…ç¬¦è¯»å–ç›®å½•ã€‚ æ³¨æ„ï¼šåˆ—è¡¨ä¸­å„å€¼æŒ‰ç©ºæ ¼ä¾æ¬¡æ’åˆ—ï¼Œä¸éœ€è¦æ‹¬å·ã€‚æ³¨æ„ï¼šè€ƒè™‘ä¸‹ä¾‹ï¼Œç¬¬2è¡Œè¾“å‡ºå°†ä¸¤ä¸ªå•å¼•å·é—´çš„éƒ¨åˆ†æ‹¼æ¥åˆ°donå’Œllä¸­é—´äº†ã€‚è¿™ç§é—®é¢˜å¯ä»¥é‡‡ç”¨â‘ ä½¿ç”¨è½¬ä¹‰å­—ç¬¦\\å°†å•å¼•å·è½¬ä¹‰ï¼›â‘¡ä½¿ç”¨åŒå¼•å·æ¥å®šä¹‰ç”¨åˆ°å•å¼•å·çš„å€¼ã€‚123456789#!/bin/bashfor test in I don&#x27;t know if this&#x27;ll work; do echo &quot;word:$test&quot;done# ä»¥ä¸‹ä¸ºè¾“å‡ºï¼šword:Iword:dont know if thisllword:workæ³¨æ„ï¼šforå¾ªç¯å‡å®šæ¯ä¸ªå€¼éƒ½æ˜¯ç”¨ç©ºæ ¼åˆ†å‰²çš„ã€‚å¦‚æœåœ¨å•ç‹¬çš„æ•°æ®å€¼ä¸­æœ‰ç©ºæ ¼ï¼Œå°±å¿…é¡»ç”¨åŒå¼•å·å°†è¿™äº›å€¼åœˆèµ·æ¥ã€‚æ³¨æ„ï¼šåœ¨æŸä¸ªå€¼ä¸¤è¾¹ä½¿ç”¨åŒå¼•å·æ—¶ï¼Œshellå¹¶ä¸ä¼šå°†åŒå¼•å·å½“æˆå€¼çš„ä¸€éƒ¨åˆ†ã€‚ é€šå¸¸shellè„šæœ¬é‡åˆ°çš„æƒ…å†µæ˜¯ï¼Œä½ å°†ä¸€ç³»åˆ—å€¼éƒ½é›†ä¸­å­˜å‚¨åœ¨äº†ä¸€ä¸ªå˜é‡ä¸­ï¼Œç„¶åéœ€è¦éå†å˜é‡ä¸­çš„æ•´ä¸ªåˆ—è¡¨ã€‚ä¹Ÿå¯ä»¥é€šè¿‡forå‘½ä»¤å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä¾‹å¦‚ï¼šæ³¨æ„ï¼Œä»£ç è¿˜æ˜¯ç”¨äº†å¦ä¸€ä¸ªèµ‹å€¼è¯­å¥å‘$listå˜é‡åŒ…å«çš„å·²æœ‰åˆ—è¡¨ä¸­æ·»åŠ ï¼ˆæˆ–è€…è¯´æ˜¯æ‹¼æ¥ï¼‰äº†ä¸€ä¸ªå€¼ã€‚è¿™æ˜¯å‘å˜é‡ä¸­å­˜å‚¨çš„å·²æœ‰æ–‡æœ¬å­—ç¬¦ä¸²å°¾éƒ¨æ·»åŠ æ–‡æœ¬çš„ä¸€ä¸ªå¸¸ç”¨æ–¹æ³•ï¼šlist=$list&quot; Connecticut&quot;ã€‚1234567#!/bin/bashlist=&quot;Alabama Alaska Arizona Arkansas Colorado&quot;list=$list&quot; Connecticut&quot;for state in $listdo echo &quot;Have you ever visited $state?&quot;done ä¸Šè¿°ä»£ç ä¸­ï¼Œshellä»¥ç©ºæ ¼åˆ†éš”åˆ—è¡¨ï¼Œäº‹å®ä¸Šæ˜¯ç”±ç‰¹æ®Šçš„ç¯å¢ƒå˜é‡IFSï¼ˆInternal Field Separatorï¼Œå†…éƒ¨å­—æ®µåˆ†éš”ç¬¦ï¼‰æ§åˆ¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ bash shellä¼šå°†ã€Œç©ºæ ¼ã€ã€ã€Œåˆ¶è¡¨ç¬¦ã€ã€ã€Œæ¢è¡Œç¬¦ã€å½“ä½œå­—æ®µåˆ†éš”ç¬¦ã€‚å¦‚æœéœ€è¦ä¸´æ—¶ä½¿ç”¨æ–°çš„å­—æ®µåˆ†éš”ç¬¦ï¼Œå¯ä»¥å…ˆä¿å­˜æ—§å€¼ï¼Œä½¿ç”¨å®Œæ–°å€¼åå†è¿˜åŸï¼š1234IFS.OLD=$IFSIFS=$&#x27;\\n&#x27;&lt;åœ¨ä»£ç ä¸­ä½¿ç”¨æ–°çš„IFSå€¼&gt;IFS=$IFS.OLD å¦‚æœè¦æŒ‡å®šå¤šä¸ªIFSå­—ç¬¦ï¼Œåªè¦å°†å®ƒä»¬åœ¨èµ‹å€¼è¡Œä¸²èµ·æ¥å°±è¡Œï¼šIFS=$&#39;\\n&#39;:;&quot;ï¼Œè¿™ä¸ªèµ‹å€¼ä¼šå°†æ¢è¡Œç¬¦ã€å†’å·ã€åˆ†å·å’ŒåŒå¼•å·ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦ã€‚å¦‚ä½•ä½¿ç”¨IFSå­—ç¬¦è§£ææ•°æ®æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚ å¯ä»¥ç”¨forå‘½ä»¤æ¥è‡ªåŠ¨éå†ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚è¿›è¡Œæ­¤æ“ä½œæ—¶ï¼Œå¿…é¡»åœ¨æ–‡ä»¶åæˆ–è·¯å¾„åä¸­ä½¿ç”¨é€šé…ç¬¦ã€‚å®ƒä¼šå¼ºåˆ¶shellä½¿ç”¨æ–‡ä»¶æ‰©å±•åŒ¹é…ã€‚æ–‡ä»¶æ‰©å±•åŒ¹é…æ˜¯ç”ŸæˆåŒ¹é…æŒ‡å®šé€šé…ç¬¦çš„æ–‡ä»¶åæˆ–è·¯å¾„åçš„è¿‡ç¨‹ã€‚ä¹Ÿå¯ä»¥åœ¨forå‘½ä»¤ä¸­åˆ—å‡ºå¤šä¸ªç›®å½•é€šé…ç¬¦ï¼Œå°†ç›®å½•æŸ¥æ‰¾å’Œåˆ—è¡¨åˆå¹¶è¿›åŒä¸€ä¸ªforè¯­å¥ã€‚æ³¨æ„ï¼šåœ¨Linuxä¸­ï¼Œç›®å½•åå’Œæ–‡ä»¶åä¸­åŒ…å«ç©ºæ ¼å½“ç„¶æ˜¯åˆæ³•çš„ã€‚è¦é€‚åº”è¿™ç§æƒ…å†µï¼Œåº”è¯¥å°†$fileå˜é‡ç”¨åŒå¼•å·åœˆèµ·æ¥ï¼šif [ -d &quot;$file&quot; ]ã€‚å¦‚æœä¸è¿™ä¹ˆåšï¼Œé‡åˆ°å«æœ‰ç©ºæ ¼çš„ç›®å½•åæˆ–æ–‡ä»¶åæ—¶å°±ä¼šæœ‰é”™è¯¯äº§ç”Ÿï¼š[: too many argumentsï¼Œåœ¨testå‘½ä»¤ä¸­ï¼Œbash shellä¼šå°†é¢å¤–çš„å•è¯å½“ä½œå‚æ•°ï¼Œè¿›è€Œé€ æˆé”™è¯¯ã€‚ 3.2.Cè¯­è¨€é£æ ¼çš„forå‘½ä»¤ä¸‹é¢ä¸ºCè¯­è¨€ä»£ç ï¼š1234for (i = 0; i &lt; 10; i++)&#123; printf(&quot;The next number is %d\\n&quot;, i);&#125;ä»¥ä¸‹æ˜¯bashä¸­Cè¯­è¨€é£æ ¼çš„forå¾ªç¯çš„åŸºæœ¬æ ¼å¼ï¼š12for (( variable assignment ; condition ; iteration process ))for (( a = 1; a &lt; 10; a++ ))æ³¨æ„ï¼Œæœ‰äº›éƒ¨åˆ†å¹¶æ²¡æœ‰éµå¾ªbash shellæ ‡å‡†çš„forå‘½ä»¤ï¼š å˜é‡èµ‹å€¼å¯ä»¥æœ‰ç©ºæ ¼ï¼› æ¡ä»¶ä¸­çš„å˜é‡ä¸ä»¥ç¾å…ƒç¬¦å¼€å¤´ï¼› è¿­ä»£è¿‡ç¨‹çš„ç®—å¼æœªç”¨exprå‘½ä»¤æ ¼å¼ã€‚ Cè¯­è¨€é£æ ¼çš„forå‘½ä»¤ä¹Ÿå…è®¸ä¸ºè¿­ä»£ä½¿ç”¨å¤šä¸ªå˜é‡ã€‚å¾ªç¯ä¼šå•ç‹¬å¤„ç†æ¯ä¸ªå˜é‡ï¼Œä½ å¯ä»¥ä¸ºæ¯ä¸ªå˜é‡å®šä¹‰ä¸åŒçš„è¿­ä»£è¿‡ç¨‹ã€‚å°½ç®¡å¯ä»¥ä½¿ç”¨å¤šä¸ªå˜é‡ï¼Œä½†ä½ åªèƒ½åœ¨forå¾ªç¯ä¸­å®šä¹‰ä¸€ç§æ¡ä»¶ï¼Œä¾‹å¦‚for (( a=1, b=10; a &lt;= 10; a++, b-- ))ã€‚ 3.3.whileå‘½ä»¤whileå‘½ä»¤æŸç§æ„ä¹‰ä¸Šæ˜¯if-thenè¯­å¥å’Œforå¾ªç¯çš„æ··æ‚ä½“ï¼š1234while test_commanddo commandsdonewhileå‘½ä»¤ä¸­å®šä¹‰çš„test_commandå’Œif-thenè¯­å¥ä¸­çš„æ ¼å¼ä¸€æ¨¡ä¸€æ ·ã€‚å¯ä»¥ä½¿ç”¨ä»»ä½•æ™®é€šçš„bash shellå‘½ä»¤ï¼Œæˆ–è€…ç”¨testå‘½ä»¤è¿›è¡Œæ¡ä»¶æµ‹è¯•ï¼Œæ¯”å¦‚æµ‹è¯•å˜é‡å€¼ã€‚whileå‘½ä»¤çš„å…³é”®åœ¨äºæ‰€æŒ‡å®šçš„test_commandçš„é€€å‡ºçŠ¶æ€ç å¿…é¡»éšç€å¾ªç¯ä¸­è¿è¡Œçš„å‘½ä»¤è€Œæ”¹å˜ã€‚å¦‚æœé€€å‡ºçŠ¶æ€ç ä¸å‘ç”Ÿå˜åŒ–ï¼Œwhileå¾ªç¯å°±å°†ä¸€ç›´ä¸åœåœ°è¿›è¡Œä¸‹å»ä»è€Œé™·å…¥æ— é™å¾ªç¯ã€‚ æœ€å¸¸è§çš„test_commandçš„ç”¨æ³•æ˜¯ç”¨æ–¹æ‹¬å·æ¥æ£€æŸ¥å¾ªç¯å‘½ä»¤ä¸­ç”¨åˆ°çš„shellå˜é‡çš„å€¼ï¼Œwhileå‘½ä»¤å®šä¹‰äº†æ¯æ¬¡è¿­ä»£æ—¶æ£€æŸ¥çš„æµ‹è¯•æ¡ä»¶ã€‚ whileå‘½ä»¤å…è®¸ä½ åœ¨whileè¯­å¥è¡Œå®šä¹‰å¤šä¸ªæµ‹è¯•å‘½ä»¤ã€‚åªæœ‰æœ€åä¸€ä¸ªæµ‹è¯•å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ä¼šè¢«ç”¨æ¥å†³å®šä»€ä¹ˆæ—¶å€™ç»“æŸå¾ªç¯ï¼Œè§ä¸‹ä¾‹ã€‚12345678#!/bin/bashvar1=10while echo $var1 [ $var1 -ge 0 ]do echo &quot;This is inside the loop&quot; var1=$[ $var1 - 1 ]doneè¿è¡Œç»“æœå¦‚å›¾ï¼šwhileå¾ªç¯ä¼šåœ¨var1å˜é‡ç­‰äº0æ—¶æ‰§è¡Œechoè¯­å¥ï¼Œç„¶åå°†var1å˜é‡çš„å€¼å‡ä¸€ã€‚æ¥ä¸‹æ¥å†æ¬¡æ‰§è¡Œæµ‹è¯•å‘½ä»¤ï¼Œç”¨äºä¸‹ä¸€æ¬¡è¿­ä»£ã€‚echoæµ‹è¯•å‘½ä»¤è¢«æ‰§è¡Œå¹¶æ˜¾ç¤ºäº†varå˜é‡çš„å€¼ï¼ˆç°åœ¨å°äº0äº†ï¼‰ã€‚ç›´åˆ°shellæ‰§è¡Œtestæµ‹è¯•å‘½ä»¤ï¼Œwhileå¾ªç¯æ‰ä¼šåœæ­¢ã€‚ è¿™è¯´æ˜åœ¨å«æœ‰å¤šä¸ªå‘½ä»¤çš„whileè¯­å¥ä¸­ï¼Œåœ¨æ¯æ¬¡è¿­ä»£ä¸­æ‰€æœ‰çš„æµ‹è¯•å‘½ä»¤éƒ½ä¼šè¢«æ‰§è¡Œï¼ŒåŒ…æ‹¬æµ‹è¯•å‘½ä»¤å¤±è´¥çš„æœ€åä¸€æ¬¡è¿­ä»£ã€‚è¦ç•™å¿ƒè¿™ç§ç”¨æ³•ã€‚å¦ä¸€å¤„è¦ç•™æ„çš„æ˜¯è¯¥å¦‚ä½•æŒ‡å®šå¤šä¸ªæµ‹è¯•å‘½ä»¤ã€‚æ³¨æ„ï¼Œæ¯ä¸ªæµ‹è¯•å‘½ä»¤éƒ½å‡ºç°åœ¨å•ç‹¬çš„ä¸€è¡Œä¸Šã€‚ 3.4.untilå‘½ä»¤untilå‘½ä»¤å’Œwhileå‘½ä»¤å·¥ä½œçš„æ–¹å¼å®Œå…¨ç›¸åã€‚untilå‘½ä»¤è¦æ±‚ä½ æŒ‡å®šä¸€ä¸ªé€šå¸¸è¿”å›éé›¶é€€å‡ºçŠ¶æ€ç çš„æµ‹è¯•å‘½ä»¤ã€‚åªæœ‰æµ‹è¯•å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ä¸ä¸º0ï¼Œbash shellæ‰ä¼šæ‰§è¡Œå¾ªç¯ä¸­åˆ—å‡ºçš„å‘½ä»¤ã€‚ä¸€æ—¦æµ‹è¯•å‘½ä»¤è¿”å›äº†é€€å‡ºçŠ¶æ€ç 0ï¼Œå¾ªç¯å°±ç»“æŸäº†ã€‚1234until commanddo commandsdoneå’Œwhileå‘½ä»¤ç±»ä¼¼ï¼Œä½ å¯ä»¥åœ¨untilå‘½ä»¤è¯­å¥ä¸­æ”¾å…¥å¤šä¸ªæµ‹è¯•å‘½ä»¤ã€‚åªæœ‰æœ€åä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç å†³å®šäº†bash shellæ˜¯å¦æ‰§è¡Œå·²å®šä¹‰çš„commandsï¼Œä¾‹å¦‚ï¼š12345678#!/bin/bashvar1=100until echo $var1 [ $var1 -eq 0 ]do echo Inside the loop: $var1 var1=$[ $var1 - 25 ]doneè¿è¡Œç»“æœå¦‚å›¾ï¼Œshellä¼šæ‰§è¡ŒæŒ‡å®šçš„å¤šä¸ªæµ‹è¯•å‘½ä»¤ï¼Œåªæœ‰åœ¨æœ€åä¸€ä¸ªå‘½ä»¤æˆç«‹æ—¶åœæ­¢ã€‚ 3.5.åµŒå¥—å¾ªç¯å¾ªç¯è¯­å¥å¯ä»¥åœ¨å¾ªç¯å†…ä½¿ç”¨ä»»æ„ç±»å‹çš„å‘½ä»¤ï¼ŒåŒ…æ‹¬å…¶ä»–å¾ªç¯å‘½ä»¤ï¼Œè¿™ç§å¾ªç¯å«ä½œåµŒå¥—å¾ªç¯ï¼ˆnested loopï¼‰ï¼Œè¢«åµŒå¥—çš„å¾ªç¯ä¹Ÿç§°ä¸ºå†…éƒ¨å¾ªç¯ï¼ˆinner loopï¼‰ã€‚ å†…å¤–å¾ªç¯çš„ä¸¤ä¸ªdoå’Œdoneå‘½ä»¤æ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚bash shellçŸ¥é“å½“ç¬¬ä¸€ä¸ªdoneå‘½ä»¤æ‰§è¡Œæ—¶æ˜¯æŒ‡å†…éƒ¨å¾ªç¯è€Œéå¤–éƒ¨å¾ªç¯ã€‚ åœ¨æ··ç”¨å¾ªç¯å‘½ä»¤æ—¶ä¹Ÿä¸€æ ·ï¼Œæ¯”å¦‚åœ¨whileå¾ªç¯å†…éƒ¨æ”¾ç½®ä¸€ä¸ªforå¾ªç¯ï¼Œæˆ–è€…åœ¨untilå¾ªç¯å†…éƒ¨æ”¾ç½®ä¸€ä¸ªwhileå¾ªç¯ã€‚12345678910111213#!/bin/bash# using until and while loopsvar1=3until [ $var1 -eq 0 ]; do echo &quot;Outer loop: $var1&quot; var2=1 while [ $var2 -lt 5 ]; do var3=$(echo &quot;scale=4; $var1 / $var2&quot; | bc) echo &quot; Inner loop: $var1 / $var2 = $var3&quot; var2=$[ $var2 + 1 ] done var1=$[ $var1 - 1 ]doneè¿è¡Œç»“æœå¦‚å›¾ï¼Œå¤–éƒ¨çš„untilå¾ªç¯ä»¥å€¼3å¼€å§‹ï¼Œå¹¶ç»§ç»­æ‰§è¡Œåˆ°å€¼ç­‰äº0ã€‚å†…éƒ¨whileå¾ªç¯ä»¥å€¼1å¼€å§‹å¹¶ä¸€ç›´æ‰§è¡Œï¼Œåªè¦å€¼å°äº5ã€‚æ¯ä¸ªå¾ªç¯éƒ½å¿…é¡»æ”¹å˜åœ¨æµ‹è¯•æ¡ä»¶ä¸­ç”¨åˆ°çš„å€¼ï¼Œå¦åˆ™å¾ªç¯å°±ä¼šæ— æ­¢å°½è¿›è¡Œä¸‹å»ã€‚ 3.6.å¾ªç¯å¤„ç†æ–‡ä»¶æ•°æ®é€šå¸¸å¿…é¡»éå†å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè¿™éœ€è¦ä½¿ç”¨åˆ°ä¸Šæ–‡æåˆ°çš„â‘ ä½¿ç”¨åµŒå¥—å¾ªç¯ï¼›â‘¡ä¿®æ”¹IFSç¯å¢ƒå˜é‡ã€‚ å…¸å‹çš„ä¾‹å­æ˜¯å¤„ç†/etc/passwdæ–‡ä»¶ä¸­çš„æ•°æ®ã€‚è¿™è¦æ±‚ä½ é€è¡Œéå†è¯¥æ–‡ä»¶ï¼Œå¹¶å°†IFSå˜é‡çš„å€¼æ”¹æˆå†’å·ï¼Œè¿™æ ·å°±èƒ½åˆ†éš”å¼€æ¯è¡Œä¸­çš„å„ä¸ªæ•°æ®æ®µäº†ã€‚123456789101112#!/bin/bashIFS.OLD=$IFSIFS=$&#x27;\\n&#x27;for entry in $(cat /etc/passwd)do echo &quot;Values in $entry â€“&quot; IFS=: for value in $entry do echo &quot; $value&quot; donedone 3.7.æ§åˆ¶å¾ªç¯breakå‘½ä»¤å’Œcontinueå‘½ä»¤èƒ½å¸®æˆ‘ä»¬æ§åˆ¶å¾ªç¯å†…éƒ¨çš„æƒ…å†µï¼Œè€Œä¸å¿…ç­‰åˆ°å¾ªç¯å®Œæˆæ‰€æœ‰çš„è¿­ä»£ï¼š breakå‘½ä»¤ï¼šç”¨æ¥é€€å‡ºä»»æ„ç±»å‹çš„å¾ªç¯ï¼ŒåŒ…æ‹¬whileå’Œuntilå¾ªç¯ã€‚breakå‘½ä»¤æ¥å—å•ä¸ªå‘½ä»¤è¡Œå‚æ•°å€¼ï¼šbreak nï¼Œå…¶ä¸­næŒ‡å®šäº†è¦è·³å‡ºçš„å¾ªç¯å±‚çº§ã€‚é»˜è®¤æƒ…å†µä¸‹è·³å‡ºçš„æ˜¯å½“å‰çš„å¾ªç¯ï¼ˆå³çœç•¥næ—¶ä¸ºn=1ï¼‰ï¼›å¦‚æœä½ nè®¾ä¸º2å°±ä¼šåœæ­¢ä¸‹ä¸€çº§çš„å¤–éƒ¨å¾ªç¯ã€‚ continueå‘½ä»¤ï¼šcontinueå‘½ä»¤å¯ä»¥æå‰ä¸­æ­¢æŸæ¬¡å¾ªç¯ä¸­çš„å‘½ä»¤ï¼Œä½†å¹¶ä¸ä¼šå®Œå…¨ç»ˆæ­¢æ•´ä¸ªå¾ªç¯ã€‚äº¦å³åœæ­¢å½“å‰è¿›è¡Œçš„ä¸€æ¬¡è¿­ä»£ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ï¼Œæ³¨æ„ä»åœ¨åŒçº§å¾ªç¯ä¸­ã€‚å’Œbreakå‘½ä»¤ä¸€æ ·ï¼Œcontinueå‘½ä»¤ä¹Ÿå…è®¸é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šè¦ç»§ç»­æ‰§è¡Œå“ªä¸€çº§å¾ªç¯ï¼šcontinue nï¼Œå…¶ä¸­nå®šä¹‰äº†è¦ç»§ç»­çš„å¾ªç¯å±‚çº§ã€‚ æ³¨æ„ï¼šå¯ä»¥åœ¨whileå’Œuntilå¾ªç¯ä¸­ä½¿ç”¨continueå‘½ä»¤ï¼Œä½†è¦ç‰¹åˆ«å°å¿ƒã€‚è®°ä½ï¼Œå½“shellæ‰§è¡Œcontinueå‘½ä»¤æ—¶ï¼Œå®ƒä¼šè·³è¿‡å‰©ä½™çš„å‘½ä»¤ã€‚å¦‚æœä½ åœ¨å…¶ä¸­æŸä¸ªæ¡ä»¶é‡Œå¯¹æµ‹è¯•æ¡ä»¶å˜é‡è¿›è¡Œå¢å€¼ï¼Œé—®é¢˜å°±ä¼šå‡ºç°ï¼š12345678910111213#!/bin/bash# improperly using the continue command in a while loopvar1=0while echo &quot;while iteration: $var1&quot; [ $var1 -lt 15 ]do if [ $var1 -gt 5 ] &amp;&amp; [ $var1 -lt 10 ] then continue fi echo &quot; Inside iteration number: $var1&quot; var1=$[ $var1 + 1 ]doneç”±äºè¯¥ç¨‹åºä¼šé™·å…¥æ­»å¾ªç¯ï¼Œå› æ­¤å¯ä»¥å°†è„šæœ¬çš„è¾“å‡ºé‡å®šå‘åˆ°äº†moreå‘½ä»¤ï¼š./mytest | moreï¼Œè¿™æ ·æ‰èƒ½åœæ­¢è¾“å‡ºã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼šåœ¨if-thençš„æ¡ä»¶æˆç«‹ä¹‹å‰ï¼Œæ‰€æœ‰ä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆæ­£å¸¸ï¼Œç„¶åshellæ‰§è¡Œäº†continueå‘½ä»¤ã€‚å½“shellæ‰§è¡Œcontinueå‘½ä»¤æ—¶ï¼Œå®ƒè·³è¿‡äº†whileå¾ªç¯ä¸­ä½™ä¸‹çš„å‘½ä»¤ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¢«è·³è¿‡çš„éƒ¨åˆ†æ­£æ˜¯$var1è®¡æ•°å˜é‡å¢å€¼çš„åœ°æ–¹ï¼Œè€Œè¿™ä¸ªå˜é‡åˆè¢«ç”¨äºwhileæµ‹è¯•å‘½ä»¤ä¸­ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªå˜é‡çš„å€¼ä¸ä¼šå†å˜åŒ–äº†ï¼Œä»å‰é¢è¿ç»­çš„è¾“å‡ºæ˜¾ç¤ºä¸­ä½ ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ã€‚ ä¸‹é¢æ˜¯ç»§ç»­å¤–éƒ¨forå¾ªç¯çš„ä¸€ä¸ªä¾‹å­ï¼š123456789101112131415#!/bin/bash# continuing an outer loopfor (( a = 1; a &lt;= 5; a++ ))do echo &quot;Iteration $a:&quot; for (( b = 1; b &lt; 3; b++ )) do if [ $a -gt 2 ] &amp;&amp; [ $a -lt 4 ] then continue 2 fi var3=$[ $a * $b ] echo &quot; The result of $a * $b is $var3&quot; donedoneå…¶ä¸­çš„if-thenè¯­å¥ç”¨continueå‘½ä»¤æ¥åœæ­¢å¤„ç†å¾ªç¯å†…çš„å‘½ä»¤ï¼Œä½†ä¼šç»§ç»­å¤„ç†å¤–éƒ¨å¾ªç¯ã€‚æ³¨æ„ï¼Œå€¼ä¸º3çš„é‚£æ¬¡è¿­ä»£å¹¶æ²¡æœ‰å¤„ç†ä»»ä½•å†…éƒ¨å¾ªç¯è¯­å¥ï¼Œå› ä¸ºå°½ç®¡continueå‘½ä»¤åœæ­¢äº†å¤„ç†è¿‡ç¨‹ï¼Œä½†å¤–éƒ¨å¾ªç¯ä¾ç„¶ä¼šç»§ç»­ã€‚è¿è¡Œç»“æœå¦‚å›¾ï¼š 3.8.å¤„ç†å¾ªç¯çš„è¾“å‡ºåœ¨shellè„šæœ¬ä¸­ï¼Œä½ å¯ä»¥å¯¹å¾ªç¯çš„è¾“å‡ºä½¿ç”¨ç®¡é“æˆ–è¿›è¡Œé‡å®šå‘ï¼Œè¿™å¯ä»¥é€šè¿‡åœ¨doneå‘½ä»¤ä¹‹åæ·»åŠ ä¸€ä¸ªå¤„ç†å‘½ä»¤æ¥å®ç°ã€‚ å¯ä»¥å°†å¾ªç¯çš„ç»“æœé€šè¿‡ç®¡é“ç®¡æ¥ç»™å¦ä¸€ä¸ªå‘½ä»¤ï¼Œä¾‹å¦‚å°†forå‘½ä»¤çš„è¾“å‡ºä¼ ç»™äº†sortå‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šæ”¹å˜forå‘½ä»¤è¾“å‡ºç»“æœçš„é¡ºåºï¼Œæ³¨æ„ç»“æœå·²ç»åœ¨è„šæœ¬å†…éƒ¨æ’å¥½åºäº†ã€‚ ä¾‹å¦‚ä¸‹é¢å°†forå‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶çš„ä¾‹å­ï¼Œåœ¨forå‘½ä»¤ä¹‹åæ­£å¸¸æ˜¾ç¤ºäº†echoè¯­å¥ï¼š123456#!/bin/bashfor (( a = 1; a &lt; 10; a++ ))do echo &quot;The number is $a&quot;done &gt; output.txtecho &quot;The command is finished.&quot;è¿è¡Œç»“æœå¦‚å›¾ï¼š 4.å¤„ç†ç”¨æˆ·è¾“å…¥4.1.å‘½ä»¤è¡Œå‚æ•°å‘shellè„šæœ¬ä¼ é€’æ•°æ®çš„æœ€åŸºæœ¬æ–¹æ³•æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼Œä»–å…è®¸åœ¨è¿è¡Œè„šæœ¬æ—¶å‘å‘½ä»¤è¡Œæ·»åŠ æ•°æ®ï¼Œä¾‹å¦‚./mytest 10 30å‘è„šæœ¬mytestä¼ é€’äº†ä¸¤ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼ˆ10å’Œ30ï¼‰ã€‚è„šæœ¬ä¼šé€šè¿‡ç‰¹æ®Šçš„å˜é‡æ¥å¤„ç†å‘½ä»¤è¡Œå‚æ•°ã€‚ bash shellä¼šå°†ä¸€äº›ç§°ä¸ºä½ç½®å‚æ•°ï¼ˆpositional parameterï¼‰çš„ç‰¹æ®Šå˜é‡åˆ†é…ç»™è¾“å…¥åˆ°å‘½ä»¤è¡Œä¸­çš„æ‰€æœ‰å‚æ•°ï¼Œè¿™ä¹ŸåŒ…æ‹¬shellæ‰€æ‰§è¡Œçš„è„šæœ¬åç§°ã€‚ ä½ç½®å‚æ•°å˜é‡æ˜¯æ ‡å‡†çš„æ•°å­—ï¼š$0æ˜¯ç¨‹åºåï¼Œ$1æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$2æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°ç¬¬ä¹ä¸ªå‚æ•°$9ã€‚å¦‚æœè„šæœ¬éœ€è¦çš„å‘½ä»¤è¡Œå‚æ•°ä¸æ­¢9ä¸ªï¼Œåˆ™å¿…é¡»åœ¨å˜é‡æ•°å­—å‘¨å›´åŠ ä¸ŠèŠ±æ‹¬å·ï¼Œæ¯”å¦‚$&#123;10&#125;ã€‚ å¦‚æœéœ€è¦è¾“å…¥æ›´å¤šçš„å‘½ä»¤è¡Œå‚æ•°ï¼Œåˆ™æ¯ä¸ªå‚æ•°éƒ½å¿…é¡»ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œshellä¼šå°†æ¯ä¸ªå‚æ•°åˆ†é…ç»™å¯¹åº”çš„å˜é‡ã€‚è¦åœ¨å‚æ•°å€¼ä¸­åŒ…å«ç©ºæ ¼ï¼Œå¿…é¡»è¦ç”¨å¼•å·ï¼ˆå•å¼•å·æˆ–åŒå¼•å·å‡å¯ï¼‰ã€‚æ³¨æ„ï¼šå°†æ–‡æœ¬å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œå¼•å·å¹¶éæ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬åªæ˜¯è¡¨æ˜æ•°æ®çš„èµ·æ­¢ä½ç½®ã€‚æ³¨æ„ï¼šåˆ©ç”¨$0è¯»å–è„šæœ¬åæ—¶å­˜åœ¨ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œå³$0å‚æ•°ä¼šåŒæ—¶åŒ…å«è·¯å¾„å’Œè¿åœ¨ä¸€èµ·çš„å‘½ä»¤ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚è§£å†³è¿™ä¸ªé—®é¢˜åªéœ€è¦ä½¿ç”¨basenameå‘½ä»¤ï¼Œä»–ä¼šè¿”å›ä¸åŒ…å«è·¯å¾„çš„è„šæœ¬åï¼šbasename $0ï¼Œä¾‹å¦‚script=$(basename $0)ã€‚ æ‰§è¡Œå‘½ä»¤ $0å˜é‡ å¤‡æ³¨ bash mz.sh mz.sh æ²¡æœ‰é—®é¢˜ ./mz.sh ./mz.sh åŒ…å«å‘½ä»¤ bash /home/hwame/mz.sh /home/hwame/mz.sh åŒ…å«è·¯å¾„ åœ¨shellè„šæœ¬ä¸­ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ—¶è¦å°å¿ƒäº›ã€‚å½“è„šæœ¬è®¤ä¸ºå‚æ•°å˜é‡ä¸­ä¼šæœ‰æ•°æ®è€Œå®é™…ä¸Šå¹¶æ²¡æœ‰æ—¶ï¼Œè„šæœ¬å¾ˆæœ‰å¯èƒ½ä¼šäº§ç”Ÿé”™è¯¯æ¶ˆæ¯ã€‚é€šä¿—çš„è¯´ï¼Œå½“è„šæœ¬ä¸­ä½¿ç”¨äº†å˜é‡$1ã€$2ã€$3æ—¶ï¼Œå¦‚æœå…è®¸è„šæœ¬æ—¶æ²¡æœ‰ç»™å‡ºå¯¹åº”çš„å‘½ä»¤è¡Œå‚æ•°åˆ™ä¼šæŠ¥é”™ã€‚ å› æ­¤åœ¨ä½¿ç”¨å‚æ•°å‰ä¸€å®šè¦æ£€æŸ¥å…¶ä¸­æ˜¯å¦å­˜åœ¨æ•°æ®ï¼Œä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨-næµ‹è¯•æ¥æ£€æŸ¥å‘½ä»¤è¡Œå‚æ•°$1ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼šif [ -n &quot;$1&quot;]; thenã€‚ 4.2.ç‰¹æ®Šå‚æ•°å˜é‡å¦‚æœæ¯æ¬¡éƒ½åœ¨è„šæœ¬ä¸­ä½¿ç”¨ä¹‹å‰æ£€æŸ¥ä¸€ä¸‹å‘½ä»¤è¡Œå‚æ•°ï¼Œæ— ç–‘æ¯”è¾ƒéº»çƒ¦ã€‚bash shellä¸ºæ­¤æä¾›äº†ä¸€ä¸ªç‰¹æ®Šå˜é‡$#ï¼Œä»–å«æœ‰è„šæœ¬è¿è¡Œæ—¶æºå¸¦çš„å‘½ä»¤è¡Œå‚æ•°çš„ä¸ªæ•°ã€‚å¯ä»¥åœ¨è„šæœ¬ä¸­ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿™ä¸ªç‰¹æ®Šå˜é‡ï¼Œå°±è·Ÿæ™®é€šå˜é‡ä¸€æ ·ã€‚æ³¨æ„ï¼Œå˜é‡$#çš„å€¼ä¸åŒ…æ‹¬è„šæœ¬åç§°ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ã€‚æ—¢ç„¶$#å˜é‡å«æœ‰å‚æ•°çš„æ€»æ•°ï¼Œé‚£ä¹ˆå˜é‡$&#123;$#&#125;å°±ä»£è¡¨äº†æœ€åä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°å˜é‡ã€‚ç„¶è€Œå¹¶ä¸æ˜¯è¿™æ ·ï¼Œä½ ä¸èƒ½åœ¨èŠ±æ‹¬å·å†…ä½¿ç”¨ç¾å…ƒç¬¦ï¼Œå¿…é¡»å°†ç¾å…ƒç¬¦æ¢æˆæ„Ÿå¹å·å³$&#123;!#&#125;ã€‚å¾ˆå¥‡æ€ªï¼Œä½†ä¸è®²é“ç†ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‹†åˆ†ä¸€ä¸‹ï¼Œå°†$#èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡paramsç„¶åå†ä½¿ç”¨paramså˜é‡ï¼š12345#!/bin/bash# Grabbing the last parameterparams=$#echo The last parameter is $paramsecho The last parameter is $&#123;!#&#125;ä¸Šè¿°ç¤ºä¾‹ä¸­çš„ä¸¤ç§æ–¹å¼éƒ½æ²¡é—®é¢˜ã€‚ä½†è¦æ³¨æ„ï¼Œå½“å‘½ä»¤è¡Œä¸Šæ²¡æœ‰ä»»ä½•å‚æ•°æ—¶ï¼Œ$#çš„å€¼ä¸º0ï¼Œparamså˜é‡çš„å€¼ä¹Ÿä¸€æ ·ï¼Œä½†$&#123;!#&#125;å˜é‡ä¼šè¿”å›å‘½ä»¤è¡Œç”¨åˆ°çš„è„šæœ¬åã€‚ æœ‰æ—¶å€™éœ€è¦æŠ“å–å‘½ä»¤è¡Œä¸Šæä¾›çš„æ‰€æœ‰å‚æ•°ï¼Œå¸Œæœ›èƒ½å¤Ÿåœ¨å•ä¸ªå˜é‡ä¸­å­˜å‚¨æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œè€Œä¸æ˜¯å…ˆç”¨$#å˜é‡æ¥åˆ¤æ–­å‘½ä»¤è¡Œä¸Šæœ‰å¤šå°‘å‚æ•°ï¼Œç„¶åå†è¿›è¡Œéå†ã€‚ å¯ä»¥ä½¿ç”¨ä¸€ç»„å…¶ä»–çš„ç‰¹æ®Šå˜é‡$*å’Œ$@æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š $*å˜é‡ä¼šå°†å‘½ä»¤è¡Œä¸Šæä¾›çš„æ‰€æœ‰å‚æ•°å½“ä½œä¸€ä¸ªå•è¯ä¿å­˜ï¼Œè¿™ä¸ªå•è¯åŒ…å«äº†å‘½ä»¤è¡Œä¸­å‡ºç°çš„æ¯ä¸€ä¸ªå‚æ•°å€¼ã€‚åŸºæœ¬ä¸Š$*å˜é‡ä¼šå°†è¿™äº›å‚æ•°è§†ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè€Œä¸æ˜¯å¤šä¸ªä¸ªä½“ã€‚ $@å˜é‡ä¼šå°†å‘½ä»¤è¡Œä¸Šæä¾›çš„æ‰€æœ‰å‚æ•°å½“ä½œåŒä¸€å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªç‹¬ç«‹çš„å•è¯ã€‚é€šå¸¸é€šè¿‡forå‘½ä»¤éå†æ‰€æœ‰çš„å‚æ•°å€¼ï¼Œå¾—åˆ°æ¯ä¸ªå‚æ•°ã€‚ é€šè¿‡ä½¿ç”¨forå‘½ä»¤éå†è¿™ä¸¤ä¸ªç‰¹æ®Šå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬æ˜¯å¦‚ä½•ä¸åŒåœ°å¤„ç†å‘½ä»¤è¡Œå‚æ•°çš„ã€‚ $*å˜é‡ä¼šå°†æ‰€æœ‰å‚æ•°å½“æˆå•ä¸ªå‚æ•°ï¼Œè€Œ$@å˜é‡ä¼šå•ç‹¬å¤„ç†æ¯ä¸ªå‚æ•°ã€‚è¿™æ˜¯éå†å‘½ä»¤è¡Œå‚æ•°çš„ä¸€ä¸ªç»å¦™æ–¹æ³•ã€‚äºŒè€…ä¹‹é—´çš„å·®å¼‚è§ä¸‹ä¾‹ï¼š123456789101112131415#!/bin/bashcount=1for param in &quot;$*&quot;do echo &quot;\\$* Parameter #$count = $param&quot; count=$[ $count + 1 ]doneechocount=1for param in &quot;$@&quot;do echo &quot;\\$@ Parameter #$count = $param&quot; count=$[ $count + 1 ]doneè¿è¡Œç»“æœå¦‚å›¾ï¼š 4.3.ç§»åŠ¨å˜é‡bash shellçš„shiftå‘½ä»¤èƒ½å¤Ÿç”¨æ¥æ“ä½œå‘½ä»¤è¡Œå‚æ•°ã€‚é¡¾åæ€ä¹‰ï¼Œä»–ä¼šæ ¹æ®å®ƒä»¬çš„ç›¸å¯¹ä½ç½®æ¥ç§»åŠ¨å‘½ä»¤è¡Œå‚æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹å®ƒä¼šå°†æ¯ä¸ªå‚æ•°å˜é‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚æ‰€ä»¥ï¼Œå˜é‡$3çš„å€¼ä¼šç§»åˆ°$2ä¸­ï¼Œå˜é‡$2çš„å€¼ä¼šç§»åˆ°$1ä¸­ï¼Œè€Œå˜é‡$1çš„å€¼åˆ™ä¼šè¢«åˆ é™¤ï¼ˆæ³¨æ„ï¼Œå˜é‡$0çš„å€¼å³ç¨‹åºåä¸ä¼šæ”¹å˜ï¼‰ã€‚ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§ç§»åŠ¨å¤šä¸ªä½ç½®ï¼Œåªéœ€è¦ç»™shiftå‘½ä»¤æä¾›ä¸€ä¸ªå‚æ•°æŒ‡æ˜è¦ç§»åŠ¨çš„ä½ç½®æ•°å°±è¡Œäº†ï¼šshift nã€‚æ³¨æ„ï¼šå¦‚æœæŸä¸ªå‚æ•°è¢«ç§»å‡ºï¼Œå®ƒçš„å€¼å°±è¢«ä¸¢å¼ƒäº†ï¼Œæ— æ³•å†æ¢å¤ã€‚ è¿™æ˜¯éå†å‘½ä»¤è¡Œå‚æ•°çš„å¦ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨ä½ ä¸çŸ¥é“åˆ°åº•æœ‰å¤šå°‘å‚æ•°æ—¶ã€‚ä½ å¯ä»¥åªæ“ä½œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç§»åŠ¨å‚æ•°ï¼Œç„¶åç»§ç»­æ“ä½œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¾‹å¦‚ï¼š1234567#!/bin/bashcount=1while [ -n &quot;$1&quot; ]; do echo &quot;Parameter #$count = $1&quot; count=$[ $count + 1 ] shiftdoneè¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š 4.4.å¤„ç†é€‰é¡¹ã€Œé€‰é¡¹ã€æ˜¯è·Ÿåœ¨å•ç ´æŠ˜çº¿åé¢çš„å•ä¸ªå­—æ¯ï¼Œå®ƒèƒ½æ”¹å˜å‘½ä»¤çš„è¡Œä¸ºï¼Œæ­¤å¤„ä»‹ç»3ç§åœ¨è„šæœ¬ä¸­å¤„ç†é€‰é¡¹çš„æ–¹æ³•ã€‚ (1)æŸ¥æ‰¾é€‰é¡¹è¡¨é¢ä¸Šçœ‹ï¼Œå‘½ä»¤è¡Œé€‰é¡¹ä¹Ÿæ²¡ä»€ä¹ˆç‰¹æ®Šçš„ã€‚åœ¨å‘½ä»¤è¡Œä¸Šï¼Œå®ƒä»¬ç´§è·Ÿåœ¨è„šæœ¬åä¹‹åï¼Œå°±è·Ÿå‘½ä»¤è¡Œå‚æ•°ä¸€æ ·ã€‚å®é™…ä¸Šï¼Œå¦‚æœæ„¿æ„ï¼Œä½ å¯ä»¥åƒå¤„ç†å‘½ä»¤è¡Œå‚æ•°ä¸€æ ·å¤„ç†å‘½ä»¤è¡Œé€‰é¡¹ã€‚ â‘ å¤„ç†ç®€å•é€‰é¡¹ï¼šå¯ä»¥ç”¨shiftå‘½ä»¤æ¥å¤„ç†è„šæœ¬ç¨‹åºæºå¸¦çš„å‘½ä»¤è¡Œé€‰é¡¹ï¼Œç”¨caseè¯­å¥æ¥åˆ¤æ–­æŸä¸ªå‚æ•°æ˜¯å¦ä¸ºé€‰é¡¹ã€‚caseè¯­å¥ä¼šæ£€æŸ¥æ¯ä¸ªå‚æ•°æ˜¯ä¸æ˜¯æœ‰æ•ˆé€‰é¡¹ï¼Œå¦‚æœæ˜¯å°±è¿è¡Œå¯¹åº”è¯­å¥ä¸­çš„å‘½ä»¤ã€‚ä¸ç®¡é€‰é¡¹æŒ‰ä»€ä¹ˆé¡ºåºå‡ºç°åœ¨å‘½ä»¤è¡Œä¸Šï¼Œè¿™ç§æ–¹æ³•éƒ½é€‚ç”¨ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š1234567891011#!/bin/bash# extracting command line options as parameterswhile [ -n &quot;$1&quot; ]; do case &quot;$1&quot; in -a) echo &quot;Found the -a option&quot; ;; -b) echo &quot;Found the -b option&quot; ;; -c) echo &quot;Found the -c option&quot; ;; *) echo &quot;$1 is not an option&quot; ;; esac shiftdone â‘¡åˆ†ç¦»å‚æ•°å’Œé€‰é¡¹ï¼šå¯¹äºåœ¨shellè„šæœ¬ä¸­åŒæ—¶ä½¿ç”¨é€‰é¡¹å’Œå‚æ•°çš„æƒ…å†µï¼Œæ ‡å‡†æ–¹å¼æ˜¯ç”¨ç‰¹æ®Šå­—ç¬¦ï¼ˆåŒç ´æŠ˜çº¿--ï¼‰æ¥å°†äºŒè€…åˆ†å¼€ï¼Œè¯¥å­—ç¬¦ä¼šå‘Šè¯‰è„šæœ¬ä½•æ—¶é€‰é¡¹ç»“æŸä»¥åŠæ™®é€šå‚æ•°ä½•æ—¶å¼€å§‹ã€‚shellä¼šç”¨åŒç ´æŠ˜çº¿æ¥è¡¨æ˜é€‰é¡¹åˆ—è¡¨ç»“æŸã€‚åœ¨åŒç ´æŠ˜çº¿ä¹‹åï¼Œè„šæœ¬å°±å¯ä»¥æ”¾å¿ƒåœ°å°†å‰©ä¸‹çš„å‘½ä»¤è¡Œå‚æ•°å½“ä½œå‚æ•°ï¼Œè€Œä¸æ˜¯é€‰é¡¹æ¥å¤„ç†äº†ã€‚è¦æ£€æŸ¥åŒç ´æŠ˜çº¿ï¼Œåªè¦åœ¨caseè¯­å¥ä¸­åŠ ä¸€é¡¹å°±è¡Œäº†ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š12345678910111213141516171819#!/bin/bash# extracting options and parameterswhile [ -n &quot;$1&quot; ]; do case &quot;$1&quot; in -a) echo &quot;Found the -a option&quot; ;; -b) echo &quot;Found the -b option&quot; ;; -c) echo &quot;Found the -c option&quot; ;; --) shift break ;; *) echo &quot;$1 is not an option&quot; ;; esac shiftdonecount=1for param in $@; do echo &quot;Parameter #$count: $param&quot; count=$[ $count + 1 ]done è¿è¡Œç»“æœå¦‚å›¾ï¼Œå¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€æ¬¡æœªåˆ†ç¦»æ—¶è„šæœ¬è®¤ä¸ºæ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°éƒ½æ˜¯é€‰é¡¹ï¼›ç¬¬äºŒæ¬¡ä½¿ç”¨--åˆ†ç¦»åï¼Œå½“è„šæœ¬é‡åˆ°åŒç ´æŠ˜çº¿æ—¶ï¼Œå®ƒä¼šåœæ­¢å¤„ç†é€‰é¡¹ï¼Œå¹¶å°†å‰©ä¸‹çš„å‚æ•°éƒ½å½“ä½œå‘½ä»¤è¡Œå‚æ•°ã€‚ â‘¢å¤„ç†å¸¦å€¼çš„é€‰é¡¹ï¼šæœ‰äº›é€‰é¡¹ä¼šå¸¦ä¸Šä¸€ä¸ªé¢å¤–çš„å‚æ•°å€¼ï¼Œä¾‹å¦‚ï¼š./mz.sh -a test1 -b -c -d test2ã€‚å½“å‘½ä»¤è¡Œé€‰é¡¹è¦æ±‚é¢å¤–çš„å‚æ•°æ—¶ï¼Œè„šæœ¬å¿…é¡»èƒ½æ£€æµ‹åˆ°å¹¶æ­£ç¡®å¤„ç†ï¼Œå¦‚ä¸‹ä¾‹ï¼š123456789101112131415161718192021#!/bin/bash# extracting command line options and valueswhile [ -n &quot;$1&quot; ]; do case &quot;$1&quot; in -a) echo &quot;Found the -a option&quot;;; -b) param=&quot;$2&quot; echo &quot;Found the -b option, with parameter value $param&quot; shift ;; -c) echo &quot;Found the -c option&quot;;; --) shift break ;; *) echo &quot;$1 is not an option&quot;;; esac shiftdonecount=1for param in &quot;$@&quot;; do echo &quot;Parameter #$count: $param&quot; count=$[ $count + 1 ]done åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œcaseè¯­å¥å®šä¹‰äº†ä¸‰ä¸ªå®ƒè¦å¤„ç†çš„é€‰é¡¹ï¼Œå…¶ä¸­-bé€‰é¡¹è¿˜éœ€è¦ä¸€ä¸ªé¢å¤–çš„å‚æ•°å€¼ã€‚ç”±äºè¦å¤„ç†çš„å‚æ•°æ˜¯$1ï¼Œé¢å¤–çš„å‚æ•°å€¼å°±åº”è¯¥ä½äº$2ï¼ˆå› ä¸ºæ‰€æœ‰çš„å‚æ•°åœ¨å¤„ç†å®Œä¹‹åéƒ½ä¼šè¢«ç§»å‡ºï¼‰ã€‚åªè¦å°†å‚æ•°å€¼ä»$2å˜é‡ä¸­æå–å‡ºæ¥å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œå› ä¸ºè¿™ä¸ªé€‰é¡¹å ç”¨äº†ä¸¤ä¸ªå‚æ•°ä½ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦ä½¿ç”¨shiftå‘½ä»¤å¤šç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚è¿è¡Œç»“æœå¦‚å›¾ï¼š (2)getoptå‘½ä»¤ä¸Šè¿°shellè„šæœ¬å·²ç»æœ‰äº†å¤„ç†å‘½ä»¤è¡Œé€‰é¡¹çš„åŸºæœ¬èƒ½åŠ›ï¼Œä½†è¿˜æœ‰ä¸€äº›é™åˆ¶ã€‚æ¯”å¦‚ï¼Œåˆå¹¶é€‰é¡¹æ˜¯Linuxä¸­ä¸€ä¸ªå¾ˆå¸¸è§çš„ç”¨æ³•ï¼Œå¦‚æœä½ æƒ³å°†å¤šä¸ªé€‰é¡¹æ”¾è¿›ä¸€ä¸ªå‚æ•°ä¸­æ—¶ï¼Œå®ƒå°±ä¸èƒ½å·¥ä½œäº†ã€‚getoptå‘½ä»¤æ˜¯ä¸€ä¸ªåœ¨å¤„ç†å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°æ—¶éå¸¸æ–¹ä¾¿çš„å·¥å…·ã€‚å®ƒèƒ½å¤Ÿè¯†åˆ«å‘½ä»¤è¡Œå‚æ•°ï¼Œä»è€Œåœ¨è„šæœ¬ä¸­è§£æå®ƒä»¬æ—¶æ›´æ–¹ä¾¿ã€‚ å‘½ä»¤æ ¼å¼ï¼šgetopt optstring parametersã€‚optstringæ˜¯è¿™ä¸ªè¿‡ç¨‹çš„å…³é”®æ‰€åœ¨ï¼Œå®ƒå®šä¹‰äº†å‘½ä»¤è¡Œæœ‰æ•ˆçš„é€‰é¡¹å­—æ¯ï¼Œè¿˜å®šä¹‰äº†å“ªäº›é€‰é¡¹å­—æ¯éœ€è¦å‚æ•°å€¼ã€‚é¦–å…ˆï¼Œåœ¨optstringä¸­åˆ—å‡ºä½ è¦åœ¨è„šæœ¬ä¸­ç”¨åˆ°çš„æ¯ä¸ªå‘½ä»¤è¡Œé€‰é¡¹å­—æ¯ã€‚ç„¶åï¼Œåœ¨æ¯ä¸ªéœ€è¦å‚æ•°å€¼çš„é€‰é¡¹å­—æ¯ååŠ ä¸€ä¸ªå†’å·ã€‚getoptå‘½ä»¤ä¼šåŸºäºä½ å®šä¹‰çš„optstringè§£ææä¾›çš„å‚æ•°ã€‚ ä¸¾ä¾‹å¦‚å›¾ï¼šå‘½ä»¤è¡Œgetopt ab:cd -a -b test1 -cd test2 test3ä¸­çš„optstringå®šä¹‰äº†å››ä¸ªæœ‰æ•ˆé€‰é¡¹å­—æ¯ï¼šaã€bã€cå’Œdã€‚å†’å·ï¼ˆ:ï¼‰è¢«æ”¾åœ¨äº†å­—æ¯båé¢ï¼Œå› ä¸ºbé€‰é¡¹éœ€è¦ä¸€ä¸ªå‚æ•°å€¼ã€‚å½“getoptå‘½ä»¤è¿è¡Œæ—¶ï¼Œå®ƒä¼šæ£€æŸ¥æä¾›çš„å‚æ•°åˆ—è¡¨ï¼ˆ-a -b test1 -cd test2 test3ï¼‰ï¼Œå¹¶åŸºäºæä¾›çš„optstringè¿›è¡Œè§£æã€‚æ³¨æ„ï¼Œå®ƒä¼šè‡ªåŠ¨å°†-cdé€‰é¡¹åˆ†æˆä¸¤ä¸ªå•ç‹¬çš„é€‰é¡¹ï¼Œå¹¶æ’å…¥åŒç ´æŠ˜çº¿æ¥åˆ†éš”è¡Œä¸­çš„é¢å¤–å‚æ•°test2 test3ã€‚æ³¨æ„ï¼šå¦‚æœæŒ‡å®šäº†ä¸€ä¸ªä¸åœ¨optstringä¸­çš„é€‰é¡¹ï¼Œé»˜è®¤æƒ…å†µä¸‹getoptå‘½ä»¤ä¼šäº§ç”Ÿä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œå¯ä»¥åœ¨å‘½ä»¤ååŠ -qé€‰é¡¹æ¥å¿½ç•¥è¿™æ¡é”™è¯¯æ¶ˆæ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥åœ¨è„šæœ¬ä¸­ä½¿ç”¨getoptæ¥æ ¼å¼åŒ–è„šæœ¬æ‰€æºå¸¦çš„ä»»ä½•å‘½ä»¤è¡Œé€‰é¡¹æˆ–å‚æ•°ï¼Œä½†ç”¨èµ·æ¥ç•¥å¾®å¤æ‚ã€‚ç”¨getoptå‘½ä»¤ç”Ÿæˆçš„æ ¼å¼åŒ–åçš„ç‰ˆæœ¬æ¥æ›¿æ¢å·²æœ‰çš„å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°ï¼Œsetå‘½ä»¤çš„é€‰é¡¹ä¹‹ä¸€æ˜¯åŒç ´æŠ˜çº¿--ï¼Œå®ƒä¼šå°†å‘½ä»¤è¡Œå‚æ•°æ›¿æ¢æˆsetå‘½ä»¤çš„å‘½ä»¤è¡Œå€¼ã€‚ è¯¥æ–¹æ³•ä¼šå°†åŸå§‹è„šæœ¬çš„å‘½ä»¤è¡Œå‚æ•°ä¼ ç»™getoptå‘½ä»¤ï¼Œä¹‹åå†å°†getoptå‘½ä»¤çš„è¾“å‡ºä¼ ç»™setå‘½ä»¤ï¼Œç”¨getoptæ ¼å¼åŒ–åçš„å‘½ä»¤è¡Œå‚æ•°æ¥æ›¿æ¢åŸå§‹çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œæ ¼å¼çœ‹èµ·æ¥å¦‚ä¸‹æ‰€ç¤ºï¼šset -- $(getopt -q ab:cd &quot;$@&quot;)ã€‚ç°åœ¨åŸå§‹çš„å‘½ä»¤è¡Œå‚æ•°å˜é‡çš„å€¼ä¼šè¢«getoptå‘½ä»¤çš„è¾“å‡ºæ›¿æ¢ï¼Œè€Œgetoptå·²ç»ä¸ºæˆ‘ä»¬æ ¼å¼åŒ–å¥½äº†å‘½ä»¤è¡Œå‚æ•°ã€‚åˆ©ç”¨è¯¥æ–¹æ³•å°±å¯ä»¥å†™å‡ºèƒ½å¸®æˆ‘ä»¬å¤„ç†å‘½ä»¤è¡Œå‚æ•°çš„è„šæœ¬ï¼š123456789101112131415161718192021#!/bin/bashset -- $(getopt -q ab:cd &quot;$@&quot;)while [ -n &quot;$1&quot; ]; do case &quot;$1&quot; in -a) echo &quot;Found the -a option&quot; ;; -b) param=&quot;$2&quot; echo &quot;Found the -b option, with parameter value $param&quot; shift ;; -c) echo &quot;Found the -c option&quot; ;; --) shift break ;; *) echo &quot;$1 is not an option&quot;;; esac shiftdonecount=1for param in &quot;$@&quot;; do echo &quot;Parameter #$count: $param&quot; count=$[ $count + 1 ]doneæ³¨æ„åˆ°è¯¥ä¾‹å’Œä¸Šæ–‡æŸ¥æ‰¾é€‰é¡¹ä¸­ç¬¬ä¸‰ç§æƒ…å†µã€Œå¤„ç†å¸¦å€¼çš„é€‰é¡¹ã€ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯åŠ å…¥äº†getoptå‘½ä»¤æ¥å¸®åŠ©æ ¼å¼åŒ–å‘½ä»¤è¡Œå‚æ•°ã€‚å¹¶ä¸”å¯ä»¥è¿è¡Œå¸¦æœ‰å¤æ‚é€‰é¡¹çš„è„šæœ¬å¦‚åˆå¹¶çš„é€‰é¡¹ï¼š./mz.sh -acï¼ŒåŒæ—¶ä¹‹å‰çš„åŠŸèƒ½ç…§æ ·æ²¡æœ‰é—®é¢˜ã€‚ (3)æ›´é«˜çº§çš„getoptså‘½ä»¤ç„¶è€Œï¼Œgetoptå‘½ä»¤å¹¶ä¸æ“…é•¿å¤„ç†å¸¦ç©ºæ ¼å’Œå¼•å·çš„å‚æ•°å€¼ï¼Œå®ƒä¼šå°†ç©ºæ ¼å½“ä½œå‚æ•°åˆ†éš”ç¬¦ï¼Œè€Œä¸æ˜¯æ ¹æ®åŒå¼•å·å°†äºŒè€…å½“ä½œä¸€ä¸ªå‚æ•°ã€‚ getoptså‘½ä»¤ï¼ˆæ³¨æ„æ˜¯å¤æ•°ï¼‰å†…å»ºäºbash shellï¼Œå®ƒè·Ÿè¿‘äº²getoptçœ‹èµ·æ¥å¾ˆåƒï¼Œä½†å¤šäº†ä¸€äº›æ‰©å±•åŠŸèƒ½ã€‚getoptå°†å‘½ä»¤è¡Œä¸Šé€‰é¡¹å’Œå‚æ•°å¤„ç†ååªç”Ÿæˆä¸€ä¸ªè¾“å‡ºï¼Œè€Œgetoptså‘½ä»¤èƒ½å¤Ÿå’Œå·²æœ‰çš„shellå‚æ•°å˜é‡é…åˆé»˜å¥‘ã€‚ æ¯æ¬¡è°ƒç”¨getoptsæ—¶ï¼Œå®ƒä¸€æ¬¡åªå¤„ç†å‘½ä»¤è¡Œä¸Šæ£€æµ‹åˆ°çš„ä¸€ä¸ªå‚æ•°ã€‚å¤„ç†å®Œæ‰€æœ‰çš„å‚æ•°åï¼Œå®ƒä¼šé€€å‡ºå¹¶è¿”å›ä¸€ä¸ªå¤§äº0çš„é€€å‡ºçŠ¶æ€ç ã€‚è¿™è®©å®ƒéå¸¸é€‚åˆç”¨äºè§£æå‘½ä»¤è¡Œæ‰€æœ‰å‚æ•°çš„å¾ªç¯ä¸­ã€‚ getoptså‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼šgetopts optstring variableã€‚optstringå€¼ç±»ä¼¼äºgetoptå‘½ä»¤ä¸­çš„é‚£ä¸ªã€‚æœ‰æ•ˆçš„é€‰é¡¹å­—æ¯éƒ½ä¼šåˆ—åœ¨optstringä¸­ï¼Œå¦‚æœé€‰é¡¹å­—æ¯è¦æ±‚æœ‰ä¸ªå‚æ•°å€¼ï¼Œå°±åŠ ä¸€ä¸ªå†’å·ã€‚è¦å»æ‰é”™è¯¯æ¶ˆæ¯çš„è¯ï¼Œå¯ä»¥åœ¨optstringä¹‹å‰åŠ ä¸€ä¸ªå†’å·ã€‚getoptså‘½ä»¤å°†å½“å‰å‚æ•°ä¿å­˜åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰çš„variableä¸­ã€‚getoptså‘½ä»¤ä¼šç”¨åˆ°ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼šOPTARGç¯å¢ƒå˜é‡ä¿å­˜é€‰é¡¹éœ€è¦è·Ÿçš„ä¸€ä¸ªå‚æ•°å€¼ï¼›OPTINDç¯å¢ƒå˜é‡ä¿å­˜äº†å‚æ•°åˆ—è¡¨ä¸­getoptsæ­£åœ¨å¤„ç†çš„å‚æ•°ä½ç½®ã€‚è¿™æ ·ä½ å°±èƒ½åœ¨å¤„ç†å®Œé€‰é¡¹ä¹‹åç»§ç»­å¤„ç†å…¶ä»–å‘½ä»¤è¡Œå‚æ•°äº†ã€‚1234567891011#!/bin/bash# simple demonstration of the getopts commandwhile getopts :ab:c optdo case &quot;$opt&quot; in a) echo &quot;Found the -a option&quot; ;; b) echo &quot;Found the -b option, with value $OPTARG&quot;;; c) echo &quot;Found the -c option&quot; ;; *) echo &quot;Unknown option: $opt&quot;;; esacdonewhileè¯­å¥å®šä¹‰äº†getoptså‘½ä»¤ï¼ŒæŒ‡æ˜äº†è¦æŸ¥æ‰¾å“ªäº›å‘½ä»¤è¡Œé€‰é¡¹ï¼Œä»¥åŠæ¯æ¬¡è¿­ä»£ä¸­å­˜å‚¨å®ƒä»¬çš„å˜é‡åï¼ˆoptï¼‰ã€‚æ³¨æ„åˆ°åœ¨æœ¬ä¾‹ä¸­caseè¯­å¥çš„ç”¨æ³•æœ‰äº›ä¸åŒï¼šgetoptså‘½ä»¤è§£æå‘½ä»¤è¡Œé€‰é¡¹æ—¶ä¼šç§»é™¤å¼€å¤´çš„å•ç ´æŠ˜çº¿ï¼Œæ‰€ä»¥åœ¨caseå®šä¹‰ä¸­ä¸ç”¨å•ç ´æŠ˜çº¿ã€‚getoptså‘½ä»¤æœ‰å‡ ä¸ªå¥½ç”¨çš„åŠŸèƒ½ï¼šâ‘ å¯ä»¥åœ¨å‚æ•°å€¼ä¸­åŒ…å«ç©ºæ ¼ï¼›â‘¡å¯ä»¥å°†é€‰é¡¹å­—æ¯å’Œå‚æ•°å€¼æ”¾åœ¨ä¸€èµ·ä½¿ç”¨ï¼Œè€Œä¸ç”¨åŠ ç©ºæ ¼ï¼Œgetoptså‘½ä»¤èƒ½å¤Ÿä»é€‰é¡¹ä¸­æ­£ç¡®è§£æå‡ºå‚æ•°å€¼ï¼›â‘¢å¯ä»¥å°†å‘½ä»¤è¡Œä¸Šæ‰€æœ‰æœªå®šä¹‰çš„é€‰é¡¹ç»Ÿä¸€è¾“å‡ºæˆé—®å·ï¼Œä»¥é—®å·å½¢å¼å‘é€ç»™ä»£ç ã€‚ä¸Šè¿°ä»£ç è¿è¡Œç»“æœå¦‚å›¾ï¼š getoptså‘½ä»¤çŸ¥é“ä½•æ—¶åœæ­¢å¤„ç†é€‰é¡¹ï¼Œå¹¶å°†å‚æ•°ç•™ç»™ä½ å¤„ç†ã€‚åœ¨getoptså¤„ç†æ¯ä¸ªé€‰é¡¹æ—¶ï¼Œå®ƒä¼šå°†OPTINDç¯å¢ƒå˜é‡å€¼å¢ä¸€ã€‚åœ¨getoptså®Œæˆå¤„ç†æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨shiftå‘½ä»¤å’ŒOPTINDå€¼æ¥ç§»åŠ¨å‚æ•°ã€‚å¦‚ä¸‹ä¾‹ï¼š12345678910111213141516171819#!/bin/bashwhile getopts :ab:cd optdo case &quot;$opt&quot; in a) echo &quot;Found the -a option&quot; ;; b) echo &quot;Found the -b option, with value $OPTARG&quot; ;; c) echo &quot;Found the -c option&quot; ;; d) echo &quot;Found the -d option&quot; ;; *) echo &quot;Unknown option: $opt&quot; ;; esacdoneshift $[ $OPTIND - 1 ]count=1for param in &quot;$@&quot;do echo &quot;Parameter $count: $param&quot; count=$[ $count + 1 ]doneè¿è¡Œç»“æœå¦‚å›¾ï¼š 4.5.å°†é€‰é¡¹æ ‡å‡†åŒ–æ‰€è°“é€‰é¡¹æ ‡å‡†åŒ–ï¼Œå°±æ˜¯å°½é‡éµå¾ªæŸäº›å­—æ¯é€‰é¡¹åœ¨Linuxä¸–ç•Œé‡Œå·²ç»æ‹¥æœ‰çš„æŸç§ç¨‹åº¦çš„æ ‡å‡†å«ä¹‰ï¼Œè€Œä¸æ˜¯éšæ„å†³å®šç”¨å“ªäº›å­—æ¯é€‰é¡¹ä»¥åŠå®ƒä»¬çš„ç”¨æ³•ï¼Œå°†é€‰é¡¹æ ‡å‡†åŒ–ä½¿å¾—è„šæœ¬çœ‹èµ·æ¥èƒ½æ›´å‹å¥½ä¸€äº›ã€‚å¸¸ç”¨çš„Linuxå‘½ä»¤é€‰é¡¹å¦‚ä¸‹ï¼š é€‰é¡¹ å«ä¹‰ æè¿° -a all æ˜¾ç¤ºæ‰€æœ‰å¯¹è±¡ -c count ç”Ÿæˆä¸€ä¸ªè®¡æ•° -d directory æŒ‡å®šä¸€ä¸ªç›®å½• -e extend æ‰©å±•ä¸€ä¸ªå¯¹è±¡ -f file æŒ‡å®šè¯»å…¥æ•°æ®çš„æ–‡ä»¶ -h help æ˜¾ç¤ºå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ -i ignorecase å¿½ç•¥æ–‡æœ¬å¤§å°å†™ -l long äº§ç”Ÿè¾“å‡ºçš„é•¿æ ¼å¼ç‰ˆæœ¬ -n non-interactive ä½¿ç”¨éäº¤äº’æ¨¡å¼ï¼ˆæ‰¹å¤„ç†ï¼‰ -o output redirect å°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°æŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶ -q-s quietsilent ä»¥å®‰é™æ¨¡å¼è¿è¡Œ -r recursive é€’å½’åœ°å¤„ç†ç›®å½•å’Œæ–‡ä»¶ -v verbose ç”Ÿæˆè¯¦ç»†è¾“å‡º -x exclude æ’é™¤æŸä¸ªå¯¹è±¡ -y yes å¯¹æ‰€æœ‰é—®é¢˜å›ç­”yes 4.6.è·å¾—ç”¨æˆ·è¾“å…¥å°½ç®¡å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°æ˜¯ä»è„šæœ¬ç”¨æˆ·å¤„è·å¾—è¾“å…¥çš„ä¸€ç§é‡è¦æ–¹å¼ï¼Œä½†æœ‰æ—¶è„šæœ¬çš„äº¤äº’æ€§è¿˜éœ€è¦æ›´å¼ºä¸€äº›ã€‚æ¯”å¦‚ä½ æƒ³è¦åœ¨è„šæœ¬è¿è¡Œæ—¶é—®ä¸ªé—®é¢˜ï¼Œå¹¶ç­‰å¾…è¿è¡Œè„šæœ¬çš„äººæ¥å›ç­”ã€‚bash shellä¸ºæ­¤æä¾›äº†readå‘½ä»¤ã€‚ (1)åŸºæœ¬çš„è¯»å–readå‘½ä»¤ä»æ ‡å‡†è¾“å…¥ï¼ˆé”®ç›˜ï¼‰æˆ–å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸­æ¥å—è¾“å…¥ï¼Œåœ¨æ”¶åˆ°è¾“å…¥åä¼šå°†æ•°æ®æ”¾è¿›ä¸€ä¸ªæŒ‡å®šçš„å˜é‡ã€‚ä¾‹å¦‚ï¼š1234#!/bin/bashecho -n &quot;Enter your name: &quot;read nameecho &quot;Hello $name, welcome to my program. &quot;æ³¨æ„ï¼Œä¸Šä¾‹ä¸­ç”Ÿæˆæç¤ºçš„echoå‘½ä»¤ä½¿ç”¨äº†-né€‰é¡¹ã€‚è¯¥é€‰é¡¹ä¸ä¼šåœ¨å­—ç¬¦ä¸²æœ«å°¾è¾“å‡ºæ¢è¡Œç¬¦ï¼Œå…è®¸è„šæœ¬ç”¨æˆ·ç´§è·Ÿå…¶åè¾“å…¥æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸‹ä¸€è¡Œã€‚è¿™è®©è„šæœ¬çœ‹èµ·æ¥æ›´åƒè¡¨å•ã€‚å®é™…ä¸Šï¼Œreadå‘½ä»¤åŒ…å«äº†-pé€‰é¡¹ï¼Œå…è®¸ä½ ç›´æ¥åœ¨readå‘½ä»¤è¡ŒæŒ‡å®šæç¤ºç¬¦ã€‚ä¾‹å¦‚ï¼š1234#!/bin/bashread -p &quot;Please enter your age: &quot; agedays=$[ $age * 365 ]echo &quot;That makes you over $days days old! &quot;readå‘½ä»¤ä¹Ÿå…è®¸æŒ‡å®šå¤šä¸ªå˜é‡ï¼Œè¾“å…¥çš„æ¯ä¸ªæ•°æ®å€¼éƒ½ä¼šåˆ†é…ç»™å˜é‡åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡ã€‚å¦‚æœå˜é‡æ•°é‡ä¸å¤Ÿï¼Œå‰©ä¸‹çš„æ•°æ®å°±å…¨éƒ¨åˆ†é…ç»™æœ€åä¸€ä¸ªå˜é‡ã€‚æ˜¯ä¸æ˜¯å’ŒPythonä¸­çš„*argså’Œ**kwargsæœ‰ç‚¹åƒå‘¢ï¼Ÿä¹Ÿå¯ä»¥åœ¨readå‘½ä»¤è¡Œä¸­ä¸æŒ‡å®šå˜é‡ï¼Œè¿™æ ·å®ƒæ”¶åˆ°çš„ä»»ä½•æ•°æ®éƒ½ä¼šæ”¾è¿›ç‰¹æ®Šç¯å¢ƒå˜é‡REPLYä¸­ã€‚REPLYç¯å¢ƒå˜é‡ä¼šä¿å­˜è¾“å…¥çš„æ‰€æœ‰æ•°æ®ï¼Œå¯ä»¥åœ¨shellè„šæœ¬ä¸­åƒå…¶ä»–å˜é‡ä¸€æ ·ä½¿ç”¨ã€‚ (2)è¶…æ—¶å¦‚æœä¸ç®¡æ˜¯å¦æœ‰æ•°æ®è¾“å…¥ï¼Œè„šæœ¬éƒ½å¿…é¡»ç»§ç»­æ‰§è¡Œï¼Œä½ å¯ä»¥ç”¨-té€‰é¡¹æ¥æŒ‡å®šä¸€ä¸ªè®¡æ—¶å™¨ï¼Œä»–æŒ‡å®šäº†readå‘½ä»¤ç­‰å¾…è¾“å…¥çš„ç§’æ•°ã€‚å½“è®¡æ—¶å™¨è¿‡æœŸåï¼Œreadå‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªéé›¶é€€å‡ºçŠ¶æ€ç ï¼Œå¯ä»¥ä½¿ç”¨if-thenè¯­å¥æˆ–whileå¾ªç¯è¿™ç§æ ‡å‡†çš„ç»“æ„åŒ–è¯­å¥æ¥ç†æ¸…æ‰€å‘ç”Ÿçš„å…·ä½“æƒ…å†µã€‚ ä¹Ÿå¯ä»¥ä¸å¯¹è¾“å…¥è¿‡ç¨‹è®¡æ—¶ï¼Œè€Œæ˜¯è®©readå‘½ä»¤æ¥ç»Ÿè®¡è¾“å…¥çš„å­—ç¬¦æ•°ã€‚å½“è¾“å…¥çš„å­—ç¬¦è¾¾åˆ°é¢„è®¾çš„å­—ç¬¦æ•°æ—¶ï¼Œå°±è‡ªåŠ¨é€€å‡ºï¼Œå°†è¾“å…¥çš„æ•°æ®èµ‹ç»™å˜é‡ã€‚å¯ä»¥å°†-né€‰é¡¹å’Œå€¼1ä¸€èµ·ä½¿ç”¨ï¼Œå‘Šè¯‰readå‘½ä»¤åœ¨æ¥å—å•ä¸ªå­—ç¬¦åé€€å‡ºã€‚åªè¦æŒ‰ä¸‹å•ä¸ªå­—ç¬¦å›ç­”åï¼Œreadå‘½ä»¤å°±ä¼šæ¥å—è¾“å…¥å¹¶å°†å®ƒä¼ ç»™å˜é‡ï¼Œæ— éœ€æŒ‰å›è½¦é”®ã€‚12345678910#!/bin/bashread -n1 -p &quot;Do you want to continue [Y/N]? &quot; answercase $answer in Y | y) echo echo &quot;fine, continue onâ€¦&quot;;; N | n) echo echo OK, goodbye exit;;esacecho &quot;This is the end of the script&quot;è¿è¡Œç»“æœå¦‚å›¾ï¼š (3)éšè—æ–¹å¼è¯»å–å½“éœ€è¦è¾“å…¥ç±»ä¼¼å¯†ç è¿™ç§éœ€è¦ä»è„šæœ¬ç”¨æˆ·å¤„å¾—åˆ°è¾“å…¥ï¼Œä½†åˆåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¾“å…¥ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨-sé€‰é¡¹ä¸å›æ˜¾ç»ˆç«¯çš„è¾“å…¥ï¼ˆå®é™…ä¸Šæ•°æ®ä¼šè¢«æ˜¾ç¤ºï¼Œåªæ˜¯readå‘½ä»¤ä¼šå°†æ–‡æœ¬é¢œè‰²è®¾æˆè·ŸèƒŒæ™¯è‰²ä¸€æ ·ï¼‰ã€‚è¾“å…¥æç¤ºç¬¦è¾“å…¥çš„æ•°æ®ä¸ä¼šå‡ºç°åœ¨å±å¹•ä¸Šï¼Œä½†ä¼šèµ‹ç»™å˜é‡ï¼Œä»¥ä¾¿åœ¨è„šæœ¬ä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼šread -s -p &quot;Enter your password: &quot; passwordã€‚ (4)ä»æ–‡ä»¶ä¸­è¯»å–å¯ä»¥ç”¨readå‘½ä»¤æ¥è¯»å–æ–‡ä»¶é‡Œçš„æ•°æ®ï¼Œæ¯æ¬¡è°ƒç”¨readå‘½ä»¤éƒ½ä¼šä»æ–‡ä»¶ä¸­è¯»å–ä¸€è¡Œæ–‡æœ¬ã€‚å½“æ–‡ä»¶ä¸­å†æ²¡æœ‰å†…å®¹æ—¶ï¼Œreadå‘½ä»¤ä¼šé€€å‡ºå¹¶è¿”å›éé›¶é€€å‡ºçŠ¶æ€ç ã€‚å¦‚ä½•å°†æ–‡ä»¶ä¸­çš„æ•°æ®ä¼ ç»™readå‘½ä»¤å‘¢ï¼Ÿæœ€å¸¸è§çš„æ–¹æ³•æ˜¯å¯¹æ–‡ä»¶ä½¿ç”¨catå‘½ä»¤ï¼Œå°†ç»“æœé€šè¿‡ç®¡é“ç›´æ¥ä¼ ç»™å«æœ‰readå‘½ä»¤çš„whileå‘½ä»¤ã€‚è§ä¸‹ä¾‹ï¼š12345678#!/bin/bashcount=1cat textfile | while read linedo echo &quot;Line $count: $line&quot; count=$[ $count + 1]doneecho &quot;Finished processing the file&quot;æ–‡ä»¶textfileå†…å®¹åŠè¿è¡Œç»“æœå¦‚ä¸‹ï¼š 5.åˆ›å»ºå‡½æ•°5.1.åŸºæœ¬è„šæœ¬å‡½æ•°å‡½æ•°æ˜¯ä¸€ä¸ªè„šæœ¬ä»£ç å—ï¼Œä½ å¯ä»¥ä¸ºå…¶å‘½åå¹¶åœ¨ä»£ç ä¸­ä»»ä½•ä½ç½®é‡ç”¨ï¼Œè°ƒç”¨å‡½æ•°ï¼ˆåœ¨è„šæœ¬ä¸­ä½¿ç”¨è¯¥ä»£ç å—ï¼‰æ—¶åªè¦ä½¿ç”¨æ‰€èµ·çš„å‡½æ•°åå°±è¡Œäº†ã€‚ åˆ›å»ºå‡½æ•°çš„ç¬¬ä¸€ç§æ ¼å¼æ˜¯é‡‡ç”¨å…³é”®å­—functionï¼Œåè·Ÿåˆ†é…ç»™è¯¥ä»£ç å—çš„å‡½æ•°åï¼šnameå±æ€§å®šä¹‰äº†èµ‹äºˆå‡½æ•°çš„å”¯ä¸€åç§°ï¼Œè„šæœ¬ä¸­å®šä¹‰çš„æ¯ä¸ªå‡½æ•°éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚commandsæ˜¯æ„æˆå‡½æ•°çš„ä¸€æ¡æˆ–å¤šæ¡bash shellå‘½ä»¤ï¼Œåœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¼šæŒ‰å‘½ä»¤åœ¨å‡½æ•°ä¸­å‡ºç°çš„é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œå°±åƒåœ¨æ™®é€šè„šæœ¬ä¸­ä¸€æ ·ã€‚123function name &#123; commands&#125; åˆ›å»ºå‡½æ•°çš„ç¬¬äºŒç§æ ¼å¼æ›´æ¥è¿‘äºå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­å®šä¹‰å‡½æ•°çš„æ–¹å¼ï¼šå‡½æ•°ååçš„ç©ºæ‹¬å·è¡¨æ˜æ­£åœ¨å®šä¹‰çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ç§æ ¼å¼çš„å‘½åè§„åˆ™å’Œä¹‹å‰å®šä¹‰shellè„šæœ¬å‡½æ•°çš„æ ¼å¼ä¸€æ ·ã€‚123name() &#123; commands&#125; è‡³äºä½¿ç”¨å‡½æ•°ï¼Œåªéœ€è¦åƒå…¶ä»–shellå‘½ä»¤ä¸€æ ·ï¼Œåœ¨è¡Œä¸­æŒ‡å®šå‡½æ•°åå°±è¡Œäº†ã€‚ æ³¨æ„â‘ ï¼šå‡½æ•°å®šä¹‰ä¸ä¸€å®šéå¾—æ˜¯shellè„šæœ¬ä¸­é¦–å…ˆè¦åšçš„äº‹ï¼Œä½†å¿…é¡»åœ¨ä½¿ç”¨å‡½æ•°ä¹‹å‰å®šä¹‰å®ƒï¼Œå¦åˆ™ä¼šæ”¶åˆ°ä¸€æ¡command not foundçš„é”™è¯¯æ¶ˆæ¯ã€‚æ³¨æ„â‘¡ï¼šå‡½æ•°åå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœä½ é‡å®šä¹‰äº†å‡½æ•°ï¼Œæ–°å®šä¹‰ä¼šè¦†ç›–åŸæ¥å‡½æ•°çš„å®šä¹‰ï¼Œè¿™ä¸€åˆ‡ä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯æ¶ˆæ¯ã€‚ 5.2.è¿”å›å€¼bash shellä¼šæŠŠå‡½æ•°å½“ä½œä¸€ä¸ªå°å‹è„šæœ¬ï¼Œè¿è¡Œç»“æŸæ—¶ä¼šè¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ç ï¼Œç”Ÿæˆé€€å‡ºçŠ¶æ€ç æœ‰ä»¥ä¸‹3ç§ä¸åŒçš„æ–¹æ³•ï¼š é»˜è®¤é€€å‡ºçŠ¶æ€ç ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„é€€å‡ºçŠ¶æ€ç æ˜¯å‡½æ•°ä¸­æœ€åä¸€æ¡å‘½ä»¤è¿”å›çš„é€€å‡ºçŠ¶æ€ç ã€‚åœ¨å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå¯ä»¥ç”¨æ ‡å‡†å˜é‡$?æ¥ç¡®å®šå‡½æ•°çš„é€€å‡ºçŠ¶æ€ç ã€‚æ³¨æ„ï¼šç”±äºå‡½æ•°çš„é»˜è®¤é€€å‡ºçŠ¶æ€ç å–å†³äºå‡½æ•°ä½“ä¸­æœ€åä¸€æ¡å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ï¼Œå› æ­¤ä½ æ— æ³•çŸ¥é“å‡½æ•°ä¸­å…¶ä»–å‘½ä»¤ä¸­æ˜¯å¦æˆåŠŸè¿è¡Œï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•å¾ˆå±é™©ã€‚ ä½¿ç”¨returnå‘½ä»¤ï¼šä½¿ç”¨returnå‘½ä»¤æ¥é€€å‡ºå‡½æ•°å¹¶è¿”å›ç‰¹å®šçš„é€€å‡ºçŠ¶æ€ç ï¼Œå®ƒå…è®¸æŒ‡å®šä¸€ä¸ªæ•´æ•°å€¼æ¥å®šä¹‰å‡½æ•°çš„é€€å‡ºçŠ¶æ€ç ï¼Œä»è€Œæä¾›äº†ä¸€ç§ç®€å•çš„é€”å¾„æ¥ç¼–ç¨‹è®¾å®šå‡½æ•°é€€å‡ºçŠ¶æ€ç ã€‚æ³¨æ„ï¼šâ‘ å‡½æ•°ä¸€ç»“æŸå°±å–è¿”å›å€¼ï¼Œå¦åˆ™å¯èƒ½ä¼šä¸¢å¤±è¿”å›å€¼ã€‚â‘¡é€€å‡ºçŠ¶æ€ç çš„èŒƒå›´æ˜¯0~255ï¼Œè¶…å‡ºåˆ™ä¼šå–ä½™ã€‚ ä½¿ç”¨å‡½æ•°è¾“å‡ºï¼šæ­£å¦‚å¯ä»¥å°†å‘½ä»¤çš„è¾“å‡ºä¿å­˜åˆ°shellå˜é‡ä¸­ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹å‡½æ•°çš„è¾“å‡ºé‡‡ç”¨åŒæ ·çš„å¤„ç†åŠæ³•ã€‚å¯ä»¥ç”¨è¿™ç§æŠ€æœ¯æ¥è·å¾—ä»»ä½•ç±»å‹çš„å‡½æ•°è¾“å‡ºï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°å˜é‡ä¸­ã€‚è§ä¸‹ä¾‹ï¼š1234567#!/bin/bashfunction myfunc &#123; read -p &quot;Enter a value: &quot; value echo $[ $value * 2 ]&#125;result=$(myfunc)echo &quot;The new value is $result&quot; æ³¨æ„â‘ ï¼šè¯¥å‡½æ•°å®é™…ä¸Šè¾“å‡ºäº†ä¸¤æ¡æ¶ˆæ¯ï¼Œreadå‘½ä»¤è¾“å‡ºäº†ä¸€æ¡ç®€çŸ­çš„æ¶ˆæ¯æ¥å‘ç”¨æˆ·è¯¢é—®è¾“å…¥å€¼ï¼Œä½†bash shellå¹¶ä¸å°†å…¶ä½œä¸ºSTDOUTè¾“å‡ºçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”å¿½ç•¥æ‰å®ƒã€‚å¦‚æœä½ ç”¨echoè¯­å¥ç”Ÿæˆè¿™æ¡æ¶ˆæ¯æ¥å‘ç”¨æˆ·æŸ¥è¯¢ï¼Œé‚£ä¹ˆå®ƒä¼šä¸è¾“å‡ºå€¼ä¸€èµ·è¢«è¯»è¿›shellå˜é‡ä¸­ã€‚æ³¨æ„â‘¡ï¼šè¿™ç§æ–¹æ³•è¿˜å¯ä»¥è¿”å›æµ®ç‚¹å€¼å’Œå­—ç¬¦ä¸²å€¼ï¼Œè¿™ä½¿å®ƒæˆä¸ºä¸€ç§è·å–å‡½æ•°è¿”å›å€¼çš„å¼ºå¤§æ–¹æ³•ã€‚ä¸Šä¾‹è¿è¡Œç»“æœå¦‚å›¾ï¼š 5.3.åœ¨å‡½æ•°ä¸­ä½¿ç”¨å˜é‡ åœ¨å‡½æ•°ä¸­ä½¿ç”¨å˜é‡æ—¶ï¼Œä½ éœ€è¦æ³¨æ„å®ƒä»¬çš„å®šä¹‰æ–¹å¼ä»¥åŠå¤„ç†æ–¹å¼â€”â€”è¿™æ˜¯shellè„šæœ¬ä¸­å¸¸è§é”™è¯¯çš„æ ¹æºã€‚ å‘å‡½æ•°ä¼ é€’å‚æ•°bash shellä¼šå°†å‡½æ•°å½“ä½œå°å‹è„šæœ¬æ¥å¯¹å¾…ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åƒæ™®é€šè„šæœ¬é‚£æ ·å‘å‡½æ•°ä¼ é€’å‚æ•°ã€‚ å‡½æ•°å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„å‚æ•°ç¯å¢ƒå˜é‡æ¥è¡¨ç¤ºå‘½ä»¤è¡Œä¸Šä¼ ç»™å‡½æ•°çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°åä¼šåœ¨$0å˜é‡ä¸­å®šä¹‰ï¼Œå‡½æ•°å‘½ä»¤è¡Œä¸Šçš„ä»»ä½•å‚æ•°éƒ½ä¼šé€šè¿‡$1ã€$2ç­‰å®šä¹‰ã€‚ä¹Ÿå¯ä»¥ç”¨ç‰¹æ®Šå˜é‡$#æ¥åˆ¤æ–­ä¼ ç»™å‡½æ•°çš„å‚æ•°æ•°ç›®ã€‚æ³¨æ„â‘ ï¼šåœ¨è„šæœ¬ä¸­æŒ‡å®šå‡½æ•°æ—¶ï¼Œå¿…é¡»å°†å‚æ•°å’Œå‡½æ•°æ”¾åœ¨åŒä¸€è¡Œï¼Œä¾‹å¦‚func1 $value1 10ï¼Œresult=$(func1 $value1 10)ï¼›æ³¨æ„â‘¡ï¼šç”±äºå‡½æ•°ä½¿ç”¨ç‰¹æ®Šå‚æ•°ç¯å¢ƒå˜é‡ä½œä¸ºè‡ªå·±çš„å‚æ•°å€¼ï¼Œå› æ­¤å®ƒæ— æ³•ç›´æ¥è·å–è„šæœ¬åœ¨å‘½ä»¤è¡Œä¸­çš„å‚æ•°å€¼ã€‚å°½ç®¡å‡½æ•°ä¹Ÿä½¿ç”¨äº†$1å’Œ$2å˜é‡ï¼Œä½†å®ƒä»¬å’Œè„šæœ¬ä¸»ä½“ä¸­çš„$1å’Œ$2å˜é‡å¹¶ä¸ç›¸åŒã€‚è¦åœ¨å‡½æ•°ä¸­ä½¿ç”¨è¿™äº›å€¼ï¼Œå¿…é¡»åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‰‹åŠ¨å°†å®ƒä»¬ä¼ è¿‡å»ã€‚12345678#!/bin/bashfunction myfunc &#123; echo $[ $1 * $2 ]&#125;value1=$(myfunc 10 20)value2=$(myfunc)value3=$(myfunc $1 $2)echo &quot;The result is $valuex&quot;å¦‚ä¸Šä¾‹ï¼Œvalue1æ˜¯æ­£å¸¸çš„å‡½æ•°è°ƒç”¨æ–¹å¼ï¼Œå°†å‚æ•°å’Œå‡½æ•°æ”¾åœ¨åŒä¸€è¡Œã€‚å¦‚æœæƒ³è®©value2ä»¥è¿™ç§æ–¹å¼ç›´æ¥è·å–å‘½ä»¤è¡Œå‚æ•°å€¼å°†æŠ¥é”™ï¼šsyntax error: operand expected...ï¼ŒåŸå› è§ä¸Šï¼Œè§£å†³åŠæ³•å°±æ˜¯æŒ‰value3çš„æ–¹å¼ã€‚å°½ç®¡åœ¨å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨æ—¶éƒ½ä½¿ç”¨äº†$1å’Œ$2å˜é‡ï¼Œä½†ä»–ä»¬çš„åŒºåˆ«å°±å¦‚åŒå½¢å‚å’Œå®å‚ã€‚ åœ¨å‡½æ•°ä¸­å¤„ç†å˜é‡å˜é‡çš„ä½œç”¨åŸŸä¹Ÿä¼šç»å¸¸å¸¦æ¥éº»çƒ¦ï¼Œä½œç”¨åŸŸæ˜¯å˜é‡å¯è§çš„åŒºåŸŸã€‚å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ä¸æ™®é€šå˜é‡çš„ä½œç”¨åŸŸä¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è„šæœ¬çš„å…¶ä»–éƒ¨åˆ†è€Œè¨€ï¼Œå®ƒä»¬æ˜¯éšè—çš„ã€‚ å‡½æ•°ä½¿ç”¨ä¸¤ç§ç±»å‹çš„å˜é‡ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚ å…¨å±€å˜é‡ï¼šåœ¨shellè„šæœ¬ä¸­ä»»ä½•åœ°æ–¹éƒ½æœ‰æ•ˆçš„å˜é‡ã€‚å¦‚æœä½ åœ¨è„šæœ¬çš„ä¸»ä½“éƒ¨åˆ†å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å‡½æ•°å†…è¯»å–å®ƒçš„å€¼ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœä½ åœ¨å‡½æ•°å†…å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯ä»¥åœ¨è„šæœ¬çš„ä¸»ä½“éƒ¨åˆ†è¯»å–å®ƒçš„å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨è„šæœ¬ä¸­å®šä¹‰çš„ä»»ä½•å˜é‡éƒ½æ˜¯å…¨å±€å˜é‡ã€‚åœ¨å‡½æ•°å¤–å®šä¹‰çš„å˜é‡å¯åœ¨å‡½æ•°å†…æ­£å¸¸è®¿é—®ã€‚æ³¨æ„ï¼šåœ¨ä½¿ç”¨å…¨å±€å˜é‡æ—¶ï¼Œå¦‚æœå˜é‡è¢«ä¿®æ”¹åæ–°å€¼å°†ä¾ç„¶æœ‰æ•ˆï¼Œè¿™æœ‰æ—¶ä¼šäº§ç”Ÿéš¾ä»¥é¢„æ–™çš„åæœã€‚å®ƒè¦æ±‚ä½ æ¸…æ¸…æ¥šæ¥šåœ°çŸ¥é“å‡½æ•°ä¸­å…·ä½“ä½¿ç”¨äº†å“ªäº›å˜é‡ï¼ŒåŒ…æ‹¬é‚£äº›ç”¨æ¥è®¡ç®—éè¿”å›å€¼çš„å˜é‡ã€‚ å±€éƒ¨å˜é‡ï¼šlocalå…³é”®å­—ä¿è¯äº†å˜é‡åªå±€é™åœ¨è¯¥å‡½æ•°ä¸­ï¼Œå¦‚æœè„šæœ¬ä¸­åœ¨è¯¥å‡½æ•°ä¹‹å¤–æœ‰åŒæ ·åå­—çš„å˜é‡ï¼Œé‚£ä¹ˆshellå°†ä¼šä¿æŒè¿™ä¸¤ä¸ªå˜é‡çš„å€¼æ˜¯åˆ†ç¦»çš„ã€‚å¦‚æœè¦å°†å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„ä»»ä½•å˜é‡éƒ½å£°æ˜æˆå±€éƒ¨å˜é‡ï¼Œåªéœ€è¦åœ¨å˜é‡å£°æ˜çš„å‰é¢åŠ ä¸Šlocalå…³é”®å­—ï¼šlocal tempã€‚ä¹Ÿå¯ä»¥åœ¨å˜é‡èµ‹å€¼è¯­å¥ä¸­ä½¿ç”¨localå…³é”®å­—ï¼šlocal temp=$[ $value + 5 ]ã€‚ 5.4.æ•°ç»„å˜é‡å’Œå‡½æ•°å‘å‡½æ•°ä¼ é€’æ•°ç»„å‚æ•°å‘è„šæœ¬å‡½æ•°ä¼ é€’æ•°ç»„å˜é‡çš„æ–¹æ³•ä¼šæœ‰ç‚¹ä¸å¥½ç†è§£ã€‚å°†æ•°ç»„å˜é‡å½“ä½œå•ä¸ªå‚æ•°ä¼ é€’çš„è¯ï¼Œå®ƒä¸ä¼šèµ·ä½œç”¨ã€‚è§ä¸‹ä¾‹ï¼š1234567891011121314#!/bin/bashfunction testit &#123; echo &quot;The parameters are: $@&quot; thisarray=$1 echo &quot;The received array is $&#123;thisarray[*]&#125;&quot;&#125;myarray=(1 2 3 4 5)echo &quot;The original array is: $&#123;myarray[*]&#125;&quot;testit $myarray# è¿è¡Œç»“æœå¦‚ä¸‹ï¼š# The original array is: 1 2 3 4 5# The parameters are: 1# The received array is 1å¦‚ä½ æ‰€è§ï¼Œå¦‚æœå°†è¯¥æ•°ç»„å˜é‡ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œå‡½æ•°åªä¼šå–æ•°ç»„å˜é‡çš„ç¬¬ä¸€ä¸ªå€¼ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»å°†è¯¥æ•°ç»„å˜é‡çš„å€¼åˆ†è§£æˆå•ä¸ªå€¼ï¼Œç„¶åå°†è¿™äº›å€¼ä½œä¸ºå‡½æ•°å‚æ•°ä½¿ç”¨ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥å°†æ‰€æœ‰çš„å‚æ•°é‡æ–°ç»„åˆæˆä¸€ä¸ªæ–°çš„å˜é‡ã€‚å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼Œ$myarrayå˜é‡æ¥ä¿å­˜æ‰€æœ‰çš„æ•°ç»„å…ƒç´ ï¼Œç„¶åå°†å®ƒä»¬éƒ½æ”¾åœ¨å‡½æ•°çš„å‘½ä»¤è¡Œä¸Šã€‚è¯¥å‡½æ•°éšåä»å‘½ä»¤è¡Œå‚æ•°ä¸­é‡å»ºæ•°ç»„å˜é‡ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œæ•°ç»„ä»ç„¶å¯ä»¥åƒå…¶ä»–æ•°ç»„ä¸€æ ·ä½¿ç”¨ã€‚12345678910111213#!/bin/bashfunction testit &#123; local newarray newarray=($(echo &quot;$@&quot;)) echo &quot;The new array value is: $&#123;newarray[*]&#125;&quot;&#125;myarray=(1 2 3 4 5)echo &quot;The original array is $&#123;myarray[*]&#125;&quot;testit $&#123;myarray[*]&#125;# è¿è¡Œç»“æœå¦‚ä¸‹ï¼š# The original array is 1 2 3 4 5# The new array value is: 1 2 3 4 5ä¸‹é¢æ˜¯ä¸€ä¸ªéå†æ•°ç»„å¹¶å°†æ‰€æœ‰å…ƒç´ ç´¯åŠ çš„ä¾‹å­ï¼š12345678910111213141516#!/bin/bashfunction addarray &#123; local sum=0 local newarray newarray=($(echo &quot;$@&quot;)) for value in $&#123;newarray[*]&#125; do sum=$[ $sum + $value ] done echo $sum&#125;myarray=(1 2 3 4 5)echo &quot;The original array is: $&#123;myarray[*]&#125;&quot;arg1=$(echo $&#123;myarray[*]&#125;)result=$(addarray $arg1)echo &quot;The result is $result&quot;è¿è¡Œç»“æœå¦‚å›¾ï¼š ä»å‡½æ•°è¿”å›æ•°ç»„ä»å‡½æ•°é‡Œå‘shellè„šæœ¬ä¼ å›æ•°ç»„å˜é‡ä¹Ÿç”¨ç±»ä¼¼çš„æ–¹æ³•ï¼šå‡½æ•°ç”¨echoè¯­å¥æ¥æŒ‰æ­£ç¡®é¡ºåºè¾“å‡ºå•ä¸ªæ•°ç»„å€¼ï¼Œç„¶åè„šæœ¬å†å°†å®ƒä»¬é‡æ–°æ”¾è¿›ä¸€ä¸ªæ–°çš„æ•°ç»„å˜é‡ä¸­ã€‚è§ä¸‹ä¾‹ï¼š1234567891011121314151617181920#!/bin/bashfunction returnarray &#123; local oriarray local newarray local elements local i oriarray=($(echo &quot;$@&quot;)) newarray=($(echo &quot;$@&quot;)) elements=$[ $# - 1 ] for (( i = 0; i &lt;= $elements; i++ )) &#123; newarray[$i]=$[ $&#123;oriarray[$i]&#125; * 2 ] &#125; echo $&#123;newarray[*]&#125;&#125;myarray=(1 2 3 4 5)echo &quot;The original array is: $&#123;myarray[*]&#125;&quot;arg1=$(echo $&#123;myarray[*]&#125;)result=($(returnarray $arg1))echo &quot;The new array is: $&#123;result[*]&#125;&quot;è¯¥è„šæœ¬ç”¨$arg1å˜é‡å°†æ•°ç»„å€¼ä¼ ç»™returnarrayå‡½æ•°ï¼Œå‡½æ•°å°†è¯¥æ•°ç»„é‡ç»„åˆ°æ–°çš„æ•°ç»„å˜é‡ä¸­ï¼Œç”Ÿæˆè¯¥è¾“å‡ºæ•°ç»„å˜é‡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚ç„¶åå¯¹æ•°æ®å…ƒç´ è¿›è¡Œéå†ï¼Œå°†æ¯ä¸ªå…ƒç´ å€¼ç¿»å€ï¼Œå¹¶å°†ç»“æœå­˜å…¥å‡½æ•°ä¸­è¯¥æ•°ç»„å˜é‡çš„å‰¯æœ¬ã€‚returnarrayå‡½æ•°ä½¿ç”¨echoè¯­å¥æ¥è¾“å‡ºæ¯ä¸ªæ•°ç»„å…ƒç´ çš„å€¼ã€‚è„šæœ¬ç”¨returnarrayå‡½æ•°çš„è¾“å‡ºæ¥é‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„å˜é‡ã€‚è¿è¡Œç»“æœå¦‚å›¾ï¼š 5.5.å‡½æ•°é€’å½’å±€éƒ¨å‡½æ•°å˜é‡çš„ä¸€ä¸ªç‰¹æ€§æ˜¯è‡ªæˆä½“ç³»ï¼Œé™¤äº†ä»è„šæœ¬å‘½ä»¤è¡Œå¤„è·å¾—çš„å˜é‡ï¼Œè‡ªæˆä½“ç³»çš„å‡½æ•°ä¸éœ€è¦ä½¿ç”¨ä»»ä½•å¤–éƒ¨èµ„æºã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—å‡½æ•°å¯ä»¥é€’å½’åœ°è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°å¯ä»¥è°ƒç”¨è‡ªå·±æ¥å¾—åˆ°ç»“æœã€‚é€šå¸¸é€’å½’å‡½æ•°éƒ½æœ‰ä¸€ä¸ªæœ€ç»ˆå¯ä»¥è¿­ä»£åˆ°çš„åŸºå‡†å€¼ã€‚è®¸å¤šé«˜çº§æ•°å­¦ç®—æ³•ç”¨é€’å½’å¯¹å¤æ‚çš„æ–¹ç¨‹è¿›è¡Œé€çº§è§„çº¦ï¼Œç›´åˆ°åŸºå‡†å€¼å®šä¹‰çš„é‚£çº§ã€‚é€’å½’ç®—æ³•çš„ç»å…¸ä¾‹å­æ˜¯è®¡ç®—é˜¶ä¹˜ï¼š1234567891011121314#!/bin/bashfunction factorial &#123; if [ $1 -eq 1 ] then echo 1 else local temp=$[ $1 - 1 ] local result=$(factorial $temp) echo $[ $result * $1 ] fi&#125;read -p &quot;Enter value: &quot; valueresult=$(factorial $value)echo &quot;The factorial of $value is: $result&quot;è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 5.6.åˆ›å»ºåº“bash shellå…è®¸åˆ›å»ºå‡½æ•°åº“æ–‡ä»¶ï¼Œç„¶ååœ¨å¤šä¸ªè„šæœ¬ä¸­å¼•ç”¨è¯¥åº“æ–‡ä»¶ã€‚ç¬¬ä¸€æ­¥éœ€è¦åˆ›å»ºä¸€ä¸ªåŒ…å«è„šæœ¬ä¸­æ‰€éœ€å‡½æ•°çš„å…¬ç”¨åº“æ–‡ä»¶ï¼Œä¾‹å¦‚å®šä¹‰äº†3ä¸ªç®€å•çš„å‡½æ•°çš„åº“æ–‡ä»¶myfuncsã€‚ç¬¬äºŒæ­¥å°±æ˜¯åœ¨ç”¨åˆ°è¿™äº›å‡½æ•°çš„è„šæœ¬æ–‡ä»¶ä¸­åŒ…å«è¯¥åº“æ–‡ä»¶ï¼Œä½†æ˜¯é—®é¢˜å°±æ¥äº†ã€‚ å’Œç¯å¢ƒå˜é‡ä¸€æ ·ï¼Œshellå‡½æ•°ä»…åœ¨å®šä¹‰å®ƒçš„shellä¼šè¯å†…æœ‰æ•ˆã€‚å¦‚æœä½ åœ¨shellå‘½ä»¤è¡Œç•Œé¢çš„æç¤ºç¬¦ä¸‹è¿è¡Œmyfuncsçš„shellè„šæœ¬ï¼Œshellä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„shellå¹¶åœ¨å…¶ä¸­è¿è¡Œè¿™ä¸ªè„šæœ¬ã€‚å®ƒä¼šä¸ºé‚£ä¸ªæ–°shellå®šä¹‰è¿™ä¸‰ä¸ªå‡½æ•°ï¼Œä½†å½“ä½ è¿è¡Œå¦å¤–ä¸€ä¸ªè¦ç”¨åˆ°è¿™äº›å‡½æ•°çš„è„šæœ¬æ—¶ï¼Œå®ƒä»¬æ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚è¿™åŒæ ·é€‚ç”¨äºè„šæœ¬ï¼šå¦‚æœä½ å°è¯•åƒæ™®é€šè„šæœ¬æ–‡ä»¶é‚£æ ·è¿è¡Œåº“æ–‡ä»¶ï¼Œå‡½æ•°å¹¶ä¸ä¼šå‡ºç°åœ¨è„šæœ¬ä¸­ã€‚ä¾‹å¦‚è¿è¡Œä¸‹ä¾‹å°†æŠ¥é”™addem: command not foundï¼š12345#!/bin/bash./myfuncs# åº“æ–‡ä»¶ä¸­çš„å‡½æ•°addemå°†ä¸¤æ•°ç›¸åŠ result=$(addem 10 15)echo &quot;The result is $result&quot; ä½¿ç”¨å‡½æ•°åº“çš„å…³é”®åœ¨äºsourceå‘½ä»¤ã€‚ sourceå‘½ä»¤ä¼šåœ¨å½“å‰shellä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°shellã€‚å¯ä»¥ç”¨sourceå‘½ä»¤æ¥åœ¨shellè„šæœ¬ä¸­è¿è¡Œåº“æ–‡ä»¶è„šæœ¬ã€‚è¿™æ ·è„šæœ¬å°±å¯ä»¥ä½¿ç”¨åº“ä¸­çš„å‡½æ•°äº†ã€‚sourceå‘½ä»¤æœ‰ä¸ªå¿«æ·çš„åˆ«å.ï¼Œç§°ä½œç‚¹æ“ä½œç¬¦ï¼ˆdot operatorï¼‰ã€‚è¦åœ¨shellè„šæœ¬ä¸­è¿è¡Œmyfuncsåº“æ–‡ä»¶ï¼Œåªéœ€æ·»åŠ ï¼š. ./myfuncsã€‚å¦‚æœåº“æ–‡ä»¶å’Œshellè„šæœ¬ä¸æ˜¯ä½äºåŒä¸€ç›®å½•ï¼Œåˆ™éœ€è¦ä½¿ç”¨ç›¸åº”è·¯å¾„è®¿é—®è¯¥åº“æ–‡ä»¶ã€‚ 5.7.åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨å‡½æ•°å’Œåœ¨shellè„šæœ¬ä¸­å°†è„šæœ¬å‡½æ•°å½“å‘½ä»¤ä½¿ç”¨ä¸€æ ·ï¼Œåœ¨å‘½ä»¤è¡Œç•Œé¢çš„æç¤ºç¬¦ä¸‹ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚ä¸€æ—¦åœ¨shellä¸­å®šä¹‰äº†å‡½æ•°ï¼Œä½ å°±å¯ä»¥åœ¨æ•´ä¸ªç³»ç»Ÿä¸­ä½¿ç”¨å®ƒäº†ï¼Œæ— éœ€æ‹…å¿ƒè„šæœ¬æ˜¯ä¸æ˜¯åœ¨PATHç¯å¢ƒå˜é‡é‡Œã€‚é‡ç‚¹åœ¨äºè®©shellèƒ½å¤Ÿè¯†åˆ«è¿™äº›å‡½æ•°ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š åœ¨å‘½ä»¤è¡Œä¸Šåˆ›å»ºå‡½æ•°ï¼› åœ¨.bashrcæ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°ã€‚ å¯¹äºç®€å•çš„å‡½æ•°ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šç›´æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸ºshellä¼šè§£é‡Šç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ã€‚å¦‚æœé‡‡ç”¨å•è¡Œæ–¹å¼å®šä¹‰å‡½æ•°ï¼Œå¿…é¡»åœ¨æ¯ä¸ªå‘½ä»¤åé¢åŠ ä¸ªåˆ†å·ï¼Œè¿™æ ·shellå°±èƒ½çŸ¥é“åœ¨å“ªé‡Œæ˜¯å‘½ä»¤çš„èµ·æ­¢äº†ï¼›å¦‚æœé‡‡ç”¨å¤šè¡Œæ–¹å¼å®šä¹‰å‡½æ•°ï¼Œåˆ™ä¸éœ€è¦æ·»åŠ åˆ†å·ï¼Œåªéœ€è¦å›è½¦å³å¯ã€‚å¦‚å›¾æ‰€ç¤ºï¼šæ³¨æ„ï¼šåœ¨å‘½ä»¤è¡Œä¸Šåˆ›å»ºå‡½æ•°æ—¶ï¼Œå¦‚æœä½ ç»™å‡½æ•°èµ·äº†ä¸ªè·Ÿå†…å»ºå‘½ä»¤æˆ–å¦ä¸€ä¸ªå‘½ä»¤ç›¸åŒçš„åå­—ï¼Œå‡½æ•°å°†ä¼šè¦†ç›–åŸæ¥çš„å‘½ä»¤ã€‚ åœ¨å‘½ä»¤è¡Œä¸Šåˆ›å»ºå‡½æ•°ä¸ä»…è¾“å…¥ä¸ä¾¿ï¼Œè€Œä¸”æœ€ä¸»è¦çš„é—®é¢˜æ˜¯é€€å‡ºshellæ—¶å‡½æ•°å°±æ¶ˆå¤±äº†ã€‚æœ€ç®€å•çš„è§£å†³åŠæ³•å°±æ˜¯å°†å‡½æ•°å®šä¹‰åœ¨.bashrcæ–‡ä»¶ä¸­ï¼Œbash shellåœ¨æ¯æ¬¡å¯åŠ¨æ—¶éƒ½ä¼šåœ¨ä¸»ç›®å½•ä¸‹æŸ¥æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œä¸ç®¡æ˜¯äº¤äº’å¼shellè¿˜æ˜¯ä»ç°æœ‰shellä¸­å¯åŠ¨çš„æ–°shellã€‚ ç›´æ¥å®šä¹‰å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥åœ¨ä¸»ç›®å½•ä¸‹çš„.bashrcæ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°ã€‚è®¸å¤šLinuxå‘è¡Œç‰ˆå·²ç»åœ¨.bashrcæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€äº›ä¸œè¥¿ï¼Œæ‰€ä»¥æ³¨æ„ä¸è¦è¯¯åˆ äº†ï¼ŒæŠŠä½ å†™çš„å‡½æ•°æ”¾åœ¨æ–‡ä»¶æœ«å°¾å°±è¡Œäº†ã€‚ è¯»å–å‡½æ•°æ–‡ä»¶ï¼Œåªè¦æ˜¯åœ¨shellè„šæœ¬ä¸­ï¼Œéƒ½å¯ä»¥ç”¨sourceå‘½ä»¤ï¼ˆæˆ–è€…å®ƒçš„åˆ«å.æ“ä½œç¬¦ï¼‰å°†åº“æ–‡ä»¶ä¸­çš„å‡½æ•°æ·»åŠ åˆ°.bashrcè„šæœ¬ä¸­ã€‚ shellè¿˜ä¼šå°†å®šä¹‰å¥½çš„å‡½æ•°ä¼ ç»™å­shellè¿›ç¨‹ï¼Œè¿™æ ·ä¸€æ¥ï¼Œè¿™äº›å‡½æ•°å°±è‡ªåŠ¨èƒ½å¤Ÿç”¨äºè¯¥shellä¼šè¯ä¸­çš„ä»»ä½•shellè„šæœ¬äº†ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"}],"tags":[{"name":"shell","slug":"shell","permalink":"https://hwame.top/tags/shell/"}]},{"title":"æ­å»ºGithubå›¾åºŠå¹¶åˆ©ç”¨jsDelivråŠ é€Ÿ","slug":"github-pics-with-jsdelivr","date":"2020-11-25T03:13:37.000Z","updated":"2020-11-27T01:56:23.000Z","comments":true,"path":"20201125/github-pics-with-jsdelivr.html","link":"","permalink":"https://hwame.top/20201125/github-pics-with-jsdelivr.html","excerpt":"æ‘˜è¦ï¼šä¹‹å‰éƒ½æ˜¯å°†åšæ–‡å›¾ç‰‡ç›´æ¥æ”¾åœ¨imagesæ–‡ä»¶å¤¹ä¸‹ï¼Œå›¾ç‰‡åŠ è½½è¾ƒæ…¢ï¼Œæ•…æ­å»ºGithubå›¾åºŠå¹¶åˆ©ç”¨jsDelivråŠ é€Ÿï¼ˆå…ˆçœ‹åè®°æœ‰æƒŠå–œï¼‰ã€‚","text":"æ‘˜è¦ï¼šä¹‹å‰éƒ½æ˜¯å°†åšæ–‡å›¾ç‰‡ç›´æ¥æ”¾åœ¨imagesæ–‡ä»¶å¤¹ä¸‹ï¼Œå›¾ç‰‡åŠ è½½è¾ƒæ…¢ï¼Œæ•…æ­å»ºGithubå›¾åºŠå¹¶åˆ©ç”¨jsDelivråŠ é€Ÿï¼ˆå…ˆçœ‹åè®°æœ‰æƒŠå–œï¼‰ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20201125/github-pics-with-jsdelivr.html 1.æ­å»ºGithubå›¾åºŠ1.1.æ–°å»ºä»“åº“ç™»é™†Githubè´¦æˆ·ï¼Œæ–°å»ºä»“åº“ã€æˆ–ç›´æ¥ç‚¹å‡»https://github.com/newã€‘ï¼ŒæŒ‰å¦‚ä¸‹è®¾ç½®åç‚¹å‡»Create repositoryï¼Œå¦‚å›¾æ‰€ç¤ºï¼š Repository nameï¼šä»“åº“åç§°ï¼ˆè‹±æ–‡ï¼‰ï¼Œå³å›¾åºŠåï¼› Descriptionï¼šæè¿°ï¼› Public/Privateï¼šé€‰æ‹©å…¬å¼€ï¼› Add a README fileï¼šä½¿ç”¨README.mdåˆå§‹åŒ–ï¼Œå¯é€‰ã€‚ 1.2.ä¸Šä¼ å›¾ç‰‡ä»“åº“åˆ›å»ºå®Œæˆåï¼Œå°±å·²ç»å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚å¯ä»¥ç›´æ¥åœ¨ç½‘é¡µç«¯ç‚¹å‡»Add fileâ†’Upload fileså³å¯ä¸Šä¼ æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–è½¯ä»¶ï¼Œå¦‚PicGoç­‰ã€éœ€è¦è®¿é—®ä»¤ç‰Œï¼Œè§ä¸‹æ–‡ã€‘ã€‚ 1.3.ä½¿ç”¨å›¾ç‰‡å¯¹äºä»“åº“ä¸­çš„æ–‡ä»¶ï¼ˆå›¾ç‰‡ï¼‰ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼šè¯´æ˜ï¼šä½¿ç”¨jsDelivrçš„CDNåŠ é€ŸæœåŠ¡ï¼Œå®ƒå¯ä»¥åŠ é€ŸGithubä»“åº“çš„æ–‡ä»¶ï¼Œå…è´¹ä¸”æ— éœ€æ³¨å†Œã€æ— éœ€é¢å¤–é…ç½®ï¼Œåªéœ€è¦ä¸€ä¸ªæ­£ç¡®çš„URLå³å¯ã€‚12345# ç›´æ¥å¼•ç”¨![å›¾ç‰‡æè¿°](https://raw.githubusercontent.com/username/repos/branch/path/xxx.png)# ä½¿ç”¨CDNåŠ é€Ÿ![å›¾ç‰‡æè¿°](https://cdn.jsdelivr.net/gh/username/repos@version/path/xxx.png)ä»¥ä¸‹æ˜¯ä¸¤ç§æ–¹å¼ä½¿ç”¨æ•ˆæœï¼Œæ„Ÿå—ä¸€ä¸‹åŠ è½½é€Ÿåº¦çš„åŒºåˆ«ï¼š https://raw.githubusercontent.com/hwame/pics/main/avatar.jpg https://cdn.jsdelivr.net/gh/hwame/pics@main/avatar.jpg 2.ä½¿ç”¨PicGoä¸Šä¼ å›¾ç‰‡2.1.è¯´æ˜PicGoæ˜¯ä¸€ä¸ªç”¨äºå¿«é€Ÿä¸Šä¼ å›¾ç‰‡å¹¶è·å–å›¾ç‰‡URLé“¾æ¥çš„å¼€æºå·¥å…·ï¼Œä½¿ç”¨å®ƒå¯ä»¥è§£æ”¾å†™ä½œåŒæ‰‹ã€æé«˜ç”Ÿäº§åŠ›ã€‚ä½¿ç”¨PicGoçš„åŸå› ä»…ä»…æ˜¯å› ä¸ºèƒ½å¤Ÿæ–¹ä¾¿åœ°å°†ä¸Šä¼ å›¾ç‰‡åˆ°Githubï¼Œå¹¶ç›´æ¥è·å–jsDelivrçš„åŠ é€Ÿåçš„å›¾ç‰‡åœ°å€ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://github.com/Molunerfinn/PicGo/releases è¯´æ˜ï¼šç”±äºä½¿ç”¨PicGoä¸Šä¼ æ–‡ä»¶éœ€è¦è·å–æ§åˆ¶ä»“åº“çš„æƒé™ï¼Œå› æ­¤éœ€è¦è®¿é—®ä»¤ç‰Œï¼Œå¦‚æœä¸éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·ä¸Šä¼ ï¼Œåˆ™æ— éœ€æ­¤æ­¥éª¤ï¼Œè‡ªè¡Œå–èˆï¼ˆæ¯”å¦‚æˆ‘è¿˜æ˜¯å–œæ¬¢è‡ªå·±åŠ¨åŠ¨æ‰‹ï¼‰ã€‚è¯´æ˜ï¼šç”±äºæˆ‘æœªä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œæ­¤éƒ¨åˆ†ä¸»è¦ç›®çš„æ˜¯è§£é‡Šä¸€ä¸‹tokenå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå†…å®¹å‚è€ƒå¦‚é£è’¹è‘­çš„æ–‡ç« ä½¿ç”¨ jsDelivr CDN åŠ é€Ÿ Github ä»“åº“çš„å›¾ç‰‡ï¼Œä»¥ä½œä¸ºåšå®¢çš„å›¾åºŠã€‚ 2.2.ç”Ÿæˆä»¤ç‰Œä»¥æ­¤ç‚¹å‡»å¤´åƒâ†’Settingsâ†’Developer settingsâ†’Personal access tokensã€æˆ–ç›´æ¥ç‚¹å‡»https://github.com/settings/tokensã€‘ï¼Œå¯ä»¥çœ‹åˆ°å·²æœ‰çš„è®¿é—®ä»¤ç‰Œï¼Œä½†æ˜¯å£ä»¤åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸å¯å¤ç”¨ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆã€‚ç‚¹å‡»Generate new tokenï¼Œå¯èƒ½éœ€è¦è¾“å…¥å¯†ç ï¼Œåœ¨ New personal access tokenä¸­å¡«å†™å¤‡æ³¨ã€å‹¾é€‰repoæ•´ä¸ªå¤é€‰æ¡†ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ æœ€åç‚¹å‡»Generate tokenå³å¯ï¼Œå°†ç”Ÿæˆçš„tokenã€å›¾ä¸­æ‰“ç å¤„ã€‘å¤åˆ¶ä¿å­˜ï¼Œåªæ˜¾ç¤ºä¸€æ¬¡ï¼Œå¦åˆ™éœ€è¦é‡æ–°ç”Ÿæˆï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ 2.3.PicGoé…ç½®ä¸‹è½½å®‰è£…å¥½ä»¥åï¼Œé…ç½®ã€ŒGithubå›¾åºŠã€ï¼š è®¾å®šä»“åº“åï¼šGithubä»“åº“ï¼Œæ ¼å¼ä¸ºusername/reposï¼Œç¤ºä¾‹ï¼šhwame/picsã€‚ è®¾å®šåˆ†æ”¯åï¼šGithubä»“åº“çš„åˆ†æ”¯ï¼Œæ ¼å¼ä¸ºbranchï¼Œç¤ºä¾‹ï¼šmainã€‚ æ³¨æ„ï¼šç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼ŒGithubæ–°åˆ›å»ºçš„ä»“åº“é»˜è®¤åˆ†æ”¯å·²ä¸å†æ˜¯masterè€Œæ˜¯mainäº†ï¼ï¼ è®¾å®šTokenï¼šå³ä¸Šä¸€æ­¥ç”Ÿæˆçš„è®¿é—®ä»¤ç‰Œã€‚ æŒ‡å®šå­˜å‚¨è·¯å¾„ï¼šå¯é€‰ã€‚ä¸å¡«åˆ™ä¸ºä»“åº“æ ¹ç›®å½•ï¼Œå»ºè®®æŒ‰å›¾ç‰‡åˆ†ç±»æ”¾åœ¨ä¸åŒæ–‡ä»¶å¤¹ä¸‹ã€‚ è®¾å®šè‡ªå®šä¹‰åŸŸåï¼šæ­¤å³jsDelivrçš„é…ç½®ï¼Œæ ¼å¼ä¸ºhttps://cdn.jsdelivr.net/gh/username/repos@branchï¼Œç¤ºä¾‹ï¼šhttps://cdn.jsdelivr.net/gh/hwame/pics@main ghï¼šè¡¨ç¤ºæ¥è‡ªGithubçš„å†…å®¹ï¼› usernameï¼šGithubç”¨æˆ·åï¼› reposï¼šGithubä»“åº“ï¼› branchï¼šä»“åº“åˆ†æ”¯ï¼Œæ³¨æ„æ˜¯masterè¿˜æ˜¯mainã€‚ 2.4.PicGoä½¿ç”¨PicGoé…ç½®å®Œæˆåå³å¯ä½¿ç”¨äº†ï¼Œå®ƒæ”¯æŒæ‹–æ‹½ã€ç‚¹å‡»ã€å‰ªè´´æ¿ä¸Šä¼ ï¼Œä¸Šä¼ åï¼Œå›¾ç‰‡é“¾æ¥ç›´æ¥å¤åˆ¶çš„ä½ çš„å‰ªè´´æ¿ä¸­ï¼Œæå¤§åœ°æé«˜äº†ç”Ÿäº§æ•ˆç‡ã€‚ 3.å›¾åºŠè¿ç§»æˆªè‡³ç›®å‰ï¼Œåšå®¢ä½¿ç”¨çš„ã€Œå›¾åºŠã€å…±æœ‰ä»¥ä¸‹å‡ ç§ï¼š è·¯è¿‡å›¾åºŠï¼š ä¼˜ç‚¹ï¼šå…è´¹ä¸”ç¨³å®šï¼Œå¯åˆ›å»ºå¤šç›¸å†Œï¼Œå›¾ç‰‡å¯æ ‡è®° ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–ä½¿ç”¨é‚®ç®±æ³¨å†Œè´¦å·ï¼Œå†…å®¹ä¸æ˜“ç»´æŠ¤ é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼š ä¼˜ç‚¹ï¼šå¯¹æ–‡ä»¶æ‹¥æœ‰ç»å¯¹æƒé™ï¼Œå¯å®šåˆ¶ç¨‹åº¦é«˜ï¼Œä»»ä½•éƒ¨åˆ†éƒ½å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°é…ç½®ï¼ˆåªè¦ä½ æœ‰é’èƒ½åŠ›ï¼‰ ç¼ºç‚¹ï¼šä»·æ ¼ä¸ç½‘ç»œå¸¦å®½ç›´æ¥æŒ‚é’©ï¼Œæœ‰ä½¿ç”¨æœŸé™ï¼ŒæœåŠ¡å™¨åˆ°æœŸåæ–‡ä»¶è¿ç§»åŠåšå®¢å†…å®¹æ›´æ–°è€—æ—¶è´¹åŠ›ï¼Œæœ€ä¸»è¦è¿˜æ˜¯è´µï¼ ç›´æ¥å¼•ç”¨Githubå›¾ç‰‡ï¼š ç›´æ¥å¼•ç”¨åªåœ¨ã€Œæ–‡ç« ç¼©ç•¥å›¾ã€ä½œä¸ºå›¾æ ‡å¼•ç”¨çš„ï¼Œä¾‹å¦‚Hexo Logoï¼Œå›¾æ ‡æ–‡ä»¶ä¸€èˆ¬è¾ƒå°ï¼Œå› æ­¤æ²¡å¿…è¦æ”¾åˆ°å›¾åºŠä¸Šï¼Œä¸å¿…è¿ç§» ç›´æ¥æ”¾åœ¨ã€Œæœ¬åœ°ã€ï¼Œå’Œåšå®¢æ–‡ä»¶æ”¾åœ¨ä¸€èµ·ï¼š ä¼˜ç‚¹ï¼šé™æ€æ–‡ä»¶éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œç®¡ç†è¾ƒä¸ºæ–¹ä¾¿ ç¼ºç‚¹ï¼šæ…¢ï¼ åŸºäºä»¥ä¸Šå› ç´ ï¼Œæˆ‘å†³å®šå°†æ‰€æœ‰å›¾ç‰‡éƒ½æ”¾åœ¨Githubå›¾åºŠä¸Šï¼Œå¹¶ä½¿ç”¨jsDelivråŠ é€Ÿï¼Œè¿ç§»å†…å®¹ä¸»è¦æœ‰ï¼š æ–‡ç« å›¾ç‰‡ï¼› ç›¸å†Œå›¾ç‰‡ï¼› æœ€æ–°æ–‡ç« ç¼©ç•¥å›¾ï¼› ç›®å‰çœ‹æ¥ä½“éªŒè¿˜ä¸é”™ã€‚æœ€ä¸»è¦çš„æ˜¯ï¼ŒHexoåšå®¢çš„æ–‡ä»¶å’Œå›¾ç‰‡æ–‡ä»¶éƒ½æ‰˜ç®¡åœ¨Githubä¸Šäº†ï¼Œç®¡ç†èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä¸ç”¨æ‹…å¿ƒæœåŠ¡å™¨æŒ‚æ‰æˆ–è€…åˆ°æœŸï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå…¶ä»–å›¾åºŠå¤±æ•ˆï¼Œè€Œä¸”é€šè¿‡jsDelivråŠ é€Ÿåå›¾ç‰‡èµ„æºåŠ è½½é€Ÿåº¦æœ‰æ˜æ˜¾æ”¹å–„ï¼Œç½‘ç«™æµè§ˆä½“éªŒæ»¡åˆ†~ 4.åè®°å†™åˆ°è¿™é‡Œå…¶å®å¯ä»¥å‘ç°ï¼ŒjsDelivrå’Œå›¾ç‰‡åœ¨å“ªä¸ªä»“åº“å¹¶æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼æˆ‘ä»¬ä¸å¿…å•ç‹¬æ–°å»ºä»“åº“ï¼Œåœ¨./themes/pure/source/æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶éƒ½ä¼šç›´æ¥ä¸Šä¼ åˆ°hwame.github.ioä»“åº“çš„æ ¹ç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨./themes/pure/source/images/ä¸‹çš„æ–‡ä»¶ä¼šåŒæ­¥åˆ°hwame/hwame.github.io/images/ä¸‹ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨jsDelivråŠ é€Ÿï¼ åªéœ€è¦å°†åŸæ¥çš„å›¾ç‰‡åœ°å€/images/xxx.pngå¯¹åº”ä¿®æ”¹ä¸ºhttps://cdn.jsdelivr.net/gh/hwame/hwame.github.io@master/images/xxx.pngå³å¯ï¼ŒåŒä¸€å¼ å›¾ç‰‡ã€Githubæ–‡ä»¶ä½ç½®ã€‘çš„æµ‹è¯•ï¼š https://hwame.top/images/avatar.jpg https://cdn.jsdelivr.net/gh/hwame/hwame.github.io@master/images/avatar.jpg ç»“è®ºï¼šæ‰€ä»¥æ²¡å¿…è¦é‡æ–°åˆ›å»ºå›¾åºŠä»“åº“ï¼Œåªéœ€è¦æ›´æ–°ä¸€ä¸‹æ–‡ç« çš„å›¾ç‰‡é“¾æ¥å³å¯ã€‚","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/tags/Hexo/"}]},{"title":"å¾ªç¯ä¸­çš„lambdaå‡½æ•°äº§ç”Ÿçš„ä½œç”¨åŸŸåŠé—­åŒ…é—®é¢˜","slug":"python-lambda-in-a-for-loop","date":"2020-10-20T08:45:08.000Z","updated":"2020-11-27T06:17:30.000Z","comments":true,"path":"20201020/python-lambda-in-a-for-loop.html","link":"","permalink":"https://hwame.top/20201020/python-lambda-in-a-for-loop.html","excerpt":"æ‘˜è¦ï¼šåœ¨Pythonå¾ªç¯ä¸­å®šä¹‰å‡½æ•°æ—¶æ¶‰åŠåˆ°çš„ä½œç”¨åŸŸå’Œé—­åŒ…ç­‰é—®é¢˜ã€‚","text":"æ‘˜è¦ï¼šåœ¨Pythonå¾ªç¯ä¸­å®šä¹‰å‡½æ•°æ—¶æ¶‰åŠåˆ°çš„ä½œç”¨åŸŸå’Œé—­åŒ…ç­‰é—®é¢˜ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µå‚è€ƒå†…å®¹ï¼š ä¸ºä»€ä¹ˆåœ¨å…·æœ‰ä¸åŒå€¼çš„å¾ªç¯ä¸­å®šä¹‰çš„lambdaséƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Ÿ Pythonç»å…¸çš„å¤§å‘é—®é¢˜ï¼šlambdaå’Œå¾ªç¯ä½œç”¨åŸŸé—®é¢˜ Python Lambda in a loop What do lambda function closures capture? æ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20201020/python-lambda-in-a-for-loop.html 1.èƒŒæ™¯æœ€è¿‘æœ‰åŒå­¦é—®æˆ‘ä¸€ä¸ªä½¿ç”¨scipyè¿›è¡Œå‚æ•°ä¼˜åŒ–çš„é—®é¢˜ï¼Œç›®æ ‡å‡½æ•°ï¼š f(x) = \\frac{a + x_1}{b + x_2} - c \\times x_3 + d \\times x_4ç”±äºæ¶‰åŠåˆ°è¾ƒå¤šçš„å‚æ•°å’Œçº¦æŸæ¡ä»¶ï¼Œå› æ­¤è€ƒè™‘ä½¿ç”¨forå¾ªç¯ï¼Œç¨‹åºä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324from scipy.optimize import minimizeimport numpy as npdef fun(args): # ç›®æ ‡å‡½æ•°åŠç³»æ•° a, b, c, d = args return lambda x: (a + x[0]) / (b + x[1]) - c * x[0] + d * x[2]def cons(): # çº¦æŸæ¡ä»¶constraintsï¼Œæš‚æ—¶ç•¥è¿‡ cons = [fun1, fun2, fun3, fun4, fun5, fun6] return consif __name__ == &quot;__main__&quot;: args = (2, 1, 3, 4) # å®šä¹‰å¸¸é‡å€¼a, b, c, d cons = cons() # ç”Ÿæˆçº¦æŸ x0 = np.asarray((0.5, 0.5, 0.5)) # è®¾ç½®åˆå§‹çŒœæµ‹å€¼ # å¼€å§‹ä¼˜åŒ– res = minimize(fun(args), x0, method=&#x27;SLSQP&#x27;, constraints=cons) print(res.fun) # ä¼˜åŒ–ç»“æœï¼Œå³æœ€ä¼˜ç›®æ ‡å‡½æ•°å€¼ print(res.success) # ä¼˜åŒ–çŠ¶æ€ï¼Œå³æ˜¯å¦æˆåŠŸ print(res.x) # ä¼˜åŒ–ç»“æœï¼Œå³xçš„æœ€ä¼˜è§£ å¯¹äºçº¦æŸå‡½æ•°çš„ç”Ÿæˆï¼Œç”±äºæ¯ä¸ª $x$ åˆ†é‡éƒ½æœ‰ä¸€ä¸ªä¸Šç•Œå’Œä¸‹ç•Œï¼ŒèŒƒå›´ä¸º$[0.1, 0.9]$ï¼Œæ‰€ä»¥çº¦æŸæ¡ä»¶ä¼šéšåˆ†é‡çš„å¢å¤šå‘ˆçº¿æ€§å¢é•¿ï¼Œå› æ­¤å†™æ­»æ˜¯ä¸ç°å®çš„ï¼Œè€ƒè™‘ç”¨forå¾ªç¯ï¼š12345678910111213141516171819# ç›´æ¥æŠŠæ‰€æœ‰æƒ…å†µå†™æ­»def cons(): cons = (&#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x: x[0] - 0.1&#125;, &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x: -x[0] + 0.9&#125;, &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x: x[1] - 0.1&#125;, &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x: -x[1] + 0.9&#125;, &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x: x[2] - 0.1&#125;, &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x: -x[2] + 0.9&#125;) return cons# å€ŸåŠ©forå¾ªç¯def cons(): cons = [] for i in range(3): b = &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x: x[i] - 0.1&#125; c = &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x: 0.9 - x[i]&#125; cons.append(b) cons.append(c) return cons 2.é—®é¢˜æè¿°æ˜¾ç„¶ï¼Œä½¿ç”¨å¾ªç¯çš„æ–¹å¼ä¾¿äºç¨‹åºçš„æ‹“å±•ï¼Œè€Œä¸”ä¹Ÿçœæ—¶ï¼Œä½†æ˜¯ä¼šå‡ºä¸€ä¸ªé—®é¢˜ï¼šç”Ÿæˆçš„consçº¦æŸå‡½æ•°åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆï¼Œä¸”æ‰€æœ‰å‡½æ•°éƒ½ç›¸åŒã€‚ è¿™ä¸ªé—®é¢˜æˆ‘æ›¾ç»é‡åˆ°è¿‡ï¼Œç¬¬ä¸€ååº”å°±ç¡®å®šäº†é—®é¢˜å‡ºåœ¨å¾ªç¯ä¸Šã€‚å°½ç®¡å½“æ—¶è§£å†³äº†å´å¹¶æ²¡æœ‰å®Œå…¨å¼„æ‡‚å®ƒï¼Œä»¥è‡´äºå†æ¬¡é‡åˆ°è¿˜æ˜¯ä¸€è„¸æ‡µé€¼ï¼Œå› æ­¤æŸ¥é˜…äº†è¯¦ç»†çš„èµ„æ–™ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ¥ã€‚ 3.åŸå› åˆ†æ3.1.é—®é¢˜å¼•å…¥ å€ŸåŠ©å®˜æ–¹æ–‡æ¡£ä¸­ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ã€‚ 12345678func = []for myx in range(4): func.append(lambda: myx**2)# è°ƒç”¨å‡½æ•°func[0](), func[1](), func[2](), func[3]()# é¢„æœŸç»“æœï¼š(0, 1, 4, 9)# å®é™…ç»“æœï¼š(9, 9, 9, 9) 3.2.åŸå› è§£é‡Šæ¥è‡ªå®˜æ–¹æ–‡æ¡£çš„è§£é‡Šï¼š å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸ºmyxä¸æ˜¯lambdasçš„å†…éƒ¨å˜é‡ï¼Œè€Œæ˜¯åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­å®šä¹‰ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨lambdaæ—¶è®¿é—®å®ƒâ€”â€”è€Œä¸æ˜¯åœ¨å®šä¹‰å®ƒæ—¶ã€‚å½“å¾ªç¯ç»“æŸæ—¶ï¼Œmyxçš„å€¼æ˜¯3ï¼Œæ‰€ä»¥æ‰€æœ‰çš„å‡½æ•°ç°åœ¨è¿”å›3**2ï¼Œå³9ã€‚ä½ å¯ä»¥é€šè¿‡æ›´æ”¹myxçš„å€¼æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œå³ä½¿é€€å‡ºäº†å¾ªç¯ï¼Œåˆ—è¡¨ä¸­çš„å‡½æ•°ä»ç„¶å‘ç”Ÿäº†å˜åŒ–ä¸”æ˜¯æ‰€æœ‰å¹¶æŸ¥çœ‹lambdasçš„ç»“æœå¦‚ä½•å˜åŒ–:123myx = 8func[1]()# è¾“å‡ºï¼š64ï¼Œä¸”func[0](), func[2](), func[3]()çš†è¾“å‡º64 3.3.ä½œç”¨åŸŸå’Œé—­åŒ…æ¥è‡ªMax Shawabkehçš„è§£é‡Šï¼ŒåŸæ–‡é“¾æ¥ï¼š Scoping in Python is dynamic and lexical. A closure will always remember the name and scope of the variable, not the object itâ€™s pointing to. Since all the functions in your example are created in the same scope and use the same variable name, they always refer to the same variable. ç¿»è¯‘ï¼šPythonçš„ä½œç”¨åŸŸæ˜¯åŠ¨æ€ä¸”è¯æ±‡ä¸°å¯Œçš„ã€‚é—­åŒ…å°†å§‹ç»ˆè®°ä½å˜é‡çš„åç§°å’ŒèŒƒå›´ï¼Œè€Œä¸æ˜¯å…¶æŒ‡å‘çš„å¯¹è±¡ã€‚ç”±äºç¤ºä¾‹ä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½æ˜¯åœ¨åŒä¸€ä½œç”¨åŸŸä¸­åˆ›å»ºçš„ï¼Œå¹¶ä¸”ä½¿ç”¨ç›¸åŒçš„å˜é‡åç§°ï¼Œå› æ­¤å®ƒä»¬å§‹ç»ˆå¼•ç”¨ç›¸åŒçš„å˜é‡ã€‚ æ¥è‡ªClaudiuçš„è§£é‡Šï¼š Python has static scoping, not dynamic scoping.. itâ€™s just all variables are references, so when you set a variable to a new object, the variable itself (the reference) has the same location, but it points to something else. ç¿»è¯‘ï¼šPythonå…·æœ‰é™æ€ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯åŠ¨æ€ä½œç”¨åŸŸã€‚å®ƒåªæ˜¯æ‰€æœ‰å˜é‡éƒ½æ˜¯å¼•ç”¨ï¼Œå› æ­¤å½“æ‚¨å°†å˜é‡è®¾ç½®ä¸ºæ–°å¯¹è±¡æ—¶ï¼Œå˜é‡æœ¬èº«ï¼ˆå¼•ç”¨ï¼‰å…·æœ‰ç›¸åŒçš„ä½ç½®ï¼Œä½†æŒ‡å‘å…¶ä»–å¯¹è±¡ã€‚ æ¥è‡ªæ¬¢å–œæ˜çš„è§£é‡Šï¼ŒåŸæ–‡é“¾æ¥ï¼š å‡½æ•°åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰åˆ†é…å†…å­˜ç©ºé—´ç”¨æ¥ä¿å­˜ä»»ä½•å˜é‡çš„å€¼ï¼Œåªæœ‰åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰ä¼šåˆ†é…ç©ºé—´ä¿å­˜å˜é‡çš„å€¼ã€‚ Pythonçš„ä½œç”¨åŸŸç”±defã€classã€lambdaç­‰è¯­å¥äº§ç”Ÿï¼Œè€Œifã€tryã€forç­‰è¯­å¥å¹¶ä¸ä¼šäº§ç”Ÿæ–°çš„ä½œç”¨åŸŸã€‚ Pythonå˜é‡åå¼•ç”¨çš„æŸ¥æ‰¾é¡ºåºä¸ºï¼š â‘ æœ¬åœ°ä½œç”¨åŸŸï¼ˆLocalï¼‰ï¼› â‘¡å¤–å›´ä½œç”¨åŸŸï¼Œå³å½“å‰ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªå†…åµŒä½œç”¨åŸŸï¼ˆEnclosing Localsï¼‰ï¼› â‘¢å…¨å±€/æ¨¡å—ä½œç”¨åŸŸï¼ˆGlobalï¼‰ï¼Œå³æ¨¡å—å†…çš„ä½œç”¨åŸŸï¼Œå…¶ä½œç”¨èŒƒå›´æ˜¯å•ä¸€æ–‡ä»¶å†…ï¼› â‘£å†…ç½®ä½œç”¨åŸŸï¼ˆBuilt-inï¼‰ã€‚ æ¥è‡ªåƒå±±é£é›ªçš„è§£é‡Šï¼ŒåŸæ–‡é“¾æ¥ï¼š åœ¨ä¸€ä¸ªå†…éƒ¨å‡½æ•°ä¸­ï¼Œå¯¹å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡è¿›è¡Œå¼•ç”¨ï¼Œ(å¹¶ä¸”ä¸€èˆ¬å¤–éƒ¨å‡½æ•°çš„è¿”å›å€¼ä¸ºå†…éƒ¨å‡½æ•°)ï¼Œé‚£ä¹ˆå†…éƒ¨å‡½æ•°å°±è¢«è®¤ä¸ºæ˜¯é—­åŒ…ã€‚ é—­åŒ…æ— æ³•ä¿®æ”¹å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼›pythonå¾ªç¯ä¸­ä¸åŒ…å«åŸŸçš„æ¦‚å¿µã€‚ æ¥è‡ªWalter Mundtçš„è§£é‡Šï¼ŒåŸæ–‡é“¾æ¥ï¼š The corollary is that the outer function can change i but the inner function cannot (since that would make i a local instead of a closure based on Pythonâ€™s syntactic rules). ç¿»è¯‘ï¼šç»“è®ºæ˜¯å¤–éƒ¨å‡½æ•°å¯ä»¥æ›´æ”¹iï¼Œè€Œå†…éƒ¨å‡½æ•°åˆ™ä¸èƒ½ï¼ˆå› ä¸ºè¿™å°†ä½¿iæˆä¸ºå±€éƒ¨å˜é‡ï¼Œè€Œä¸æ˜¯åŸºäºPythonè¯­æ³•è§„åˆ™çš„é—­åŒ…ï¼‰ã€‚ 3.4.è§£å†³æ–¹æ¡ˆ ä»¥ä¸Šæ–‡æ‰€ä¸¾çš„ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ã€‚1234# ä¸€ä¸ªç®€å•çš„ä¾‹å­func = []for myx in range(4): func.append(lambda: myx**2) æ–¹æ¡ˆä¸€ï¼šå¸¦é»˜è®¤å€¼çš„å‚æ•°â‘ ä½¿ç”¨å…·æœ‰é»˜è®¤å€¼çš„å‚æ•°æ¥å¼ºåˆ¶æ•è·å˜é‡ï¼Œå³å®˜æ–¹æ–‡æ¡£æ‰€è°“ä¹‹ã€Œå°†å€¼ä¿å­˜åœ¨lambdasçš„å±€éƒ¨å˜é‡ä¸­ã€ï¼š123func = []for myx in range(4): func.append(lambda tmp=myx: tmp**2)â‘¡ä¸Šè¿°æ–¹æ³•â‘ ç­‰ä»·çš„å†™æ³•ï¼š12345func = []for myx in range(4): def myfunc(tmp=myx): return tmp**2 func.append(myfunc) æ–¹æ¡ˆäºŒï¼šä½¿å†…éƒ¨å‡½æ•°æˆä¸ºé—­åŒ…â‘ åˆ›å»ºä¸€ä¸ªå¤–éƒ¨å‡½æ•°åŒ…è£¹å†…éƒ¨å‡½æ•°ï¼Œä½¿å†…éƒ¨å‡½æ•°æˆä¸ºé—­åŒ…ï¼Œ1234567func = []for myx in range(4): def makefunc(myx): def myfunc(): return myx**2 return myfunc func.append(makefunc(myx))â‘¡ä¸Šè¿°æ–¹æ³•â‘ å¯ä»¥ç®€åŒ–ä¸ºä½¿ç”¨å•ä¸ªçš„makefunc()å‡½æ•°ï¼š12345678def makefunc(myx): def myfunc(): return myx**2 return myfuncfunc = []for myx in range(4): func.append(makefunc(myx))â‘¢å½“å†…éƒ¨å‡½æ•°è¾ƒä¸ºç®€å•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨lambdaç®€åŒ–ä»£ç ï¼š123456def makefunc(param): return lambda: param**2func = []for myx in range(4): func.append(makefunc(myx))â‘£åŒæ ·ï¼Œå¯ä»¥ä½¿ç”¨åµŒå¥—çš„lambdaå‡½æ•°ç®€åŒ–ä¸Šè¿°æ–¹æ³•â‘ çš„ä»£ç ï¼Œè¿™å¯èƒ½çœ‹èµ·æ¥ä¸å¤ªç›´è§‚ï¼š123func = []for myx in range(4): func.append((lambda myx: lambda: myx**2)(myx)) æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨æ ‡å‡†åº“å‡½æ•°partialPythonçš„functoolsæ¨¡å—æä¾›äº†ã€Œåå‡½æ•°partialã€ï¼Œå…¶è¿”å›ä¸€ä¸ªæ–°çš„ã€Œpartialå¯¹è±¡ã€ï¼ˆå‚è€ƒè¿™é‡Œï¼‰ï¼Œå®ƒä¼šè¢«ã€Œå†»ç»“äº†ã€ä¸€éƒ¨åˆ†å‡½æ•°å‚æ•°å’Œ/æˆ–å…³é”®å­—çš„éƒ¨åˆ†å‡½æ•°åº”ç”¨æ‰€ä½¿ç”¨ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªå…·æœ‰ç®€åŒ–ç­¾åçš„æ–°å¯¹è±¡ã€‚å®˜æ–¹æ–‡æ¡£å¦‚å›¾æ‰€ç¤ºï¼š å…¶ä»–å‚è€ƒèµ„æ–™ï¼š å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ä¹‹åå‡½æ•°ï¼› æå®¢å­¦é™¢ä¹‹Pythonçš„partialå‡½æ•°ï¼› èœé¸Ÿæ•™ç¨‹ä¹‹Pythonåå‡½æ•°ï¼› æ–¹æ¡ˆä¸‰ä»£ç ï¼š1234from functools import partialfunc = []for myx in range(4): func.append(partial(lambda param: param**2, myx)) Georgyè®¤ä¸ºï¼Œlambdaå¯ä»¥ä½¿ç”¨functools.partialæ¥ä»£æ›¿ï¼Œè¿™æ˜¯ä¸€ç§è¯­æ³•æ›´ç®€å•çš„æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾¿äºç†è§£çš„ä¾‹å­ï¼ŒåŸæ–‡é“¾æ¥ï¼š1234567891011121314nums = [1, 2, 3]lambdas = [lambda: print(i) for i in nums]binding = [lambda i=i: print(i) for i in nums]partials = [partial(print, i) for i in nums]for function in lambdas: function() # è¾“å‡ºï¼š3 3 3for function in binding: function() # è¾“å‡ºï¼š1 2 3for function in partials: function() # è¾“å‡ºï¼š1 2 3 3.5.è¯´æ˜ ä¸Šè¿°å„ä¾‹ä¸­çš„å‡½æ•°è°ƒç”¨æ—¶æ˜¯ä¸éœ€è¦ä¼ å‚çš„ï¼Œè¿™å¯¹äºéœ€è¦ä¼ å‚çš„å‡½æ•°æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ æœ¬æ–‡ä»¥å¾ªç¯ä¸­çš„lambdaå‡½æ•°å¼•å…¥ä½œç”¨åŸŸåŠé—­åŒ…é—®é¢˜ï¼Œä½†éœ€æ³¨æ„çš„æ˜¯è¿™ç§è¡Œä¸ºå¹¶ä¸æ˜¯lambdaæ‰€ç‰¹æœ‰çš„ï¼Œä¹Ÿé€‚ç”¨äºå¸¸è§„å‡½æ•°ã€‚ ä¸Šè¿°å„ç§æ–¹æ¡ˆè¿è¡Œç»“æœå¦‚ä¸‹ï¼š æ–¹æ¡ˆå æè¿° è¿è¡Œç»“æœ æ–¹æ¡ˆä¸€â‘  å¸¦é»˜è®¤å€¼çš„å‚æ•°ï¼Œä½¿ç”¨lambda æ–¹æ¡ˆä¸€â‘¡ å¸¦é»˜è®¤å€¼çš„å‚æ•°ï¼Œä¸ä½¿ç”¨lambda æ–¹æ¡ˆäºŒâ‘  ä½¿å†…éƒ¨å‡½æ•°æˆä¸ºé—­åŒ…ï¼Œå‡½æ•°ç½®äºå¾ªç¯ä¸­ æ–¹æ¡ˆäºŒâ‘¡ ä½¿å†…éƒ¨å‡½æ•°æˆä¸ºé—­åŒ…ï¼Œä½¿ç”¨å•ä¸ªçš„makefunc()å‡½æ•° æ–¹æ¡ˆäºŒâ‘¢ ä½¿å†…éƒ¨å‡½æ•°æˆä¸ºé—­åŒ…ï¼Œä½¿ç”¨lambdaçš„å•ä¸ªå‡½æ•° æ–¹æ¡ˆäºŒâ‘£ ä½¿å†…éƒ¨å‡½æ•°æˆä¸ºé—­åŒ…ï¼Œä½¿ç”¨åµŒå¥—çš„lambdaçš„å‡½æ•° æ–¹æ¡ˆä¸‰ ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°functools.partial 4.å®é™…é—®é¢˜çš„è§£å†³åŠæ³•è‡³æ­¤ï¼Œè§£å†³æ–¹æ¡ˆå¾ˆç®€å•äº†ï¼Œåªéœ€è¦ç»‘å®šå¤–éƒ¨å˜é‡åˆ°lambdaå‡½æ•°ä¸­å³å¯ï¼Œå°±åƒåœ¨å‡½æ•°ä¸­è®¾ç½®é»˜è®¤å€¼ä¸€æ ·def myfunc(x, tmp=i)ï¼š12345678def cons(): cons = [] for i in range(3): b = &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x, tmp=i: x[tmp] - 0.1&#125; c = &#123;&#x27;type&#x27;: &#x27;ineq&#x27;, &#x27;fun&#x27;: lambda x, tmp=i: 0.9 - x[tmp]&#125; cons.append(b) cons.append(c) return conså½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šæ–‡æåˆ°çš„å¦å¤–çš„æ–¹æ³•ã€‚","categories":[{"name":"python","slug":"python","permalink":"https://hwame.top/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://hwame.top/tags/python/"}]},{"title":"å¦‚ä½•å°†matplotlibå›¾åƒæ¸²æŸ“åˆ°å‰ç«¯","slug":"render-matplotlib-figure-to-flaskweb","date":"2020-10-08T01:06:32.000Z","updated":"2020-10-08T07:26:44.000Z","comments":true,"path":"20201008/render-matplotlib-figure-to-flaskweb.html","link":"","permalink":"https://hwame.top/20201008/render-matplotlib-figure-to-flaskweb.html","excerpt":"æ‘˜è¦ï¼šmatplotlibç»“åˆseabornäºŒç»´ç»˜å›¾åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥ç»˜åˆ¶eChartsç”»ä¸å‡ºçš„å›¾åƒï¼Œå› æ­¤è€ƒè™‘ç›´æ¥å°†matplotlibå›¾åƒæ¸²æŸ“åˆ°å‰ç«¯ã€‚","text":"æ‘˜è¦ï¼šmatplotlibç»“åˆseabornäºŒç»´ç»˜å›¾åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥ç»˜åˆ¶eChartsç”»ä¸å‡ºçš„å›¾åƒï¼Œå› æ­¤è€ƒè™‘ç›´æ¥å°†matplotlibå›¾åƒæ¸²æŸ“åˆ°å‰ç«¯ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« è¯´æ˜ï¼šå‰ç«¯ç»˜å›¾ä¸€èˆ¬æ˜¯ç”¨ç™¾åº¦eChartsï¼Œä½†å…¶æ ·å¼ä¸å¤Ÿä¸°å¯Œä¸”å¯å®šåˆ¶åŒ–ç¨‹åº¦ä¸é«˜ï¼Œæœ‰æ—¶æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œå› æ­¤ç›´æ¥å°†pythonçš„matplotlibæ•°æ®å¯è§†åŒ–æ¸²æŸ“åˆ°å‰ç«¯ã€‚å¦è¯·å‚è€ƒï¼špythonå°†matplotlibè¾“å‡ºåˆ°webå¦è¯·å‚è€ƒï¼šå¦‚ä½•å°†Matplotlibå›¾åƒå±•ç¤ºåœ¨webé¡µé¢ä¸Šå¦è¯·å‚è€ƒï¼šMacä½¿ç”¨matplotlib.pyplotç”»å›¾å‡ºç°ä¸­æ–‡ä¹±ç æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20201008/render-matplotlib-figure-to-flaskweb.html ä¸€ã€èƒŒæ™¯å‰ç«¯é¡µé¢çš„æ•°æ®å¯è§†åŒ–ä¸€èˆ¬æ˜¯ç”¨ç™¾åº¦eChartsï¼Œä½†å…¶æ ·å¼ä¸å¤Ÿä¸°å¯Œä¸”å¯å®šåˆ¶åŒ–ç¨‹åº¦ä¸é«˜ï¼Œæœ‰æ—¶æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚æœ€è¿‘éœ€è¦åœ¨å‰ç«¯å±•ç¤ºç›¸å…³å›¾ï¼ˆCorrelogramï¼‰ï¼Œpythonä¸­å¯ä»¥ä½¿ç”¨matplotlibç»“åˆseabornè½»æ¾å®ç°ï¼Œä½†eChartså®ä¾‹ä¸­æ²¡æœ‰ç±»ä¼¼çš„æ ·ä¾‹ï¼Œå› æ­¤è€ƒè™‘ç›´æ¥å°†matplotlibå›¾åƒæ¸²æŸ“åˆ°å‰ç«¯ã€‚ äºŒã€æ€è·¯1.ä¿å­˜å›¾ç‰‡åˆ°æœåŠ¡å™¨staticç›®å½•å°†ç”»å¥½çš„å›¾ç‰‡ä¿å­˜åœ¨æœåŠ¡å™¨çš„staticç›®å½•ä¸‹ï¼Œå‰ç«¯å†ä»è¯¥ç›®å½•è¯»å–å›¾ç‰‡è¿›è¡Œå±•ç¤ºã€‚è¿™ç§æ€è·¯å¾ˆç›´æ¥ï¼Œæ˜¯æœ€å®¹æ˜“æƒ³åˆ°çš„ï¼Œä½†æ˜¯å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š æ— æ³•åˆ¤æ–­å“åº”æ—¶é—´ã€‚å› ä¸ºå›¾åƒç”Ÿæˆæ˜¯é€šè¿‡å‰ç«¯ç”¨æˆ·ä¼ é€’ä¸€ç³»åˆ—å‚æ•°ï¼Œå†æ ¹æ®è¿™äº›å‚æ•°è®¡ç®—ç›¸åº”çš„æ•°æ®ï¼Œåˆ©ç”¨è®¡ç®—çš„æ•°æ®è¿›è¡Œå¯è§†åŒ–ï¼Œå› æ­¤åç«¯ç”Ÿæˆå›¾ç‰‡çš„æ—¶é—´æœªçŸ¥ï¼Œæ‰€ä»¥åªèƒ½é‡‡ç”¨åœ¨å‰ç«¯å»¶æ—¶å±•ç¤ºã€‚ å‰ç«¯è®¿é—®staticç›®å½•ä¸æ–¹ä¾¿ã€‚å‰ç«¯VUEï¼‹åç«¯Flaskçš„å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­ï¼Œå‰ç«¯è®¿é—®staticç›®å½•ä¸æ–¹ä¾¿ã€‚ å ç”¨æœåŠ¡å™¨å†…å­˜å’Œå¸¦å®½ã€‚å°†å›¾ç‰‡ä¿å­˜åœ¨æœåŠ¡å™¨ï¼Œå‰ç«¯ä»æœåŠ¡å™¨è·å–èµ„æºæ—¶ä¼šå ç”¨ä¸€éƒ¨åˆ†ç½‘ç»œå¸¦å®½ï¼Œå½±å“åˆ°å‰ç«¯èµ„æºåŠ è½½çš„é€Ÿåº¦ï¼Œå¹¶ä¸”å›¾ç‰‡ç´¯ç§¯å°†ä¼šå ç”¨æœåŠ¡å™¨å†…å­˜ã€‚ 2.ä½¿ç”¨è¯·æ±‚çš„æ–¹å¼å°†å›¾åƒä¼ åˆ°å‰ç«¯å°†å›¾åƒä»¥è¯·æ±‚çš„æ–¹å¼ä¼ åˆ°å‰ç«¯ï¼Œå‰ç«¯åªéœ€å°†&lt;img&gt;æ ‡ç­¾çš„srcå±æ€§èµ‹å€¼ä¸ºåç«¯çš„è¯·æ±‚è·¯å¾„å³å¯ã€‚è¯¥æ–¹æ³•å¯ä»¥åœ¨åç«¯ç”Ÿæˆå®Œå›¾åƒåå†å‘é€ç»™å‰ç«¯ï¼Œæ— éœ€è®¾ç½®å»¶æ—¶è·å–å›¾åƒã€‚æ‹Ÿé‡‡ç”¨è¯¥æ–¹æ³•ã€‚ 3.å°†å›¾åƒä»¥Base64æ ¼å¼å‘é€ç»™å‰ç«¯è¿™ç§æ€è·¯å’Œæ€è·¯2ç±»ä¼¼ï¼Œä½†æ˜¯åŒºåˆ«åœ¨äºè°ƒç”¨savefigæ–¹æ³•æ—¶ä¸å­˜å‚¨ä¸ºå›¾åƒï¼Œè€Œæ˜¯å­˜å‚¨ä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼ŒäºŒè¿›åˆ¶æ ¼å¼å†è½¬åŒ–ä¸ºBase64å­—ç¬¦ä¸²æ ¼å¼ï¼Œå¹¶å°†å…¶å‘é€ç»™å‰ç«¯ï¼Œå‰ç«¯åªéœ€è¦å°†&lt;img&gt;æ ‡ç­¾çš„srcå±æ€§èµ‹å€¼ä¸ºè¯¥å­—ç¬¦ä¸²å³å¯ã€‚ ä¸‰ã€ä»£ç å®ç°å¯¹æ¯”ä¸‰ç§æ–¹æ³•ï¼Œæ˜¾ç„¶æ€è·¯3ä¸ºæœ€ä¼˜è§£ï¼š åœ¨åç«¯ç”Ÿæˆå®Œå›¾åƒåå†å‘é€ç»™å‰ç«¯ï¼Œæ— éœ€è®¾ç½®å»¶æ—¶è·å–å›¾åƒï¼› åªéœ€è¦å¾€å‰ç«¯å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œä»£ç æ›´åŠ ç²¾ç®€ï¼› è°ƒç”¨äº† savefig æ–¹æ³•ï¼Œå¯ä»¥å»é™¤ç™½è¾¹ã€‚ æ¥å£ä½¿ç”¨pythonçš„flaskæ¡†æ¶ï¼Œä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324import matplotlibmatplotlib.use(&#x27;Agg&#x27;) # ä¸å‡ºç°ç”»å›¾çš„æ¡†import matplotlib.pyplot as pltfrom io import BytesIOimport base64import seaborn as sns@app.route(&#x27;/correlation&#x27;)def correlation(): data = df.corr() # å¼€å§‹ç”»å›¾ plt.figure(figsize=(12, 10), dpi=80) sns.heatmap(data, xticklabels=data.columns, yticklabels=data.columns, cmap=&#x27;RdYlGn&#x27;, center=0, annot=True) plt.title(&#x27;Correlogram&#x27;, fontsize=22) plt.xticks(fontsize=12) plt.yticks(fontsize=12) # plt.show() # è½¬æˆå›¾ç‰‡çš„æ­¥éª¤ sio = BytesIO() plt.savefig(sio, format=&#x27;png&#x27;, bbox_inches=&#x27;tight&#x27;, pad_inches=0.0) data = base64.encodebytes(sio.getvalue()).decode() src = &quot;data:image/png;base64,&#123;&#125;&quot;.format(data) plt.close() # è®°å¾—å…³é—­ï¼Œä¸ç„¶ç”»å‡ºæ¥çš„å›¾æ˜¯é‡å¤çš„ return src å››ã€æ•ˆæœé¢„è§ˆå‰ç«¯é€šè¿‡è¯·æ±‚è·å–è¯¥srcåï¼Œåªéœ€å°†å…¶èµ‹å€¼ç»™&lt;img&gt;æ ‡ç­¾çš„srcå±æ€§å³å¯ï¼š1&lt;img src=&#123;&#123;src&#125;&#125;&gt;é¢„è§ˆå›¾å¦‚ä¸‹ï¼š äº”ã€éƒ¨ç½²é—®é¢˜1.æ— GUIå›¾å½¢ç•Œé¢æœåŠ¡å™¨æ˜¯ä¸å¸¦GUIç•Œé¢çš„CentOS 7ï¼Œä½†æ˜¯matplotlib.pyplotæ˜¯éœ€è¦tkinteråº“çš„æ”¯æŒçš„ï¼š_tkinter.TclError: no display name and no $DISPLAY environment variableã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å®‰è£…tkinterã€tcl-develå’Œtk-develç­‰ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸æ˜¯éœ€è¦åœ¨Linuxä¸Šçœ‹åˆ°ç”»å‡ºçš„å›¾ï¼Œåªéœ€è¦æ”¹ä¸€ä¸‹åç«¯aggå³å¯ã€è²Œä¼¼Linuxä¸‹é»˜è®¤åç«¯å·²æ˜¯Aggï¼Œä»é…ç½®æ–‡ä»¶å¯ä»¥çœ‹åˆ°ã€‘ï¼Œä»£ç å¦‚ä¸‹ï¼š1234import matplotlib as mplmpl.use(&#x27;Agg&#x27;)# åœ¨from matplotlib import pylotä¹‹å‰æ·»åŠ mpl.use(&#x27;Agg&#x27;)from matplotlib import pylot 2.ä¸­æ–‡å­—ä½“ä¹±ç åŸå› åˆ†æç”±äºmatplotlibæ²¡æœ‰ä¸­æ–‡å­—ä½“ï¼Œç›´æ¥ä¼šæŠ¥é”™ï¼šRuntimeWarning: Glyph xxxxx missing from current font.ï¼Œç½‘ä¸Šæœ‰è¯´éœ€è¦æ·»åŠ ä¸¤è¡Œä»£ç ï¼ˆåœ¨ç¼ºå°‘å­—ä½“æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æ–¹æ³•æ— æ•ˆï¼‰ï¼Œå³ï¼š12345plt.rcParams[&#x27;font.sans-serif&#x27;] = [&#x27;SimHei&#x27;]#è®¾ç½®å­—ä½“ï¼Œè®¾ç½®äº†å­—ä½“åï¼Œè´Ÿå·ä¼šå˜æˆä¹±ç plt.rcParams[&#x27;axes.unicode_minus&#x27;] = False#è®©è´Ÿå·çš„ä¹±ç æ­£å¸¸æ˜¾ç¤º å› ä¸ºæ²¡æœ‰é»‘ä½“è¿™ä¸ªå­—ä½“ï¼Œæ‰€ä»¥ä»ä¼šæŠ¥é”™ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨ä¸‹è½½å¯¹åº”å­—ä½“ã€‚å¹¶å°†å…¶å¤åˆ¶åˆ°å¯¹åº”ä½ç½®ï¼š./python3.6/site-packages/matplotlib/mpl-data/fonts/ttf/ã€‚ ä¿®æ”¹é…ç½®æ–‡ä»¶è§£å†³å­—ä½“ç¼ºå¤±çš„é—®é¢˜åï¼Œè¿˜éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶matplotlibrcï¼Œæ–‡ä»¶ä½ç½®ï¼š./python3.6/site-packages/matplotlib/mpl-data/matplotlibrcã€‚ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶çš„å¥½å¤„æ˜¯ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åœ¨ç¨‹åºä»£ç ä¸­æ·»åŠ è¯¸å¦‚plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;]çš„é…ç½®é¡¹ã€‚ å°†#font.family : sans-serifä¿®æ”¹ä¸ºfont.family : sans-serifï¼ˆå»æ‰æ³¨é‡Šï¼‰ å°†#font.sans-serif : DejaVu Serif, ...ä¿®æ”¹ä¸ºfont.sans-serif : SimHei, DejaVu Serif, ...ï¼ˆå»æ‰æ³¨é‡Šï¼Œæ·»åŠ SimHeiï¼‰ å°†#axes.unicode_minus : Trueä¿®æ”¹ä¸ºaxes.unicode_minus : Falseï¼ˆå»æ‰æ³¨é‡Šï¼Œå±æ€§è®¾ç½®ä¸ºFalseï¼‰ è¯´æ˜ï¼šé»‘ä½“SimHeiä¹Ÿå¯ä»¥æ”¹ä¸ºå…¶ä»–å­—ä½“ï¼Œæœ€æ¥è¿‘å®‹ä½“å’ŒTimes New Romançš„æ˜¯STSongï¼Œå‚è€ƒå¦‚ä½•ä½¿matplotlibåŒæ—¶ä½¿ç”¨å®‹ä½“å’ŒTimes New Romanã€‚ åˆ é™¤matplotlibç¼“å­˜Linuxä¸Šçš„matplotlibç¼“å­˜æ–‡ä»¶ä½äºç”¨æˆ·å®¶ç›®å½•ä¸‹çš„â€~/.cache/matplotlib/â€œï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸‹åŒ…å«äº†ç¼“å­˜æ–‡ä»¶fontlist-v310.jsonåŠç¼“å­˜æ–‡ä»¶å¤¹tex.cacheã€‚è‹¥ä¸åˆ é™¤ç¼“å­˜ï¼Œå¯èƒ½çœ‹ä¸åˆ°é…ç½®ç”Ÿæ•ˆã€‚1rm -rf ~/.cache/matplotlib/ 3.å…¶ä»–ä»»ä½•äººéƒ½æ²¡æ³•ä¿è¯è‡ªå·±å†™çš„ä»£ç æ²¡æœ‰bugï¼Œè€Œä¸”æµ‹è¯•æ—¶ä¹Ÿä¸å¯èƒ½è€ƒè™‘åˆ°æ‰€æœ‰çš„æƒ…å†µã€‚ä¸€æ—¦ç¨‹åºéƒ¨ç½²ä¸Šçº¿ä½œä¸ºæœåŠ¡è¿è¡Œï¼Œå‡ºç°é—®é¢˜ç”¨æˆ·ä¹Ÿåªèƒ½çœ‹åˆ°50xçš„é”™è¯¯ï¼Œå› æ­¤è¦å…»æˆå–„äºæŸ¥çœ‹æ—¥å¿—çš„ä¹ æƒ¯ï¼ä»æ—¥å¿—å…¥æ‰‹ï¼Œæ‰èƒ½åˆ†æé—®é¢˜å‡ºç°çš„åŸå› ï¼Œä»è€Œèƒ½æ‰“è¡¥ä¸ã€ä¿®bugã€æ”¹ä»£ç ï¼Œä½¿ç¨‹åºæ›´å¥å£®ã€æœåŠ¡æ›´ç¨³å®šã€‚","categories":[{"name":"python","slug":"python","permalink":"https://hwame.top/categories/python/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/tags/Linux/"},{"name":"matplotlib","slug":"matplotlib","permalink":"https://hwame.top/tags/matplotlib/"},{"name":"python","slug":"python","permalink":"https://hwame.top/tags/python/"}]},{"title":"åŠ›æ‰£ç®€æ´ä¼˜é›…çš„pythonè§£æ³•","slug":"shortest-leetcode-python-solutions","date":"2020-06-04T13:32:55.000Z","updated":"2020-06-05T03:42:18.000Z","comments":true,"path":"20200604/shortest-leetcode-python-solutions.html","link":"","permalink":"https://hwame.top/20200604/shortest-leetcode-python-solutions.html","excerpt":"æ‘˜è¦ï¼šPythonè¯­è¨€ç‰¹ç‚¹ä¹‹ä¸€å°±æ˜¯ä¼˜é›…ç®€æ´ï¼Œä¸ºæ–¹ä¾¿å­¦ä¹ æ•°æ®ç»“æ„ï¼Œæ¬è¿è‡ªGithubã€é¡¹ç›®åœ°å€ã€‘ä¸Šæ±‡æ€»LeetCodeæœ€çŸ­æœ€ä¼˜é›…çš„è§£æ³•çš„é¡¹ç›®ã€‚","text":"æ‘˜è¦ï¼šPythonè¯­è¨€ç‰¹ç‚¹ä¹‹ä¸€å°±æ˜¯ä¼˜é›…ç®€æ´ï¼Œä¸ºæ–¹ä¾¿å­¦ä¹ æ•°æ®ç»“æ„ï¼Œæ¬è¿è‡ªGithubã€é¡¹ç›®åœ°å€ã€‘ä¸Šæ±‡æ€»LeetCodeæœ€çŸ­æœ€ä¼˜é›…çš„è§£æ³•çš„é¡¹ç›®ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« æ¥æºï¼šShortest-LeetCode-Python-Solutionsæ–‡ç« ä½œè€…ï¼šKnifeä¸¶åŸæ–‡é“¾æ¥ï¼šhttps://github.com/cy69855522/Shortest-LeetCode-Python-Solutionsæ–‡ç« è¯´æ˜ï¼šæ–¹ä¾¿å­¦ä¹ æ•°æ®ç»“æ„ï¼Œæ¬è¿è‡ªGithub å‰è¨€ Leet Code åˆ·é¢˜ç¬”è®° - - ä¸æ±‚æœ€å¿«æœ€çœï¼Œä½†æ±‚æœ€çŸ­æœ€ä¼˜é›… :herb:ï¼ŒShorter is better here. ä»£ç ç²¾ç‚¼æ˜¯ Python çš„æ ¸å¿ƒï¼ŒåŒæ—¶èƒ½å¤Ÿååº”å¯¹äºè¯­è¨€çš„ç†Ÿç»ƒç¨‹åº¦ï¼Œæœ¬é¡¹ç›®ç›®çš„åœ¨äºæ±‡æ€» leet code æœ€çŸ­æœ€ä¼˜é›…çš„è§£æ³•ï¼Œæ‹’ç»é•¿ç¯‡å¤§è®ºï¼Œç¼©çŸ­å­¦ä¹ å‘¨æœŸï¼ŒæŒæ¡å„ç§æŠ€å·§ï¼ŒåŠ©æ‚¨åœ¨é¢è¯•ä¸­å†™å‡ºä»¤äººçœ¼å‰ä¸€äº®çš„è§£ç­”ï¼Œç»™è€ƒå®˜ç•™ä¸ªå¥½å°è±¡ã€‚ ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿½æ±‚æœ€çŸ­? 1.çŸ­ä»£ç æ›´pythonicï¼Œè€Œä¸”é€šå¸¸èƒ½å¤Ÿé¿å…ä¸€äº›å†—ä½™è¿‡ç¨‹ã€‚ 2.é™¤äº†åˆ·é¢˜æŒæ¡ç®—æ³•æ€è·¯ä¹‹å¤–ï¼Œæˆ‘ä»¬æ›´è¿½æ±‚æ·±å…¥ç†è§£å’ŒæŒæ¡python,å­¦ä¼šå¥—ç”¨æŠ€å·§ï¼Œä¸¾ä¸€åä¸‰ã€‚ 3.çœŸæ­£é¢è¯•çš„æ—¶å€™ä¸ä¸€å®šè¦è¿™ä¹ˆçŸ­ï¼Œå¯ä»¥é€‚å½“å±•å¼€å‡ è¡Œ(O_o é™¤éä½ å°±æ˜¯æƒ³ç§€å…¶ä»–äººä¸€è„¸ ğŸ˜…)ï¼Œä¿è¯æ€è·¯æ›´æ¸…æ™°ï¼Œç›¸ä¿¡å°±ç®—å±•å¼€å‡ è¡Œä¹Ÿä¼šæ¯”å…¶ä»–é¢˜è§£çŸ­å¾ˆå¤šå§ã€‚ 4.åˆ·é¢˜å¾ˆç´¯ï¼Œæ‰¾ç‚¹ä¹å­ï¼Œé€ç»™è‡ªå·±ä¸€äº›æˆå°±æ„Ÿå§ã€‚ 5.æ‰€æœ‰å·²æ”¶å½•ä»£ç éƒ½æ˜¯ä¼˜ä¸­é€‰ä¼˜ï¼Œé¢˜åº“è§£æéƒ¨åˆ†é™¤äº†çŸ­ä»£ç å¤–ï¼Œä¹Ÿæœ‰å¸¸è§„è§£æ³•ä½œä¸ºè¡¥å……ã€‚ 6.è‹¥åŸºç¡€çŸ¥è¯†ä¸å¤Ÿæ‰å®ï¼Œå¯ä»¥å…ˆçœ‹ä¸“é¢˜æ¢ç´¢éƒ¨åˆ†ï¼Œç„¶åå†è½¬é¢˜åº“è§£æå­¦ä¹  Python ä¸­éšè—çš„å…ˆè¿›æŠ€å·§ã€‚ é¡¹ç›®æŒç»­æ›´æ–°ä¸­ï¼Œä¼˜å…ˆä½¿ç”¨ python3ï¼Œä¸æ”¯æŒçš„é¢˜ç›®ä½¿ç”¨ python2 ä»£æ›¿ï¼Œå¦‚æœæ‚¨æœ‰æ›´çŸ­æ›´ä¼˜é›…çš„è§£æ³•å¸Œæœ›åˆ†äº«çš„è¯æ¬¢è¿è”ç³»æ›´æ–°~ [ç›´æ¥å‘issue æˆ– forkï¼Œè®°å¾—ç•™ä¸‹ç½²åå’Œè”ç³»æ–¹å¼~~] é‰´äºè¿½æ±‚çš„ä¸»é¢˜ï¼Œæ­¤é¡¹ç›®æ”¶å½• 1.åœ¨ä»£ç é‡(ä¸æ˜¯è¡Œæ•°)ä¸Šæ˜æ˜¾ä¼˜äºç°æœ‰è§£çš„æœ€çŸ­ä»£ç  2.æ€è·¯æ›´é«˜æ•ˆçš„ä¸€èˆ¬è§£æ³•ï¼ˆä½œä¸ºè¡¥å……æ”¾åœ¨é¦–é€‰è§£ä¹‹åï¼‰ [é¢˜ç›®è‡ªå¸¦çš„ä»£ç ä¸è®¡å…¥ä»£ç é‡] å¦‚æœæ‚¨å¯¹å½“å‰è§£ææœ‰ä»»ä½•ç–‘é—®ï¼Œå’±ä»¬ issue è§~ ç”±äºCSDNåšå®¢æ›´æ–°éœ€è¦äººå·¥å®¡æ ¸æ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥è¿ç§»åˆ°githubä¸Šï¼Œä¼˜å…ˆæ›´æ–°githubå†…å®¹ã€‚ ä¸ºäº†å¿«é€Ÿæ‰¾åˆ°é¢˜ç›®å¯ä»¥æŒ‰ [Ctrlé”® + Fé”®] è¾“å…¥é¢˜ç›®åºå·æˆ–åå­—å®šä½ã€‚ æ¬¢è¿åŠ å…¥QQäº¤æµç¾¤ï¼š902025048 âˆ·äºŒç»´ç  ç¾¤å†…æä¾›æ›´å¤šç›¸å…³èµ„æ–™~é‡Œç¨‹ç¢‘ è…¾è®¯ç²¾é€‰ç»ƒä¹ ï¼ˆ50é¢˜: 25ç®€å• 21ä¸­ç­‰ 4å›°éš¾ï¼‰ ä»£ç è¡Œæ•° æ€»è®¡ï¼š140è¡Œ å¹³å‡ï¼š2.8è¡Œ ã€2019/05/05ã€‘ ğŸ§¬ æ•°æ®ç»“æ„ ğŸ¤ é˜Ÿåˆ— &amp; æ ˆï¼ˆ5 ç« èŠ‚ 32 æ ç›®ï¼‰ é«˜å¯è¯»ï¼Œä¸å«VIPè§£é”é¢˜ é¢˜ç›®è¯¦æƒ… 2019/05/31 ğŸ‘ æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆ5 ç« èŠ‚ 29 æ ç›®ï¼‰ é«˜å¯è¯» é¢˜ç›®è¯¦æƒ… 2019/06/15 ğŸ¦Œ é“¾è¡¨ï¼ˆ5 ç« èŠ‚ 26 æ ç›®ï¼‰ é«˜å¯è¯» é¢˜ç›®è¯¦æƒ… 2019/06/25 ğŸ¦ å“ˆå¸Œè¡¨ï¼ˆ5 ç« èŠ‚ 35 æ ç›®ï¼‰ é«˜å¯è¯»ï¼Œä¸å«VIPè§£é”é¢˜ é¢˜ç›®è¯¦æƒ… 2019/07/07 ğŸ„ äºŒåˆ†æŸ¥æ‰¾ï¼ˆ8 ç« èŠ‚ 30 æ ç›®ï¼‰ é«˜å¯è¯»ï¼Œä¸å«VIPè§£é”é¢˜ é¢˜ç›®è¯¦æƒ… 2019/07/30 ğŸ¦‰ äºŒå‰æ ‘ï¼ˆ3 ç« èŠ‚ 16 æ ç›®ï¼‰ é«˜å¯è¯» é¢˜ç›®è¯¦æƒ… 2019/09/21 ğŸ¦ äºŒå‰æœç´¢æ ‘ï¼ˆ3 ç« èŠ‚ 16 æ ç›®ï¼‰ é«˜å¯è¯» é¢˜ç›®è¯¦æƒ… 2019/11/15 ğŸˆ Nå‰æ ‘ï¼ˆ3 ç« èŠ‚ 7 æ ç›®ï¼‰ é«˜å¯è¯»ï¼Œä¸å«VIPè§£é”é¢˜ é¢˜ç›®è¯¦æƒ… 2019/11/17 â± é€’å½’ Iï¼ˆ5 ç« èŠ‚ 28 æ ç›®ï¼‰ é«˜å¯è¯» é¢˜ç›®è¯¦æƒ… 2019/11/28 æ¨è ğŸ‘» Leetcodeæœ€ç®€C++é¢˜è§£ ğŸƒ C++æ¸…æ™°é¢˜è§£æ±‡æ€» ğŸš€ AI Power äº‘GPUç§Ÿå€Ÿ/å‡ºç§Ÿå¹³å°ï¼šPythonæ˜¯AIçš„æ ¸å¿ƒï¼ŒGPUæ˜¯AIçš„åŠ¨åŠ›ï¼Œæƒ³è¦æœAIå·¥ç¨‹å¸ˆå‘å±•çš„æœ‹å‹ä¸å¦¨äº†è§£ä¸€ä¸‹~ ç°åœ¨æ³¨å†Œå¹¶ç»‘å®šï¼ˆå‚è€ƒGithubï¼‰å³å¯è·å¾—é«˜é¢ç®—åŠ›ï¼Œæ³¨å†Œä¸æ¶‰åŠä¸ªäººéšç§ä¿¡æ¯ï¼Œå¥–åŠ±å¯éšæ—¶æç°ã€‚è¯¦æƒ…è¯·å‚è€ƒAI PoweræŒ‡å— ğŸŒŸ æ¨èåˆ·é¢˜è·¯çº¿ï¼šä¸“é¢˜æ¢ç´¢ â†’ è…¾è®¯ç²¾é€‰50é¢˜ â†’ é¢˜åº“è§£æé¢˜åº“è§£ææ­¤ä¸“æ è¿½æ±‚ä»£ç çš„ç²¾ç®€å’ŒæŠ€å·§æ€§ï¼Œé»˜è®¤å·²çœ‹è¿‡é¢˜ç›®ï¼ŒğŸ¤¡ æ²¡çœ‹è¿‡çš„è¯ç‚¹æ ‡é¢˜å¯ä»¥è·³è½¬é“¾æ¥ï¼Œå’±ä»¬ä¸€èµ·ä½“éªŒç‚«é…·çš„ Python1. Two Sum 4è¡Œ123456class Solution: def twoSum(self, nums: List[int], target: int) -&gt; List[int]: d = &#123;&#125; for i, n in enumerate(nums): if n in d: return [d[n], i] d[target-n] = i $O(N)$æ—¶é—´æ•ˆç‡çš„å¿«é€Ÿè§£æ³•ï¼Œç”¨å­—å…¸è®°å½• ï½›éœ€è¦çš„å€¼:å½“å‰ç´¢å¼•ï½2. Add Two Numbers 5è¡Œ12345678910111213# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def addTwoNumbers(self, l1: ListNode, l2: ListNode, carry=0) -&gt; ListNode: if not (l1 or l2): return ListNode(1) if carry else None l1, l2 = l1 or ListNode(0), l2 or ListNode(0) val = l1.val + l2.val + carry l1.val, l1.next = val % 10, self.addTwoNumbers(l1.next, l2.next, val &gt; 9) return l1 int(True) ç­‰äº 1 None or 7 ç­‰äº 7 ç”¨ carry è®°å½•æ˜¯å¦åº”è¯¥è¿›ä½3. Longest Substring Without Repeating Characters 3è¡Œ12345class Solution: def lengthOfLongestSubstring(self, s: str) -&gt; int: i, r, d = 0, 0, &#123;&#125; for j, c in enumerate(s): i, r, d[c] = max(i, d.get(c, -1) + 1), max(r, j - i), j return max(r, len(s) - i) åŒæŒ‡é’ˆæ»‘åŠ¨çª—å£ i ä»£è¡¨èµ·å§‹ä½ç½®ï¼Œr è®°å½•æœ€ä¼˜è§£ï¼Œd æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œè®°å½•æ‰€æœ‰å­—ç¬¦æœ€åå‡ºç°çš„ä½ç½® æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°é‡è§è¿‡çš„å­—ç¬¦æ—¶ï¼Œi å°±ä¼šå˜ä¸ºé‚£ä¸ªå­—ç¬¦ä¸Šä¸€æ¬¡å‡ºç°ä½ç½® + 1ï¼Œr è®°å½•ä¸Šä¸€æ¬¡åº”è¯¥è¾¾åˆ°çš„å…¨å±€æœ€å¤§å€¼ï¼Œæ‰€ä»¥æœ€åéœ€è¦å†æ¯”è¾ƒä¸€æ¬¡4. Median of Two Sorted Arrays 5è¡Œ1234567class Solution: def findMedianSortedArrays(self, nums1: List[int], nums2: List[int]) -&gt; float: a, b, m = *sorted((nums1, nums2), key=len), (len(nums1) + len(nums2) - 1) // 2 self.__class__.__getitem__ = lambda self, i: m-i-1 &lt; 0 or a[i] &gt;= b[m-i-1] i = bisect.bisect_left(self, True, 0, len(a)) r = sorted(a[i:i+2] + b[m-i:m-i+2]) return (r[0] + r[1 - (len(a) + len(b)) % 2]) / 2 æœ¬é¢˜æ€è·¯ä¸å®˜æ–¹é¢˜è§£ç±»ä¼¼ï¼Œæ—¶é—´å¤æ‚åº¦$O(\\log(\\min(m, n)))$ï¼Œæ²¡çœ‹è¿‡çš„è¯å»ºè®®å…ˆå¤§ä½“äº†è§£ä¸€ä¸‹ python ä¸­ bisect æ¨¡å—é’ˆå¯¹çš„æ˜¯ list, å¦‚æœç›´æ¥æ„é€  listï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(\\min(m, n))$ï¼Œå› æ­¤æˆ‘ä»¬ä¿®æ”¹å½“å‰ç±»çš„é­”æ³•æ–¹æ³•ä¼ªé€  list åœ¨ä¸€ä¸ªæœ‰åºé€’å¢æ•°åˆ—ä¸­ï¼Œä¸­ä½æ•°å·¦è¾¹çš„é‚£éƒ¨åˆ†çš„æœ€å¤§å€¼ä¸€å®šå°äºæˆ–ç­‰äºå³è¾¹éƒ¨åˆ†çš„æœ€å°å€¼ å¦‚æœæ€»æ•°ç»„é•¿åº¦ä¸ºå¥‡æ•°ï¼Œm ä»£è¡¨ä¸­ä½æ•°çš„ç´¢å¼•ï¼Œå¦åˆ™ m ä»£è¡¨ç”¨äºè®¡ç®—ä¸­ä½æ•°çš„é‚£ä¸¤ä¸ªæ•°å­—çš„å·¦è¾¹ä¸€ä¸ªã€‚æ¯”å¦‚è¾“å…¥ä¸º[1,2]ï¼Œ[3]ï¼Œé‚£ä¹ˆmåº”è¯¥ä¸º[1,2,3]ä¸­ä½æ•°2çš„ç´¢å¼•1ï¼Œå¦‚æœè¾“å…¥ä¸º[1,3]ï¼Œ[2,4]ï¼Œé‚£ä¹ˆmåº”è¯¥ä¸º[1,2,3,4]ä¸­2çš„ç´¢å¼•1 ä½¿ç”¨äºŒåˆ†æœç´¢æ‰¾åˆ° m å¯¹åº”çš„å€¼åœ¨aæˆ–bä¸­å¯¹åº”çš„ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦æ‰¾çš„ä¸­ä½æ•°æˆ–ä¸­ä½æ•°å·¦éƒ¨åº”è¯¥æ˜¯ a[i] æˆ–è€… b[m-i] bisect.bisect_left æœç´¢åˆ—è¡¨ä¸­ä¿æŒåˆ—è¡¨å‡åºçš„æƒ…å†µä¸‹ï¼ŒTrueåº”è¯¥æ’å…¥çš„ä½ç½®ï¼ˆä»å·¦ä¾§ï¼‰ï¼Œæ¯”å¦‚ [F,F,T] è¿”å› 2ï¼Œ[F,F] è¿”å› 2 è¿™é‡Œä¿è¯ a æ˜¯ nums1 å’Œ nums2 ä¸­è¾ƒçŸ­çš„é‚£ä¸ªï¼Œæ˜¯ä¸ºäº†é˜²æ­¢äºŒåˆ†æœç´¢çš„æ—¶å€™ç´¢å¼•è¶Šç•Œ sortedè¿”å›ä¸€ä¸ªlistï¼Œå‡è®¾è¿”å›å€¼æ˜¯ [nums1, nums2]ï¼Œé‚£ä¹ˆå‰é¢åŠ ä¸ª * å·å°±ä»£è¡¨å–å‡ºåˆ—è¡¨çš„æ‰€æœ‰å†…å®¹ï¼Œç›¸å½“äºä¸€ä¸ªè¿­ä»£å™¨ï¼Œç»“æœç›¸å½“äºç›´æ¥å†™ nums1, nums25. Longest Palindromic Substring 5è¡Œ1234567class Solution: def longestPalindrome(self, s: str) -&gt; str: r = &#x27;&#x27; for i, j in [(i, j) for i in range(len(s)) for j in (0, 1)]: while i &gt; -1 and i + j &lt; len(s) and s[i] == s[i + j]: i, j = i - 1, j + 2 r = max(r, s[i + 1:i + j], key=len) return &#x27;&#x27; if not s else r éå†å­—ç¬¦ä¸²çš„æ¯ä¸ªç´¢å¼• iï¼Œåˆ¤æ–­èƒ½å¦ä»¥ s[i] æˆ– s[i:i+j+1] ä¸ºä¸­å¿ƒå‘å¾€æ‹“å±•å›æ–‡å­—ç¬¦ä¸²7. Reverse Integer 2è¡Œ 1234class Solution: def reverse(self, x): r = x // max(1, abs(x)) * int(str(abs(x))[::-1]) return r if r.bit_length() &lt; 32 or r == -2**31 else 0 x // max(1, abs(x))æ„å‘³ç€ 0ï¼šxä¸º0ï¼Œ 1ï¼šxä¸ºæ­£ï¼Œ -1ï¼šxä¸ºè´Ÿï¼Œç›¸å½“äºè¢«åºŸå¼ƒçš„å‡½æ•°cmp [::-1]ä»£è¡¨åºåˆ—åè½¬ $2^{31}$ å’Œ $-2^{31}$ çš„æ¯”ç‰¹æ•°ä¸º32ï¼Œå…¶ä¸­æ­£è´Ÿå·å ç”¨äº†ä¸€ä½ 32ä½æ•´æ•°èŒƒå›´ $[âˆ’2^{31}, \\; 2^{31} âˆ’ 1]$ ä¸­æ­£æ•°èŒƒå›´å°ä¸€ä¸ªæ˜¯å› ä¸º0çš„å­˜åœ¨8. String to Integer (atoi) 1è¡Œ123class Solution: def myAtoi(self, s: str) -&gt; int: return max(min(int(*re.findall(&#x27;^[\\+\\-]?\\d+&#x27;, s.lstrip())), 2**31 - 1), -2**31) ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ ^ï¼šåŒ¹é…å­—ç¬¦ä¸²å¼€å¤´ï¼Œ[\\+\\-]ï¼šä»£è¡¨ä¸€ä¸ª+å­—ç¬¦æˆ–-å­—ç¬¦ï¼Œ?ï¼šå‰é¢ä¸€ä¸ªå­—ç¬¦å¯æœ‰å¯æ— ï¼Œ\\dï¼šä¸€ä¸ªæ•°å­—ï¼Œ+ï¼šå‰é¢ä¸€ä¸ªå­—ç¬¦çš„ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œ\\Dï¼šä¸€ä¸ªéæ•°å­—å­—ç¬¦ max(min(æ•°å­—, 2**31 - 1), -2**31) ç”¨æ¥é˜²æ­¢ç»“æœè¶Šç•Œ9. Palindrome Number 1è¡Œ 123class Solution: def isPalindrome(self, x: int) -&gt; bool: return str(x) == str(x)[::-1] ä¸ä½¿ç”¨å­—ç¬¦ä¸²çš„è¿›é˜¶è§£æ³•ï¼š 1234class Solution: def isPalindrome(self, x: int) -&gt; bool: r = list(map(lambda i: int(10**-i * x % 10), range(int(math.log10(x)), -1, -1))) if x &gt; 0 else [0, x] return r == r[::-1] æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡ŒæŠŠæ•´æ•°è½¬æˆäº†åˆ—è¡¨è€Œä¸æ˜¯å­—ç¬¦ä¸² æ¯”å¦‚ä¸€ä¸ªæ•´æ•°$12321$ï¼Œæˆ‘æƒ³å–å‡ºç™¾ä½æ•°å¯ä»¥è¿™ä¹ˆåšï¼š$12321 * 10^{\\text{int}(\\log_{10}12321)} % 10 = 123 % 10 = 3$11. Container With Most Water 3è¡Œ12345class Solution: def maxArea(self, height: List[int]) -&gt; int: res, l, r = 0, 0, len(height) - 1 while l &lt; r: res, l, r = (max(res, height[l] * (r - l)), l + 1, r) if height[l] &lt; height[r] else (max(res, height[r] * (r - l)), l, r - 1) return res åŒæŒ‡é’ˆ $O(N)$ è§£æ³• resï¼šç»“æœï¼Œlï¼šå®¹å™¨å·¦å£ç´¢å¼•ï¼Œrï¼šå®¹å™¨å³å£ç´¢å¼• å¦‚æœ height[l] &lt; height[r] é‚£ä¹ˆ l += 1 å¦åˆ™ r -= 1ï¼Œè¯´æ˜ï¼šå¦‚æœ height[0] &lt; height[3] é‚£ä¹ˆ(0, 1), (0, 2)å¯¹åº”çš„å®¹å™¨ä½“ç§¯ä¸€å®šå°äº(0, 3)çš„ï¼Œå› ä¸ºæ­¤æ—¶è®¡ç®—ä½“ç§¯çš„æ—¶å€™é«˜ä¸º height(0)ï¼Œå®¹å™¨çš„å®½å‡å°‘è€Œé«˜ä¸å¢åŠ ï¼Œé¢ç§¯å¿…ç„¶ç¼©å°13. Roman to Integer 2è¡Œ 1234class Solution: def romanToInt(self, s: str) -&gt; int: d = &#123;&#x27;I&#x27;:1, &#x27;IV&#x27;:3, &#x27;V&#x27;:5, &#x27;IX&#x27;:8, &#x27;X&#x27;:10, &#x27;XL&#x27;:30, &#x27;L&#x27;:50, &#x27;XC&#x27;:80, &#x27;C&#x27;:100, &#x27;CD&#x27;:300, &#x27;D&#x27;:500, &#x27;CM&#x27;:800, &#x27;M&#x27;:1000&#125; return sum(d.get(s[max(i-1, 0):i+1], d[n]) for i, n in enumerate(s)) æ„å»ºä¸€ä¸ªå­—å…¸è®°å½•æ‰€æœ‰ç½—é©¬æ•°å­—å­ä¸²ï¼Œæ³¨æ„é•¿åº¦ä¸º2çš„å­ä¸²è®°å½•çš„å€¼æ˜¯ï¼ˆå®é™…å€¼-å­ä¸²å†…å·¦è¾¹ç½—é©¬æ•°å­—ä»£è¡¨çš„æ•°å€¼ï¼‰ è¿™æ ·ä¸€æ¥ï¼Œéå†æ•´ä¸ªsçš„æ—¶å€™åˆ¤æ–­å½“å‰ä½ç½®å’Œå‰ä¸€ä¸ªä½ç½®çš„ä¸¤ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²æ˜¯å¦åœ¨å­—å…¸å†…ï¼Œå¦‚æœåœ¨å°±è®°å½•å€¼ï¼Œä¸åœ¨å°±è¯´æ˜å½“å‰ä½ç½®ä¸å­˜åœ¨å°æ•°å­—åœ¨å‰é¢çš„æƒ…å†µï¼Œç›´æ¥è®°å½•å½“å‰ä½ç½®å­—ç¬¦å¯¹åº”å€¼ ä¸¾ä¸ªä¾‹å­ï¼Œéå†ç»è¿‡IVçš„æ—¶å€™å…ˆè®°å½•Içš„å¯¹åº”å€¼1å†å¾€å‰ç§»åŠ¨ä¸€æ­¥è®°å½•IVçš„å€¼3ï¼ŒåŠ èµ·æ¥æ­£å¥½æ˜¯IVçš„çœŸå®å€¼4ã€‚maxå‡½æ•°åœ¨è¿™é‡Œæ˜¯ä¸ºäº†é˜²æ­¢éå†ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ—¶å€™å‡ºç°[-1:0]çš„æƒ…å†µ14. Longest Common Prefix 2è¡Œ 1234class Solution: def longestCommonPrefix(self, strs: List[str]) -&gt; str: r = [len(set(c)) == 1 for c in zip(*strs)] + [0] return strs[0][:r.index(0)] if strs else &#x27;&#x27; åˆ©ç”¨å¥½zipå’Œset os æ¨¡å—æœ‰æä¾›ä¸€æ ·çš„å‡½æ•° 123class Solution: def longestCommonPrefix(self, strs: List[str]) -&gt; str: return os.path.commonprefix(strs) 15. 3Sum 5è¡Œ1234567class Solution: def threeSum(self, nums: List[int]) -&gt; List[List[int]]: nums, r = sorted(nums), set() for i in [i for i in range(len(nums)-2) if i &lt; 1 or nums[i] &gt; nums[i-1]]: d = &#123;-nums[i]-n: j for j, n in enumerate(nums[i + 1:])&#125; r.update([(nums[i], n, -nums[i]-n) for j, n in enumerate(nums[i+1:]) if n in d and d[n] &gt; j]) return list(map(list, r)) æ—¶é—´å¤æ‚åº¦ï¼š$O(N^2)$ è¿™é‡Œ sort ä¸€æ˜¯ä¸ºäº†é¿å…é‡å¤ï¼Œè¿™ä¸€ç‚¹å¯ä»¥ä½“ç°åœ¨æˆ‘ä»¬è¾“å‡ºçš„ç»“æœéƒ½æ˜¯å‡åºçš„ï¼Œå¦‚æœä¸è¿™ä¹ˆåš set æ— æ³•æ’é™¤ä¸€äº›ç›¸åŒç»“æœï¼Œè€Œæ˜¯ä¸ºäº†èŠ‚çœè®¡ç®—ï¼Œé˜²æ­¢è¶…æ—¶ for å¾ªç¯å†…éƒ¨çš„ä»£ç æ€æƒ³åŒç¬¬ä¸€é¢˜ Two Sumï¼Œç”¨å­—å…¸è®°å½•ï½›éœ€è¦çš„å€¼:å½“å‰ç´¢å¼•ï½ï¼Œå¦‚æœå­—å…¸ä¸­å­˜åœ¨ç›¸åŒçš„æ•°å­—ï¼Œé‚£ä¹ˆå°†ä¼šè®°å½•æ¯”è¾ƒå¤§çš„é‚£ä¸ªç´¢å¼•ï¼Œå› æ­¤å¯ä»¥ç”¨d[n] &gt; iæ¥é¿å…ä¸€ä¸ªå…ƒç´ é‡å¤é€‰æ‹© (nums[i], n, -nums[i]-n)ä¿è¯äº†åˆ—è¡¨å‡åº16. 3Sum Closest 7è¡Œ123456789class Solution: def threeSumClosest(self, nums: List[int], target: int) -&gt; int: nums, r, end = sorted(nums), float(&#x27;inf&#x27;), len(nums) - 1 for c in range(len(nums) - 2): i, j = max(c + 1, bisect.bisect_left(nums, target - nums[end] - nums[c], c + 1, end) - 1), end while r != target and i &lt; j: s = nums[c] + nums[i] + nums[j] r, i, j = min(r, s, key=lambda x: abs(x - target)), i + (s &lt; target), j - (s &gt; target) return r float(&#39;inf&#39;) = ï¼‹âˆ(æ­£æ— ç©·) æ’åºï¼Œéå†ï¼ŒåŒæŒ‡é’ˆï¼Œ$O(N^2)$ æ—¶é—´å¤æ‚åº¦ï¼ŒäºŒåˆ†æ³•åˆå§‹åŒ– æ’åºæ˜¯ä¸ºäº†ä½¿ç”¨åŒæŒ‡é’ˆï¼Œé¦–å…ˆéå†å¾—åˆ°ç´¢å¼• cï¼Œç„¶åè®¡ç®— cï¼Œå·¦æŒ‡é’ˆ iï¼Œå³æŒ‡é’ˆ j å¯¹åº”æ•°å­—ä¹‹å’Œï¼Œå¦‚æœå¤§äº targetï¼Œj å‘å†…ç§»åŠ¨ï¼Œå¦åˆ™ i å‘å†…ç§»åŠ¨ i çš„åˆå§‹å€¼ä¸æ˜¯ c + 1ï¼Œæ˜¯ä¸ºäº†å‡å°‘è®¡ç®—é‡ï¼Œç”¨äºŒåˆ†æ³•å¾—åˆ°ä¸€ä¸ªåˆç†çš„åˆå§‹å€¼17. Letter Combinations of a Phone Number 3è¡Œ12345class Solution: def letterCombinations(self, digits: str) -&gt; List[str]: from itertools import product l = &#x27;- - abc def ghi jkl mno pqrs tuv wxyz&#x27;.split() return [&#x27;&#x27;.join(c) for c in product(*[l[int(i)] for i in digits])] if digits else [] æœ¬é¢˜ç›¸å½“äºæ±‚è§£ç¬›å¡å°”ç§¯18. 4Sum 5è¡Œ1234567class Solution: def fourSum(self, nums: List[int], target: int) -&gt; List[List[int]]: from itertools import combinations as com dic, l = collections.defaultdict(list), [*com(range(len(nums)), 2)] for a, b in l: dic[target - nums[a] - nums[b]].append((a, b)) r = [(*ab, c, d) for c, d in l for ab in dic[nums[c] + nums[d]]] return [*set(tuple(sorted(nums[i] for i in t)) for t in r if len(set(t)) == 4)] æ€æƒ³ç±»ä¼¼äº 2SUMï¼Œå…ˆå¾—åˆ°ä»»æ„ä¸¤ä¸ªæ•°å­—çš„å’Œè®°å…¥å­—å…¸ï¼Œç„¶åå†è·å¾—å…¶ä½™ä»»æ„ä¿©ä¸ªæ•°å­—ï¼Œçœ‹çœ‹æ˜¯å¦åŒ¹é…ã€‚2ä¸ª 2SUM ç›¸å½“äº 4SUMã€‚æ—¶é—´å¤æ‚åº¦ä¸º $O(N^2)$ 1.ç”¨ combination è·å¾— nums ä¸­ä»»æ„ä¸¤ä¸ªä¸åŒç´¢å¼•çš„ç»„åˆ 2.ç”¨å­—å…¸è®°å½•ä»»æ„ä¸¤ä¸ªæ•°å­—çš„å’Œï¼Œdic =ï½›é™¤äº†è¿™ä¸¤ä¸ªæ•°å­—ä¹‹å¤–è¿˜å·®å¤šå°‘ï¼šè¿™ä¿©ä¸ªæ•°å­—åœ¨ nums ä¸­çš„ç´¢å¼•ï½ 3.ç”¨ r è®°å½•æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ç´¢å¼•åºåˆ—ï¼Œæ³¨æ„æ­¤æ—¶å¯èƒ½å«æœ‰é‡å¤çš„ç´¢å¼• 4.åˆ©ç”¨ len + set ä¿è¯ aï¼Œbï¼Œcï¼Œd å„ä¸ç›¸ç­‰ï¼Œç”¨ set åˆ é™¤é‡å¤çš„ç»“æœ19. Remove Nth Node From End of List 5è¡Œ12345678910111213# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def removeNthFromEnd(self, head: ListNode, n: int) -&gt; ListNode: l = [] while head: l, head = l + [head], head.next if n != len(l): l[-n-1].next = l[-n].next del l[-n] return l and l[0] åˆ—è¡¨è®°å½•æ•´ä¸ªé“¾è¡¨ï¼Œæ¢æˆé˜Ÿåˆ—è®°å½•æœ€åå‡ ä¸ªå¯ä»¥æŠŠç©ºé—´å¤æ‚åº¦å‹åˆ° $O(1)$20. Valid Parentheses 2è¡Œ 1234class Solution: def isValid(self, s: str) -&gt; bool: while any((&#x27;()&#x27; in s, &#x27;[]&#x27; in s, &#x27;&#123;&#125;&#x27; in s)): s = s.replace(&#x27;()&#x27;, &#x27;&#x27;).replace(&#x27;[]&#x27;, &#x27;&#x27;).replace(&#x27;&#123;&#125;&#x27;, &#x27;&#x27;) return not s ä¸æ–­åˆ é™¤æœ‰æ•ˆæ‹¬å·ç›´åˆ°ä¸èƒ½åˆ é™¤ï¼Œæ€è·¯ç®€å•æ•ˆç‡ä½ã€‚å¦å¤–ï¼Œstackçš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œè€Œä¸”å¿«å¤šäº†ã€‚ 123456789class Solution: def isValid(self, s: str) -&gt; bool: stack, d = [], &#123;&#x27;&#123;&#x27;: &#x27;&#125;&#x27;, &#x27;[&#x27;: &#x27;]&#x27;, &#x27;(&#x27;: &#x27;)&#x27;&#125; for p in s: if p in &#x27;&#123;[(&#x27;: stack += [p]; elif not (stack and d[stack.pop()] == p): return False return not stack 21. Merge Two Sorted Lists 4è¡Œ123456789101112# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def mergeTwoLists(self, l1: ListNode, l2: ListNode) -&gt; ListNode: if l1 and l2: if l1.val &gt; l2.val: l1, l2 = l2, l1 l1.next = self.mergeTwoLists(l1.next, l2) return l1 or l2 7 or 9 ç­‰äº 7 None and 7 ç­‰äº None23. Merge k Sorted Lists 4è¡Œ123456789101112# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def mergeKLists(self, lists: List[ListNode]) -&gt; ListNode: r, n, p = [], lists and lists.pop(), None while lists or n: r[len(r):], n = ([n], n.next or lists and lists.pop()) if n else ([], lists.pop()) for n in sorted(r, key=lambda x: x.val, reverse=True): n.next, p = p, n return n if r else [] æœ¬é¢˜æ€è·¯ï¼š æŠŠé¢˜ç›®ç»™çš„æ‰€æœ‰é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹æ”¾è¿›ä¸€ä¸ªåˆ—è¡¨ rã€‚ å¯¹è¿™ä¸ªåˆ—è¡¨ r ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œä»å¤§åˆ°å°çš„æ’åºã€‚$O(N\\log N)$ æŠŠæ¯ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ï¼ˆç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§çš„é‚£ä¸ªï¼ŒæŒ‡å‘Noneã€‚ï¼‰ è¿”å›æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªæ–°é“¾è¡¨çš„å¼€å¤´ã€‚ å¦‚ä½•æŠŠæ‰€æœ‰èŠ‚ç‚¹æ”¾è¿› r(result link)ï¼Ÿ æˆ‘ä»¬é¦–å…ˆåˆå§‹åŒ– r ä¸ºç©ºåˆ—è¡¨ï¼Œåˆå§‹åŒ– n(node) ä¸ºé¢˜ç›®æ‰€ç»™çš„ç¬¬ä¸€ä¸ªé“¾è¡¨çš„å¼€å¤´èŠ‚ç‚¹ï¼Œå¹¶åˆ é™¤listsä¸­çš„è¿™ä¸ªèŠ‚ç‚¹ï¼Œæ¥ç€è¿›å…¥whileå¾ªç¯ï¼Œå¦‚æœ n ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆ r += [n]ï¼Œè¿™é‡Œä½¿ç”¨äº†åˆ‡ç‰‡çš„æŠ€å·§ï¼ˆr[len(r):]=[n]ç›¸å½“äºr=r+[n]ï¼‰ï¼Œn=n.nextï¼Œå¦‚æœnæ˜¯ç¬¬ä¸€ä¸ªé“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„è¯n.nextå°±æ˜¯Noneï¼Œä¸‹ä¸€æ¬¡whileçš„æ—¶å€™å¦‚æœlistsä¸ä¸ºç©ºå°±è¯´æ˜è¿˜æœ‰åˆ«çš„é“¾è¡¨ï¼Œæ­¤æ—¶nä¸ºNoneï¼Œæˆ‘ä»¬è®© r ä¸å˜ï¼Œn=lists.pop()ï¼Œä¹Ÿå°±æ˜¯ä»listsä¸­å†å–ä¸‹ä¸€ä¸ªèŠ‚ç‚¹èµ‹å€¼ç»™nï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ç›´åˆ° lists ä¸ºç©ºï¼Œæˆ‘ä»¬å°±æŠŠæ‰€æœ‰èŠ‚ç‚¹æ”¾è¿› r äº†ã€‚ æ€ä¹ˆå¯¹ r æ’åºï¼Ÿ ç”¨äº†sortedå‡½æ•°ï¼Œå…¶ä¸­keyå®šä¹‰äº†æ’åºæ—¶ç”¨æ¥æ¯”è¾ƒçš„æ˜¯æ¯ä¸ªå…ƒç´ çš„valå±æ€§ï¼ŒåŒæ—¶è®¾ç½®reverseä¸ºTrueä»£è¡¨é™åºæ’åºã€‚ å¦‚ä½•ä¿®æ”¹æ¯ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Ÿ æˆ‘ä»¬åˆå§‹åŒ– p(previous node) ä¸ºNoneã€‚éå†é™åºæ’å¥½çš„åˆ—è¡¨ rï¼Œrä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯å€¼æœ€å¤§çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åº”è¯¥è¿”å›çš„é“¾è¡¨çš„ç»“å°¾ï¼Œæˆ‘ä»¬è®¾ç½®å®ƒæŒ‡å‘Noneï¼Œç„¶åè®©p=è¿™ä¸ªèŠ‚ç‚¹ï¼Œç»§ç»­forå¾ªç¯ã€‚ä¹‹åæ¯ç»è¿‡ä¸€ä¸ªèŠ‚ç‚¹ n å°±æŠŠè¿™ä¸ªèŠ‚ç‚¹çš„nextå±æ€§è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ pï¼Œéå†å®Œæˆä¹‹åçš„ nï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éå†ç»è¿‡çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ‹¥æœ‰æœ€å°çš„å€¼ï¼Œè‡ªç„¶å°±æ˜¯æ•´ä¸ªæ–°é“¾è¡¨çš„èµ·å§‹èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†å…¶ä½œä¸ºè¾“å‡ºå€¼ï¼Œå‡½æ•°è¿”å›ã€‚ 24. Swap Nodes in Pairs 3è¡Œ1234567891011# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def swapPairs(self, head: ListNode) -&gt; ListNode: if head and head.next: head.next.next, head.next, head = head, self.swapPairs(head.next.next), head.next return head æ¯æ¬¡é€’å½’äº¤æ¢ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¹¶è¿”å›æ–°å¤´å‚ä¸ä¸Šæ¬¡é€’å½’ å¤šå€¼äº¤æ¢å‚è€ƒè¿™é‡Œ26. Remove Duplicates from Sorted Array 3è¡Œ 12345class Solution: def removeDuplicates(self, nums: List[int]) -&gt; int: for i in range(len(nums)-1, 0, -1): if nums[i] == nums[i-1]: nums.pop(i) return len(nums) æ—¶é—´æ•ˆç‡$O(N^2)$, popæ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º$O(N)$, ç©ºé—´æ•ˆç‡$O(1)$ï¼Œé€†éå†å¯ä»¥é˜²æ­¢åˆ é™¤æŸä¸ªå…ƒç´ åå½±å“ä¸‹ä¸€æ­¥ç´¢å¼•çš„å®šä½ æ¯æ¬¡åˆ é™¤æ•°ç»„å…ƒç´ ä¼šå¼•å‘å¤§é‡çš„æ•°æ®è¿ç§»æ“ä½œï¼Œä½¿ç”¨ä»¥ä¸‹ç®—æ³•è§£é¢˜æ•ˆç‡æ›´é«˜ 12345678class Solution: def removeDuplicates(self, nums: List[int]) -&gt; int: i = 0 for j in range(1, len(nums)): if nums[j] != nums[i]: nums[i + 1] = nums[j] i += 1 return i + 1 if nums else 0 æ­¤è§£æ³•æ€è·¯åŒå®˜æ–¹é¢˜è§£ æ•°ç»„å®Œæˆæ’åºåï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ç½®ä¸¤ä¸ªæŒ‡é’ˆ i å’Œ jï¼Œå…¶ä¸­ i æ˜¯æ…¢æŒ‡é’ˆï¼Œè€Œ j æ˜¯å¿«æŒ‡é’ˆã€‚åªè¦ nums[i] = nums[j]ï¼Œæˆ‘ä»¬å°±å¢åŠ  j ä»¥è·³è¿‡é‡å¤é¡¹ã€‚å½“æˆ‘ä»¬é‡åˆ° nums[j] != nums[i]æ—¶ï¼Œè·³è¿‡é‡å¤é¡¹çš„è¿è¡Œå·²ç»ç»“æŸï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æŠŠå®ƒï¼ˆnums[j]ï¼‰çš„å€¼å¤åˆ¶åˆ° nums[i + 1]ã€‚ç„¶åé€’å¢ iï¼Œæ¥ç€æˆ‘ä»¬å°†å†æ¬¡é‡å¤ç›¸åŒçš„è¿‡ç¨‹ï¼Œç›´åˆ° j åˆ°è¾¾æ•°ç»„çš„æœ«å°¾ä¸ºæ­¢28. Implement strStr() 1è¡Œ 123class Solution: def strStr(self, haystack: str, needle: str) -&gt; int: return haystack.find(needle) ä¸ç”¨å†…ç½®å‡½æ•°ä¹Ÿå¯ä»¥ 123456class Solution: def strStr(self, haystack: &#x27;str&#x27;, needle: &#x27;str&#x27;) -&gt; &#x27;int&#x27;: for i in range(0, len(haystack) - len(needle) + 1): if haystack[i:i+len(needle)] == needle: return i return -1 29. Divide Two Integers 5è¡Œ1234567class Solution: def divide(self, dividend: int, divisor: int) -&gt; int: a, b, r, t = abs(dividend), abs(divisor), 0, 1 while a &gt;= b or t &gt; 1: if a &gt;= b: r += t; a -= b; t += t; b += b else: t &gt;&gt;= 1; b &gt;&gt;= 1 return min((-r, r)[dividend ^ divisor &gt;= 0], (1 &lt;&lt; 31) - 1) è®©è¢«é™¤æ•°ä¸æ–­å‡å»é™¤æ•°ï¼Œç›´åˆ°ä¸å¤Ÿå‡ã€‚æ¯æ¬¡å‡å®Œåé™¤æ•°ç¿»å€ï¼Œå¹¶è®°å½•å½“å‰ä¸ºåˆå§‹é™¤æ•°çš„å‡ å€ï¼ˆç”¨ t è¡¨ç¤ºå€æ•° timeï¼‰ï¼Œè‹¥å‘ç°ä¸å¤Ÿå‡ä¸” t ä¸ä¸º 1 åˆ™è®©é™¤æ•°å˜ä¸ºåŸæ¥çš„ä¸€åŠï¼Œ t ä¹Ÿå‡åŠ a ä¸ºè¢«é™¤æ•°ç»å¯¹å€¼ï¼Œb ä¸ºé™¤æ•°ç»å¯¹å€¼ï¼Œr è¡¨ç¤º resultï¼Œt è¡¨ç¤ºå½“å‰é™¤æ•°å¯¹äºåŸå§‹é™¤æ•°çš„å€æ•° a &lt;&lt; b ç›¸å½“äº a * 2**bï¼Œa &gt;&gt; b ç›¸å½“äº a // 2**b å¼‚æˆ–æ“ä½œ ^ å¯ä»¥åˆ¤æ–­ä¿©æ•°å­—æ˜¯å¦å¼‚å·33. Search in Rotated Sorted Array 3è¡Œ12345class Solution: def search(self, nums, target): self.__class__.__getitem__ = lambda self, m: not(target &lt; nums[0] &lt;= nums[m] or nums[0] &lt;= nums[m] &lt; target or nums[m] &lt; target &lt;= nums[-1]) i = bisect.bisect_left(self, True, 0, len(nums)) return i if target in nums[i:i+1] else -1 ä½œå‡ºæ•°åˆ—çš„å‡½æ•°å›¾åƒï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå«æ–­ç‚¹çš„å±€éƒ¨é€’å¢å‡½æ•°ï¼Œå½¢å¦‚:zap:ï¼Œå‰é¢ä¸€æ®µæ€»æ˜¯æ¯”è¾ƒé«˜ python ä¸­ bisect æ¨¡å—é’ˆå¯¹çš„æ˜¯ list, å¦‚æœç›´æ¥æ„é€  listï¼Œç›¸å½“äºéå†æ‰€æœ‰å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(N)$ è€Œä¸æ˜¯ $O(logN)$ï¼Œå› æ­¤æˆ‘ä»¬ä¿®æ”¹å½“å‰ç±»çš„é­”æ³•æ–¹æ³•ä¼ªé€  listï¼Œç„¶åç”¨å½“å‰ç±»ä»£æ›¿list ç”¨äºŒåˆ†æœç´¢æ—¶ï¼Œm ä»£è¡¨ middleï¼Œlow ä»£è¡¨ lowï¼Œhi ä»£è¡¨ highï¼Œå½“æ»¡è¶³ä»»ä¸€æ¡ä»¶ï½›â‘  targe &lt; middle ä¸” middle åœ¨å‰ä¸€æ®µä¸Š ä¸” target &lt; nums[0] â‘¡ target &gt; middle ä¸” middle åœ¨ç¬¬ä¸€æ®µä¸Š â‘¢ target &gt; middle ä¸” middle åœ¨ç¬¬äºŒæ®µä¸Š ä¸” target &lt;= nums[-1]ï½æ—¶ï¼Œåº”è¯¥å‘å³æœç´¢ï¼Œå› æ­¤ getitem è¿”å› Falseã€‚ å¦å¤–è¿˜æœ‰ä¸€ç§ç®€å•çš„æ€è·¯ï¼šäºŒåˆ†æ³•æ‰¾åˆ°æ–­ç‚¹çš„ä½ç½®æ¢å¤åŸå§‹æ•°ç»„ï¼Œç„¶åæ­£å¸¸äºŒåˆ†æ³•å³å¯ 1234567891011121314151617class Solution: def search(self, nums, target): lo, hi, k = 0, len(nums) - 1, -1 while lo &lt;= hi: m = (lo + hi) // 2 if m == len(nums) - 1 or nums[m] &gt; nums[m+1]: k = m + 1 break elif m == 0 or nums[m] &lt; nums[m-1]: k = m break if nums[m] &gt; nums[0]: lo = m + 1 else: hi = m - 1 i = (bisect.bisect_left(nums[k:] + nums[:k], target) + k) % max(len(nums), 1) return i if nums and nums[i] == target else -1 34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® ç”¨è‡ªå¸¦çš„bisectå‡½æ•°ï¼Œä¸€è¡Œ 12345class Solution: def searchRange(self, nums: List[int], target: int) -&gt; List[int]: # if not nums or target not in nums: return [-1, -1] return [bisect.bisect_left(nums, target), bisect.bisect_right(nums, target)-1] \\ if nums and target in nums else [-1, -1] 35. Search Insert Position 1è¡Œ123class Solution: def searchInsert(self, nums: List[int], target: int) -&gt; int: return bisect.bisect_left(nums, target, 0, len(nums)) 36. Valid Sudoku 4è¡Œ123456class Solution: def isValidSudoku(self, board: List[List[str]]) -&gt; bool: row = [[x for x in y if x != &#x27;.&#x27;] for y in board] col = [[x for x in y if x != &#x27;.&#x27;] for y in zip(*board)] pal = [[board[i+m][j+n] for m in range(3) for n in range(3) if board[i+m][j+n] != &#x27;.&#x27;] for i in (0, 3, 6) for j in (0, 3, 6)] return all(len(set(x)) == len(x) for x in (*row, *col, *pal)) åˆ©ç”¨ set æ£€æŸ¥æ¯ä¸ªåŒºå—ä¸­æ˜¯å¦æœ‰é‡å¤æ•°å­— pal å–åŒºå—çš„éå†æ–¹å¼æ˜¯åˆ©ç”¨ iï¼Œj éå†æ¯ä¸ªå®«æ ¼å·¦ä¸Šè§’ä½ç½®ï¼Œç„¶åå– 3*3 åŒºå—38. Count and Say 1è¡Œ 123class Solution: def countAndSay(self, n: int) -&gt; str: return &#x27;1&#x27; * (n is 1) or re.sub(r&#x27;(.)\\1*&#x27;, lambda m: str(len(m.group())) + m.group(1), self.countAndSay(n - 1)) æ­£åˆ™è¡¨è¾¾å¼ re.sub(æ­£åˆ™ï¼Œæ›¿æ¢å­—ç¬¦ä¸²æˆ–å‡½æ•°ï¼Œè¢«æ›¿æ¢å­—ç¬¦ä¸²ï¼Œæ˜¯å¦åŒºåˆ†å¤§å°å†™) . å¯åŒ¹é…ä»»æ„ä¸€ä¸ªé™¤äº†\\nçš„å­—ç¬¦(.) åŒ¹é…ä»»æ„ä¸€ä¸ªé™¤äº†\\nçš„å­—ç¬¦å¹¶æŠŠè¿™ä¸ªåŒ¹é…ç»“æœæ”¾è¿›ç¬¬ä¸€ç»„(.)\\1 åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦çš„äºŒæ¬¡é‡å¤å¹¶æŠŠé‚£ä¸ªå­—ç¬¦æ”¾å…¥æ•°ç»„(.)\\1* åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦çš„å¤šæ¬¡é‡å¤å¹¶æŠŠé‚£ä¸ªå­—ç¬¦æ”¾å…¥æ•°ç»„ group(default=0)å¯ä»¥å–åŒ¹é…æ–‡æœ¬ group(1)å–ç¬¬ä¸€ä¸ªæ‹¬å·å†…çš„æ–‡æœ¬43. Multiply Strings 5è¡Œ1234567class Solution: def multiply(self, num1: str, num2: str) -&gt; str: d = &#123;&#125; for i, n1 in enumerate(num1[::-1]): for j, n2 in enumerate(num2[::-1]): d[i + j] = d.get(i + j, 0) + int(n1) * int(n2) for k in [*d]: d[k + 1], d[k] = d.get(k + 1, 0) + int(d[k] * 0.1), d[k] % 10 return re.sub(&#x27;^0*&#x27;, &#x27;&#x27;, &#x27;&#x27;.join(map(str, d.values()))[::-1]) or &#x27;0&#x27; æœ¬é¢˜çš„éš¾ç‚¹åœ¨äºè®¡ç®—æ•´æ•°çš„æ—¶å€™ä¸èƒ½è¶…è¿‡32bitsï¼Œå› æ­¤ä½¿ç”¨ç«–å¼è®¡ç®— æˆ‘ä»¬éå†num1ä¸­çš„æ¯ä¸ªæ•°å­—n1ï¼Œç„¶åå¸¦ç€è¿™ä¸ªæ•°å­—éå†num2ä¸­çš„æ¯ä¸ªæ•°å­—n2åšä¹˜æ³•ï¼Œæ‰€å¾—ä¹˜ç§¯æ”¾è¿› d ä¸­ç›¸åº”çš„ä½ç½®ç„¶åé€ä½è®¡ç®—ç»“æœ i + j æ­£å¥½å¯¹åº”ä¿©ä¸ªæ•°å­—ç›¸ä¹˜åæ‰€åœ¨çš„ä½ç½®ï¼Œæ¯”å¦‚ 0 + 0 å°±åº”è¯¥æ˜¯ä¸ªä½ï¼Œ 0 + 1 å°±æ˜¯åä½ï¼Œ 1 + 1 ç™¾ä½ã€‚è¿™é‡Œæ‰€è¯´çš„ä½ç½®å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ä¸­çš„è¿‡ç¨‹å›¾ è‹¥å®Œå…¨ä¸æƒ³ä½¿ç”¨int()å¯ä»¥å‚è€ƒï¼š 123456789class Solution: def multiply(self, num1: str, num2: str) -&gt; str: d = &#123;&#125; for i, n1 in enumerate(num1[::-1]): for j, n2 in enumerate(num2[::-1]): d[i + j] = d.get(i + j, 0) + (ord(n1) - 48) * (ord(n2) - 48) for k in [*d]: d[k + 1], d[k] = d.get(k + 1, 0) + math.floor(d[k] * 0.1), d[k] % 10 return re.sub(&#x27;^0*&#x27;, &#x27;&#x27;, &#x27;&#x27;.join(map(str, d.values()))[::-1]) or &#x27;0&#x27; 46. Permutations 1è¡Œ123class Solution: def permute(self, nums: List[int]) -&gt; List[List[int]]: return [[n] + sub for i, n in enumerate(nums) for sub in self.permute(nums[:i] + nums[i+1:])] or [nums] æ¯æ¬¡å›ºå®šç¬¬ä¸€ä¸ªæ•°å­—é€’å½’åœ°æ’åˆ—æ•°ç»„å‰©ä½™éƒ¨åˆ† python æœ‰å†…ç½®å‡½æ•°å¯ä»¥ç›´æ¥å®ç° 1234class Solution: def permute(self, nums: List[int]) -&gt; List[List[int]]: from itertools import permutations return list(permutations(nums)) 49. Group Anagrams 1è¡Œ123class Solution: def groupAnagrams(self, strs): return [[*x] for _, x in itertools.groupby(sorted(strs, key=sorted), sorted)] ä½¿ç”¨ groupby å‡½æ•°ä¾æ® sorted ç»“æœåˆ†ç»„50. Pow(x, n) 2è¡Œ1234class Solution: def myPow(self, x, n, r=1) -&gt; float: x, n = n &lt; 0 and 1 / x or x, abs(n) return self.myPow(x * x, n // 2, r * (not n % 2 or x)) if n else r å°¾é€’å½’ $O(\\log N)$ è§£æ³• x^4 æ­£å¸¸è®¡ç®—è¿‡ç¨‹ï¼šx * x * x * xï¼Œ$O(N)$ ä¼˜åŒ–åï¼š(x**2)**2ï¼Œ$O(\\log N)$53. Maximum Subarray 2è¡Œ1234class Solution: def maxSubArray(self, nums): from functools import reduce return reduce(lambda r, x: (max(r[0], r[1]+x), max(r[1]+x,x)), nums, (max(nums), 0))[0] reduce å‡½æ•°è¯¦è§£ r[0]ä»£è¡¨ä»¥å½“å‰ä½ç½®ä¸ºç»“å°¾çš„å±€éƒ¨æœ€ä¼˜è§£ r[1]ä»£è¡¨å…¨å±€æœ€ä¼˜è§£ ç›´æ¥DPçš„è§£æ³•æ›´å¥½ç†è§£ä¸€äº› 12345class Solution: def maxSubArray(self, nums: List[int]) -&gt; int: for i in range(1, len(nums)): nums[i] = max(nums[i], nums[i] + nums[i-1]) return max(nums) 54. Spiral Matrix 1è¡Œ123class Solution: def spiralOrder(self, matrix: List[List[int]]) -&gt; List[int]: return matrix and [*matrix.pop(0)] + self.spiralOrder([*zip(*matrix)][::-1]) ä¸ºä»€ä¹ˆæ˜¯[*matrix.pop(0)]è€Œä¸æ˜¯matrix.pop(0)ï¼Ÿå› ä¸ºå¯¹äºåé¢çš„é€’å½’ï¼Œä¼ è¿›æ¥çš„åˆ—è¡¨ä¸­å…ƒç´ æ˜¯tuple58. Length of Last Word 1è¡Œ123class Solution: def lengthOfLastWord(self, s: str) -&gt; int: return len(s.strip(&#x27; &#x27;).split(&#x27; &#x27;)[-1]) 59. Spiral Matrix II 3è¡Œ12345class Solution: def generateMatrix(self, n: int) -&gt; List[List[int]]: r, n = [[n**2]], n**2 while n &gt; 1: n, r = n - len(r), [[*range(n - len(r), n)]] + [*zip(*r[::-1])] return r æµç¨‹å›¾123|| =&gt; |9| =&gt; |8| |6 7| |4 5| |1 2 3| |9| =&gt; |9 8| =&gt; |9 6| =&gt; |8 9 4| |8 7| |7 6 5| 61. Rotate List 4è¡Œ123456789101112# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def rotateRight(self, head: ListNode, k: int) -&gt; ListNode: l = [] while head: l[len(l):], head = [head], head.next if l: l[-1].next, l[-1 - k % len(l)].next = l[0], None return l[- k % len(l)] if l else None 62. Unique Paths 1è¡Œ 123class Solution: def uniquePaths(self, m: int, n: int) -&gt; int: return int(math.factorial(m+n-2)/math.factorial(m-1)/math.factorial(n-1)) é¢˜ç›®å¯ä»¥è½¬æ¢ä¸ºæ’åˆ—ç»„åˆé—®é¢˜ï¼Œè§£æ˜¯$\\cal C^{\\min (m,\\; n)}_{ m+n}$ï¼Œä»$m+n$ä¸ªä¸­é€‰å‡º$m$ä¸ªä¸‹ç§»æˆ–$n$ä¸ªå³ç§»ã€‚ ç”¨DPåšä¹Ÿå¾ˆå¿«ï¼Œä»¥åè‡ªå·±ç®— $\\cal C_a^b$ ä¹Ÿå¯ä»¥ç”¨ç®—è¿™é¢˜çš„DPæ³•ä»£æ›¿ math.factorial çš„é€Ÿåº¦ä¸äºšäºDPï¼Œå¯èƒ½å†…éƒ¨æœ‰ä¼˜åŒ– 0çš„é˜¶ä¹˜ä¸º166. Plus One 1è¡Œ 123class Solution: def plusOne(self, digits: List[int]) -&gt; List[int]: return list(map(int, str(int(&#x27;&#x27;.join(map(str, digits))) + 1))) 67. Add Binary 1è¡Œ123class Solution: def addBinary(self, a: str, b: str) -&gt; str: return bin(int(a, 2) + int(b, 2))[2:] éå†…ç½®å‡½æ•°è§£æ³•ï¼š1234567891011class Solution: def addBinary(self, a: str, b: str) -&gt; str: r, p = &#x27;&#x27;, 0 d = len(b) - len(a) a = &#x27;0&#x27; * d + a b = &#x27;0&#x27; * -d + b for i, j in zip(a[::-1], b[::-1]): s = int(i) + int(j) + p r = str(s % 2) + r p = s // 2 return &#x27;1&#x27; + r if p else r 69. Sqrt(x) 1è¡Œ123class Solution: def mySqrt(self, x: int) -&gt; int: return int(x ** 0.5) å‡ºé¢˜è€…åº”è¯¥æ˜¯å¸Œæœ›çœ‹åˆ°ä¸‹é¢çš„ç­”æ¡ˆï¼š123456class Solution: def mySqrt(self, x: int) -&gt; int: r = x while r*r &gt; x: r = (r + x/r) // 2 return int(r) åŸºæœ¬ä¸ç­‰å¼$\\frac {a+b}{2} \\ge \\sqrt{ab}$ æ¨å¯¼è‡ª $(a-b)^2 \\ge 0$ï¼Œæ³¨æ„ $a&gt;0$ ä¸” $b&gt;0$ã€‚ r ä»£è¡¨ result70. Climbing Stairs 2è¡Œ 1234class Solution: def climbStairs(self, n: int) -&gt; int: from functools import reduce return reduce(lambda r, _: (r[1], sum(r)), range(n), (1, 1))[0] dpé€’å½’æ–¹ç¨‹ï¼šåˆ°è¾¾å½“å‰æ¥¼æ¢¯çš„è·¯å¾„æ•° = åˆ°è¾¾ä¸Šä¸ªæ¥¼æ¢¯çš„è·¯å¾„æ•° + åˆ°è¾¾ä¸Šä¸Šä¸ªæ¥¼æ¢¯çš„è·¯å¾„æ•° è¿™é‡Œç”¨ä¸€ä¸ªå…ƒç»„ r æ¥å‚¨å­˜ï¼ˆå½“å‰æ¥¼æ¢¯è·¯å¾„æ•°ï¼Œä¸‹ä¸€å±‚æ¥¼æ¢¯è·¯å¾„æ•°ï¼‰ åˆ©ç”¨ reduce æ¥ä»£æ›¿forå¾ªç¯ã€‚reduce å‡½æ•°è¯¦è§£71. Simplify Path 4è¡Œ123456class Solution: def simplifyPath(self, path: str) -&gt; str: r = [] for s in path.split(&#x27;/&#x27;): r = &#123;&#x27;&#x27;:r, &#x27;.&#x27;:r, &#x27;..&#x27;:r[:-1]&#125;.get(s, r + [s]) return &#x27;/&#x27; + &#x27;/&#x27;.join(r) 73. çŸ©é˜µç½®é›¶ 5è¡Œ123456789class Solution: def setZeroes(self, matrix: List[List[int]]) -&gt; None: row = [[0] * len(i) if 0 in i else i for i in matrix] col = [[0] * len(j) if 0 in j else list(j) for j in zip(*matrix)] col2row = list(map(list, zip(*col))) # ä¸Šé¢ä¸€è¡Œæ•ˆæœç­‰åŒï¼š # col2row = [list(i) for i in zip(*col)] for i in range(len(matrix)): matrix[i] = col2row[i] if row[i] != [0] * len(matrix[0]) else row[i] è·å–æ¯ä¸€è¡Œ / åˆ—çš„å€¼ï¼Œå‡å¦‚æœ‰0 å°±æ•´è¡Œ / æ•´åˆ—ç½®ä¸º0 é‡æ–°å°†åˆ—æ’åºåˆ—è¡¨è½¬æ¢ä¸ºè¡Œæ’åºåˆ—è¡¨ï¼Œå³åŸæ¥çš„matrixä¸­æœ‰0çš„åˆ—å…¨ä¸º0ï¼Œè¡Œä¸å˜ zip(*col) è¿”å›çš„æ˜¯zipç±»å‹ï¼Œéœ€è¦è½¬æ¢æˆlistï¼Œå…¶ä¸­å…ƒç´ ç±»å‹ä¸ºå…ƒç»„ æ‰€ä»¥ä¹‹ååšäº†ä¸¤æ­¥è½¬æ¢ï¼Œå…ˆå°†zip()è¿”å›çš„å„ä¸ªå…ƒç»„è½¬æ¢ä¸ºlistï¼Œåœ¨å°†æ•´ä¸ªè½¬æ¢ä¸ºlist æ›¿æ¢matrixå„è¡Œï¼Œ å¦‚æœä¸€æ•´è¡Œä¸º0ï¼Œ åˆ™æ›¿æ¢ä¸º0ï¼Œå¦åˆ™ä¸ºcol2rowå¯¹åº”çš„å„è¡Œ 74. æœç´¢äºŒç»´çŸ©é˜µ 4è¡Œ123456class Solution: def searchMatrix(self, matrix: List[List[int]], target: int) -&gt; bool: if not matrix or not matrix[0]: return False col = list(list(zip(*matrix))[0]) # set() -&gt; list() index = bisect.bisect_left(col, target, 0, len(matrix)-1) # äºŒåˆ†æŸ¥æ‰¾ return target in (matrix[index] + matrix[index-1]) å…ˆè·å–é¦–åˆ—ï¼Œç„¶åäºŒåˆ†ç±»æ‰¾åˆ°è¿™ä¸ªæ•°æ‰€åœ¨çš„è¡Œï¼Œç„¶åè¿›è¡Œåˆ¤æ–­ 78. Subsets 2è¡Œ1234class Solution: def subsets(self, nums: List[int]) -&gt; List[List[int]]: from itertools import combinations return sum([list(combinations(nums, i)) for i in range(len(nums) + 1)], []) 80. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II 4è¡Œ12345def removeDuplicates(nums: [int]) -&gt; int: for i in range(len(nums)-3, -1, -1): if nums[i] == nums[i+1] and nums[i] == nums[i+2]: nums.pop(i) return len(nums) ä»å°¾éƒ¨å¼€å§‹è€ƒè™‘ 81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II 1è¡Œ12def search(nums: [int], target: int) -&gt; bool: return target in nums 83. Remove Duplicates from Sorted List 3è¡Œ1234567891011# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def deleteDuplicates(self, head: ListNode) -&gt; ListNode: if head: head.next = self.deleteDuplicates(head.next) return head.next if head.next and head.val == head.next.val else head å¦‚æœå½“å‰èŠ‚ç‚¹å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŒï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªèŠ‚ç‚¹ åœ¨æ¯ä¸ªé€’å½’ä¸­å°†ä¸‹ä¸€ä¸ªé€’å½’ç»“æœè¿æ¥åˆ°å½“å‰èŠ‚ç‚¹ 88. Merge Sorted Array 1è¡Œ123456class Solution: def merge(self, nums1: List[int], m: int, nums2: List[int], n: int) -&gt; None: &quot;&quot;&quot; Do not return anything, modify nums1 in-place instead. &quot;&quot;&quot; while n &gt; 0: nums1[m+n-1], m, n = (nums1[m-1], m-1, n) if m and nums1[m-1] &gt; nums2[n-1] else (nums2[n-1], m, n-1) è¿™ç§é¢˜å€’ç€ç®—æ›´å®¹æ˜“ ä¸Šé¢é‚£è¡Œä»£ç å…¶å®å°±ç›¸å½“äºï¼š 12345678910class Solution: def merge(self, nums1: List[int], m: int, nums2: List[int], n: int) -&gt; None: &quot;&quot;&quot; Do not return anything, modify nums1 in-place instead. &quot;&quot;&quot; while n &gt; 0: if m and nums1[m-1] &gt; nums2[n-1]: nums1[m+n-1], m, n = nums1[m-1], m-1, n else: nums1[m+n-1], m, n = nums2[n - 1], m, n-1 89. Gray Code 1è¡Œ123class Solution: def grayCode(self, n: int) -&gt; List[int]: return (lambda r: r + [x | 1&lt;&lt;n-1 for x in r[::-1]])(self.grayCode(n-1)) if n else [0] å‰4ä¸ªç»“æœï¼š 1234[0][0 1][00 01 11 10][000 001 011 010 110 111 101 100] é€’å½’æ–¹ç¨‹ï¼šè¿™ä¸€æ­¥ç»“æœ = ä¸Šä¸€æ­¥ç»“æœ + ä¸Šä¸€æ­¥ç»“æœçš„é•œåƒå¹¶åœ¨æ¯ä¸ªäºŒè¿›åˆ¶æ•°å­—å‰é¢åŠ ä¸€ä½1 &lt;&lt; å·¦ç§»ç¬¦å·ï¼Œå³åœ¨äºŒè¿›åˆ¶è¡¨ç¤ºååŠ ä¸€ä½ 0 ï¼Œä¾‹å­ï¼š3&lt;&lt;1 ç­‰äº 6ï¼ˆ011 â†’ 110ï¼‰ï¼Œç›¸å½“äº 3 * 2çš„1æ¬¡æ–¹ x | 1&lt;&lt;n-1 å°±æ˜¯åœ¨åè¿›åˆ¶æ•°å­— x çš„äºŒè¿›åˆ¶å‰é¢åŠ ä¸€ä½1ä¹‹åçš„åè¿›åˆ¶ç»“æœï¼Œæ¯”å¦‚ x = 1ï¼Œæœ‰ 1 | 10 ç­‰äº 110 å¾ªç¯å¯ä»¥é¿å…ä¸€äº›ä¸å¿…è¦çš„æ“ä½œï¼Œä¼šæ¯”é€’å½’å¿«ä¸€äº›ï¼š 123456class Solution: def grayCode(self, n: int) -&gt; List[int]: r = [0] for i in range(n): r.extend([x | 1&lt;&lt;i for x in r[::-1]]) return r æˆ–è€…ç›´æ¥èƒŒæ ¼é›·ç çš„å…¬å¼ğŸ¥¶å§ï¼š123class Solution: def grayCode(self, n: int) -&gt; List[int]: return [i ^ i &gt;&gt; 1 for i in range(1 &lt;&lt; n)] 91. Decode Ways 4è¡Œ123456class Solution: def numDecodings(self, s: str) -&gt; int: pp, p = 1, int(s[0] != &#x27;0&#x27;) for i in range(1, len(s)): pp, p = p, pp * (9 &lt; int(s[i-1:i+1]) &lt;= 26) + p * (int(s[i]) &gt; 0) return p è¾“å…¥ â€˜12â€™ çš„ç»“æœä¸º 2ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ â€˜12â€™ åé¢å¢åŠ ä¸€ä¸ªæ•°å­— 3ï¼Œè¾“å…¥å˜æˆ â€˜123â€™ï¼Œç»“æœæ˜¯ â€˜12â€™çš„ç»“æœ + â€˜1â€™çš„ç»“æœ = 3 i ä»ç´¢å¼• 1 å¼€å§‹é€æ¸éå† sï¼Œå½“å‰ä½ç½®å¯¹åº”ç»“æœ = ä¸Šä¸Šæ¬¡ç»“æœ(å¦‚æœ i ä½ç½®å­—ç¬¦å’Œ i-1 ä½ç½®å­—ç¬¦çš„ç»„åˆæ»¡è¶³æ¡ä»¶) + ä¸Šæ¬¡ç»“æœ(å¦‚æœ s[i] ä¸ä¸º 0)94. Binary Tree Inorder Traversal 2è¡Œ1234567891011# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def inorderTraversal(self, root: TreeNode) -&gt; List[int]: f = self.inorderTraversal return f(root.left) + [root.val] + f(root.right) if root else [] é€’å½’12345678910111213class Solution: def inorderTraversal(self, root: TreeNode) -&gt; List[int]: r, stack = [], [] while True: while root: stack.append(root) root = root.left if not stack: return r node = stack.pop() r.append(node.val) root = node.right return r è¿­ä»£98. Validate Binary Search Tree 3è¡Œ123456789101112# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def isValidBST(self, root: TreeNode, first=True) -&gt; bool: if not root: return first or [] l = self.isValidBST(root.left, 0) + [root.val] + self.isValidBST(root.right, 0) return all([a &gt; b for a, b in zip(l[1:], l)]) if first else l æœç´¢äºŒå‰æ ‘çš„ä¸­åºéå†ç»“æœå‘ˆå‡åº101. Symmetric Tree 5è¡Œ1234567891011121314# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def isSymmetric(self, root: TreeNode) -&gt; bool: if not root or root.left is root.right: return True l, r, i, o = root.left, root.right, TreeNode(0), TreeNode(0) if (l and l.val) != (r and r.val): return False i.left, i.right, o.left, o.right = l.left, r.right, l.right, r.left return self.isSymmetric(i) and self.isSymmetric(o) ä¸€æ£µæ ‘å¯¹ç§°æ„å‘³ç€ï¼š å·¦èŠ‚ç‚¹ == å³èŠ‚ç‚¹ å·¦èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸å³èŠ‚ç‚¹å³å­æ ‘å¯¹ç§° å·¦èŠ‚ç‚¹çš„å³å­æ ‘ä¸å³èŠ‚ç‚¹å·¦å­æ ‘å¯¹ç§° å‰ä¸‰è¡Œå¤„ç†ç‰¹æ®Šæƒ…å†µï¼šrootä¸ºNoneæˆ–rootæ— å­èŠ‚ç‚¹ç›´æ¥è¿”å›Trueï¼Œrootåªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹æˆ–rootä¸¤ä¸ªå­èŠ‚ç‚¹ä¸ç›¸ç­‰ç›´æ¥è¿”å›False ç¬¬ä¸€ä¸ªæ¡ä»¶åœ¨å‰ä¸‰è¡Œå¤„ç†è¿‡äº†ï¼Œå¯¹äºç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬åˆ†åˆ«æ„é€ ä¸¤ä¸ªå‡æ ‘i(inner)å’Œo(outer)ï¼Œiä»£è¡¨å†…å‡æ ‘ï¼Œå¯¹åº”æ¡ä»¶äºŒï¼Œoä»£è¡¨å¤–å‡æ ‘ï¼Œå¯¹åº”æ¡ä»¶ä¸‰ã€‚é€’å½’å†…å¤–å‡æ ‘å³å¯104. Maximum Depth of Binary Tree 1è¡Œ12345678910# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def maxDepth(self, root: TreeNode) -&gt; int: return max(map(self.maxDepth,(root.left, root.right))) + 1 if root else 0 åˆ©ç”¨mapå‡½æ•°é€’å½’å·¦å³èŠ‚ç‚¹è·å–æœ€å¤§å€¼ï¼Œmapå‡½æ•°ä¼šå°†å‚æ•°ä¸€æ‰€æŒ‡å‘çš„å‡½æ•°åº”ç”¨äºå‚æ•°äºŒé‡Œçš„æ‰€æœ‰å¯¹è±¡å¹¶è¿”å›æ‰€æœ‰ç»“æœæ„æˆçš„è¿­ä»£å™¨110. å¹³è¡¡äºŒå‰æ ‘ 3è¡Œ123456789101112# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def isBalanced(self, root: TreeNode, first=True) -&gt; bool: if not root: return first or 0 l, r = map(lambda x: self.isBalanced(x, False), [root.left, root.right]) return max(l,r)+1 if min(l,r)&gt;-1 and abs(l-r)&lt;=1 else (-1, False)[first] DFSé€’å½’æ¯ä¸ªèŠ‚ç‚¹ å¦‚æœè¿™ä¸ªèŠ‚ç‚¹ä¸å¹³è¡¡ï¼Œé‚£ä¹ˆè¿™æ£µæ ‘è‚¯å®šä¸å¹³è¡¡ï¼Œå®ƒå’Œå®ƒçš„æ‰€æœ‰çˆ¶èŠ‚ç‚¹éƒ½è¿”å› -1ï¼ˆæ ¹èŠ‚ç‚¹è¿”å›Falseï¼‰ å¦‚æœèŠ‚ç‚¹å¹³è¡¡ï¼Œåˆ™è¿”å›å½“å‰æ ‘çš„é«˜åº¦ + 1ï¼ˆæ ¹èŠ‚ç‚¹è¿”å›Trueï¼‰112. Path Sum 3è¡Œ123456789101112# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def hasPathSum(self, root: TreeNode, sum: int) -&gt; bool: if not root: return False l, r, f = root.left, root.right, lambda x: self.hasPathSum(x, sum - root.val) return l is r and sum == root.val or f(l) or f(r) è€ƒè™‘åˆå§‹çŠ¶æ€ï¼šå½“æ ‘ä¸å­˜åœ¨æ—¶ç›´æ¥è¿”å› False è€ƒè™‘æ”¯è·¯1ï¼šå½“å‰èŠ‚ç‚¹ä¸ºå¶èŠ‚ç‚¹æ—¶ç›´æ¥åˆ¤æ–­æ€»å’Œæ˜¯å¦è¾¾åˆ°è¦æ±‚ è€ƒè™‘æ”¯è·¯2ï¼šå½“å‰èŠ‚ç‚¹ä¸ºéå¶èŠ‚ç‚¹æ—¶å°†æ€»å’Œç¼©å°å¹¶ç»§ç»­é€’å½’ï¼Œåˆ¤æ–­å·¦å³èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„ å½“é€’å½’å‡½æ•°åˆ°è¾¾å¶èŠ‚ç‚¹æ—¶ï¼Œsum å·²ç»è¢«å‰Šå‡äº†å¤šæ¬¡ï¼Œæ­¤æ—¶ sum - node.val å³ä¸º åŸå§‹çš„sum - æ•´æ¡è·¯å¾„çš„æ€»å’Œ118. Pascalâ€™s Triangle 1è¡Œ123class Solution: def generate(self, numRows: int) -&gt; List[List[int]]: return [[math.factorial(i)//math.factorial(i-j)//math.factorial(j) for j in range(i+1)] for i in range(numRows)] å‚è€ƒäº†æ¨è¾‰ä¸‰è§’çš„æ•°å­¦æ€§è´¨ï¼Œç»´åŸºç™¾ç§‘ æ­£å¸¸è¿­ä»£æ–¹æ³•ï¼š 123456class Solution: def generate(self, numRows: int) -&gt; List[List[int]]: r = [[1]] for i in range(1, numRows): r.append([1] + [sum(r[-1][j:j+2]) for j in range(i)]) return numRows and r or [] 121. Best Time to Buy and Sell Stock 2è¡Œ1234class Solution: def maxProfit(self, prices: List[int]) -&gt; int: from functools import reduce return reduce(lambda r, p: (max(r[0], p-r[1]), min(r[1], p)), prices, (0, float(&#x27;inf&#x27;)))[0] r = (ç»“æœï¼Œä¹‹å‰éå†è¿‡çš„æ‰€æœ‰å…ƒç´ ä¸­çš„æœ€å°å€¼) reduce å‡½æ•°è¯¦è§£123456class Solution: def maxProfit(self, prices: List[int]) -&gt; int: r, m = 0, float(&#x27;inf&#x27;) for p in prices: r, m = max(r, p - m), min(m, p) return r 122. Best Time to Buy and Sell Stock II 2è¡Œ123class Solution: def maxProfit(self, prices: List[int]) -&gt; int: return sum(b - a for a, b in zip(prices, prices[1:]) if b &gt; a) æœ¬é¢˜å¯ä»¥åœ¨åŒä¸€å¤©ä¹°å…¥å’Œå–å‡ºï¼Œå› æ­¤åªè¦å½“å¤©ç¥¨ä»·æ¯”æ˜¨å¤©çš„é«˜å°±å¯ä»¥å–å‡º124. Binary Tree Maximum Path Sum 4è¡Œ12345678910111213# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def maxPathSum(self, root: TreeNode, ok=True) -&gt; int: if not root: return 0 l, r = self.maxPathSum(root.left, False), self.maxPathSum(root.right, False) self.max = max(getattr(self, &#x27;max&#x27;, float(&#x27;-inf&#x27;)), l + root.val + r) return self.max if ok else max(root.val + max(l, r), 0) ä½¿ç”¨ self.max è®°å½•å…¨å±€æœ€å¤§å€¼ï¼Œgetattr è¿”å›è‡ªèº« max å±æ€§çš„å€¼æˆ–é¢„å®šä¹‰çš„è´Ÿæ— ç©· æœ¬é¢˜æ€è·¯æ˜¯ï¼šé€’å½’æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›max(ä»¥å½“å‰èŠ‚ç‚¹ä¸ºç»“å°¾çš„æœ€å¤§è·¯å¾„å’Œ,0)ã€‚å¹¶æ›´æ–°æœ€å¤§å€¼å…¨å±€æœ€å¤§è·¯å¾„å’Œ=max(å…¨å±€æœ€å¤§è·¯å¾„å’Œï¼Œå½“å‰èŠ‚ç‚¹å€¼+å·¦å­æ ‘è¿”å›ç»“æœ+å³å­æ ‘è¿”å›ç»“æœ) ç”¨okåˆ¤æ–­æ˜¯ä¸æ˜¯ç¬¬ä¸€æ¬¡é€’å½’ï¼Œæ˜¯å°±è¿”å›å…¨å±€æœ€å¤§å€¼ï¼Œå¦åˆ™ç…§å¸¸133. Clone Graph12345678910&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, neighbors): self.val = val self.neighbors = neighbors&quot;&quot;&quot;class Solution: def cloneGraph(self, node: &#x27;Node&#x27;) -&gt; &#x27;Node&#x27;: return copy.deepcopy(node) dfsè§£æ³•è¯·å‚è€ƒ 133å…‹éš†å›¾136. Single Number 2è¡Œ1234class Solution: def singleNumber(self, nums: List[int]) -&gt; int: from functools import reduce return reduce(int.__xor__, nums) è¿™é‡Œç”¨åˆ°äº†å¼‚æˆ–ï¼ˆxorï¼‰ï¼Œç›¸åŒçš„æ•°å­—å¼‚æˆ–åä¸º0ï¼Œ0å¼‚æˆ–ä»»ä½•æ•°éƒ½ç­‰äºé‚£ä¸ªæ•°ï¼Œç”¨reduceåœ¨åˆ—è¡¨æ‰€æœ‰å…ƒç´ ä¹‹é—´ä½¿ç”¨å¼‚æˆ–^ï¼Œé‚£ä¹ˆç•™ä¸‹çš„å°±æ˜¯é‚£ä¸ªå•ç‹¬çš„æ•°å­—äº†138. Copy List with Random Pointer 1è¡Œ1234567891011&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, next, random): self.val = val self.next = next self.random = random&quot;&quot;&quot;class Solution: def copyRandomList(self, head: &#x27;Node&#x27;) -&gt; &#x27;Node&#x27;: return copy.deepcopy(head) å†…ç½®å‡½æ•°139. Word Break 8è¡Œ123456789101112class Solution: def wordBreak(self, s, wordDict): def f(s, d=&#123;&#125;): if not s in d: for i in range(1, 1 + len(s)): d[s[:i]] = s[:i] in wordDict and (i == len(s) or f(s[i:])) if d[s[:i]]: return True return False return d[s] return f(s) brute force + memory141. Linked List Cycle 2è¡Œ1234567891011121314# Definition for singly-linked list.# class ListNode(object):# def __init__(self, x):# self.val = x# self.next = Noneclass Solution(object): def hasCycle(self, head): &quot;&quot;&quot; :type head: ListNode :rtype: bool &quot;&quot;&quot; while head and head.val != None: head.val, head = None, head.next return head != None è¿™é¢˜ä¸æ”¯æŒpython3ï¼Œæ‰€ä»¥ç”¨pyhton2è§£æ³•ä»£æ›¿ï¼Œä¸‹é¢˜è®°å¾—è°ƒå›æ¥ ç ´åèµ°è¿‡çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œä¸‹æ¬¡å†é‡åˆ°å°±çŸ¥é“äº† ä¸è¿‡ä»¥ä¸Šæ–¹æ³•ä¼šä¸¢å¤±åŸæœ‰ä¿¡æ¯ï¼Œä¸€èˆ¬è§£æ³•ä¸ºå¿«æ…¢æŒ‡é’ˆ123456789101112131415# Definition for singly-linked list.# class ListNode(object):# def __init__(self, x):# self.val = x# self.next = Noneclass Solution(object): def hasCycle(self, head): slow = fast = head while fast and fast.next: fast = fast.next.next slow = slow.next if slow == fast: return True return False 142. Linked List Cycle II 5è¡Œ1234567891011121314151617# Definition for singly-linked list.# class ListNode(object):# def __init__(self, x):# self.val = x# self.next = Noneclass Solution(object): def detectCycle(self, head): &quot;&quot;&quot; :type head: ListNode :rtype: ListNode &quot;&quot;&quot; s = &#123;None&#125; while head not in s: s.add(head) head = head.next return head æŠŠè§è¿‡çš„èŠ‚ç‚¹ä¸¢é›†åˆé‡Œï¼Œä¸‹æ¬¡å†é‡è§å°±æ˜¯ç¯çš„å¼€å§‹ è¿˜æœ‰ä¸€ä¸ªçº¯æ•°å­¦çš„å¿«æ…¢æŒ‡é’ˆè§£æ³•ï¼Œè®¾ç¯çš„èµ·å§‹èŠ‚ç‚¹ä¸º Eï¼Œå¿«æ…¢æŒ‡é’ˆä» head å‡ºå‘ï¼Œå¿«æŒ‡é’ˆé€Ÿåº¦ä¸º 2ï¼Œè®¾ç›¸äº¤èŠ‚ç‚¹ä¸º Xï¼Œhead åˆ° E çš„è·ç¦»ä¸º Hï¼ŒE åˆ° X çš„è·ç¦»ä¸º Dï¼Œç¯çš„é•¿åº¦ä¸º Lï¼Œé‚£ä¹ˆæœ‰ï¼šå¿«æŒ‡é’ˆèµ°è¿‡çš„è·ç¦»ç­‰äºæ…¢æŒ‡é’ˆèµ°è¿‡çš„è·ç¦»åŠ å¿«æŒ‡é’ˆå¤šèµ°çš„è·ç¦»ï¼ˆå¤šèµ°äº† n åœˆçš„ Lï¼‰ 2(H + D) = H + D + nLï¼Œå› æ­¤å¯ä»¥æ¨å‡º H = nL - Dï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬è®©ä¿©ä¸ªæ…¢æŒ‡é’ˆä¸€ä¸ªä» head å‡ºå‘ï¼Œä¸€ä¸ªä» X å‡ºå‘çš„è¯ï¼Œä»–ä»¬ä¸€å®šä¼šåœ¨èŠ‚ç‚¹ E ç›¸é‡ 12345 _____ / \\head___________E \\ \\ / X_____/ 1234567891011121314class Solution(object): def detectCycle(self, head): slow = fast = head while fast and fast.next: fast = fast.next.next slow = slow.next if slow == fast: break else: return None while head is not slow: head = head.next slow = slow.next return head 146. LRU Cache 7è¡Œ1234567891011121314151617181920class LRUCache(object): def __init__(self, capacity): self.od, self.cap = collections.OrderedDict(), capacity def get(self, key): if key not in self.od: return -1 self.od.move_to_end(key) return self.od[key] def put(self, key, value): if key in self.od: del self.od[key] elif len(self.od) == self.cap: self.od.popitem(False) self.od[key] = value# Your LRUCache object will be instantiated and called as such:# obj = LRUCache(capacity)# param_1 = obj.get(key)# obj.put(key,value) 148. Sort List 10è¡Œ12345678910111213141516171819# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def sortList(self, head: ListNode) -&gt; ListNode: if not (head and head.next): return head pre, slow, fast = None, head, head while fast and fast.next: pre, slow, fast = slow, slow.next, fast.next.next pre.next = None return self.mergeTwoLists(*map(self.sortList, (head, slow))) def mergeTwoLists(self, l1: ListNode, l2: ListNode) -&gt; ListNode: if l1 and l2: if l1.val &gt; l2.val: l1, l2 = l2, l1 l1.next = self.mergeTwoLists(l1.next, l2) return l1 or l2 ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆå¯»æ‰¾é“¾è¡¨ä¸­ç‚¹ï¼Œå¹¶åˆ†è§£é“¾è¡¨ é€’å½’èåˆä¿©ä¸ªæœ‰åºé“¾è¡¨ï¼Œè¯¦è§£è§ 21 é¢˜ æ­¤å¤„å¿½ç•¥äº†é€’å½’å¼€æ ˆå¯¼è‡´çš„é å¸¸æ•°çº§ç©ºé—´å¤æ‚åº¦ï¼ˆæƒ³å¤ªå¤šäº†å§ï¼‰ï¼Œå¦‚æœä¸€å®šè¦æŠ¬æ ï¼Œæ¨èä½¿ç”¨quicksort 123456789101112131415161718192021222324252627282930313233343536class Solution(object): def sortList(self, head): &quot;&quot;&quot; :type head: ListNode :rtype: ListNode &quot;&quot;&quot; def partition(start, end): node = start.next.next pivotPrev = start.next pivotPrev.next = end pivotPost = pivotPrev while node != end: temp = node.next if node.val &gt; pivotPrev.val: node.next = pivotPost.next pivotPost.next = node elif node.val &lt; pivotPrev.val: node.next = start.next start.next = node else: node.next = pivotPost.next pivotPost.next = node pivotPost = pivotPost.next node = temp return [pivotPrev, pivotPost] def quicksort(start, end): if start.next != end: prev, post = partition(start, end) quicksort(start, prev) quicksort(post, end) newHead = ListNode(0) newHead.next = head quicksort(newHead, None) return newHead.next 150. Evaluate Reverse Polish Notation 5è¡Œ1234567class Solution: def evalRPN(self, tokens: List[str]) -&gt; int: t, f = tokens.pop(), self.evalRPN if t in &#x27;+-*/&#x27;: b, a = f(tokens), f(tokens) t = eval(&#x27;a&#x27; + t + &#x27;b&#x27;) return int(t) é€’å½’åœ°è¿”å›å·¦å³è¡¨è¾¾å¼æ“ä½œåç»“æœ eval å‡½æ•°å°†å­—ç¬¦ä¸²çœ‹ä½œä»£ç å¾—åˆ°è¾“å‡ºå€¼155. Min Stack æ¯ä¸ª1è¡Œ123456789101112131415161718192021222324class MinStack: def __init__(self): self.data = [(None, float(&#x27;inf&#x27;))] def push(self, x: &#x27;int&#x27;) -&gt; &#x27;None&#x27;: self.data.append((x, min(x, self.data[-1][1]))) def pop(self) -&gt; &#x27;None&#x27;: if len(self.data) &gt; 1: self.data.pop() def top(self) -&gt; &#x27;int&#x27;: return self.data[-1][0] def getMin(self) -&gt; &#x27;int&#x27;: return self.data[-1][1]# Your MinStack object will be instantiated and called as such:# obj = MinStack()# obj.push(x)# obj.pop()# param_3 = obj.top()# param_4 = obj.getMin() 160. Intersection of Two Linked Lists 3è¡Œ123456789101112131415# Definition for singly-linked list.# class ListNode(object):# def __init__(self, x):# self.val = x# self.next = Noneclass Solution(object): def getIntersectionNode(self, headA, headB): &quot;&quot;&quot; :type head1, head1: ListNode :rtype: ListNode &quot;&quot;&quot; a, b = (headA, headB) if headA and headB else (None, None) while a != b: a, b = not a and headB or a.next, not b and headA or b.next return a è¿™é¢˜ä¸æ”¯æŒ Python3 æ‰€ä»¥åªèƒ½ç”¨ Python2 åšäº† æŠŠç¬¬ä¸€æ¡é“¾è¡¨çš„å°¾éƒ¨æ¥åˆ°ç¬¬äºŒæ¡é“¾è¡¨çš„å¼€å¤´ï¼Œç¬¬äºŒæ¡æ¥åˆ°ç¬¬ä¸€æ¡çš„å¼€å¤´ï¼Œå°±èƒ½æ¶ˆé™¤ä¿©æ¡é“¾è¡¨çš„é•¿åº¦å·®ï¼Œå¹¶åœ¨æŸä¸€æ—¶åˆ»åœ¨ç¬¬ä¸€ä¸ªäº¤å‰ç‚¹ç›¸é‡ï¼Œæˆ–åœ¨èµ°å®Œä¿©æ¡é“¾è¡¨é•¿åº¦çš„æ—¶å€™åŒæ—¶ä¸º None 1234# å‡è®¾æœ‰ä¸¤æ¡é“¾è¡¨1â†’2â†’3â†’4å’Œâ‘ â†’â‘¡â†’â‘¢ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ç®—æ³•æµç¨‹ â†“1 â†’ 2 â†˜ â†— â†’ 4 1 â†’ 2 â†˜ â†— â†’ 4 â†’ â‘  â†’ â†’ â†’ 3(â‘¡) â¤ ç›¸é‡äº†â‘  â†’ â†’ â†’ 3(â‘¡) â†’ â‘¢ æŠŠ4æ¥åˆ°â‘ å‰é¢ï¼ŒæŠŠâ‘¢æ¥åˆ°1å‰é¢ â‘  â†’ â†’ â†’ 3(â‘¡) â†’ â‘¢ â†’ 1 â†’ 2 â†— è‹¥éç›¸äº¤é“¾è¡¨åˆ™åŒæ—¶èµ°åˆ°None 162. Find Peak Element 2è¡Œ1234class Solution: def findPeakElement(self, nums: List[int]) -&gt; int: self.__class__.__getitem__ = lambda self, i: i and nums[i - 1] &gt; nums[i] return bisect.bisect_left(self, True, 0, len(nums)) - 1 äºŒåˆ†æŸ¥æ‰¾å¥—è·¯ å¦‚æœå½“å‰ä½ç½®çš„å·¦è¾¹æ˜¯æ›´å¤§çš„æ•°å­—ï¼Œåˆ™å½“å‰ä½ç½®ç½®ä¸ºTrueï¼Œç»§ç»­å‘å·¦æœç´¢ï¼Œæœ€ååº”è¯¥æ’å…¥çš„ä½ç½® = æˆ‘ä»¬å¯»æ‰¾çš„ä½ç½® + 1ï¼Œå› æ­¤æœ€å - 1165. Compare Version Numbers 4è¡Œ123456class Solution: def compareVersion(self, version1: str, version2: str) -&gt; int: v1, v2 = [*map(int, version1.split(&#x27;.&#x27;))], [*map(int, version2.split(&#x27;.&#x27;))] d = len(v2) - len(v1) v1, v2 = v1 + [0] * d, v2 + [0] * -d return (v1 &gt; v2) - (v1 &lt; v2) åˆ©ç”¨ python åºåˆ—æ¯”è¾ƒçš„æ€§è´¨169. Majority Element 1è¡Œ123class Solution: def majorityElement(self, nums: List[int]) -&gt; int: return sorted(nums)[len(nums) // 2] 171. Excel Sheet Column Number 1è¡Œ123class Solution: def titleToNumber(self, s: str) -&gt; int: return sum((ord(c) - 64) * 26**i for i, c in enumerate(s[::-1])) 173. Binary Search Tree Iterator 6è¡Œ1234567891011121314151617181920212223242526272829303132# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass BSTIterator: def __init__(self, root: TreeNode): self.s = [] while root: self.s[len(self.s):], root = [root], root.left def next(self) -&gt; int: &quot;&quot;&quot; @return the next smallest number &quot;&quot;&quot; r, root = self.s[-1], self.s.pop().right while root: self.s[len(self.s):], root = [root], root.left return r.val def hasNext(self) -&gt; bool: &quot;&quot;&quot; @return whether we have a next smallest number &quot;&quot;&quot; return bool(self.s)# Your BSTIterator object will be instantiated and called as such:# obj = BSTIterator(root)# param_1 = obj.next()# param_2 = obj.hasNext() æ¨¡æ‹Ÿä¸­åºéå†çš„è¿­ä»£è¿‡ç¨‹ï¼Œä½¿ç”¨å †æ ˆ self.s è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ ç©ºé—´å¤æ‚åº¦ä¸º O(æ ‘çš„é«˜åº¦) $å¹³å‡æ—¶é—´å¤æ‚åº¦ = \\frac {å¾ªç¯æ€»æ¬¡æ•°ï¼ˆNï¼‰}{è¿­ä»£å™¨é•¿åº¦ï¼ˆNï¼‰} = O(1)$ è¿­ä»£å™¨è§£æ³•ï¼š123456789101112131415161718192021from itertools import chainclass BSTIterator: def __init__(self, root: TreeNode): def gen(root): yield from chain(gen(root.left), [root.val], gen(root.right)) if root else () self.iter, self.len = gen(root), 0 for _ in gen(root): self.len += 1 def next(self) -&gt; int: &quot;&quot;&quot; @return the next smallest number &quot;&quot;&quot; self.len -= 1 return next(self.iter) def hasNext(self) -&gt; bool: &quot;&quot;&quot; @return whether we have a next smallest number &quot;&quot;&quot; return bool(self.len) å¹³å‡æ—¶ç©ºå¤æ‚åº¦ï¼š $O(1)$ï¼Œ$O(1)$189. Rotate Array 1è¡Œ123456class Solution: def rotate(self, nums: List[int], k: int) -&gt; None: &quot;&quot;&quot; Do not return anything, modify nums in-place instead. &quot;&quot;&quot; nums[:] = nums[len(nums) - k:] + nums[:len(nums) - k] ç©ºé—´å¤æ‚åº¦ = $O(N)$ è¿›é˜¶ï¼š 123456class Solution: def rotate(self, nums: List[int], k: int) -&gt; None: &quot;&quot;&quot; Do not return anything, modify nums in-place instead. &quot;&quot;&quot; for _ in range(k % len(nums)): nums[-1:], nums[:0] = [], nums[-1:] æ—¶é—´å¤æ‚åº¦ = $O(k \\;\\%\\; len(nums))$ï¼Œç©ºé—´å¤æ‚åº¦ = $O(1)$190. Reverse Bits 1è¡Œ12345class Solution: # @param n, an integer # @return an integer def reverseBits(self, n): return int(bin(n)[2:].zfill(32)[::-1], 2) å­—ç¬¦ä¸²æ“ä½œ ziffç”¨æ³•191. Number of 1 Bits 1è¡Œ1234567class Solution(object): def hammingWeight(self, n): &quot;&quot;&quot; :type n: int :rtype: int &quot;&quot;&quot; return bin(n).count(&#x27;1&#x27;) 198. House Robber 2è¡Œ1234class Solution: def rob(self, nums: List[int]) -&gt; int: from functools import reduce return reduce(lambda r, n: (max(r[0], n + r[1]), r[0]), nums, (0, 0))[0] DPé€’å½’æ–¹ç¨‹ï¼šä¸€ç›´å·åˆ°è¿™å®¶çš„é’± = maxï¼ˆä¸€ç›´å·åˆ°ä¸Šä¸€å®¶çš„é’±ï¼Œä¸€ç›´å·åˆ°ä¸Šä¸Šå®¶çš„é’± + è¿™å®¶çš„é’±ï¼‰ğŸ˜ƒæœ‰ç‚¹å°ç»• ä»¥ä¸Šä¸ºä¸‹é¢ä»£ç çš„åŒ–ç®€ç‰ˆï¼Œreduce å‡½æ•°è¯¦è§£123456class Solution: def rob(self, nums: List[int]) -&gt; int: last, now = 0, 0 for i in nums: last, now = now, max(last + i, now) return now DPä¸ä¸€å®šè¦æ•°ç»„ï¼Œè¿™é‡Œä¸¤ä¸ªå˜é‡å°±å¤Ÿäº†ï¼Œç©ºé—´å¤æ‚åº¦ä¸º$O(1)$200. Number of Islands 7è¡Œ123456789class Solution(object): def numIslands(self, grid): def sink(i, j): if 0 &lt;= i &lt; len(grid) and 0 &lt;= j &lt; len(grid[i]) and int(grid[i][j]): grid[i][j] = &#x27;0&#x27; for i, j in zip((i, i+1, i, i-1), (j+1, j, j-1, j)): sink(i, j) return 1 return 0 return sum(sink(i, j) for i in range(len(grid)) for j in range(len(grid[i]))) æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸€ä¸ªé™†åœ°ç‚¹å½“ä½œæ ‘æ ¹ï¼Œç”¨ DFS æœç´¢å››å‘¨çš„é™†åœ°å¹¶æ²‰æ²¡å®ƒï¼Œé‚£ä¹ˆè¿™ä¸€æ•´å—çš„é™†åœ°éƒ½è¢«æ²‰æ²¡äº†ï¼Œä¸‹æ¬¡æˆ‘ä»¬å†é‡åˆ°é™†åœ°ç‚¹çš„æ—¶å€™å°±è¯´æ˜å‘ç°æ–°å¤§é™†äº†202. Happy Number 1è¡Œ123class Solution: def isHappy(self, n: int) -&gt; bool: return self.isHappy(sum(int(i) ** 2 for i in str(n))) if n &gt; 4 else n == 1 ä¸æ˜¯å¿«ä¹æ•°çš„æ•°ç§°ä¸ºä¸å¿«ä¹æ•°(unhappy number)ï¼Œæ‰€æœ‰ä¸å¿«ä¹æ•°çš„æ•°ä½å¹³æ–¹å’Œè®¡ç®—ï¼Œæœ€åéƒ½ä¼šè¿›å…¥ 4 â†’ 16 â†’ 37 â†’ 58 â†’ 89 â†’ 145 â†’ 42 â†’ 20 â†’ 4 çš„å¾ªç¯ä¸­ è¿™ä¸ªè§„å¾‹æ¯”è¾ƒéš¾æƒ³åˆ°çš„ï¼Œæ­£å¸¸è§£æ³•æ˜¯åˆ¤æ–­næ˜¯å¦ä¼šè¿›å…¥å¾ªç¯ï¼š1234567class Solution: def isHappy(self, n: int) -&gt; bool: seen = &#123;1&#125; while n not in seen: seen.add(n) n = sum(int(i) ** 2 for i in str(n)) return n == 1 203. Remove Linked List Elements 2è¡Œ12345678910# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def removeElements(self, head: ListNode, val: int) -&gt; ListNode: if head: head.next = self.removeElements(head.next, val) return head.next if head and head.val == val else head é€’å½’ï¼šæ¯æ¬¡éƒ½è¿”å›ä»å½“å‰ä½ç½®ç®—èµ·ç¬¬ä¸€ä¸ªæœ‰æ•ˆçš„èŠ‚ç‚¹æˆ–None205. Isomorphic Strings 1è¡Œ123class Solution: def isIsomorphic(self, s: str, t: str) -&gt; bool: return [*map(s.index, s)] == [*map(t.index, t)] åŒæ„ä»£è¡¨ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªä½ç½®ä¸Šå­—ç¬¦åœ¨è‡ªèº«ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ç›¸åŒ206. Reverse Linked List 2è¡Œ12345678910# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def reverseList(self, head: ListNode, tail=None) -&gt; ListNode: if head: head.next, tail, head = tail, head, head.next return self.reverseList(head, tail) if head else tail é€’å½’è§£æ³• æ­¤è§£æ³•ä¸ºå°¾é€’å½’ï¼Œå³ç›´æ¥ä»¥é€’å½’è¿”å›å€¼ä½œä¸ºç»“æœï¼Œä¸€èˆ¬ç¼–è¯‘å™¨ä¼šåšä¼˜åŒ–ï¼Œé¿å…å¤šä½™çš„å‡½æ•°å¼€æ ˆæ“ä½œï¼Œå®ç°æ•ˆæœç›¸å½“äºè¿­ä»£1234567891011# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def reverseList(self, head: ListNode) -&gt; ListNode: p = None while head: head.next, p, head = p, head, head.next return p è¿­ä»£è§£æ³•215. Kth Largest Element in an Array 1è¡Œ123class Solution: def findKthLargest(self, nums: List[int], k: int) -&gt; int: return sorted(nums)[-k] $O(N\\log N)$è°ƒåº“ é¢è¯•å®˜ä¸€èˆ¬ä¸ä¼šæ¥å—ä»¥ä¸Šç­”æ¡ˆçš„ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢è¿™ä¸ª$O(N)$çš„quick-selectionï¼Œæ€è·¯å€Ÿé‰´çš„quick-sort 123456789101112class Solution: def findKthLargest(self, nums: List[int], k: int) -&gt; int: l = [x for x in nums if x &gt; nums[0]] m = [x for x in nums if x == nums[0]] r = [x for x in nums if x &lt; nums[0]] f = self.findKthLargest if k &lt;= len(l): return f(l, k) elif k &lt;= len(l) + len(m): return nums[0] return f(r, k - len(l) - len(m)) 217. Contains Duplicate 1è¡Œ123class Solution: def containsDuplicate(self, nums: List[int]) -&gt; bool: return len(nums) != len(set(nums)) 219. Contains Duplicate II 4è¡Œ123456class Solution: def containsNearbyDuplicate(self, nums: List[int], k: int) -&gt; bool: r, d = k + 1, &#123;&#125; for i, n in enumerate(nums): r, d[n] = min(r, i - d.get(n, -k - 1)), i return r &lt;= k æœ¬é¢˜é¢˜ç›®æœ‰è¯¯ï¼Œå®é™…æ„æ€æ˜¯æ‰¾åŒæ•°å­—æœ€å°é—´éš”ï¼Œè‹¥ä¸è¶…è¿‡ k åˆ™æ»¡è¶³æ¡ä»¶ éå†åˆ—è¡¨ï¼Œæ¯æ¬¡éƒ½æ¯”å¯¹æœ€å°é—´éš”ï¼Œå¹¶æ›´æ–°å“ˆå¸Œè¡¨ç´¢å¼•ï¼Œå½“å‰ä½ç½®å¾€å·¦çš„æœ€å°é—´éš”ä¸€å®šæ˜¯ä¸ä¸Šä¸€æ¬¡åŒæ•°å­—å‡ºç°çš„ç´¢å¼•çš„è·ç¦»225. Implement Stack using Queues 6è¡Œ1234567891011121314151617class MyStack: def __init__(self): self.q = collections.deque() def push(self, x): self.q.append(x) for _ in range(len(self.q) - 1): self.q.append(self.q.popleft()) def pop(self): return self.q.popleft() def top(self): return self.q[0] def empty(self): return not len(self.q) push çš„æ—¶å€™æŠŠ x æ”¾å…¥é˜Ÿå°¾ï¼Œç„¶åéå†ä¸€éåŸå§‹é˜Ÿåˆ—å…ƒç´ ï¼Œæ¯æ¬¡å¼¹å‡ºä¹‹ååŠ å…¥é˜Ÿå°¾230. Kth Smallest Element in a BST 3è¡Œ123456789101112# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def kthSmallest(self, root, k): from itertools import chain, islice def gen(x): yield from chain(gen(x.left), [x.val], gen(x.right)) if x else () return next(islice(gen(root), k - 1, k)) æœ¬é¢˜åˆ©ç”¨è¿­ä»£å™¨éªšäº†ä¸€æ³¢ï¼Œä¸å¤ªäº†è§£çš„è¯çœ‹è¿™é‡Œ ã€yield æ¨èé˜…è¯»åšå®¢ã€‘ chain å‡½æ•°å¯ä»¥ç»„åˆå¤šä¸ªè¿­ä»£å™¨ï¼Œislice å‡½æ•°å¯¹è¿­ä»£å™¨åšåˆ‡ç‰‡æ“ä½œ æ­¤é¢˜å¸¸è§„è§£æ³• ä¸­åºéå† è¿˜æ˜¯éœ€è¦äº†è§£ä¸‹çš„ 12345678910111213141516171819202122232425# Definition for a binary tree node.# class TreeNode(object):# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution(object): def kthSmallest(self, root, k): &quot;&quot;&quot; :type root: TreeNode :type k: int :rtype: int &quot;&quot;&quot; res = [] self.visitNode(root, res) return res[k - 1] # ä¸­åºéå† def visitNode(self, root, res): if root is None: return self.visitNode(root.left, res) res.append(root.val) self.visitNode(root.right, res) 231. 2çš„å¹‚ 1è¡Œ1234567class Solution: def isPowerOfTwo(self, n: int) -&gt; bool: &quot;&quot;&quot; :type n: int :rtype: bool &quot;&quot;&quot; return n &gt; 0 and n &amp; n - 1 == 0 2 çš„å¹‚çš„äºŒè¿›åˆ¶å½¢å¼æœ€é«˜ä½ä¸€å®šæ˜¯1ï¼Œå…¶ä½™ä¸º0 ç”¨å¸¸è§„æ€è·¯ä¹Ÿè¡Œ 123class Solution(object): def isPowerOfTwo(self, n): return n &gt; 0 and 2**int(math.log2(n)) == n 232. Implement Queue using Stacks 13è¡Œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class MyQueue: def __init__(self): &quot;&quot;&quot; Initialize your data structure here. &quot;&quot;&quot; self.stack = [] def push(self, x: int) -&gt; None: &quot;&quot;&quot; Push element x to the back of queue. &quot;&quot;&quot; self.stack.append(x) def pop(self) -&gt; int: &quot;&quot;&quot; Removes the element from in front of queue and returns that element. &quot;&quot;&quot; temp = [] while self.stack: temp.append(self.stack.pop()) r = temp.pop() while temp: self.stack.append(temp.pop()) return r def peek(self) -&gt; int: &quot;&quot;&quot; Get the front element. &quot;&quot;&quot; temp = [] while self.stack: temp.append(self.stack.pop()) r = temp[-1] while temp: self.stack.append(temp.pop()) return r def empty(self) -&gt; bool: &quot;&quot;&quot; Returns whether the queue is empty. &quot;&quot;&quot; return not self.stack# Your MyQueue object will be instantiated and called as such:# obj = MyQueue()# obj.push(x)# param_2 = obj.pop()# param_3 = obj.peek()# param_4 = obj.empty() ä½¿ç”¨ä¿©ä¸ªæ ˆæ¥æ¨¡æ‹Ÿé˜Ÿåˆ—ï¼Œå½“éœ€è¦å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æ ˆtempï¼ŒæŠŠæ ˆé‡Œé¢çš„ä¸œè¥¿å…¨éƒ¨æŠ½å‡ºæ¥æ”¾è¿›tempï¼Œå®Œæˆæ“ä½œåæ”¾å›å»234. Palindrome Linked List 3è¡Œ1234567891011# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def isPalindrome(self, head: ListNode) -&gt; bool: def gen(n): while n: yield n.val; n = n.next return [*gen(head)] == [*gen(head)][::-1] 235. Lowest Common Ancestor of a Binary Search Tree 2è¡Œ1234567891011# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def lowestCommonAncestor(self, root, p, q): while (root.val - p.val) * (root.val - q.val) &gt; 0: root = (root.left, root.right)[p.val &gt; root.val] return root æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å€¼ä¸€å®šä»‹äºpã€qå€¼ä¹‹é—´ï¼ˆ é—­åŒºé—´$[p, \\;q]$ ï¼‰236. Lowest Common Ancestor of a Binary Tree 2è¡Œ1234567891011# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def lowestCommonAncestor(self, root: &#x27;TreeNode&#x27;, p: &#x27;TreeNode&#x27;, q: &#x27;TreeNode&#x27;) -&gt; &#x27;TreeNode&#x27;: l, r = map(lambda x: x and self.lowestCommonAncestor(x, p, q), (root.left, root.right)) return (root in (p, q) or l and r) and root or l or r é€’å½’å…¨éƒ¨èŠ‚ç‚¹ï¼Œp çš„ç¥–å…ˆèŠ‚ç‚¹å…¨éƒ¨è¿”å› pï¼Œq çš„ç¥–å…ˆèŠ‚ç‚¹å…¨éƒ¨è¿”å› qï¼Œé™¤éå®ƒåŒæ—¶æ˜¯ä¿©ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘ç¥–å…ˆï¼Œä¹Ÿå°±æ˜¯ pï¼Œq åˆ†åˆ«ä½äºå·¦å³å­æ ‘ï¼Œé‚£ä¹ˆè¿”å›è‡ªèº« è¿™æ€è·¯ç”¨åœ¨235ä¹Ÿè¡Œ237. Delete Node in a Linked List 1è¡Œ12345678910111213# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def deleteNode(self, node): &quot;&quot;&quot; :type node: ListNode :rtype: void Do not return anything, modify node in-place instead. &quot;&quot;&quot; node.val, node.next = node.next.val, node.next.next node = node.nextæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºè¿™é‡Œåªæ˜¯æ”¹äº†å‡½æ•°å‚æ•°å¼•ç”¨çš„å¯¹è±¡ï¼Œè€ŒåŸæ¥ä¼ è¿›æ¥çš„ node æ²¡æœ‰ä»»ä½•æ”¹å˜ è¯¦ç»†è¯´æ˜ä¸‹ï¼šå¦‚æœPythonçš„å‡½æ•°å¾—åˆ°çš„å‚æ•°æ˜¯å¯å˜å¯¹è±¡ï¼ˆæ¯”å¦‚listï¼Œsetï¼Œè¿™æ ·çš„ï¼Œå†…éƒ¨å±æ€§å¯ä»¥æ”¹å˜çš„ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®é™…å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„æµ…æ‹·è´ã€‚æ¯”å¦‚è¿™ä¸ªå‡½æ•°åˆšåˆšå¼€å§‹çš„æ—¶å€™é¢˜ç›®ä¼ è¿›æ¥ä¸€ä¸ªå‚æ•°nodeï¼Œæˆ‘ä»¬è®¾è¿™ä¸ªèŠ‚ç‚¹ä¸ºAï¼Œé‚£ä¹ˆå®é™…ä¸Šå¾—åˆ°çš„å‚æ•°nodeæ˜¯ä¸€ä¸ªå¯¹äºAçš„ä¸€ä¸ªæµ…æ‹·è´ï¼Œä½ å¯ä»¥æƒ³è±¡nodeæ˜¯ä¸€æŠŠé’¥åŒ™ï¼Œå®ƒå¯ä»¥æ‰“å¼€çœŸæ­£çš„èŠ‚ç‚¹Açš„é—¨ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨è®©node = node.nextï¼Œé‚£ä¹ˆæˆ‘ä»¬åªæ˜¯æ¢äº†é’¥åŒ™ï¼Œå˜æˆäº†æ‰“å¼€ A.next çš„é—¨çš„å¯¹åº”çš„é’¥åŒ™ï¼Œå› æ­¤é“¾è¡¨æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œ Aæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œåªæ˜¯æˆ‘ä»¬æ‰‹é‡Œçš„é’¥åŒ™å˜äº†ã€‚è€Œå¦‚æœæˆ‘ä»¬ç›´æ¥å†™node.val, node.next = node.next.val, node.next.nextï¼Œå°±ç›¸å½“äºæˆ‘ä»¬å…ˆç”¨é’¥åŒ™æ‰¾åˆ° A çš„é—¨ï¼Œç„¶åä¿®æ”¹äº† A çš„å±æ€§ï¼Œé“¾è¡¨å‘ç”Ÿå˜åŒ– æ­¤é¢˜è€ƒæŸ¥pythonå‡½æ•°çš„ä¼ å‚å½¢å¼ä¸ºâ€œä¼ å¯¹è±¡å¼•ç”¨â€ï¼Œç›¸å½“äºæµ…æ‹·è´ï¼ˆå¯¹äºå¯å˜å¯¹è±¡æ¥è¯´ï¼‰238. Product of Array Except Self 5è¡Œ1234567class Solution: def productExceptSelf(self, nums: List[int]) -&gt; List[int]: res, l, r = [1] * len(nums), 1, 1 for i, j in zip(range(len(nums)), reversed(range(len(nums)))): res[i], l = res[i] * l, l * nums[i] res[j], r = res[j] * r, r * nums[j] return res $O(N)$åŒæŒ‡é’ˆåŒå‘éå†240. Search a 2D Matrix II 1è¡Œ12345678class Solution: def searchMatrix(self, matrix, target): &quot;&quot;&quot; :type matrix: List[List[int]] :type target: int :rtype: bool &quot;&quot;&quot; return any(target in row for row in matrix) ä»¥ä¸‹ä¸º $O(m+n)$ è§£æ³•ï¼š 1234567891011121314class Solution: def searchMatrix(self, matrix, target): &quot;&quot;&quot; :type matrix: List[List[int]] :type target: int :rtype: bool &quot;&quot;&quot; j = -1 for row in matrix: while j &gt; -len(row) and row[j] &gt; target: j -= 1 if row and row[j] == target: return True return False ä»çŸ©é˜µå³ä¸Šè§’å¼€å§‹ï¼Œè‹¥å€¼æ¯” target å¤§åˆ™è¯æ˜è¿™ä¸€åˆ—çš„å€¼éƒ½æ¯” target å¤§ï¼Œç»§ç»­æœç´¢å‰é¢çš„åˆ—ï¼›è‹¥æ¯” target å°è¯´æ˜ target å¯èƒ½åœ¨åé¢çš„è¡Œä¸­ï¼Œè¿›å…¥ä¸‹ä¸€è¡Œ258. Add Digits 1è¡Œ123class Solution: def addDigits(self, num: int) -&gt; int: return num % 9 or 9 * bool(num) $O(1)$ æ•°å­¦æ¨ç†ï¼šè®¾æŸä¸ªæ•°å­—çš„å­—ç¬¦ä¸²è¡¨ç¤ºä¸º&#39;abc&#39;ï¼Œåˆ™è¿™ä¸ªæ•°å­—ä»£è¡¨a*100 + b*10 + cï¼Œè½¬æ¢åæˆä¸ºa + b + cï¼Œå¯è§æ¯æ¬¡è½¬æ¢ç›¸å½“äºæŠŠåŸæ•°å­—å‡å»a*99 + b*9 = 9 * (a*11 + b)ï¼Œå¯ä»¥æ¨å‡ºåªè¦é«˜äºä¸ªä½çš„ä½ç½®ä¸Šæœ‰æ•°å­—ï¼Œç®—æ³•å°±ä¼šå‡å»ä¸€ä¸ªå°äºåŸæ•°å­—çš„9çš„å€æ•°ï¼Œè¿™å°±ç›¸å½“äºæ•°å­— % 9ã€‚ä½†9 % 9 = 0ï¼Œè€Œ 9 æœ¬èº«å°±æ²¡æœ‰åä½ï¼Œå› æ­¤éœ€è¦è€ƒè™‘åŸæ•°å­—æ˜¯ 0 æˆ– 9 çš„å€æ•°çš„ç‰¹æ®Šæƒ…å†µ é¦–å…ˆè®¡ç®—num % 9ï¼Œè‹¥ç»“æœä¸º 0 åˆ™è€ƒè™‘numæœ¬èº«æ˜¯å¦ä¸º 0ï¼Œè‹¥ä¸ä¸º 0 è¿”å› 912345class Solution: def addDigits(self, num: int) -&gt; int: while num &gt; 9: num = eval(&#x27;+&#x27;.join(n for n in str(num))) return num å¾ªç¯åˆ¤æ–­268. Missing Number 1è¡Œ123class Solution: def missingNumber(self, nums: List[int]) -&gt; int: return sum(range(len(nums) + 1)) - sum(nums) $O(N)$æ—¶é—´ï¼Œ$O(1)$ç©ºé—´ï¼ˆè¿­ä»£å™¨ï¼‰123class Solution: def missingNumber(self, nums: List[int]) -&gt; int: return int(len(nums) * (len(nums) + 1) / 2 - sum(nums)) ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼ï¼Œ$O(1)$ç©ºé—´278. First Bad Version 2è¡Œ12345678910111213# The isBadVersion API is already defined for you.# @param version, an integer# @return a bool# def isBadVersion(version):class Solution: def firstBadVersion(self, n): &quot;&quot;&quot; :type n: int :rtype: int &quot;&quot;&quot; self.__class__.__getitem__ = lambda self, x: isBadVersion(x) return bisect.bisect_left(self, True, 1, n) æ”¹é€ å½“å‰ç±»çš„é­”æ³•æ–¹æ³•getitemä»¥ä½¿ç”¨å†…ç½®å‡½æ•° å¤ç°äºŒåˆ†æœç´¢è§£æ³•å¦‚ä¸‹ï¼š1234567891011121314151617181920# The isBadVersion API is already defined for you.# @param version, an integer# @return a bool# def isBadVersion(version):class Solution: def firstBadVersion(self, n): &quot;&quot;&quot; :type n: int :rtype: int &quot;&quot;&quot; l, h = 1, n while l &lt;= h: m = (l + h) // 2 if isBadVersion(m) &gt; m * isBadVersion(m - 1): return m elif isBadVersion(m): h = m - 1 else: l = m + 1 æœ¬é¢˜äºŒåˆ†æœç´¢ä¸­åˆ¤æ–­è¿”å›çš„æ¡ä»¶ä¸º å½“å‰ç‰ˆæœ¬ä¸ºTrueä¸”ï¼ˆå½“å‰ç´¢å¼•ä¸º0 æˆ– å·¦è¾¹çš„ç‰ˆæœ¬ä¸ºFalseï¼‰ m * çš„ä½œç”¨æ˜¯é¿å… m - 1 ä¸ºè´Ÿæ•°ï¼Œå¦‚æœ m ä¸º 0ï¼Œåˆ™ä»£è¡¨å·¦è¾¹æ²¡æœ‰ç‰ˆæœ¬ï¼Œåªéœ€åˆ¤æ–­å½“å‰ç‰ˆæœ¬æ˜¯å¦ä¸º True True &gt; False æˆ– 0279. Perfect Squares 4è¡Œ123456class Solution: def numSquares(self, n: int) -&gt; int: dp = [0] for i in range(1, n+1): dp.append(min(dp[-j*j] for j in range(1, 1 + int(i**0.5))) + 1) return dp[-1] dpæ–¹ç¨‹ï¼šæ€»å’Œä¸º n çš„æœ€å°å®Œå…¨å¹³æ–¹æ•°ä¸ªæ•° = min(æ€»å’Œä¸º (n - æŸä¸ªå®Œå…¨å¹³æ–¹æ•°) çš„æœ€å°å®Œå…¨å¹³æ–¹æ•°ä¸ªæ•°) + 1 ä¸­æ–‡ç‰ˆåŠ›æ‰£è¿™é¢˜ç”¨dpä¼šè¶…æ—¶ï¼Œå¯ä»¥ä½¿ç”¨bfsï¼Œæˆ–è€…æ‹‰æ ¼æœ—æ—¥å››å¹³æ–¹æ•°å’Œå®šç† ğŸ˜ï¼šä»»ä½•ä¸€ä¸ªæ­£æ•´æ•°éƒ½å¯ä»¥è¡¨ç¤ºæˆä¸è¶…è¿‡å››ä¸ªæ•´æ•°çš„å¹³æ–¹ä¹‹å’Œã€‚ æ¨è®ºï¼šæ»¡è¶³å››æ•°å¹³æ–¹å’Œå®šç†çš„æ•°nï¼ˆå››ä¸ªæ•´æ•°çš„æƒ…å†µï¼‰ï¼Œå¿…å®šæ»¡è¶³ $n=4^{a(8b+7)}$123456789101112131415class Solution: def numSquares(self, n: int) -&gt; int: while n % 4 == 0: n /= 4 if n % 8 == 7: return 4 a = 0 while a**2 &lt;= n: b = int((n - a**2)**0.5) if a**2 + b**2 == n: return bool(a) + bool(b) a += 1 return 3 283. Move Zeroes 1è¡Œ123456class Solution: def moveZeroes(self, nums: List[int]) -&gt; None: &quot;&quot;&quot; Do not return anything, modify nums in-place instead. &quot;&quot;&quot; nums.sort(key=bool, reverse=True) sort æ—¶é—´å¤æ‚åº¦ä¸º$O(N\\log N)$, ç›´æ¥éå†å¯ä»¥è¾¾åˆ° $O(N)$12345678910class Solution: def moveZeroes(self, nums: List[int]) -&gt; None: &quot;&quot;&quot; Do not return anything, modify nums in-place instead. &quot;&quot;&quot; i = 0 for i, n in enumerate(filter(lambda x: x, nums)): nums[i] = n for i in range(i + 1, len(nums)): nums[i] = 0 ç›´æ¥ä½¿ç”¨ filter è¿­ä»£å™¨å¯ä»¥é¿å…äº¤æ¢æ“ä½œï¼Œæ€è·¯æ›´ç®€å•287. Find the Duplicate Number 2è¡Œ1234class Solution: def findDuplicate(self, nums: List[int]) -&gt; int: self.__class__.__getitem__ = lambda sef, m: sum(n &lt;= m for n in nums) &gt; m return bisect.bisect_left(self, True, 1, len(nums) - 1) æœ¬é¢˜å¯ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ•´ä¸ªç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º $O(N\\log N)$ï¼Œç”±é¢˜æ„å¯çŸ¥æœç´¢èŒƒå›´åœ¨ 1 åˆ° n ä¹‹é—´ï¼Œé‚£ä¹ˆå¦‚ä½•ç¼©å°èŒƒå›´ï¼Ÿåªéœ€åˆ¤æ–­æ•°ç»„ä¸­ä¸è¶…è¿‡ä¸­é—´æ•° m çš„å…ƒç´ æ•°é‡æ˜¯å¦å¤§äº m å³å¯ï¼Œè‹¥å¤§äºï¼Œåˆ™è¡¨ç¤ºèŒƒå›´ 1 åˆ° m å†…è‚¯å®šåŒ…å«é‡å¤çš„æ•°å­— æœç´¢èŒƒå›´ä¸º [1, n]ï¼Œå‘å·¦ï¼ˆåŒ…æ‹¬targetï¼‰æœç´¢çš„æ¡ä»¶ä¸ºï¼šä¸å¤§äº n çš„æ•°å­—åœ¨ nums å­˜åœ¨è¶…è¿‡ m ä¸ªï¼Œå³æœç´¢èŒƒå›´å¯ä»¥è¢«ç¼©å°ä¸º [1, m]292. Nim Game 1è¡Œ123class Solution: def canWinNim(self, n: int) -&gt; bool: return bool(n % 4) åªè¦è½®åˆ°ä½ çš„æ—¶å€™å‰©ä½™çŸ³å¤´æ•°é‡ä¸æ˜¯ 4 çš„å€æ•°éƒ½æ˜¯å®Œèƒœï¼Œå› ä¸ºä½ æœ‰åŠæ³•ä½¿å¾—æ¯æ¬¡è½®åˆ°å¯¹æ–¹çš„æ—¶å€™å‰©ä½™çŸ³å¤´æ•°é‡éƒ½ä¸º 4 çš„å€æ•°326. Power of Three 1è¡Œ123class Solution: def isPowerOfThree(self, n: int) -&gt; bool: return n &gt; 0 and 3 ** round(math.log(n, 3)) == n math.log å‡½æ•°å¾—åˆ°çš„æ•°æ®å¯èƒ½ä¸å¤Ÿç²¾ç¡®ï¼Œå¯ä»¥ä½¿ç”¨ round å–æ•´328. Odd Even Linked List 6è¡Œ1234567891011121314# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def oddEvenList(self, head: ListNode) -&gt; ListNode: if not head or not head.next: return head r, odd, p, head = head, head, head.next, head.next.next while head: odd.next, head.next, p.next = head, odd.next, head.next p, odd, head = p.next, head, p.next and p.next.next return r odd è®°å½•ä¸Šä¸€ä¸ªå¥‡æ•°ä½èŠ‚ç‚¹ï¼Œp è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹ ä»ç¬¬3ä¸ªä½ç½®å¼€å§‹å¾ªç¯ï¼Œæ¯æ¬¡éƒ½æŠŠå½“å‰èŠ‚ç‚¹æ¥åˆ° odd åé¢ï¼Œç„¶åè·³åˆ°ä¸‹ä¸€ä¸ªå¥‡æ•°ä½èŠ‚ç‚¹ç»§ç»­å¾ªç¯342. Power of Four 1è¡Œ123class Solution: def isPowerOfFour(self, num: int) -&gt; bool: return num &gt; 0 and not math.log(num, 4) % 1 é‡‡ç”¨ log è¿ç®—ï¼Œè‹¥ç»“æœä¸ºæ•´æ•°åˆ™ num ä¸º 4 çš„å¹‚ æ•´æ•° % 1 ä¸º 0344. Reverse String 1è¡Œ123456class Solution: def reverseString(self, s: List[str]) -&gt; None: &quot;&quot;&quot; Do not return anything, modify s in-place instead. &quot;&quot;&quot; s.reverse() 345. Reverse Vowels of a String 2è¡Œ1234class Solution: def reverseVowels(self, s: str) -&gt; str: vowels = re.findall(&#x27;(?i)[aeiou]&#x27;, s) return re.sub(&#x27;(?i)[aeiou]&#x27;, lambda m: vowels.pop(), s) éå†ä¿©æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ‰¾å‡ºå…ƒéŸ³å­—æ¯æ”¾è¿› stackï¼Œç¬¬äºŒæ¬¡æ¯é‡åˆ°ä¸€ä¸ªå°±æŠŠä¹‹å‰çš„æ ˆé¡¶æ›¿æ¢è¿›æ¥347. Top K Frequent Elements 1è¡Œ123class Solution: def topKFrequent(self, nums: List[int], k: int) -&gt; List[int]: return [*next(zip(*collections.Counter(nums).most_common(k)))] Counterç±»çš„ç›®çš„æ˜¯ç”¨æ¥è·Ÿè¸ªå€¼å‡ºç°çš„æ¬¡æ•°ã€‚å®ƒæ˜¯ä¸€ä¸ªæ— åºçš„å®¹å™¨ç±»å‹ï¼Œä»¥å­—å…¸çš„é”®å€¼å¯¹å½¢å¼å­˜å‚¨ï¼Œå…¶ä¸­å…ƒç´ ä½œä¸ºkeyï¼Œå…¶è®¡æ•°ä½œä¸ºvalue å…³äº Counterï¼Œæ›´å¤šè¯¦ç»†å†…å®¹å¯å‚è€ƒ è¿™é‡Œ éå†…ç½®è§£æ³•ï¼š12345678910111213class Solution: def topKFrequent(self, nums: List[int], k: int) -&gt; List[int]: d = &#123;n: 0 for n in nums&#125; for n in nums: d[n] += 1 r = [] for _ in range(k): n = max(d, key=d.get) r.append(n) d[n] = -1 return r 349. Intersection of Two Arrays 1è¡Œ123class Solution: def intersection(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: return [*set(nums1) &amp; set(nums2)] ç»è¿‡ set ä¹‹åï¼Œé‡å¤çš„å…ƒç´ è¢«åˆ é™¤ ä¸è¿ç®—å¯¹äºé›†åˆæ¥è¯´å°±æ˜¯æ±‚äº¤é›†350. Intersection of Two Arrays II 1è¡Œ123class Solution: def intersect(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: return [*(collections.Counter(nums1) &amp; collections.Counter(nums2)).elements()] å¯¹äºä¸¤ä¸ª Counter å¯¹è±¡ï¼Œä¸æ“ä½œæ„å‘³ç€å–ä¸¤è€…éƒ½æœ‰çš„key, valueå–å°çš„é‚£ä¸€ä¸ª å‚è€ƒï¼šPython Counter è®¡æ•°å·¥å…·12345678910111213141516class Solution: def intersect(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: nums1.sort() nums2.sort() r = [] i = j = 0 while i &lt; len(nums1) and j &lt; len(nums2): if nums1[i] == nums2[j]: r.append(nums1[i]) i += 1 j += 1 elif nums1[i] &lt; nums2[j]: i += 1 else: j += 1 return r è¿›é˜¶è§£æ³• â†‘ ä½¿ç”¨åŒæŒ‡é’ˆå°†ä¸¤ä¸ªåˆ—è¡¨ä¸­å…±åŒçš„å…ƒç´ æŠ ä¸‹æ¥ï¼Œå› ä¸ºå·²ç»æ’åºï¼Œæ‰€ä»¥é‡åˆ°ä¸åŒå…ƒç´ æ—¶æ•°å€¼å°çš„é‚£ä¸ªåˆ—è¡¨çš„æŒ‡é’ˆå‘å‰ç§»åŠ¨367. Valid Perfect Square 4è¡Œ123456class Solution: def isPerfectSquare(self, num: int) -&gt; bool: r = num while r * r &gt; num: r = (r + num / r) // 2 return r * r == num åŸºæœ¬ä¸ç­‰å¼$\\frac{a+b}{2} \\ge \\sqrt{ab}$ æ¨å¯¼è‡ª $(a-b)^2 \\ge 0$ â†’ $a^2 + b^2 \\ge 2ab$ â†’ $\\frac{a+b}{2} \\ge \\sqrt{ab}$ï¼ˆæ¢å…ƒï¼‰ï¼Œæ³¨æ„ $a&gt;0$ ä¸” $b&gt;0$ $\\frac { r+ \\frac{num}{r}}{2} \\ge \\sqrt{num}$ è€Œ $r &gt; \\frac{num}{r}$ ä¿è¯æ¯æ¬¡è¿­ä»£ r åœ¨ä¸æ–­å‡å°,è€Œ//çš„å­˜åœ¨ä¿è¯æœ€æ¥è¿‘çš„æ—¶å€™èƒ½å¤Ÿé€ƒç¦»å¾ªç¯ä½“387. First Unique Character in a String 2è¡Œ1234class Solution: def firstUniqChar(self, s: str) -&gt; int: d = &#123;c: s.count(c) for c in set(s)&#125; return ([i for i, c in enumerate(s) if d[c] == 1] + [-1])[0] é¦–å…ˆç”¨å­—å…¸ d å‚¨å­˜ï½›å­—ç¬¦ï¼šå‡ºç°æ¬¡æ•°ï½ï¼Œæ³¨æ„è¿™é‡Œçš„å­—ç¬¦æ¥è‡ª setï¼Œä¸ºäº†é¿å…é‡å¤æ“ä½œï¼Œé˜²æ­¢TLE ç”¨ list è®°å½• s ä¸­å‡ºç°æ¬¡æ•°ä¸º 1 çš„å­—ç¬¦çš„ç´¢å¼• è¿”å› list ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåŸæ¥çš„ s ä¸­ä¸å­˜åœ¨å‡ºç°æ¬¡æ•°ä¸º 1 çš„å­—ç¬¦ï¼Œåˆ™ä¼šè¿”å›åé¢æ·»åŠ çš„ [-1] ä½œä¸ºç¬¬ä¸€ä¸ªå…ƒç´ 389. Find the Difference 1è¡Œ123class Solution: def findTheDifference(self, s: str, t: str) -&gt; str: return chr(sum(map(ord, t)) - sum(map(ord, s))) æ¯ä¸€ä¸ªå­—ç¬¦éƒ½å¯¹åº”ä¸€ä¸ª ASCII æ•°å­—ï¼Œé‚£ä¹ˆé‚£ä¸ªä¸åŒçš„æ•°å­—çš„ ASCII ç å°±ç­‰äº t çš„æ‰€æœ‰å­—ç¬¦ç ä¹‹å’Œ - s çš„ ord å‡½æ•°å°†å•ä¸ªå­—ç¬¦è½¬æ¢ä¸º ASCII ç ï¼Œ chrç›¸å394. Decode String 14è¡Œ1234567891011121314151617class Solution: def decodeString(self, s: str) -&gt; str: stack = [[&#x27;&#x27;, 1, &#x27;&#x27;]] a = n = &#x27;&#x27; for c in s: if c.isalpha(): a += c elif c.isdigit(): n += c elif c == &#x27;[&#x27;: stack.append([a, int(n), &#x27;&#x27;]) a = n = &#x27;&#x27; else: p, t, b = stack.pop() stack[-1][-1] += p + t * (b + a) a = &#x27;&#x27; return stack.pop()[-1] + a ç”¨ stack è®°å½•ï¼ˆ[]ä¹‹å‰çš„å­—æ¯ï¼Œç¿»å€æ¬¡æ•°ï¼Œç¿»å€å†…å®¹ï¼‰412. Fizz Buzz 1è¡Œ 123class Solution: def fizzBuzz(self, n): return [&#x27;Fizz&#x27; * (not i % 3) + &#x27;Buzz&#x27; * (not i % 5) or str(i) for i in range(1, n+1)] 7 or 8 = 7 0 or 8 = 8414. Third Maximum Number 3è¡Œ12345class Solution: def thirdMax(self, nums: List[int]) -&gt; int: nums = set(nums) for _ in range((2, 0)[len(nums) &lt; 3]): nums.remove(max(nums)) return max(nums) 430. Flatten a Multilevel Doubly Linked List 5è¡Œ1234567891011121314151617&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, prev, next, child): self.val = val self.prev = prev self.next = next self.child = child&quot;&quot;&quot;from itertools import chainclass Solution: def flatten(self, head: &#x27;Node&#x27;) -&gt; &#x27;Node&#x27;: def gen(n): yield from chain([n], gen(n.child), gen(n.next)) if n else () iters = gen(head); p = head and next(iters) for n in iters: p.next, n.prev, p.child, n.child, p = n, p, None, None, n return head ä½¿ç”¨è¿­ä»£å™¨æŒ‰é¡ºåºè¾“å‡ºæ‰€æœ‰èŠ‚ç‚¹ï¼Œç„¶åè¿æ¥448. Find All Numbers Disappeared in an Array 1è¡Œ1234class Solution: def findDisappearedNumbers(self, nums: List[int]) -&gt; List[int]: s = set(nums) return [i for i in range(1, len(nums) + 1) if i not in s] set çš„å†…éƒ¨å®ç°ä¸º dictï¼Œin æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ åº”é¢˜ç›®è¿›é˜¶è¦æ±‚ï¼Œä»¥ä¸‹è§£ä¸º $O(N)$ æ—¶é—´æ•ˆç‡ï¼Œæ— é¢å¤–ç©ºé—´ï¼ˆé™¤äº†è¿”å›æ•°ç»„å’Œä¸­é—´å˜é‡ï¼‰ 12345class Solution: def findDisappearedNumbers(self, nums: List[int]) -&gt; List[int]: for n in nums: nums[abs(n) - 1] = -abs(nums[abs(n) - 1]) return [i + 1 for i, n in enumerate(nums) if n &gt; 0] æ­¤è§£å®é™…ä¸Šæ˜¯åˆ©ç”¨ç´¢å¼•æŠŠæ•°ç»„è‡ªèº«å½“ä½œå“ˆå¸Œè¡¨å¤„ç† å°† nums ä¸­æ‰€æœ‰æ­£æ•°ä½œä¸ºç´¢å¼•iï¼Œç½® nums[i] ä¸ºè´Ÿå€¼ã€‚é‚£ä¹ˆï¼Œä»ä¸ºæ­£æ•°çš„ä½ç½®å³ä¸ºï¼ˆæœªå‡ºç°è¿‡ï¼‰æ¶ˆå¤±çš„æ•°å­— åŸå§‹æ•°ç»„ï¼š[4,3,2,7,8,2,3,1] é‡ç½®åä¸ºï¼š[-4,-3,-2,-7,8,2,-3,-1] ç»“è®ºï¼š[8,2] åˆ†åˆ«å¯¹åº”çš„indexä¸º[5,6]ï¼ˆæ¶ˆå¤±çš„æ•°å­—ï¼‰454. 4Sum II 2è¡Œ1234class Solution: def fourSumCount(self, A: List[int], B: List[int], C: List[int], D: List[int]) -&gt; int: dic = collections.Counter(a + b for a in A for b in B) return sum(dic.get(- c - d, 0) for c in C for d in D) æ€è·¯åŒç¬¬ä¸€é¢˜ TWO SUM çš„ $O(N)$ å­—å…¸è§£æ³•ï¼Œè®°å½•éœ€è¦çš„å€¼461. Hamming Distance 1è¡Œ123class Solution: def hammingDistance(self, x: int, y: int) -&gt; int: return bin(x ^ y).count(&#x27;1&#x27;) 485. Max Consecutive Ones 1è¡Œ123class Solution: def findMaxConsecutiveOnes(self, nums: List[int]) -&gt; int: return len(max(&#x27;&#x27;.join(map(str, nums)).split(&#x27;0&#x27;))) å˜æˆå­—ç¬¦ä¸²ç„¶åç”¨â€0â€å»åˆ‡åˆ†ç„¶åæ¯”å­ä¸²é•¿åº¦494. Target Sum 5è¡Œ123456789class Solution: def findTargetSumWays(self, nums: List[int], S: int) -&gt; int: def dfs(cur, i, d = &#123;&#125;): if i &lt; len(nums) and (i, cur) not in d: # æœç´¢å‘¨å›´èŠ‚ç‚¹ d[(i, cur)] = dfs(cur + nums[i], i + 1) + dfs(cur - nums[i], i + 1) return d.get((i, cur), int(cur == S)) return dfs(0, 0) dfséå†æ‰€æœ‰å¯èƒ½ç»“æœï¼Œä»¥å½“å‰ä½ç½® i å’Œå½“å‰æ€»å’Œ cur ä¸ºæ ¹èŠ‚ç‚¹ï¼Œä»¥ä¸‹ä¸€ä½æ•°å­—çš„åŠ å‡ä¸ºé‚»åŸŸæ‰©æ•£æœç´¢ åˆ©ç”¨ d æ„é€ è®°å¿†ï¼Œä»¥ä¾¿å‰ªæï¼ˆæœç´¢è¿‡ç¨‹ä¸­é‡åˆ°ç›¸åŒä½ç½®å’Œç›¸åŒcurå€¼æ—¶è¿”å›å€¼åº”è¯¥ç›¸åŒï¼‰ dfsä¸­ d å‚æ•°ä¼ çš„æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥åªæœ‰ç¬¬ä¸€æ¬¡ä¼šé‡‡ç”¨é»˜è®¤å€¼ {}495. Teemo Attacking123class Solution: def findPoisonedDuration(self, t: List[int], d: int) -&gt; int: return len(t) and sum(min(t[i] - t[i-1], d) for i in range(1, len(t))) + d æ€»æ—¶é—´ = æ‰€æœ‰é—´éš”æ—¶é—´çš„æ€»å’Œï¼Œæ¯ä¸€æ¬¡çš„é—´éš”æ—¶é—´ = min(ä¸‹æ¬¡å‘å°„æ—¶é—´ - è¿™æ¬¡å‘å°„æ—¶é—´ï¼Œduration)498. Diagonal Traverse 5è¡Œ1234567class Solution: def findDiagonalOrder(self, matrix: List[List[int]]) -&gt; List[int]: m, n, r = len(matrix), len(matrix) and len(matrix[0]), [] for l in range(m + n - 1): temp = [matrix[i][l - i] for i in range(max(0, l+1 - n), min(l+1, m))] r += temp if l % 2 else temp[::-1] return r 0 and 0 ç­”æ¡ˆæ˜¯ 0ï¼Œæ­¤å¤„é¿å… matrix ä¸º [] æ—¶å¯¼è‡´æŠ¥é”™ æŒ‰ç…§ä»å³ä¸Šè§’åˆ°å·¦ä¸‹è§’çš„é¡ºåºéå† matrix çš„æ‰€æœ‰å¯¹è§’çº¿å¹¶æ”¾å…¥åˆ—è¡¨ temp å¦‚æœ å¯¹è§’çº¿å…ƒç´ ä¸ªæ•° æ˜¯å¶æ•°åˆ™åº”è¯¥æŠŠ temp åè½¬ æŠŠ temp åŠ å…¥ç»“æœ r507. Perfect Number123class Solution: def checkPerfectNumber(self, num: int) -&gt; bool: return num in (6, 28, 496, 8128, 33550336, 8589869056, 137438691328, 2305843008139952128) é¢˜ç›®ä¸­ç»™å‡ºäº†è§£çš„èŒƒå›´ï¼Œä¸”è§£çš„ä¸ªæ•°æ˜¯å›ºå®šçš„ï¼Œå› æ­¤å¯ä»¥æå‰è®¡ç®—å‡ºæ‰€æœ‰è§£557. Reverse Words in a String III 1è¡Œ123class Solution: def reverseWords(self, s: str) -&gt; str: return &#x27; &#x27;.join(s.split(&#x27; &#x27;)[::-1])[::-1] 561. Array Partition I 1è¡Œ123class Solution: def arrayPairSum(self, nums: List[int]) -&gt; int: return sum(sorted(nums)[::2]) 575. Distribute Candies 1è¡Œ123class Solution: def distributeCandies(self, candies: List[int]) -&gt; int: return min(len(set(candies)), len(candies) // 2) å§å§ä¼˜å…ˆæ‹¿ä¸åŒç§ç±»çš„ç³–æœ581. Shortest Unsorted Continuous Subarray 2è¡Œ1234class Solution: def findUnsortedSubarray(self, nums: List[int]) -&gt; int: diff = [i for i, (a, b) in enumerate(zip(nums, sorted(nums))) if a != b] return len(diff) and max(diff) - min(diff) + 1 è·å–æ‰€æœ‰å½“å‰æ•°ç»„ä¸æ’åºåæ•°ç»„å…·æœ‰ä¸åŒæ•°å€¼çš„ç´¢å¼•ï¼Œæœ€å³è¾¹çš„ç´¢å¼• - æœ€å·¦è¾¹çš„ + 1 å°±æ˜¯ç»“æœ589. N-ary Tree Preorder Traversal 1è¡Œ12345678910&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val=None, children=None): self.val = val self.children = children&quot;&quot;&quot;class Solution: def preorder(self, root: &#x27;Node&#x27;) -&gt; List[int]: return root and sum([[root.val], *map(self.preorder, root.children)], []) or [] é€’å½’è§£æ³•ï¼Œåˆ©ç”¨ and or æ§åˆ¶é€’å½’å¶èŠ‚ç‚¹å’Œæ™®é€šèŠ‚ç‚¹123456789101112131415161718&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val=None, children): self.val = val self.children = children&quot;&quot;&quot;class Solution: def preorder(self, root: &#x27;Node&#x27;) -&gt; List[int]: s = bool(root) * [root] r = [] while s: root = s.pop() r.append(root.val) s += root.children[::-1] return r è¿­ä»£è§£æ³• root ä¸º [] æ—¶ bool å€¼ä¸º False åŒ 0ï¼Œä¹˜æ³•ç»“æœä¸º []ï¼Œå³å¯è·³è¿‡ while root éç©ºæ—¶ dfs æ ˆå¼è¿­ä»£ é€†è½¬ children æ˜¯ç”±äºæ ˆçš„ FILO(å…ˆå…¥åå‡º) ç‰¹æ€§ 599. Minimum Index Sum of Two Lists 2è¡Œ1234class Solution: def findRestaurant(self, list1: List[str], list2: List[str]) -&gt; List[str]: d = &#123;x: list1.index(x) + list2.index(x) for x in set(list1) &amp; set(list2)&#125; return [x for x in d if d[x] == min(d.values())] ä½¿ç”¨å­—å…¸è®°å½•ï½›å…±åŒå–œæ¬¢çš„å•†åº—ï¼šç´¢å¼•å’Œï½ï¼Œè¿”å›ç´¢å¼•å’Œå¹¶åˆ—æœ€å°çš„å•†åº—å652. Find Duplicate Subtrees 8è¡Œ1234567891011121314151617# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def findDuplicateSubtrees(self, root): d = collections.defaultdict(list) def dfs(root): if not root: return &#x27;&#x27; s = &#x27; &#x27;.join((str(root.val), dfs(root.left), dfs(root.right))) d[s].append(root) return s dfs(root) return [l[0] for l in d.values() if len(l) &gt; 1] ä½¿ç”¨å­—å…¸ d è®°å½•ï½›å­æ ‘ç»“æ„ï¼š[root1ï¼Œroot2ï¼Œâ€¦â€¦]ï½658. Find K Closest Elements 2è¡Œ123class Solution: def findClosestElements(self, arr: List[int], k: int, x: int) -&gt; List[int]: return sorted(heapq.nsmallest(k, arr, key=lambda n:(abs(n - x), n))) nsmallest å‡½æ•°å¯ä»¥è¾“å‡ºæœ€å°çš„Nä¸ªæ•°å­—ï¼Œå¯å‚è€ƒè¿™é‡Œ12345678910class Solution: def findClosestElements(self, arr: List[int], k: int, x: int) -&gt; List[int]: l, h = 0, len(arr) - 1 while l &lt; h: m = (l + h) // 2 if arr[m] &gt;= x: h = m else: l = m + 1 return sorted(sorted(arr[max(0, l-k) : l+k], key=lambda y: abs(y - x))[:k]) äºŒåˆ†æŸ¥æ‰¾æ³•700. Search in a Binary Search Tree 1è¡Œ12345678910# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def searchBST(self, root: TreeNode, val: int) -&gt; TreeNode: return root and (root.val == val and root or self.searchBST((root.left, root.right)[root.val &lt; val], val)) é€’å½’703. Kth Largest Element in a Stream 3è¡Œ12345678910111213class KthLargest: def __init__(self, k: int, nums: List[int]): self.k, self.n = k, sorted(nums) def add(self, val: int) -&gt; int: self.n.insert(bisect.bisect_left(self.n, val, 0, len(self.n)), val) return self.n[-self.k]# Your KthLargest object will be instantiated and called as such:# obj = KthLargest(k, nums)# param_1 = obj.add(val) é¦–å…ˆå¯¹æ•°ç»„æ’åº æ¯æ¬¡æ’å…¥æ–°å€¼æ—¶ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æœç´¢æ’å…¥ä½ç½®ï¼Œä¿æŒæ’å…¥åæ•°ç»„çš„å‡åºæ€§è´¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥å–ç¬¬ k å¤§çš„å€¼ æ—¶é—´å¤æ‚åº¦ $O(T\\log N)$, å…¶ä¸­ T ä»£è¡¨æ’å…¥æ¬¡æ•° å…¶å®å¯ä»¥åœ¨æ¯æ¬¡æ’å…¥ä¹‹åä¸¢å¼ƒå°äºç¬¬ k å¤§æ•°æ®ä¹‹åçš„æ‰€æœ‰æ•°å­—ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å¯ä»¥é™ä¸º $O(T\\log k)$ è¿›é˜¶å¯ä½¿ç”¨å †ï¼š12345678910111213class KthLargest: def __init__(self, k: int, nums): self.k, self.nums = k, heapq.nlargest(k, nums + [float(&#x27;-inf&#x27;)]) heapq.heapify(self.nums) def add(self, val: int) -&gt; int: heapq.heappushpop(self.nums,val) return self.nums[0]# Your KthLargest object will be instantiated and called as such:# obj = KthLargest(k, nums)# param_1 = obj.add(val) é¢˜ç›®ä¸­æåˆ° $len(nums) \\ge k-1$ï¼Œå› æ­¤æˆ‘ä»¬åŠ å…¥ä¸€ä¸ªæ— ç©·å°ä½¿å¾— $len(nums) \\ge k$ï¼Œä»¥ä¾¿æ„é€ ä¸€ä¸ª $k$ å°ºå¯¸çš„å°æ ¹å † å †ä¸­çš„æ•°æ®æ„å‘³ç€ä»ç¬¬ $k$ å¤§çš„æ•°å­—åˆ°æœ€å¤§çš„æ•°å­— ç»´æŠ¤å †çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(T\\log k)$ 724. Find Pivot Index 4è¡Œ123456class Solution: def pivotIndex(self, nums: List[int]) -&gt; int: l, r, diff = 0, 0, [0] * len(nums) for i, j in zip(range(len(nums)), range(len(nums) - 1, -1, -1)): diff[i] += l; l += nums[i]; diff[j] -= r; r += nums[j] return diff.index(0) if 0 in diff else -1 æœ¬é¢˜åˆ©ç”¨åŒæŒ‡é’ˆï¼Œåˆ©ç”¨ iï¼Œj åŒå‘éå†æ•°ç»„ã€‚ l è®°å½•å½“å‰ç´¢å¼•å·¦è¾¹æ‰€æœ‰æ•°å­—ä¹‹å’Œï¼Œr è®°å½•å³è¾¹çš„å’Œ diff è®°å½•å½“å‰ç´¢å¼•å·¦è¾¹æ‰€æœ‰æ•°å­—ä¹‹å’Œ - å³è¾¹æ‰€æœ‰æ•°å­—ä¹‹å’Œï¼Œä¸­å¿ƒç´¢å¼•å·¦å³å’Œç›¸ç­‰ï¼Œdiff[ä¸­å¿ƒç´¢å¼•] ä¸º 0733. Flood Fill 6è¡Œ12345678class Solution: def floodFill(self, image: List[List[int]], sr: int, sc: int, newColor: int) -&gt; List[List[int]]: if image[sr][sc] != newColor: # æ ¹å‰ªæ old, image[sr][sc], m, n = image[sr][sc], newColor, len(image), len(image[0]) for i, j in zip((sr, sr+1, sr, sr-1), (sc+1, sc, sc-1, sc)): # æ”¾å…¥å‘¨å›´èŠ‚ç‚¹ if 0 &lt;= i &lt; m and 0 &lt;= j &lt; n and image[i][j] == old: # é‚»å‰ªæ self.floodFill(image, i, j, newColor) return image 739. Daily Temperatures 5è¡Œ1234567class Solution(object): def dailyTemperatures(self, T): stack, r = [], [0] * len(T) for i, t in enumerate(T): while stack and T[stack[-1]] &lt; t: r[stack.pop()] = i - stack[-1] stack.append(i) return r å…¥æ ˆæ¡ä»¶ï¼šå½“å‰å…ƒç´ æ¯”æ ˆé¡¶å…ƒç´ å°ï¼Œå‡ºæ ˆæ¡ä»¶ï¼šé‡åˆ°æ¯”è‡ªå·±å¤§çš„æ¸©åº¦ï¼Œå‡ºæ ˆæ—¶ç´¢å¼•è·ç¦»å³å¤©æ•°å·®744. Find Smallest Letter Greater Than Target1234class Solution: def nextGreatestLetter(self, letters: List[str], target: str) -&gt; str: l = [x &gt; target for x in letters] return letters[l.index(max(l))] è¿”å›åˆ—è¡¨ä¸­å¤§äº target çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æˆ–ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼ˆå¦‚æœæ²¡æœ‰æ¯” target å¤§çš„å­—ç¬¦ï¼‰747. Largest Number At Least Twice of Others 2è¡Œ1234class Solution: def dominantIndex(self, nums: List[int]) -&gt; int: a, b = ([0] + sorted(nums))[-2:] return (-1, nums.index(b))[b &gt;= 2 * a] å‰é¢åŠ ä¸ª[0]é˜²æ­¢æ•°ç»„é•¿åº¦ä¸å¤Ÿ åªè¦æ•°ç»„ä¸­ç¬¬ä¸€å¤§çš„æ•°å­—ä¸å°äºç¬¬äºŒå¤§æ•°å­—çš„ä¸¤å€å³æ»¡è¶³æ¡ä»¶752. Open the Lock 11è¡Œ12345678910111213class Solution: def openLock(self, deadends: List[str], target: str) -&gt; int: if &#x27;0000&#x27; in deadends: return -1 deadends, q = set(deadends), [(&#x27;0000&#x27;, 0)] while q: node, step = q.pop(0) for i, add in zip([*range(4)] * 2, [1] * 4 + [-1] * 4): cur = node[:i] + str((int(node[i]) + add) % 10) + node[i+1:] if cur == target: return step + 1 if not cur in deadends: q.append((cur, step + 1)) deadends.add(cur) return -1 ä¸ºä»€ä¹ˆè¿™é¢˜è¦ç”¨ BFS(å¹¿åº¦ä¼˜å…ˆæœç´¢) ï¼Ÿæ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æœ€å°‘çš„è§£é”æ­¥æ•°ï¼Œè¿™å®é™…ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯åœ¨å›¾ä¸Šæœç´¢æœ€çŸ­è·¯å¾„ã€‚BFS æ€»æ˜¯ä¼˜å…ˆæœç´¢è·ç¦»æ ¹èŠ‚ç‚¹è¿‘çš„èŠ‚ç‚¹ï¼Œå› æ­¤å®ƒæœç´¢åˆ°çš„è·¯å¾„å°±æ˜¯æœ€çŸ­è·¯å¾„ ä»¥å½“å‰é”ä¸Šçš„æ•°å­—ä¸ºæ ¹ï¼Œæ‰€æœ‰èƒ½è¾¾åˆ°çš„æ•°å­—ä¸ºä¸€é˜¶é‚»åŸŸï¼ˆå­èŠ‚ç‚¹ï¼‰è¿›è¡Œæœç´¢771. Jewels and Stones 1è¡Œ123class Solution: def numJewelsInStones(self, J: str, S: str) -&gt; int: return sum(S.count(i) for i in J) æ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼Œå¦é™„$O(N)$è§£æ³•ï¼ˆsetå†…éƒ¨å®ç°ä¸ºdictï¼Œinæ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º$O(N)$ï¼‰ 1234class Solution: def numJewelsInStones(self, J: str, S: str) -&gt; int: j = set(J) return sum(s in j for s in S) 867. Transpose Matrix 1è¡Œ123class Solution: def transpose(self, A: List[List[int]]) -&gt; List[List[int]]: return [*zip(*A)] 938. Range Sum of BST 1è¡Œ12345678910# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def rangeSumBST(self, root: TreeNode, L: int, R: int) -&gt; int: return root and root.val * (L &lt;= root.val &lt;= R) + self.rangeSumBST(root.left, L, R) + self.rangeSumBST(root.right, L, R) or 0 953. Verifying an Alien Dictionary 1è¡Œ123class Solution(object): def isAlienSorted(self, words, order): return words == sorted(words, key=lambda w: [order.index(x) for x in w]) å……åˆ†åˆ©ç”¨ python åºåˆ—æ¯”è¾ƒçš„ç‰¹ç‚¹ï¼Œsorted çš„å‚æ•° key å¯ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œsorted å‡½æ•°ä¼šå°†æ¯ä¸ªå…ƒç´ ä½œä¸ºè¾“å…¥ï¼Œè¾“å…¥åˆ° key å‡½æ•°å¹¶è·å¾—è¿”å›å€¼ï¼Œæ•´ä¸ªåºåˆ—å°†æŒ‰æ­¤å€¼çš„å¤§å°æ¥æ’åºã€‚æ­¤å¤„ key å‡½æ•°ä¸ºlambda w: [order.index(x) for x in w]ï¼Œå…¶ä¸ºwordsä¸­æ¯ä¸ªå•è¯ word è¿”å›ä¸€ä¸ª listï¼Œlist ä¸­æ¯ä¸ªå…ƒç´ ä¸ºå•è¯ä¸­å­—æ¯ x åœ¨ order ä¸­çš„ç´¢å¼•ã€‚æ¯”å¦‚å½“ order ä¸º â€˜abcdeâ€¦â€¦â€™ æ—¶ï¼Œå•è¯ â€˜cabâ€™ å°†è¿”å› [3, 2, 1]ã€‚å…³äºä¿©ä¸ª list çš„å¤§å°æ¯”è¾ƒï¼Œæœä» python åºåˆ—æ¯”è¾ƒçš„ç‰¹æ€§ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£æ•™ç¨‹ 5.8 èŠ‚å†…å®¹ã€‚ å¦å¤–ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•æ˜¯ç®€å•çš„æ•°å­¦è®¡ç®—ï¼Œç»™æ¯ä¸ªå•è¯èµ‹äºˆä¸€ä¸ªæ•°å­—ç„¶åæ’åºå¯¹æ¯”å’ŒåŸæ¥çš„æ•°ç»„æ˜¯å¦ä¸€è‡´å³å¯ï¼Œæ¯ä¸ªå­—æ¯çš„ä»·å€¼æŒ‰å­—æ¯è¡¨é¡ºåºï¼Œç¬¬å‡ ä¸ªå°±ä»£è¡¨å‡ ï¼Œæ¯è¿›ä¸€ä½éœ€è¦*10^-2é¿å…å†²çªï¼Œæ¯”å¦‚å­—æ¯è¡¨æ˜¯abcdeâ€¦â€¦ï¼Œå•è¯ cab çš„ä»·å€¼å°±æ˜¯ 3 * 1 + 1 * 0.01 + 2 * 0.0001ï¼Œä»·å€¼è¶Šå°çš„å•è¯ä½ç½®åº”è¯¥è¶Šé å‰ 1234class Solution: def isAlienSorted(self, words: List[str], order: str) -&gt; bool: d = &#123;c: i + 1 for i, c in enumerate(order)&#125; return sorted(words, key=lambda x: sum(d[c] * 10**(-2 * i) for i, c in enumerate(x))) == words 973. K Closest Points to Origin 1è¡Œ123class Solution: def kClosest(self, points: List[List[int]], K: int) -&gt; List[List[int]]: return sorted(points, key=lambda x: x[0]**2 + x[1]**2)[:K] 1290. Convert Binary Number in a Linked List to Integer1234567891011# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def getDecimalValue(self, head: ListNode) -&gt; int: r = 0 while head: r, head = r &lt;&lt; 1 | head.val, head.next return r $O(N)$, ä½è¿ç®—ä¸“é¢˜æ¢ç´¢ ä»¥ä¸Šæ˜¯ä¸€å¼ äº’è”ç½‘å…¬å¸é¢è¯•ä¸­ç»å¸¸è€ƒå¯Ÿçš„é—®é¢˜ç±»å‹æ€»ç»“çš„æ€ç»´å¯¼å›¾ï¼Œæ­¤æ ç›®å°†æ ¹æ® LeetCode ä¸­æ–‡ç‰ˆæ¢ç´¢æ¿å—ç»™å‡ºçš„è·¯çº¿åˆ¶ä½œé¢˜è§£ï¼Œå„ä¸“æ å°†å°½åŠ›è¦†ç›–å„å¤§çŸ¥è¯†è¦ç‚¹å¹¶æ€»ç»“çŸ¥è¯†ç‚¹å’Œå¥—è·¯ã€‚ç›¸æ¯”äºé¢˜åº“è§£æéƒ¨åˆ†è¿½æ±‚ä»£ç çš„ç»å¯¹ç²¾ç®€ï¼Œæœ¬ä¸“é¢˜è¿½æ±‚ä»¥é«˜å¯è¯»æ€§å‘ˆç°å„å¤§ä¸“é¢˜çš„å¸¸è§„æ€è·¯ï¼Œä¸ºåç»­çš„é¢˜åº“è§£æéƒ¨åˆ†åšé“ºå«ã€‚ä¿©éƒ¨åˆ†é¢˜ç›®å¯èƒ½é‡å¤ï¼Œä½†ä¸“é¢˜éƒ¨åˆ†ä¼šæœ‰æ›´è¯¦ç»†çš„è§£æï¼Œä¸”å¯èƒ½è¿ç”¨ä¸åŒè§£æ³•ã€‚ æ•°æ®ç»“æ„ï¼Œè¯´éš¾ä¹Ÿä¸éš¾ğŸŒ  é˜Ÿåˆ— &amp; æ ˆ ã€çŸ¥è¯†å¡ç‰‡ã€‘Python æœ‰å†…ç½®çš„é«˜æ•ˆæ¨¡å—å®ç°é˜Ÿåˆ—/æ ˆ/ä¼˜å…ˆé˜Ÿåˆ—ï¼šqueueæ¨¡å— æ ˆä¸€èˆ¬ä½¿ç”¨ list ç›´æ¥å®ç° Python çš„ collections æ¨¡å—æä¾›çš„ åŒå‘é˜Ÿåˆ— collections.deque åŒæ—¶å…·æœ‰ æ ˆ å’Œ é˜Ÿåˆ— çš„æ€§è´¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹© â˜„ é˜Ÿåˆ—ï¼šå…ˆå…¥å…ˆå‡ºçš„æ•°æ®ç»“æ„ ã€çŸ¥è¯†å¡ç‰‡ã€‘é˜Ÿåˆ—ä¸­çš„æ•°æ®å‘ˆçº¿æ€§æ’åˆ—ï¼Œå°±å’Œâ€œé˜Ÿåˆ—â€è¿™ä¸ªåå­—ä¸€æ ·ï¼ŒæŠŠå®ƒæƒ³è±¡æˆæ’æˆä¸€ é˜Ÿçš„äººæ›´å®¹æ˜“ç†è§£ã€‚åœ¨é˜Ÿåˆ—ä¸­ï¼Œå¤„ç†æ€»æ˜¯ä»ç¬¬ä¸€åå¼€å§‹å¾€åè¿›è¡Œï¼Œè€Œæ–°æ¥çš„äººåªèƒ½æ’åœ¨é˜Ÿå°¾ã€‚åƒé˜Ÿåˆ—è¿™ç§æœ€å…ˆè¿›å»çš„æ•°æ®æœ€å…ˆè¢«å–æ¥ï¼Œå³â€œå…ˆè¿›å…ˆå‡ºâ€çš„ç»“æ„ï¼Œæˆ‘ä»¬ç§°ä¸º First In First Outï¼Œç®€ç§° FIFO622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283class MyCircularQueue: def __init__(self, k: int): &quot;&quot;&quot; Initialize your data structure here. Set the size of the queue to be k. :param k: :return: &quot;&quot;&quot; self.size = 0 self.max_size = k self.data = [0] * k self.front = self.rear = -1 def enQueue(self, value: int) -&gt; bool: &quot;&quot;&quot; Insert an element into the circular queue. Return true if the operation is successful. :param value: :return: &quot;&quot;&quot; if self.isFull(): return False if self.rear == -1: self.rear = self.front = 0 else: self.rear = (self.rear + 1) % self.max_size self.data[self.rear] = value self.size += 1 return True def deQueue(self) -&gt; bool: &quot;&quot;&quot; Delete an element from the circular queue. Return true if the operation is successful. :return: &quot;&quot;&quot; if self.isEmpty(): return False if self.front == self.rear: self.front = self.rear = -1 else: self.front = (self.front + 1) % self.max_size self.size -= 1 return True def Front(self) -&gt; int: &quot;&quot;&quot; Get the front item from the queue. :return: &quot;&quot;&quot; return self.data[self.front] if self.size != 0 else -1 def Rear(self) -&gt; int: &quot;&quot;&quot; Get the last item from the queue. :return: &quot;&quot;&quot; return self.data[self.rear] if self.size != 0 else -1 def isEmpty(self) -&gt; bool: &quot;&quot;&quot; Checks whether the circular queue is empty or not. :return: &quot;&quot;&quot; return self.size == 0 def isFull(self) -&gt; bool: &quot;&quot;&quot; Checks whether the circular queue is full or not. :return: &quot;&quot;&quot; return self.size == self.max_size# Your MyCircularQueue object will be instantiated and called as such:# obj = MyCircularQueue(k)# param_1 = obj.enQueue(value)# param_2 = obj.deQueue()# param_3 = obj.Front()# param_4 = obj.Rear()# param_5 = obj.isEmpty()# param_6 = obj.isFull() æ­¤å¤„ä¸ºä½“ç°æ•°æ®ç»“æ„ï¼Œç›´æ¥ä½¿ç”¨listï¼Œlist.pop(0)è€—æ—¶è¾ƒå¤šï¼ŒPython æœ‰å†…ç½®çš„é«˜æ•ˆæ¨¡å—å®ç°é˜Ÿåˆ—/æ ˆ/ä¼˜å…ˆé˜Ÿåˆ—ï¼šqueueæ¨¡å— â˜„ é˜Ÿåˆ—å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢ ã€çŸ¥è¯†å¡ç‰‡ã€‘å¹¿åº¦ä¼˜å…ˆæœç´¢ BFS æ˜¯ä¸€ç§å¯¹å›¾è¿›è¡Œæœç´¢çš„ç®—æ³•ã€‚å‡è®¾æˆ‘ä»¬ä¸€å¼€å§‹ä½äºæŸä¸ªé¡¶ç‚¹ï¼ˆå³èµ·ç‚¹ï¼‰ï¼Œæ­¤ æ—¶å¹¶ä¸çŸ¥é“å›¾çš„æ•´ä½“ç»“æ„ï¼Œè€Œæˆ‘ä»¬çš„ç›®çš„æ˜¯ä»èµ·ç‚¹å¼€å§‹é¡ºç€è¾¹æœç´¢ï¼Œç›´åˆ°åˆ°è¾¾æŒ‡å®šé¡¶ç‚¹ï¼ˆå³ç»ˆ ç‚¹ï¼‰ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­æ¯èµ°åˆ°ä¸€ä¸ªé¡¶ç‚¹ï¼Œå°±ä¼šåˆ¤æ–­ä¸€æ¬¡å®ƒæ˜¯å¦ä¸ºç»ˆç‚¹ã€‚å¹¿åº¦ä¼˜å…ˆæœç´¢ä¼šä¼˜å…ˆä»ç¦»èµ·ç‚¹è¿‘çš„é¡¶ç‚¹å¼€å§‹æœç´¢ï¼Œè¿™æ ·ç”±è¿‘åŠå¹¿çš„æœç´¢æ–¹å¼ä¹Ÿä½¿å¾—ã€‚æ ¹æ® BFS çš„ç‰¹æ€§ï¼Œå…¶å¸¸å¸¸è¢«ç”¨äº éå† å’Œ æœç´¢æœ€çŸ­è·¯å¾„ ã€å¥—è·¯ã€‘BFSä¸€èˆ¬æµç¨‹ï¼š 12345678910class Solution(object): def BFS(self): # 1.ä½¿ç”¨ queue.Queue åˆå§‹åŒ–é˜Ÿåˆ— # 2.é€‰æ‹©åˆé€‚çš„æ ¹èŠ‚ç‚¹å‹å…¥é˜Ÿåˆ— # 3.ä½¿ç”¨ wile è¿›å…¥é˜Ÿåˆ—å¾ªç¯ï¼Œç›´åˆ°æœç´¢å®Œæ¯• # &#123; # 4.å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ # 5.æ”¾å…¥è¿™ä¸ªèŠ‚ç‚¹å‘¨å›´çš„èŠ‚ç‚¹ # &#125; ä½¿ç”¨ BFS æ—¶ï¼Œéœ€è¦æŠ“ä½ 3 ä¸ªå…³é”®ç‚¹ï¼šæ ¹èŠ‚ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿæ ¹èŠ‚ç‚¹çš„ä¸€é˜¶é‚»åŸŸèŠ‚ç‚¹æ˜¯å“ªäº›ï¼Ÿä»€ä¹ˆæ—¶å€™åœæ­¢æœç´¢ï¼Ÿ200. å²›å±¿çš„ä¸ªæ•°1234567891011121314151617181920212223242526272829303132333435from queue import Queueclass Solution(object): def numIslands(self, grid): try: r = 0; m = len(grid); n = len(grid[0]) around = ((0, 1), (1, 0), (0, -1), (-1, 0)) except: return 0 for i in range(m): for j in range(n): if int(grid[i][j]): r += 1 #---------------------------BFS å¼€å§‹----------------------------- # æŠŠæ ¹èŠ‚ç‚¹æŠ•å…¥é˜Ÿåˆ— q = Queue() q.put((i, j)) # å¼€å§‹å¾ªç¯ while not q.empty(): # å–å‡ºè¿˜æœªæ²‰æ²¡çš„é™†åœ°èŠ‚ç‚¹å¹¶æ²‰æ²¡é™†åœ°ï¼ˆé˜²æ­¢ä¸‹æ¬¡éå†åˆ°çš„æ—¶å€™å†ç®—ä¸€éï¼‰ x, y = q.get() if int(grid[x][y]): grid[x][y] = &#x27;0&#x27; # æ”¾å…¥å‘¨å›´çš„é™†åœ°èŠ‚ç‚¹ for a, b in around: a += x; b += y; if 0 &lt;= a &lt; m and 0 &lt;= b &lt; n and int(grid[a][b]): q.put((a, b)) #---------------------------------------------------------------- return r BFSè§£æ³•åœ¨è¿™é¢˜å¾ˆæ…¢ä½†æ˜¯å¾ˆå¸¸è§„ ç®—æ³•ä¹¦ä¸­çš„ BFS ä¸€èˆ¬éƒ½æ˜¯ä»¥æ ‘ä¸ºä¾‹å­ä»‹ç»çš„ï¼Œé‚£ä¹ˆåœ¨æœ¬é¢˜ä¸­å¦‚ä½•åº”ç”¨ BFS ï¼Ÿ æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸€ä¸ªé™†åœ°ç‚¹å½“ä½œæ ‘æ ¹ï¼Œç”¨ BFS æœç´¢å››å‘¨çš„é™†åœ°å¹¶æ²‰æ²¡å®ƒï¼Œé‚£ä¹ˆè¿™ä¸€æ•´å—çš„é™†åœ°éƒ½è¢«æ²‰æ²¡äº†ï¼Œä¸‹æ¬¡æˆ‘ä»¬å†é‡åˆ°é™†åœ°ç‚¹çš„æ—¶å€™å°±è¯´æ˜å‘ç°æ–°å¤§é™†äº† ğŸ™Š752. æ‰“å¼€è½¬ç›˜é”1234567891011121314151617181920212223242526272829303132from queue import Queueclass Solution: def openLock(self, deadends: List[str], target: str) -&gt; int: deadends = set(deadends) # in æ“ä½œåœ¨setä¸­æ—¶é—´å¤æ‚åº¦ä¸ºO(1) if &#x27;0000&#x27; in deadends: return -1 if target == &#x27;0000&#x27;: return 0 # -------------------------------BFS å¼€å§‹---------------------------------- # åˆå§‹åŒ–æ ¹èŠ‚ç‚¹ q = Queue() q.put((&#x27;0000&#x27;, 0)) # (å½“å‰èŠ‚ç‚¹å€¼ï¼Œè½¬åŠ¨æ­¥æ•°) # å¼€å§‹å¾ªç¯é˜Ÿåˆ— while not q.empty(): # å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ node, step = q.get() # æ”¾å…¥å‘¨å›´èŠ‚ç‚¹ for i in range(4): for add in (1, -1): cur = node[:i] + str((int(node[i]) + add) % 10) + node[i+1:] if cur == target: return step + 1 if not cur in deadends: q.put((cur, step + 1)) deadends.add(cur) # é¿å…é‡å¤æœç´¢ # ------------------------------------------------------------------------- return -1 ä¸ºä»€ä¹ˆè¿™é¢˜è¦ç”¨ BFS(å¹¿åº¦ä¼˜å…ˆæœç´¢) ï¼Ÿæ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æœ€å°‘çš„è§£é”æ­¥æ•°ï¼Œè¿™å®é™…ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯åœ¨å›¾ä¸Šæœç´¢æœ€çŸ­è·¯å¾„ã€‚BFS æ€»æ˜¯ä¼˜å…ˆæœç´¢è·ç¦»æ ¹èŠ‚ç‚¹è¿‘çš„èŠ‚ç‚¹ï¼Œå› æ­¤å®ƒæœç´¢åˆ°çš„è·¯å¾„å°±æ˜¯æœ€çŸ­è·¯å¾„ ä»¥å½“å‰é”ä¸Šçš„æ•°å­—ä¸ºæ ¹ï¼Œæ‰€æœ‰èƒ½è¾¾åˆ°çš„æ•°å­—ä¸ºä¸€é˜¶é‚»åŸŸï¼ˆå­èŠ‚ç‚¹ï¼‰è¿›è¡Œæœç´¢279. å®Œå…¨å¹³æ–¹æ•°1234567891011121314151617181920212223242526272829303132333435from queue import Queueclass Solution: def numSquares(self, n: int) -&gt; int: around = [] for i in range(1, n + 1): if i**2 &lt;= n: around.append(i**2) else: break; r = 0 seen = set() # é˜²æ­¢é‡å¤è¿ç®— # ----------------BFS å¼€å§‹---------------------- # åˆå§‹åŒ–æ ¹èŠ‚ç‚¹ q = Queue() q.put((0, r)) # è¿›å…¥é˜Ÿåˆ—å¾ªç¯ while not q.empty(): # å–å‡ºä¸€ä¸ªå…ƒç´  cur, step = q.get() step += 1 # æ”¾å…¥å‘¨å›´å…ƒç´  for a in around: a += cur if a == n: return step if a &lt; n and (a, step) not in seen: seen.add((a, step)) q.put((a, step)) # ---------------------------------------------- return 0 å°†å½“å‰æ•°å­—çš„æ€»å’Œè§†ä¸ºèŠ‚ç‚¹ï¼ŒåŠ ä¸Šä¸€ä¸ªå®Œå…¨å¹³æ–¹æ•°åèƒ½è¾¾åˆ°çš„æ•°å­—ä½œä¸ºä¸€é˜¶é‚»åŸŸï¼Œæœç´¢åˆ°è¾¾ n çš„æœ€çŸ­è·¯å¾„ â˜„ æ ˆï¼šåå…¥å…ˆå‡ºçš„æ•°æ®ç»“æ„ ã€çŸ¥è¯†å¡ç‰‡ã€‘æ ˆä¹Ÿæ˜¯ä¸€ç§æ•°æ®å‘ˆçº¿æ€§æ’åˆ—çš„æ•°æ®ç»“æ„ï¼Œä¸è¿‡åœ¨è¿™ç§ç»“æ„ä¸­ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®æœ€æ–°æ·»åŠ çš„æ•° æ®ã€‚æ ˆå°±åƒæ˜¯ä¸€æ‘ä¹¦ï¼Œæ‹¿åˆ°æ–°ä¹¦æ—¶æˆ‘ä»¬ä¼šæŠŠå®ƒæ”¾åœ¨ä¹¦å †çš„æœ€ä¸Šé¢ï¼Œå–ä¹¦æ—¶ä¹Ÿåªèƒ½ä»æœ€ä¸Šé¢çš„æ–°ä¹¦å¼€å§‹å–ã€‚Last In First Outï¼Œç®€ç§° LIFOï¼Œå¸¸å¸¸è¢«ç”¨äºæ•°ç»„ä¸­ä¸åŒä½ç½®ä¹‹é—´å«æœ‰ åµŒå¥—å…³ç³» çš„é¢˜ç›® ã€å¥—è·¯ã€‘æ ˆé—®é¢˜å…³é”®ç‚¹ï¼š è§£å†³æ ˆé—®é¢˜æ—¶ï¼Œä¸»è¦æ˜¯éœ€è¦ç¡®å®šå…¥æ ˆå’Œå‡ºæ ˆï¼ˆä»æ ˆé¡¶å¼¹å‡ºï¼‰çš„æ¡ä»¶ é€šå¸¸æ¥è¯´æ ˆå†…å‚¨å­˜çš„å…ƒç´ éƒ½æ˜¯åŒä¸€ç±»å…ƒç´ ï¼Œåœ¨æŸä¸ªå±‚é¢ä¸Šæœ‰å…±åŒçš„æ€§è´¨ åµŒå¥—å…³ç³»æ˜¯æŒ‡å‡ºæ ˆæ—¶å¾—åˆ°çš„æ ˆé¡¶å…ƒç´ ä¸å½“å‰åˆ¤æ–­æ˜¯å¦å…¥æ ˆå…ƒç´ çš„å…³ç³»ï¼Œä»¥æ­¤ä½œä¸ºåˆ‡å…¥ç‚¹å¥—å…¥è®¡ç®—é¢˜ç›®ç»“æœæ‰€éœ€çš„ä¿©ä¸ªå…ƒç´ æ˜¯æ¶‰åŠæ ˆçš„å…³é”®155. æœ€å°æ ˆ123456789101112131415161718192021222324252627class MinStack: def __init__(self): &quot;&quot;&quot; initialize your data structure here. &quot;&quot;&quot; self.data = [(None, float(&#x27;inf&#x27;))] def push(self, x: int) -&gt; None: self.data.append((x, min(x, self.data[-1][1]))) def pop(self) -&gt; None: if len(self.data) &gt; 1: self.data.pop() def top(self) -&gt; int: return self.data[-1][0] def getMin(self) -&gt; int: return self.data[-1][1]# Your MinStack object will be instantiated and called as such:# obj = MinStack()# obj.push(x)# obj.pop()# param_3 = obj.top()# param_4 = obj.getMin() æ ˆä¸­æ¯ä¸ªå…ƒç»„è®°å½•å…ƒç´ å€¼å’Œæœ€å°å€¼20. æœ‰æ•ˆçš„æ‹¬å·123456789101112class Solution: def isValid(self, s: str) -&gt; bool: stack = [] d = &#123;&#x27;(&#x27;: &#x27;)&#x27;, &#x27;[&#x27;: &#x27;]&#x27;, &#x27;&#123;&#x27;: &#x27;&#125;&#x27;&#125; for p in s: if p in &#x27;&#123;[(&#x27;: stack.append(p) else: if not stack or d[stack.pop()] != p: return False return not stack æ­¤é¢˜å…¥æ ˆæ¡ä»¶ä¸ºï¼šå…ƒç´ æ˜¯å·¦æ‹¬å·ï¼Œå‡ºæ ˆæ¡ä»¶ä¸ºï¼šåŒ¹é…åˆ°å³æ‹¬å· æ ˆä¸­çš„å…ƒç´ å…¨éƒ¨ä¸ºå·¦æ‹¬å·739. æ¯æ—¥æ¸©åº¦1234567891011class Solution(object): def dailyTemperatures(self, T): stack = [] r = [0] * len(T) for i, t in enumerate(T): while stack and T[stack[-1]] &lt; t: c = stack.pop() r[c] = i - c stack.append(i) return r å…¥æ ˆæ¡ä»¶ï¼šå½“å‰å…ƒç´ æ¯”æ ˆé¡¶å…ƒç´ å°ï¼Œå‡ºæ ˆæ¡ä»¶ï¼šé‡åˆ°æ¯”è‡ªå·±å¤§çš„æ¸©åº¦ æ ˆå†…å…ƒç´ ä¸ºé™åºæ’åˆ—çš„æ¸©åº¦çš„ç´¢å¼• å‡ºæ ˆæ—¶ç´¢å¼•è·ç¦»å³å¤©æ•°å·®150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼123456789101112131415class Solution: def evalRPN(self, tokens: List[str]) -&gt; int: # åˆå§‹åŒ–æ ˆï¼Œç”¨æ ˆå‚¨å­˜æœªå¤„ç†çš„æ•°å­— stack = [] # éå†å…ƒç´  for t in tokens: if not t in &#x27;+-*/&#x27;: # è§„å®šå…¥æ ˆæ¡ä»¶ stack.append(int(t)) else: # å‡ºæ ˆï¼šä»æ ˆé¡¶å¼¹å‡ºå…ƒç´ ä¸æ–°çš„æ ˆé¡¶åšè¿ç®— a = stack.pop() stack[-1] = int(eval(str(stack[-1]) + t + &#x27;a&#x27;)) return stack[-1] ä½¿ç”¨æ ˆå‚¨å­˜æ‰€æœ‰æœªå¤„ç†çš„æ•°å­— å‡ºæ ˆæ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯å°†å‡ºæ ˆå…ƒç´ ä¸æ–°çš„æ ˆé¡¶åšè¿ç®—ï¼Œç„¶åç”¨ç»“æœæ›´æ–°æ–°æ ˆé¡¶å…ƒç´  â˜„ æ ˆå’Œæ·±åº¦ä¼˜å…ˆæœç´¢ ã€çŸ¥è¯†å¡ç‰‡ã€‘æ·±åº¦ä¼˜å…ˆæœç´¢ DFS å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢ä¸€æ ·ï¼Œéƒ½æ˜¯å¯¹å›¾è¿›è¡Œæœç´¢çš„ç®—æ³•ï¼Œç›®çš„ä¹Ÿéƒ½æ˜¯ä»èµ·ç‚¹å¼€å§‹æœç´¢ç›´åˆ°åˆ°è¾¾æŒ‡å®šé¡¶ç‚¹ï¼ˆç»ˆç‚¹ï¼‰ã€‚æ·±åº¦ä¼˜å…ˆæœç´¢ä¼šæ²¿ç€ä¸€æ¡è·¯å¾„ä¸æ–­å¾€ä¸‹æœç´¢ç›´åˆ°ä¸èƒ½å†ç»§ç»­ä¸ºæ­¢ï¼Œç„¶åå†æŠ˜è¿”ï¼Œå¼€å§‹æœç´¢ä¸‹ä¸€æ¡å€™è¡¥è·¯å¾„ã€‚æ­£å¦‚æ ‘çš„éå†ä¸­æ‰€æåˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ DFS è¿›è¡Œ å‰åºéå†ï¼Œä¸­åºéå† å’Œ ååºéå†ã€‚åœ¨è¿™ä¸‰ä¸ªéå†é¡ºåºä¸­æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹æ€§ï¼šé™¤éæˆ‘ä»¬åˆ°è¾¾æœ€æ·±çš„ç»“ç‚¹ï¼Œå¦åˆ™æˆ‘ä»¬æ°¸è¿œä¸ä¼šå›æº¯200. å²›å±¿çš„ä¸ªæ•°1234567891011121314151617181920212223class Solution: def numIslands(self, grid: List[List[str]]) -&gt; int: try: m = len(grid) n = len(grid[0]) except: return 0 # -------------------------DFS å¼€å§‹------------------------ # å®šä¹‰dfsé€’å½’æ–¹ç¨‹ def dfs(i, j): if 0 &lt;= i &lt; m and 0 &lt;= j &lt; n and int(grid[i][j]): grid[i][j] = &#x27;0&#x27; for a, b in ((1, 0), (0, -1), (-1, 0), (0, 1)): dfs(i + a, j + b) # --------------------------------------------------------- r = 0 for i in range(m): for j in range(n): r += int(grid[i][j]) dfs(i, j) # è°ƒç”¨dfsæ²‰æ²¡ä¸€æ•´å—é™†åœ° return r éå†æ‰€æœ‰æ ¼ç‚¹ï¼Œæ¯å½“å‘ç°é™†åœ°å°±ç”¨dfsé€’å½’æ²‰æ²¡å®ƒå‘¨å›´çš„é™†åœ°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‘ç°é™†åœ°çš„æ¬¡æ•°å°±æ˜¯å²›å±¿æ•°133. å…‹éš†å›¾1234567891011121314151617181920&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, neighbors): self.val = val self.neighbors = neighbors&quot;&quot;&quot;class Solution: def cloneGraph(self, node: &#x27;Node&#x27;) -&gt; &#x27;Node&#x27;: d = &#123;&#125; def dfs(old): if old not in d: # æ¯éå†ä¸€ä¸ªèŠ‚ç‚¹å°±åˆ›å»ºä¸€ä¸ªå®ƒçš„å‰¯æœ¬åˆ°å“ˆå¸Œè¡¨ d[old] = new = Node(old.val, None) # å½“æ‰€æœ‰èŠ‚ç‚¹è¿›å…¥å“ˆå¸Œè¡¨ä¹‹æ—¶å¼€å§‹å›æº¯ï¼Œä¿®æ”¹é‚»å±… new.neighbors = [*map(dfs, old.neighbors)] return d[old] return dfs(node) æ­¤é¢˜ä¸ºæ— å‘è¿é€šå›¾çš„æœç´¢ï¼Œç”¨dfséå†æ•´ä¸ªå›¾ï¼Œå¹¶ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºå‰¯æœ¬åˆ°å“ˆå¸Œè¡¨ï¼Œå½“å›æº¯ä¹‹æ—¶ï¼Œæ‰€æœ‰èŠ‚ç‚¹å·²ç»åœ¨è¡¨ä¸­ï¼Œä¿®æ”¹é‚»å±…å³å¯494. ç›®æ ‡å’Œ123456789class Solution: def findTargetSumWays(self, nums: List[int], S: int) -&gt; int: def dfs(cur, i, d = &#123;&#125;): if i &lt; len(nums) and (i, cur) not in d: # æœç´¢å‘¨å›´èŠ‚ç‚¹ d[(i, cur)] = dfs(cur + nums[i], i + 1) + dfs(cur - nums[i], i + 1) return d.get((i, cur), int(cur == S)) return dfs(0, 0) dfséå†æ‰€æœ‰å¯èƒ½ç»“æœï¼Œä»¥å½“å‰ä½ç½® i å’Œå½“å‰æ€»å’Œ cur ä¸ºæ ¹èŠ‚ç‚¹ï¼Œä»¥ä¸‹ä¸€ä½æ•°å­—çš„åŠ å‡ä¸ºé‚»åŸŸæ‰©æ•£æœç´¢ åˆ©ç”¨ d æ„é€ è®°å¿†ï¼Œä»¥ä¾¿å‰ªæï¼ˆæœç´¢è¿‡ç¨‹ä¸­é‡åˆ°ç›¸åŒä½ç½®å’Œç›¸åŒcurå€¼æ—¶è¿”å›å€¼åº”è¯¥ç›¸åŒï¼‰ dfsä¸­ d å‚æ•°ä¼ çš„æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥åªæœ‰ç¬¬ä¸€æ¬¡ä¼šé‡‡ç”¨é»˜è®¤å€¼ &#123;&#125;94. äºŒå‰æ ‘çš„ä¸­åºéå†12345678910111213141516171819202122232425# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def inorderTraversal(self, root: TreeNode) -&gt; List[int]: r = [] # åˆå§‹åŒ–æ ˆ stack = [] # è¿›å…¥å †æ ˆå¾ªç¯ while stack or root: if root: # å…¥æ ˆæ¡ä»¶ stack.append(root) root = root.left else: # å‡ºæ ˆæ¡ä»¶ root = stack.pop() r.append(root.val) root = root.right return r â˜„ å°ç»“ ã€å¥—è·¯ã€‘è¿­ä»£å½¢ BFS/DFS 12345678910class Solution(object): def BFS(self): # 1.BFS ä½¿ç”¨ queue.Queue, DFS ä½¿ç”¨ queue.LifoQueue # 2.é€‰æ‹©åˆé€‚çš„æ ¹èŠ‚ç‚¹å‹å…¥é˜Ÿåˆ— # 3.ä½¿ç”¨ wile è¿›å…¥å¾ªç¯ï¼Œç›´åˆ°æœç´¢å®Œæ¯• # &#123; # 4.å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ # 5.æ”¾å…¥è¿™ä¸ªèŠ‚ç‚¹å‘¨å›´çš„èŠ‚ç‚¹ # &#125; ã€å¥—è·¯ã€‘é€’å½’å½¢ DFS 12345678class Solution: def dfs(self, root): if ...: # æ ¹å‰ªæ root = ... # æ ¹å¤„ç† for node in around: # æ”¾å…¥å‘¨å›´èŠ‚ç‚¹ if node == ...: # é‚»å‰ªæ self.dfs(node) # é€’å½’ return image # ç»ˆæ­¢è¿”å› 232. ç”¨æ ˆå®ç°é˜Ÿåˆ—123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657class MyQueue: def __init__(self): &quot;&quot;&quot; Initialize your data structure here. &quot;&quot;&quot; self.stack = [] def push(self, x: int) -&gt; None: &quot;&quot;&quot; Push element x to the back of queue. &quot;&quot;&quot; self.stack.append(x) def pop(self) -&gt; int: &quot;&quot;&quot; Removes the element from in front of queue and returns that element. &quot;&quot;&quot; temp = [] while self.stack: temp.append(self.stack.pop()) r = temp.pop() while temp: self.stack.append(temp.pop()) return r def peek(self) -&gt; int: &quot;&quot;&quot; Get the front element. &quot;&quot;&quot; temp = [] while self.stack: temp.append(self.stack.pop()) r = temp[-1] while temp: self.stack.append(temp.pop()) return r def empty(self) -&gt; bool: &quot;&quot;&quot; Returns whether the queue is empty. &quot;&quot;&quot; return not self.stack# Your MyQueue object will be instantiated and called as such:# obj = MyQueue()# obj.push(x)# param_2 = obj.pop()# param_3 = obj.peek()# param_4 = obj.empty() ä½¿ç”¨ä¿©ä¸ªæ ˆæ¥æ¨¡æ‹Ÿé˜Ÿåˆ—ï¼Œå½“éœ€è¦å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æ ˆtempï¼ŒæŠŠæ ˆé‡Œé¢çš„ä¸œè¥¿å…¨éƒ¨æŠ½å‡ºæ¥æ”¾è¿›tempï¼Œå®Œæˆæ“ä½œåæ”¾å›å»225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647from queue import Queueclass MyStack: def __init__(self): &quot;&quot;&quot; Initialize your data structure here. &quot;&quot;&quot; self.q = Queue() def push(self, x: int) -&gt; None: &quot;&quot;&quot; Push element x onto stack. &quot;&quot;&quot; self.q.put(x) def pop(self) -&gt; int: &quot;&quot;&quot; Removes the element on top of the stack and returns that element. &quot;&quot;&quot; for _ in range(self.q.qsize() - 1): self.q.put(self.q.get()) return self.q.get() def top(self) -&gt; int: &quot;&quot;&quot; Get the top element. &quot;&quot;&quot; for _ in range(self.q.qsize() - 1): self.q.put(self.q.get()) r = self.q.get() self.q.put(r) return r def empty(self) -&gt; bool: &quot;&quot;&quot; Returns whether the stack is empty. &quot;&quot;&quot; return self.q.empty()# Your MyStack object will be instantiated and called as such:# obj = MyStack()# obj.push(x)# param_2 = obj.pop()# param_3 = obj.top()# param_4 = obj.empty() å¼¹æ ˆé¡¶çš„æ—¶å€™æŠŠé˜Ÿåˆ—éå†ä¸€éï¼Œæ¯æ¬¡å¼¹å‡ºä¹‹ååŠ å…¥é˜Ÿå°¾ï¼Œé™¤äº†æœ€åä¸€ä¸ª394. å­—ç¬¦ä¸²è§£ç 1234567891011121314151617class Solution: def decodeString(self, s: str) -&gt; str: stack = [[&#x27;&#x27;, 1, &#x27;&#x27;]] a = n = &#x27;&#x27; for c in s: if c.isalpha(): a += c elif c.isdigit(): n += c elif c == &#x27;[&#x27;: stack.append([a, int(n), &#x27;&#x27;]) a = n = &#x27;&#x27; else: p, t, b = stack.pop() stack[-1][-1] += p + t * (b + a) a = &#x27;&#x27; return stack.pop()[-1] + a ç”¨ stack è®°å½•ï¼ˆ[]ä¹‹å‰çš„å­—æ¯ï¼Œç¿»å€æ¬¡æ•°ï¼Œç¿»å€å†…å®¹ï¼‰733. å›¾åƒæ¸²æŸ“123456789101112131415161718192021class Solution: def floodFill(self, image: List[List[int]], sr: int, sc: int, newColor: int) -&gt; List[List[int]]: m, n = map(len, (image, image[0])) around = ((1, 0), (0, 1), (-1, 0), (0, -1)) oldColor = image[sr][sc] # åˆ›å»ºæ ˆæ”¾å…¥æ ¹èŠ‚ç‚¹ stack = [(sr, sc)] # è¿›å…¥å¾ªç¯æ”¾å…¥é‚»å±… while stack: r, c = stack.pop() if oldColor != newColor: # æ ¹å‰ªæ image[r][c] = newColor for x, y in around: x, y = x + r, y + c if 0 &lt;= x &lt; m and 0 &lt;= y &lt; n and image[x][y] == oldColor: # é‚»å‰ªæ image[x][y] = newColor stack.append((x, y)) return image 542. 01 çŸ©é˜µ12345678910111213141516171819202122232425262728class Solution: def updateMatrix(self, matrix: List[List[int]]) -&gt; List[List[int]]: m, n = len(matrix), len(matrix[0]) r = [[0] * n for _ in range(m)] around = ((0, 1), (1, 0), (0, -1), (-1, 0)) for i in range(m): for j in range(n): # -------------------------BFS å¼€å§‹-------------------------- # æ”¾å…¥æ ¹èŠ‚ç‚¹ q = collections.deque([(i, j, 0)]) seen = &#123;(i, j)&#125; # å¾ªç¯å–èŠ‚ç‚¹ while q: a, b, t = q.popleft() if not matrix[a][b]: r[i][j] = t break # æ”¾å…¥é‚»èŠ‚ç‚¹ for x, y in around: x, y = x + a, y + b if 0 &lt;= x &lt; m and 0 &lt;= y &lt; n and (x, y) not in seen: seen.add((x, y)) q.append((x, y, t + 1)) # ---------------------------------------------------------- return r ä»¥å½“å‰ä½ç½®ä¸ºæ ¹ï¼Œå››å‘¨ä¸ºé‚»ï¼Œbfsæ±‚æœ€çŸ­è·¯å¾„ï¼Œtè®°å½•è·¯å¾„é•¿åº¦841. é’¥åŒ™å’Œæˆ¿é—´1234567891011121314151617class Solution: def canVisitAllRooms(self, rooms: List[List[int]]) -&gt; bool: seen = &#123;0&#125; # åˆ›å»ºé˜Ÿåˆ—æ”¾å…¥æ ¹èŠ‚ç‚¹ q = [0] # å¾ªç¯å–èŠ‚ç‚¹ while q: cur = q.pop(0) # æ”¾å…¥å‘¨å›´èŠ‚ç‚¹ for i in set(rooms[cur]): if i not in seen: # å‰ªæ seen.add(i) q.append(i) return len(seen) == len(rooms) ğŸŒ  æ•°ç»„å’Œå­—ç¬¦ä¸²â˜„ æ•°ç»„ç®€ä»‹ ã€å¥—è·¯ã€‘æ•°ç»„é—®é¢˜å¿…å¤‡é”¦å›Šï¼š æœ‰äº›é¢˜ç›®åœ¨åšé¢˜ä¹‹å‰å¯¹æ•°ç»„æ’åºå¾€å¾€å¯ä»¥ç®€åŒ–è§£æ³• æ•°ç»„ä¸å­—ç¬¦ä¸²å¤§ä½“ç›¸ä¼¼ä½†åœ¨ç»†èŠ‚ä¸Šä¼šæœ‰ä¸åŒï¼Œæœ‰æ—¶å€™ç›¸äº’è½¬åŒ–å¯ä»¥ç®€åŒ–é—®é¢˜724. å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒç´¢å¼•123456789class Solution: def pivotIndex(self, nums: List[int]) -&gt; int: l, r, diff = 0, 0, [0] * len(nums) for i, j in zip(range(len(nums)), range(len(nums) - 1, -1, -1)): diff[i] += l l += nums[i] diff[j] -= r r += nums[j] return diff.index(0) if 0 in diff else -1 æœ¬é¢˜åˆ©ç”¨åŒæŒ‡é’ˆï¼Œåˆ©ç”¨ iï¼Œj åŒå‘éå†æ•°ç»„ã€‚ l è®°å½•å½“å‰ç´¢å¼•å·¦è¾¹æ‰€æœ‰æ•°å­—ä¹‹å’Œï¼Œr è®°å½•å³è¾¹çš„å’Œ diff è®°å½•å½“å‰ç´¢å¼•å·¦è¾¹æ‰€æœ‰æ•°å­—ä¹‹å’Œ - å³è¾¹æ‰€æœ‰æ•°å­—ä¹‹å’Œï¼Œä¸­å¿ƒç´¢å¼•å·¦å³å’Œç›¸ç­‰ï¼Œdiff[ä¸­å¿ƒç´¢å¼•] ä¸º 0747. è‡³å°‘æ˜¯å…¶ä»–æ•°å­—ä¸¤å€çš„æœ€å¤§æ•°123456class Solution: def dominantIndex(self, nums: List[int]) -&gt; int: m = max(nums) r = nums.index(m) nums.remove(m) return (-1, r)[not nums or m &gt;= 2 * max(nums)] åªè¦æ•°ç»„ä¸­ç¬¬ä¸€å¤§çš„æ•°å­—ä¸å°äºç¬¬äºŒå¤§æ•°å­—çš„ä¸¤å€å³æ»¡è¶³æ¡ä»¶ 2è¡Œæ’åºè§£æ³• â†’ æˆ³è¿™é‡Œ66. åŠ ä¸€123class Solution: def plusOne(self, digits: List[int]) -&gt; List[int]: return list(map(int, str(int(&#x27;&#x27;.join(map(str, digits))) + 1))) â˜„ äºŒç»´æ•°ç»„ç®€ä»‹ 498. å¯¹è§’çº¿éå†1234567class Solution: def findDiagonalOrder(self, matrix: List[List[int]]) -&gt; List[int]: m, n, r = len(matrix), len(matrix) and len(matrix[0]), [] for l in range(m + n - 1): temp = [matrix[i][l - i] for i in range(max(0, l+1 - n), min(l+1, m))] r += temp if l % 2 else temp[::-1] return r 0 and 0 ç­”æ¡ˆæ˜¯ 0ï¼Œæ­¤å¤„é¿å… matrix ä¸º [] æ—¶å¯¼è‡´æŠ¥é”™ æŒ‰ç…§ä»å³ä¸Šè§’åˆ°å·¦ä¸‹è§’çš„é¡ºåºéå† matrix çš„æ‰€æœ‰å¯¹è§’çº¿å¹¶æ”¾å…¥åˆ—è¡¨ temp å¦‚æœ å¯¹è§’çº¿å…ƒç´ ä¸ªæ•° æ˜¯å¶æ•°åˆ™åº”è¯¥æŠŠ temp åè½¬ æŠŠ temp åŠ å…¥ç»“æœ r54. èºæ—‹çŸ©é˜µ123class Solution: def spiralOrder(self, matrix: List[List[int]]) -&gt; List[int]: return matrix and [*matrix.pop(0)] + self.spiralOrder([*zip(*matrix)][::-1]) æµç¨‹å›¾ï¼š 123|1 2 3| |6 9| |8 7| |4| =&gt; |5| =&gt; | ||4 5 6| =&gt; |5 8| =&gt; |5 4| =&gt; |5||7 8 9| |4 7| ä¸ºä»€ä¹ˆæ˜¯[*matrix.pop(0)]è€Œä¸æ˜¯matrix.pop(0)ï¼Ÿå› ä¸ºå¯¹äºåé¢çš„é€’å½’ï¼Œä¼ è¿›æ¥çš„åˆ—è¡¨ä¸­å…ƒç´ æ˜¯tuple118. æ¨è¾‰ä¸‰è§’123456class Solution: def generate(self, numRows: int) -&gt; List[List[int]]: r = [[1]] for i in range(1, numRows): r.append([1] + [sum(r[-1][j:j+2]) for j in range(i)]) return numRows and r or [] â˜„ å­—ç¬¦ä¸²ç®€ä»‹ 67. äºŒè¿›åˆ¶æ±‚å’Œ1234567891011class Solution: def addBinary(self, a: str, b: str) -&gt; str: r, p = &#x27;&#x27;, 0 d = len(b) - len(a) a = &#x27;0&#x27; * d + a b = &#x27;0&#x27; * -d + b for i, j in zip(a[::-1], b[::-1]): s = int(i) + int(j) + p r = str(s % 2) + r p = s // 2 return &#x27;1&#x27; + r if p else r æ­¤å¤„åˆ©ç”¨äº† python çš„å­—ç¬¦ä¸²ä¹˜æ³•28. å®ç°strStr()123class Solution: def strStr(self, haystack: str, needle: str) -&gt; int: return haystack.find(needle) ä¸ç”¨å†…ç½®å‡½æ•°ä¹Ÿå¯ä»¥ 123456class Solution: def strStr(self, haystack: &#x27;str&#x27;, needle: &#x27;str&#x27;) -&gt; &#x27;int&#x27;: for i in range(0, len(haystack) - len(needle) + 1): if haystack[i:i+len(needle)] == needle: return i return -1 14. æœ€é•¿å…¬å…±å‰ç¼€ 1234class Solution: def longestCommonPrefix(self, strs: List[str]) -&gt; str: r = [len(set(c)) == 1 for c in zip(*strs)] + [0] return strs[0][:r.index(0)] if strs else &#x27;&#x27; åˆ©ç”¨å¥½zipå’Œset os æ¨¡å—æœ‰æä¾›ä¸€æ ·çš„å‡½æ•° 123class Solution: def longestCommonPrefix(self, strs: List[str]) -&gt; str: return os.path.commonprefix(strs) â˜„ åŒæŒ‡é’ˆæŠ€å·§ ã€çŸ¥è¯†å¡ç‰‡ã€‘åŒæŒ‡é’ˆ é€šå¸¸ï¼Œæˆ‘ä»¬åªä½¿ç”¨ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹å¹¶åœ¨æœ€åä¸€ä¸ªå…ƒç´ ç»“æŸçš„ä¸€ä¸ªæŒ‡é’ˆæ¥è¿›è¡Œè¿­ä»£ã€‚ ä½†æ˜¯ï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆæ¥è¿›è¡Œè¿­ä»£ã€‚ ä¸¤ä¸ªæŒ‡é’ˆä» ä¸åŒä½ç½® å‡ºå‘ï¼šä¸€ä¸ªä»å§‹ç«¯å¼€å§‹ï¼Œå¦ä¸€ä¸ªä»æœ«ç«¯å¼€å§‹ åŒå‘å†…ç¼© äºŒåˆ†å¤¹é€¼ ä¸¤ä¸ªæŒ‡é’ˆä»¥ ä¸åŒé€Ÿåº¦ ç§»åŠ¨ï¼šä¸€ä¸ªæŒ‡é’ˆå¿«ä¸€äº›ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆæ…¢ä¸€äº› å¿«æ…¢æŒ‡é’ˆ æ»‘åŠ¨çª—å£344. åè½¬å­—ç¬¦ä¸²12345678910class Solution: def reverseString(self, s: List[str]) -&gt; None: &quot;&quot;&quot; Do not return anything, modify s in-place instead. &quot;&quot;&quot; i, j = 0, len(s) - 1 while i &lt; j: s[i], s[j] = s[j], s[i] i += 1 j -= 1 561. æ•°ç»„æ‹†åˆ† I123class Solution: def arrayPairSum(self, nums: List[int]) -&gt; int: return sum(sorted(nums)[::2]) 167. ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„123456789class Solution: def twoSum(self, numbers: List[int], target: int) -&gt; List[int]: i, j = 0, len(numbers) - 1 while numbers[i] + numbers[j] != target: if numbers[i] + numbers[j] &gt; target: j -= 1 else: i += 1 return [i+1, j+1] 27. ç§»é™¤å…ƒç´ 12345678class Solution: def removeElement(self, nums: List[int], val: int) -&gt; int: j = 0 for i in range(len(nums)): if val != nums[i]: nums[j] = nums[i] j += 1 return j 485. æœ€å¤§è¿ç»­1çš„ä¸ªæ•°12345678910class Solution: def findMaxConsecutiveOnes(self, nums: List[int]) -&gt; int: r = c = 0 for n in nums: if n: c += 1 else: r = max(r, c) c = 0 return max(r, c) 209. é•¿åº¦æœ€å°çš„å­æ•°ç»„12345678910class Solution: def minSubArrayLen(self, s: int, nums: List[int]) -&gt; int: i, a, r = 0, 0, float(&#x27;inf&#x27;) for j in range(len(nums)): a += nums[j] while a &gt;= s: r = min(r, j - i + 1) a -= nums[i] i += 1 return 0 if r == float(&#x27;inf&#x27;) else r i, j åŒæŒ‡é’ˆæ»‘çª—ï¼Œ$O(N)$æ—¶é—´å¤æ‚åº¦ï¼Œ$O(1)$ç©ºé—´å¤æ‚åº¦ a ä»£è¡¨ i åˆ° j çš„æ€»å’Œ â˜„ å°ç»“ 189. æ—‹è½¬æ•°ç»„123456class Solution: def rotate(self, nums: List[int], k: int) -&gt; None: &quot;&quot;&quot; Do not return anything, modify nums in-place instead. &quot;&quot;&quot; for _ in range(k % len(nums)): nums[-1:], nums[:0] = [], nums[-1:] æ—¶é—´å¤æ‚åº¦ = $O(k \\% len(nums))$ï¼Œç©ºé—´å¤æ‚åº¦ = $O(1)$119. æ¨è¾‰ä¸‰è§’ II123456class Solution: def getRow(self, rowIndex: int) -&gt; List[int]: r = [1] for i in range(1, rowIndex + 1): r = [1] + [sum(r[j:j+2]) for j in range(i)] return r è·Ÿ æ¨è¾‰ä¸‰è§’ I æ²¡ä»€ä¹ˆå·®åˆ«151. ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯123class Solution: def reverseWords(self, s: str) -&gt; str: return &quot; &quot;.join(s.split()[::-1]) python çš„ split ä¸­çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ‰€æœ‰çš„ç©ºå­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€æ¢è¡Œ(\\n)ã€åˆ¶è¡¨ç¬¦(\\t)ç­‰557. åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ III123class Solution: def reverseWords(self, s: str) -&gt; str: return &#x27; &#x27;.join(s.split()[::-1])[::-1] 26. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹12345678class Solution: def removeDuplicates(self, nums: List[int]) -&gt; int: i = 0 for j in range(1, len(nums)): if nums[j] != nums[i]: i += 1 nums[i] = nums[j] return len(nums) and i + 1 æ•°ç»„å®Œæˆæ’åºåï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ç½®ä¸¤ä¸ªæŒ‡é’ˆ i å’Œ jï¼Œå…¶ä¸­ i æ˜¯æ…¢æŒ‡é’ˆï¼Œè€Œ j æ˜¯å¿«æŒ‡é’ˆã€‚åªè¦ nums[i] = nums[j]ï¼Œæˆ‘ä»¬å°±å¢åŠ  j ä»¥è·³è¿‡é‡å¤é¡¹ã€‚å½“æˆ‘ä»¬é‡åˆ° nums[j] != nums[i]æ—¶ï¼Œè·³è¿‡é‡å¤é¡¹çš„è¿è¡Œå·²ç»ç»“æŸï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æŠŠå®ƒï¼ˆnums[j]ï¼‰çš„å€¼å¤åˆ¶åˆ° nums[i + 1]ã€‚ç„¶åé€’å¢ iï¼Œæ¥ç€æˆ‘ä»¬å°†å†æ¬¡é‡å¤ç›¸åŒçš„è¿‡ç¨‹ï¼Œç›´åˆ° j åˆ°è¾¾æ•°ç»„çš„æœ«å°¾ä¸ºæ­¢283. ç§»åŠ¨é›¶12345678910111213class Solution: def moveZeroes(self, nums: List[int]) -&gt; None: &quot;&quot;&quot; Do not return anything, modify nums in-place instead. &quot;&quot;&quot; i = 0 for j in range(len(nums)): if nums[j]: nums[i] = nums[j] i += 1 while i &lt; len(nums): nums[i] = 0 i += 1 ğŸŒ  é“¾è¡¨ ã€çŸ¥è¯†å¡ç‰‡ã€‘é“¾è¡¨æ˜¯æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œå…¶ä¸­çš„æ•°æ®å‘ˆçº¿æ€§æ’åˆ—ã€‚åœ¨é“¾è¡¨ä¸­ï¼Œæ•°æ®çš„æ·»åŠ å’Œåˆ é™¤éƒ½è¾ƒä¸ºæ–¹ä¾¿ï¼Œ å°±æ˜¯è®¿é—®æ¯”è¾ƒè€—è´¹æ—¶é—´ã€‚å®é™…ä¸Šï¼Œç›¸æ¯”è¾ƒæ•°ç»„æ¥è¯´ï¼Œå¹¶ä¸å­˜åœ¨é“¾è¡¨è¿™æ ·ä¸€ä¸ªå¯¹è±¡ï¼Œé“¾è¡¨æ˜¯ç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆçš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬èƒ½æ¥è§¦åˆ°çš„æ•°æ®å¯¹è±¡åªæœ‰èŠ‚ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®èŠ‚ç‚¹æ¥å¯»æ‰¾å‘¨å›´èŠ‚ç‚¹ï¼Œè®¸å¤šèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»æŠ½è±¡åœ°æ„æˆäº†ä¸€ä¸ªé“¾è¡¨ã€‚ â˜„ å•é“¾è¡¨ 707. è®¾è®¡é“¾è¡¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071class Node: def __init__(self, v, p=None, n=None): self.val = v self.prev = p self.next = nclass MyLinkedList: def __init__(self): &quot;&quot;&quot; Initialize your data structure here. &quot;&quot;&quot; self.key = Node(-1) self.key.prev = self.key.next = self.key def get(self, index: int) -&gt; int: &quot;&quot;&quot; Get the value of the index-th node in the linked list. If the index is invalid, return -1. &quot;&quot;&quot; i, node = 0, self.key.next while i &lt; index and node != self.key: node = node.next i += 1 return node.val if index &gt;= 0 else -1 def addAtHead(self, val: int) -&gt; None: &quot;&quot;&quot; Add a node of value val before the first element of the linked list. After the insertion, the new node will be the first node of the linked list. &quot;&quot;&quot; self.key.next.prev = self.key.next = Node(val, p=self.key, n=self.key.next) def addAtTail(self, val: int) -&gt; None: &quot;&quot;&quot; Append a node of value val to the last element of the linked list. &quot;&quot;&quot; self.key.prev.next = self.key.prev = Node(val, p=self.key.prev, n=self.key) def addAtIndex(self, index: int, val: int) -&gt; None: &quot;&quot;&quot; Add a node of value val before the index-th node in the linked list. If index equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted. &quot;&quot;&quot; index = max(0, index) i, node = 0, self.key.next while i &lt; index and node != self.key: node = node.next i += 1 if node != self.key or i == index: node.prev.next = node.prev = Node(val, p=node.prev, n=node) def deleteAtIndex(self, index: int) -&gt; None: &quot;&quot;&quot; Delete the index-th node in the linked list, if the index is valid. &quot;&quot;&quot; if index &lt; 0: return i, node = 0, self.key.next while i &lt; index and node != self.key: node = node.next i += 1 if node != self.key: node.prev.next = node.next node.next.prev = node.prev del node# Your MyLinkedList object will be instantiated and called as such:# obj = MyLinkedList()# param_1 = obj.get(index)# obj.addAtHead(val)# obj.addAtTail(val)# obj.addAtIndex(index,val)# obj.deleteAtIndex(index) æœ¬é¢˜æ„å»ºäº†ä¸€ä¸ªåŒå‘çš„ç¯å½¢é“¾è¡¨ï¼Œè®°å½• key èŠ‚ç‚¹ï¼Œkey.next æŒ‡å‘é“¾è¡¨çš„ headï¼Œkey.prev æŒ‡å‘é“¾è¡¨çš„ tail â˜„ åŒæŒ‡é’ˆæŠ€å·§ 141. ç¯å½¢é“¾è¡¨123456789101112131415# Definition for singly-linked list.# class ListNode(object):# def __init__(self, x):# self.val = x# self.next = Noneclass Solution(object): def hasCycle(self, head): slow = fast = head while fast and fast.next: fast = fast.next.next slow = slow.next if slow == fast: return True return False æƒ³è±¡ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªé€Ÿåº¦ä¸åŒçš„è·‘æ­¥è€…ã€‚å¦‚æœä»–ä»¬åœ¨ç›´è·¯ä¸Šè¡Œé©¶ï¼Œå¿«è·‘è€…å°†é¦–å…ˆåˆ°è¾¾ç›®çš„åœ°ã€‚ä½†æ˜¯ï¼Œå¦‚æœå®ƒä»¬åœ¨åœ†å½¢è·‘é“ä¸Šè·‘æ­¥ï¼Œé‚£ä¹ˆå¿«è·‘è€…å¦‚æœç»§ç»­è·‘æ­¥å°±ä¼šè¿½ä¸Šæ…¢è·‘è€…ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨é“¾è¡¨ä¸­ä½¿ç”¨ä¸¤ä¸ªé€Ÿåº¦ä¸åŒçš„æŒ‡é’ˆæ—¶ä¼šé‡åˆ°çš„æƒ…å†µï¼š å¦‚æœæ²¡æœ‰ç¯ï¼Œå¿«æŒ‡é’ˆå°†åœåœ¨é“¾è¡¨çš„æœ«å°¾ã€‚ å¦‚æœæœ‰ç¯ï¼Œå¿«æŒ‡é’ˆæœ€ç»ˆå°†ä¸æ…¢æŒ‡é’ˆç›¸é‡ã€‚ æ‰€ä»¥å‰©ä¸‹çš„é—®é¢˜æ˜¯ï¼šè¿™ä¸¤ä¸ªæŒ‡é’ˆçš„é€‚å½“é€Ÿåº¦åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿä¸€ä¸ªå®‰å…¨çš„é€‰æ‹©æ˜¯æ¯æ¬¡ç§»åŠ¨æ…¢æŒ‡é’ˆä¸€æ­¥ï¼Œè€Œç§»åŠ¨å¿«æŒ‡é’ˆä¸¤æ­¥ã€‚æ¯ä¸€æ¬¡è¿­ä»£ï¼Œå¿«é€ŸæŒ‡é’ˆå°†é¢å¤–ç§»åŠ¨ä¸€æ­¥ã€‚å¦‚æœç¯çš„é•¿åº¦ä¸º Mï¼Œç»è¿‡ M æ¬¡è¿­ä»£åï¼Œå¿«æŒ‡é’ˆè‚¯å®šä¼šå¤šç»•ç¯ä¸€å‘¨ï¼Œå¹¶èµ¶ä¸Šæ…¢æŒ‡é’ˆã€‚142. ç¯å½¢é“¾è¡¨ II1234567891011121314class Solution(object): def detectCycle(self, head): slow = fast = head while fast and fast.next: fast = fast.next.next slow = slow.next if slow == fast: break else: return None while head is not slow: head = head.next slow = slow.next return head è®¾ç¯çš„èµ·å§‹èŠ‚ç‚¹ä¸º Eï¼Œå¿«æ…¢æŒ‡é’ˆä» head å‡ºå‘ï¼Œå¿«æŒ‡é’ˆé€Ÿåº¦ä¸º 2ï¼Œè®¾ç›¸äº¤èŠ‚ç‚¹ä¸º Xï¼Œhead åˆ° E çš„è·ç¦»ä¸º Hï¼ŒE åˆ° X çš„è·ç¦»ä¸º Dï¼Œç¯çš„é•¿åº¦ä¸º Lï¼Œé‚£ä¹ˆæœ‰ï¼šå¿«æŒ‡é’ˆèµ°è¿‡çš„è·ç¦»ç­‰äºæ…¢æŒ‡é’ˆèµ°è¿‡çš„è·ç¦»åŠ å¿«æŒ‡é’ˆå¤šèµ°çš„è·ç¦»ï¼ˆå¤šèµ°äº† n åœˆçš„ Lï¼‰ 2(H + D) = H + D + nLï¼Œå› æ­¤å¯ä»¥æ¨å‡º H = nL - Dï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬è®©ä¿©ä¸ªæ…¢æŒ‡é’ˆä¸€ä¸ªä» head å‡ºå‘ï¼Œä¸€ä¸ªä» X å‡ºå‘çš„è¯ï¼Œä»–ä»¬ä¸€å®šä¼šåœ¨èŠ‚ç‚¹ E ç›¸é‡ 12345 _____ / \\head___________E \\ \\ / X_____/ 160. ç›¸äº¤é“¾è¡¨123456789101112131415# Definition for singly-linked list.# class ListNode(object):# def __init__(self, x):# self.val = x# self.next = Noneclass Solution(object): def getIntersectionNode(self, headA, headB): &quot;&quot;&quot; :type head1, head1: ListNode :rtype: ListNode &quot;&quot;&quot; a, b = (headA, headB) if headA and headB else (None, None) while a != b: a, b = not a and headB or a.next, not b and headA or b.next return a è¿™é¢˜ä¸æ”¯æŒ Python3 æ‰€ä»¥åªèƒ½ç”¨ Python2 åšäº† æŠŠç¬¬ä¸€æ¡é“¾è¡¨çš„å°¾éƒ¨æ¥åˆ°ç¬¬äºŒæ¡é“¾è¡¨çš„å¼€å¤´ï¼Œç¬¬äºŒæ¡æ¥åˆ°ç¬¬ä¸€æ¡çš„å¼€å¤´ï¼Œå°±èƒ½æ¶ˆé™¤ä¿©æ¡é“¾è¡¨çš„é•¿åº¦å·®ï¼Œå¹¶åœ¨æŸä¸€æ—¶åˆ»åœ¨ç¬¬ä¸€ä¸ªäº¤å‰ç‚¹ç›¸é‡ï¼Œæˆ–åœ¨èµ°å®Œä¿©æ¡é“¾è¡¨é•¿åº¦çš„æ—¶å€™åŒæ—¶ä¸º None 1234# å‡è®¾æœ‰ä¸¤æ¡é“¾è¡¨1â†’2â†’3â†’4å’Œâ‘ â†’â‘¡â†’â‘¢ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ç®—æ³•æµç¨‹ â†“1 â†’ 2 â†˜ â†— â†’ 4 1 â†’ 2 â†˜ â†— â†’ 4 â†’ â‘  â†’ â†’ â†’ 3(â‘¡) â¤ ç›¸é‡äº†â‘  â†’ â†’ â†’ 3(â‘¡) â†’ â‘¢ æŠŠ4æ¥åˆ°â‘ å‰é¢ï¼ŒæŠŠâ‘¢æ¥åˆ°1å‰é¢ â‘  â†’ â†’ â†’ 3(â‘¡) â†’ â‘¢ â†’ 1 â†’ 2 â†— è‹¥éç›¸äº¤é“¾è¡¨åˆ™åŒæ—¶èµ°åˆ°None 19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹123456789101112131415161718# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def removeNthFromEnd(self, head: ListNode, n: int) -&gt; ListNode: link = [] while head: link.append(head) head = head.next if n != len(link): link[-n - 1].next = link[-n].next del link[-n] return link and link[0] åˆ—è¡¨è®°å½•æ•´ä¸ªé“¾è¡¨ï¼Œæ¢æˆé˜Ÿåˆ—è®°å½•æœ€åå‡ ä¸ªå¯ä»¥æŠŠç©ºé—´å¤æ‚åº¦å‹åˆ° $O(1)$ â˜„ ç»å…¸é—®é¢˜ 206. åè½¬é“¾è¡¨123456789101112# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def reverseList(self, head: ListNode) -&gt; ListNode: p = None while head: head.next, head, p = p, head.next, head return p éå†ä¸€éé“¾è¡¨ï¼Œæ¯æ¬¡éƒ½æŠŠç›¸é‚»èŠ‚ç‚¹çš„æŒ‡å‘åè½¬ï¼ˆAâ†’B å˜æˆ Aâ†Bï¼‰203. ç§»é™¤é“¾è¡¨å…ƒç´ 1234567891011121314151617# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def removeElements(self, head: ListNode, val: int) -&gt; ListNode: while head and head.val == val: head = head.next pre, cur = head, head and head.next while cur: if cur.val == val: pre.next = cur = cur.next else: pre, cur = cur, cur.next return head ç¬¬ä¸€ä¸ª while ç”¨äºæ‰¾åˆ°åº”è¯¥è¿”å›çš„é“¾è¡¨å¤´ï¼ˆåº”è¯¥è·³è¿‡æ‰€æœ‰ç‰¹æ®Š val çš„èŠ‚ç‚¹ï¼‰ ç¬¬äºŒä¸ª while ç”¨äºæŠŠå‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆæ¥åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚æœå½“å‰èŠ‚ç‚¹å€¼ä¸º valï¼‰328. å¥‡å¶é“¾è¡¨1234567891011121314# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def oddEvenList(self, head: ListNode) -&gt; ListNode: if not head or not head.next: return head r, odd, p, head = head, head, head.next, head.next.next while head: odd.next, head.next, p.next = head, odd.next, head.next p, odd, head = p.next, head, p.next and p.next.next return r odd è®°å½•ä¸Šä¸€ä¸ªå¥‡æ•°ä½èŠ‚ç‚¹ï¼Œp è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹ ä»ç¬¬3ä¸ªä½ç½®å¼€å§‹å¾ªç¯ï¼Œæ¯æ¬¡éƒ½æŠŠå½“å‰èŠ‚ç‚¹æ¥åˆ° odd åé¢ï¼Œç„¶åè·³åˆ°ä¸‹ä¸€ä¸ªå¥‡æ•°ä½èŠ‚ç‚¹ç»§ç»­å¾ªç¯234. å›æ–‡é“¾è¡¨123456789101112131415# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def isPalindrome(self, head: ListNode) -&gt; bool: s, f, p = head, head, None while f and f.next: s.next, p, s, f = p, s, s.next, f.next.next if f: s = s and s.next while s and p and s.val == p.val: p, s = p.next, s.next return s == p == None f è®°å½•å¿«æŒ‡é’ˆï¼Œæ¯æ¬¡èµ°å€†æ­¥ï¼Œs è®°å½•æ…¢æŒ‡é’ˆï¼Œæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œp è®°å½• s çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ é¦–å…ˆä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°ä¸­ç‚¹ï¼Œç¬¬ä¸€ä¸ª while åœæ­¢æ—¶å¦‚æœé“¾è¡¨é•¿åº¦ä¸ºå¥‡æ•°ï¼Œs ä¸ºä¸­ç‚¹ï¼›å¦åˆ™ f ä¸º Noneï¼Œs ä¸ºå³åŠéƒ¨åˆ†çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ è‹¥é“¾è¡¨é•¿åº¦ä¸ºå¥‡æ•°ï¼Œs å‰è¿›ä¸€æ­¥ï¼Œç„¶å p å’Œ s å¾€ä¿©ä¸ªæ–¹å‘åŒæ—¶éå†æ¯”å¯¹æ˜¯å¦å›æ–‡ â˜„ åŒé“¾è¡¨ ã€è®¾è®¡é“¾è¡¨ã€‘ åŒä¸Š â˜„ å°ç»“ 21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨123456789101112# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def mergeTwoLists(self, l1: ListNode, l2: ListNode) -&gt; ListNode: if l1 and l2: if l1.val &gt; l2.val: l1, l2 = l2, l1 l1.next = self.mergeTwoLists(l1.next, l2) return l1 or l2 andï¼šå¦‚æœ and å‰é¢çš„è¡¨è¾¾å¼å·²ç»ä¸º Falseï¼Œé‚£ä¹ˆ and ä¹‹åçš„è¡¨è¾¾å¼å°†è¢« è·³è¿‡ï¼Œè¿”å›å·¦è¡¨è¾¾å¼ç»“æœ orï¼šå¦‚æœ or å‰é¢çš„è¡¨è¾¾å¼å·²ç»ä¸º Trueï¼Œé‚£ä¹ˆ or ä¹‹åçš„è¡¨è¾¾å¼å°†è¢«è·³è¿‡ï¼Œç›´æ¥è¿”å›å·¦è¡¨è¾¾å¼çš„ç»“æœ ä¾‹å­ï¼š[] and 7 ç­‰äº [] åˆ¤æ–­ l1 æˆ– l2 ä¸­æ˜¯å¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºç©ºï¼Œå¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æŠŠä¸ä¸ºç©ºçš„èŠ‚ç‚¹æ¥åˆ°é“¾è¡¨åé¢å³å¯ å¯¹ l1 å’Œ l2 é‡æ–°èµ‹å€¼ï¼Œä½¿å¾— l1 æŒ‡å‘æ¯”è¾ƒå°çš„é‚£ä¸ªèŠ‚ç‚¹å¯¹è±¡ ä¿®æ”¹ l1 çš„ next å±æ€§ä¸ºé€’å½’å‡½æ•°è¿”å›å€¼ è¿”å› l1ï¼Œæ³¨æ„ï¼šå¦‚æœ l1 å’Œ l2 åŒæ—¶ä¸º Noneï¼Œæ­¤æ—¶é€’å½’åœæ­¢è¿”å› None æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ ç©ºé—´å¤æ‚åº¦ï¼šã€è€ƒè™‘é€’å½’å¼€æ ˆã€‘$O(n)$ã€ä¸è€ƒè™‘ã€‘$O(1)$2. ä¸¤æ•°ç›¸åŠ 12345678910111213# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def addTwoNumbers(self, l1: ListNode, l2: ListNode, carry=0) -&gt; ListNode: if not (l1 or l2): return ListNode(1) if carry else None l1, l2 = l1 or ListNode(0), l2 or ListNode(0) val = l1.val + l2.val + carry l1.val, l1.next = val % 10, self.addTwoNumbers(l1.next, l2.next, val &gt; 9) return l1 int(True) ç­‰äº 1 None or 7 ç­‰äº 7 ç”¨ carry è®°å½•æ˜¯å¦åº”è¯¥è¿›ä½430. æ‰å¹³åŒ–å¤šçº§åŒå‘é“¾è¡¨123456789101112131415161718192021222324252627&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, prev, next, child): self.val = val self.prev = prev self.next = next self.child = child&quot;&quot;&quot;class Solution: def flatten(self, head: &#x27;Node&#x27;) -&gt; &#x27;Node&#x27;: stack = [head] if head else [] p = None while stack: node = stack.pop() if node.next: stack.append(node.next) if node.child: stack.append(node.child) if p: p.next = node node.prev = p p.child = node.child = None p = node return head å¸¸è§„ DFS éå†138. å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨1234567891011121314151617181920212223&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, next, random): self.val = val self.next = next self.random = random&quot;&quot;&quot;class Solution: def copyRandomList(self, head: &#x27;Node&#x27;) -&gt; &#x27;Node&#x27;: d, node = &#123;None: None&#125;, head while node: d[node] = Node(node.val, None, None) node = node.next node = head while node: d[node].next = d[node.next] d[node].random = d[node.random] node = node.next return d[head] éš¾ç‚¹åœ¨äºåˆ›å»ºèŠ‚ç‚¹çš„æ—¶å€™éœ€è¦æŒ‡å‘æœªåˆ›å»ºçš„èŠ‚ç‚¹ éå†ä¿©éå¯æœ‰æ•ˆè§£å†³ï¼Œç”¨å­—å…¸è®°å½•å¯¹åº”çš„èŠ‚ç‚¹ï¼Œç„¶åä¾é åŸæ¥çš„é“¾è¡¨æ¥éå†æ–°é“¾è¡¨ï¼Œç¬¬ä¸€æ¬¡éå†æœªçŸ¥çš„èŠ‚ç‚¹ç½® Noneï¼Œç¬¬äºŒæ¬¡å†æŠŠå·²ç»åˆ›å»ºçš„èŠ‚ç‚¹æ”¹ä¸Šå» é“¾è¡¨ä¹Ÿæ˜¯å›¾ï¼Œ133é¢˜çš„dfsè§£æ³•åŒæ ·å¯è¡Œ61. æ—‹è½¬é“¾è¡¨123456789101112131415161718# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def rotateRight(self, head: ListNode, k: int) -&gt; ListNode: l = [] while head: l.append(head) head = head.next if l: l[-1].next, l[-1 - k % len(l)].next = l[0], None return l[- k % len(l)] return None ç”¨ list è®°å½•é“¾è¡¨ï¼ŒæŠŠé“¾è¡¨å½“ä½œç¯ï¼Œä¿®è¡¥åŸæ¥çš„åˆ‡æ–­å£ï¼Œåˆ›é€ æ–°çš„ç¼ºå£ï¼ˆkï¼‰ğŸŒ  å“ˆå¸Œè¡¨ ã€çŸ¥è¯†å¡ç‰‡ã€‘åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å“ˆå¸Œå‡½æ•°å¿«é€Ÿè®¿é—®åˆ°æ•°ç»„ä¸­çš„ç›®æ ‡æ•°æ®ã€‚å¦‚æœå‘ç”Ÿå“ˆå¸Œ å†²çªï¼Œå°±ä½¿ç”¨é“¾è¡¨è¿›è¡Œå­˜å‚¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸ç®¡æ•°æ®é‡ä¸ºå¤šå°‘ï¼Œæˆ‘ä»¬éƒ½èƒ½å¤Ÿçµæ´»åº”å¯¹ã€‚ å¦‚æœæ•°ç»„çš„ç©ºé—´å¤ªå°ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨çš„æ—¶å€™å°±å®¹æ˜“å‘ç”Ÿå†²çªï¼Œçº¿æ€§æŸ¥æ‰¾çš„ä½¿ç”¨é¢‘ç‡ä¹Ÿä¼šæ›´é«˜ï¼›åè¿‡æ¥ï¼Œå¦‚æœæ•°ç»„çš„ç©ºé—´å¤ªå¤§ï¼Œå°±ä¼šå‡ºç°å¾ˆå¤šç©ºç®±å­ï¼Œé€ æˆå†…å­˜çš„æµªè´¹ã€‚å› æ­¤ï¼Œ ç»™æ•°ç»„è®¾å®šåˆé€‚çš„ç©ºé—´éå¸¸é‡è¦ã€‚ â˜„ è®¾è®¡å“ˆå¸Œè¡¨ 705. è®¾è®¡å“ˆå¸Œé›†åˆ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253class Node: def __init__(self, val, nex): self.val = val self.nex = nexclass MyHashSet: def __init__(self): &quot;&quot;&quot; Initialize your data structure here. &quot;&quot;&quot; self.size = 1000 self.h = [Node(None, None) for _ in range(self.size)] def add(self, key: int) -&gt; None: p = self.h[key % self.size] node = p.nex while node: if node.val == key: break p = node node = node.nex else: p.nex = Node(key, None) def remove(self, key: int) -&gt; None: p = self.h[key % self.size] node = p.nex while node: if node.val == key: p.nex = node.nex break p = node node = node.nex def contains(self, key: int) -&gt; bool: &quot;&quot;&quot; Returns true if this set contains the specified element &quot;&quot;&quot; node = self.h[key % self.size] while node: if node.val == key: return True node = node.nex return False# Your MyHashSet object will be instantiated and called as such:# obj = MyHashSet()# obj.add(key)# obj.remove(key)# param_3 = obj.contains(key) åœ¨å­˜å‚¨æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç”Ÿå†²çªï¼Œå¯ä»¥åˆ©ç”¨é“¾è¡¨åœ¨å·²æœ‰æ•°æ®çš„åé¢æ’å…¥æ–°æ•°æ® æ¥è§£å†³å†²çªã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä¸ºâ€œé“¾åœ°å€æ³•â€706. è®¾è®¡å“ˆå¸Œæ˜ å°„12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061class Node: def __init__(self, key=None, val=None, nex=None): self.key = key self.val = val self.nex = nexclass MyHashMap: def __init__(self): &quot;&quot;&quot; Initialize your data structure here. &quot;&quot;&quot; self.size = 1000 self.h = [Node() for _ in range(self.size)] def put(self, key: int, value: int) -&gt; None: &quot;&quot;&quot; value will always be non-negative. &quot;&quot;&quot; p = self.h[key % self.size] c = p.nex while c: if c.key == key: c.val = value break p = c c = c.nex else: p.nex = Node(key, value) def get(self, key: int) -&gt; int: &quot;&quot;&quot; Returns the value to which the specified key is mapped, or -1 if this map contains no mapping for the key &quot;&quot;&quot; c = self.h[key % self.size] while c: if c.key == key: return c.val c = c.nex return -1 def remove(self, key: int) -&gt; None: &quot;&quot;&quot; Removes the mapping of the specified value key if this map contains a mapping for the key &quot;&quot;&quot; p = self.h[key % self.size] c = p.nex while c: if c.key == key: p.nex = c.nex break p = c c = c.nex# Your MyHashMap object will be instantiated and called as such:# obj = MyHashMap()# obj.put(key,value)# param_2 = obj.get(key)# obj.remove(key) â˜„ å®é™…åº”ç”¨ - å“ˆå¸Œé›†åˆ 217. å­˜åœ¨é‡å¤å…ƒç´ 123class Solution: def containsDuplicate(self, nums: List[int]) -&gt; bool: return len(set(nums)) != len(nums) 136. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—1234class Solution: def singleNumber(self, nums: List[int]) -&gt; int: from functools import reduce return reduce(int.__xor__, nums) è¿™é‡Œç”¨åˆ°äº†å¼‚æˆ–ï¼ˆxorï¼‰ï¼Œç›¸åŒçš„æ•°å­—å¼‚æˆ–åä¸º0ï¼Œ0å¼‚æˆ–ä»»ä½•æ•°éƒ½ç­‰äºé‚£ä¸ªæ•°ï¼Œç”¨reduceåœ¨åˆ—è¡¨æ‰€æœ‰å…ƒç´ ä¹‹é—´ä½¿ç”¨å¼‚æˆ–^ï¼Œé‚£ä¹ˆç•™ä¸‹çš„å°±æ˜¯é‚£ä¸ªå•ç‹¬çš„æ•°å­—äº†ã€‚349. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†123class Solution: def intersection(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: return [*set(nums1) &amp; set(nums2)] ç»è¿‡ set ä¹‹åï¼Œé‡å¤çš„å…ƒç´ è¢«åˆ é™¤ ä¸è¿ç®—å¯¹äºé›†åˆæ¥è¯´å°±æ˜¯æ±‚äº¤é›†202. å¿«ä¹æ•°1234567class Solution: def isHappy(self, n: int) -&gt; bool: seen = &#123;1&#125; while n not in seen: seen.add(n) n = sum(int(i) ** 2 for i in str(n)) return n == 1 â˜„ å®é™…åº”ç”¨ - å“ˆå¸Œæ˜ å°„ 1. ä¸¤æ•°ä¹‹å’Œ123456class Solution: def twoSum(self, nums: List[int], target: int) -&gt; List[int]: d = &#123;&#125; for i, n in enumerate(nums): if n in d: return [d[n], i] d[target-n] = i $O(N)$æ—¶é—´æ•ˆç‡çš„å¿«é€Ÿè§£æ³•ï¼Œç”¨å­—å…¸è®°å½• ï½›éœ€è¦çš„å€¼:å½“å‰ç´¢å¼•ï½205. åŒæ„å­—ç¬¦ä¸²123class Solution: def isIsomorphic(self, s: str, t: str) -&gt; bool: return [*map(s.index, s)] == [*map(t.index, t)] åŒæ„ä»£è¡¨ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªä½ç½®ä¸Šå­—ç¬¦åœ¨è‡ªèº«ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ç›¸åŒ599. ä¸¤ä¸ªåˆ—è¡¨çš„æœ€å°ç´¢å¼•æ€»å’Œ1234class Solution: def findRestaurant(self, list1: List[str], list2: List[str]) -&gt; List[str]: d = &#123;x: list1.index(x) + list2.index(x) for x in set(list1) &amp; set(list2)&#125; return [x for x in d if d[x] == min(d.values())] ä½¿ç”¨å­—å…¸è®°å½•ï½›å…±åŒå–œæ¬¢çš„å•†åº—ï¼šç´¢å¼•å’Œï½ï¼Œè¿”å›ç´¢å¼•å’Œå¹¶åˆ—æœ€å°çš„å•†åº—å387. å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦1234567class Solution: def firstUniqChar(self, s: str) -&gt; int: d = &#123;c: s.count(c) for c in set(s)&#125; for i, c in enumerate(s): if d[c] == 1: return i return -1 é¦–å…ˆç”¨å­—å…¸ d å‚¨å­˜ï½›å­—ç¬¦ï¼šå‡ºç°æ¬¡æ•°ï½ï¼Œæ³¨æ„è¿™é‡Œçš„å­—ç¬¦æ¥è‡ª setï¼Œä¸ºäº†é¿å…é‡å¤æ“ä½œï¼Œé˜²æ­¢TLE ç„¶åéå† s å¯»æ‰¾å‡ºç°æ¬¡æ•°ä¸º 1 çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç´¢å¼•ï¼Œä¸å­˜åœ¨åˆ™è¿”å› -1350. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† II123class Solution: def intersect(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: return [*(collections.Counter(nums1) &amp; collections.Counter(nums2)).elements()] å¯¹äºä¸¤ä¸ª Counter å¯¹è±¡ï¼Œä¸æ“ä½œæ„å‘³ç€å–ä¸¤è€…éƒ½æœ‰çš„key, valueå–å°çš„é‚£ä¸€ä¸ª å‚è€ƒï¼šPython Counter è®¡æ•°å·¥å…·12345678910111213141516class Solution: def intersect(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: nums1.sort() nums2.sort() r = [] i = j = 0 while i &lt; len(nums1) and j &lt; len(nums2): if nums1[i] == nums2[j]: r.append(nums1[i]) i += 1 j += 1 elif nums1[i] &lt; nums2[j]: i += 1 else: j += 1 return r è¿›é˜¶è§£æ³• â†‘ ä½¿ç”¨åŒæŒ‡é’ˆå°†ä¸¤ä¸ªåˆ—è¡¨ä¸­å…±åŒçš„å…ƒç´ æŠ ä¸‹æ¥ï¼Œå› ä¸ºå·²ç»æ’åºï¼Œæ‰€ä»¥é‡åˆ°ä¸åŒå…ƒç´ æ—¶æ•°å€¼å°çš„é‚£ä¸ªåˆ—è¡¨çš„æŒ‡é’ˆå‘å‰ç§»åŠ¨219. å­˜åœ¨é‡å¤å…ƒç´  II12345678class Solution: def containsNearbyDuplicate(self, nums: List[int], k: int) -&gt; bool: r = float(&#x27;inf&#x27;) d = &#123;&#125; for i, n in enumerate(nums): r = min(r, i - d.get(n, float(&#x27;-inf&#x27;))) d[n] = i return r &lt;= k æœ¬é¢˜é¢˜ç›®æœ‰è¯¯ï¼Œå®é™…æ„æ€æ˜¯æ‰¾åŒæ•°å­—æœ€å°é—´éš”ï¼Œè‹¥ä¸è¶…è¿‡ k åˆ™æ»¡è¶³æ¡ä»¶ éå†åˆ—è¡¨ï¼Œæ¯æ¬¡éƒ½æ¯”å¯¹æœ€å°é—´éš”ï¼Œå¹¶æ›´æ–°å“ˆå¸Œè¡¨ç´¢å¼•ï¼Œå½“å‰ä½ç½®å¾€å·¦çš„æœ€å°é—´éš”ä¸€å®šæ˜¯ä¸ä¸Šä¸€æ¬¡åŒæ•°å­—å‡ºç°çš„ç´¢å¼•çš„è·ç¦» â˜„ å®é™…åº”ç”¨ - è®¾è®¡é”® 49. å­—æ¯å¼‚ä½è¯åˆ†ç»„123456class Solution: def groupAnagrams(self, strs: List[str]) -&gt; List[List[str]]: d = collections.defaultdict(list) for s in strs: d[&#x27;&#x27;.join(sorted(s))].append(s) return [*d.values()] ä»¥æ’åºåçš„å•è¯ä¸º keyï¼Œå°†æ‰€æœ‰å­—ç¬¦ä¸²åˆ†ç»„36. æœ‰æ•ˆçš„æ•°ç‹¬12345678910class Solution: def isValidSudoku(self, board: List[List[str]]) -&gt; bool: row, col, pal = eval(&#x27;,&#x27;.join([&#x27;[[0] * 9 for _ in range(9)]&#x27;] * 3)) for i, r in enumerate(board): for j, n in enumerate(r): if n == &#x27;.&#x27;: continue n = int(n) - 1 if row[i][n] or col[j][n] or pal[i // 3 * 3 + j // 3][n]: return False row[i][n] = col[j][n] = pal[i // 3 * 3 + j // 3][n] = 1 return True ä½¿ç”¨ 3 ä¸ªäºŒç»´çŸ©é˜µè®°å½•æŸæ•°å­—æ˜¯å¦å·²ç»åœ¨ç‰¹å®šåŒºåŸŸå‡ºç°è¿‡ï¼Œå¦‚ç¬¬ 1 è¡Œï¼Œç¬¬ 4 åˆ—å¯¹äº row[0], col[3], pal[1] åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸåŒ…å« 9 ä¸ªæ•°å€¼ï¼Œç”¨ä»¥è®°å½•å…¶ ç´¢å¼• + 1 æ˜¯å¦åœ¨æ”¹åŒºåŸŸå‡ºç°è¿‡652. å¯»æ‰¾é‡å¤çš„å­æ ‘123456789101112131415161718# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def findDuplicateSubtrees(self, root: TreeNode) -&gt; List[TreeNode]: d, r = &#123;&#125;, [] def dfs(root): if not root: return &#x27;#&#x27; s = &#x27;# &#x27; + &#x27; &#x27;.join((str(root.val), dfs(root.left), dfs(root.right))) d[s] = d.get(s, 0) + 1 if d[s] == 2: r.append(root) return s dfs(root) return r ä½¿ç”¨å­—å…¸ d è®°å½•ï½›å­æ ‘ç»“æ„ï¼š[root1ï¼Œroot2ï¼Œâ€¦â€¦]ï½ â˜„ å°ç»“ 771. å®çŸ³ä¸çŸ³å¤´1234class Solution: def numJewelsInStones(self, J: str, S: str) -&gt; int: j = set(J) return sum(bool(s in j) for s in S) set çš„ in æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º O(1)3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²12345678class Solution: def lengthOfLongestSubstring(self, s: str) -&gt; int: i, r, d = -1, 0, &#123;&#125; for j, c in enumerate(s): i = max(i, d.get(c, -1)) r = max(r, j - i) d[c] = j return r åŒæŒ‡é’ˆæ»‘åŠ¨çª—å£ï¼Œi ä»£è¡¨çª—å£èµ·å§‹ä½ç½®ï¼Œj ä»£è¡¨çª—å£ç»“æŸä½ç½®ï¼Œr è®°å½•æœ€ä¼˜ç»“æœï¼Œd è®°å½•æ‰€æœ‰å­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®ï¼ˆå¯¹äº j éå†æ¥è¯´ï¼‰454. å››æ•°ç›¸åŠ  II123456789101112class Solution: def fourSumCount(self, A: List[int], B: List[int], C: List[int], D: List[int]) -&gt; int: dic = &#123;&#125; for a in A: for b in B: dic[a + b] = dic.get(a + b, 0) + 1 r = 0 for c in C: for d in D: r += dic.get(- c - d, 0) return r æ€è·¯åŒç¬¬ä¸€é¢˜ TWO SUM çš„ O(N) å­—å…¸è§£æ³•ï¼Œè®°å½•éœ€è¦çš„å€¼347. å‰Kä¸ªé«˜é¢‘å…ƒç´ 12345678910111213class Solution: def topKFrequent(self, nums: List[int], k: int) -&gt; List[int]: d = &#123;n: 0 for n in nums&#125; for n in nums: d[n] += 1 r = [] for _ in range(k): n = max(d, key=d.get) r.append(n) d[n] = -1 return r æ—¶é—´å¤æ‚åº¦ O(N)ï¼Œç©ºé—´å¤æ‚åº¦ O(N) ä½¿ç”¨å­—å…¸ d è®°å½•ï½›æ•°å­—ï¼šå‡ºç°æ¬¡æ•°ï½ å¾ªç¯ k æ¬¡åˆ†åˆ«å–å‡ºæœ€å¤§å€¼æ”¾å…¥ç»“æœåˆ—è¡¨ r380. å¸¸æ•°æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ 1234567891011121314151617181920212223242526272829303132333435363738394041424344class RandomizedSet: def __init__(self): &quot;&quot;&quot; Initialize your data structure here. &quot;&quot;&quot; self.d = &#123;&#125; self.l = [] def insert(self, val: int) -&gt; bool: &quot;&quot;&quot; Inserts a value to the set. Returns true if the set did not already contain the specified element. &quot;&quot;&quot; if val in self.d: return False else: self.d[val] = len(self.l) self.l.append(val) return True def remove(self, val: int) -&gt; bool: &quot;&quot;&quot; Removes a value from the set. Returns true if the set contained the specified element. &quot;&quot;&quot; if val in self.d: self.d[self.l[-1]] = self.d[val] self.l[self.d.pop(val)] = self.l[-1] self.l.pop() return True else: return False def getRandom(self) -&gt; int: &quot;&quot;&quot; Get a random element from the set. &quot;&quot;&quot; return self.l[random.randint(0, len(self.l) - 1)]# Your RandomizedSet object will be instantiated and called as such:# obj = RandomizedSet()# param_1 = obj.insert(val)# param_2 = obj.remove(val)# param_3 = obj.getRandom() O(1)è§£æ³•ï¼Œç»„åˆä½¿ç”¨å“ˆå¸Œè¡¨å’Œæ•°ç»„ æ’å…¥æ—¶ï¼šç”¨å“ˆå¸Œè¡¨æ¥åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨O(1)ï¼Œæ•°ç»„æœ«å°¾å¢åŠ ä¸€ä¸ªå…ƒç´ O(1)ï¼Œå“ˆå¸Œè¡¨è®°å½•ï½›å€¼ï¼šç´¢å¼•ï½O(1) åˆ é™¤æ—¶ï¼šç”¨å“ˆå¸Œè¡¨æ¥å®šä½O(1)ï¼ŒæŠŠæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ å–ä¸‹æ¥é¡¶æ›¿è¢«åˆ é™¤å…ƒç´ ä½ç½®O(1)ï¼Œæ›´æ–°å“ˆå¸Œè¡¨O(1) å–éšæœºæ•°æ—¶ï¼šéšæœºä»æ•°ç»„é‡Œé¢æŒ‘ä¸€ä¸ªO(1)ğŸŒ  äºŒåˆ†æŸ¥æ‰¾ ã€çŸ¥è¯†å¡ç‰‡ã€‘äºŒåˆ†æŸ¥æ‰¾åˆ©ç”¨å·²æ’å¥½åºçš„æ•°ç»„ï¼Œæ¯ä¸€æ¬¡æŸ¥æ‰¾éƒ½å¯ä»¥å°†æŸ¥æ‰¾èŒƒå›´å‡åŠã€‚æŸ¥æ‰¾èŒƒå›´å†…åªå‰©ä¸€ä¸ªæ•°æ®æ—¶æŸ¥æ‰¾ç»“æŸã€‚æ•°æ®é‡ä¸º n çš„æ•°ç»„ï¼Œå°†å…¶é•¿åº¦å‡åŠ log2n æ¬¡åï¼Œå…¶ä¸­ä¾¿åªå‰©ä¸€ä¸ªæ•°æ®äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨äºŒåˆ†æŸ¥æ‰¾ä¸­é‡å¤æ‰§è¡Œâ€œå°†ç›®æ ‡æ•°æ®å’Œæ•°ç»„ä¸­é—´çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒåå°†æŸ¥æ‰¾èŒƒå›´å‡åŠâ€çš„æ“ä½œ log2n æ¬¡åï¼Œå°±èƒ½æ‰¾åˆ°ç›®æ ‡æ•°æ®ï¼ˆè‹¥æ²¡æ‰¾åˆ°åˆ™å¯ä»¥å¾—å‡ºæ•°æ®ä¸å­˜åœ¨çš„ç»“è®ºï¼‰ï¼Œå› æ­¤å®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸º O(logn) ğŸ’¡ã€ä¸€èˆ¬æ€è·¯ã€‘ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨äºŒåˆ†æœç´¢ï¼Ÿæ€ä¹ˆæ ·ä½¿ç”¨ï¼Ÿ åœ¨ä¸€ä¸ªå·²çŸ¥çš„èŒƒå›´å†…å¯»æ‰¾ç­”æ¡ˆ è¯¥èŒƒå›´é›†åˆæœ‰åº ä¸€èˆ¬æ¥è¯´é¢˜ç›®è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸º logN å°±åº”è¯¥è”æƒ³åˆ°äºŒåˆ†æœç´¢ å¦‚æœæŠŠæœç´¢èŒƒå›´çœ‹æˆä¸€ä¸ªå‡½æ•°çš„å®šä¹‰åŸŸï¼Œå½“æˆ‘ä»¬æ‹¿åˆ° x çš„æ—¶å€™åº”è¯¥é€šè¿‡ f(x) åœ¨æ•´ä¸ªå‡½æ•°ä¸­çš„ç‰¹ç‚¹å†³å®š target çš„å¤§è‡´ä½ç½® ğŸŒªã€å¸¸è§é¢˜å‹ã€‘ ç›®æ ‡åŒ¹é…ç±»ï¼š374. çŒœæ•°å­—å¤§å° é‚»å±…å¯¹æ¯”ç±»ï¼š162. å¯»æ‰¾å³°å€¼ æšä¸¾è¯•é”™ç±»ï¼šç¬¬ K ä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼ï¼ˆæ­¤ç±»é¢˜ç›®èŒƒå›´ä¸€èˆ¬æ¯”è¾ƒéšæ™¦ï¼Œéœ€è¦è‡ªå·±ç¡®å®šï¼Œç„¶åé€šè¿‡åœ¨èŒƒå›´å†…æšä¸¾è¯•é”™çš„æ–¹æ³•ç¡®å®š target ä½ç½®ï¼‰ï¼Œä¾‹å¦‚ 719. æ‰¾å‡ºç¬¬ k å°çš„è·ç¦»å¯¹ ã€å¥—è·¯Aã€‘ 12self.__class__.__getitem__ = lambda self, x: å‘å·¦æœç´¢çš„æ¡ä»¶ï¼ˆä¸åŒ…æ‹¬targetï¼‰å¯»æ‰¾çš„ç´¢å¼• = bisect.bisect_left(self, True, 0, len(nums)) - 1 python ä¸­ bisect æ¨¡å—é’ˆå¯¹çš„æ˜¯ list, å¦‚æœç›´æ¥æ„é€  listï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œå› æ­¤æˆ‘ä»¬ä¿®æ”¹å½“å‰ç±»çš„é­”æ³•æ–¹æ³•ä¼ªé€  list bisect.left(ç”¨äºæ¯”è¾ƒçš„æ•°ç»„ï¼Œæœç´¢çš„å€¼ï¼Œèµ·å§‹èŒƒå›´(åŒ…æ‹¬)ï¼Œç»ˆæ­¢èŒƒå›´(ä¸åŒ…æ‹¬))ï¼šè¿”å›åº”è¯¥æ’å…¥çš„ä½ç½® ã€å¥—è·¯Bã€‘ 12self.__class__.__getitem__ = lambda self, x: å‘å·¦æœç´¢çš„æ¡ä»¶ï¼ˆåŒ…æ‹¬targetï¼‰å¯»æ‰¾çš„ç´¢å¼• = bisect.bisect_left(self, True, 0, len(nums) - 1) æœç´¢èŒƒå›´ä¸º $[0,\\;len(nums) - 1]$ï¼Œæ³¨æ„æ­¤å¤„ä¸ºé—­åŒºé—´ ã€éå†…ç½®å…¬å¼Aã€‘ 12345678910class Solution: def äºŒåˆ†æŸ¥æ‰¾äºŒå²”æ¨¡æ¿(self, nums: List[int], target: int): l, h = 0, len(nums) while l &lt; h: m = (l + h) // 2 if å¿…é¡»å‘å·¦æœç´¢çš„æ¡ä»¶: h = m else: l = m + 1 return l - 1 ã€éå†…ç½®å…¬å¼Bã€‘ 12345678910class Solution: def äºŒåˆ†æŸ¥æ‰¾äºŒå²”æ¨¡æ¿(self, nums: List[int], target: int): l, h = 0, len(nums) - 1 while l &lt; h: m = (l + h) // 2 if æ»¡è¶³ç›®æ ‡æˆ–å‘å·¦æœç´¢çš„æ¡ä»¶: h = m else: l = m + 1 return l â˜„ èƒŒæ™¯ 704. äºŒåˆ†æŸ¥æ‰¾123456789101112class Solution: def search(self, nums: List[int], target: int) -&gt; int: l, h = 0, len(nums) - 1 while l &lt;= h: m = (l + h) // 2 if nums[m] == target: return m elif nums[m] &gt; target: h = m - 1 else: l = m + 1 return -1 â˜„ æ¨¡æ¿ I 69. x çš„å¹³æ–¹æ ¹123456789101112class Solution: def mySqrt(self, x: int) -&gt; int: l, h = 0, x while l &lt; h: m = (l + h) // 2 if m**2 &lt;= x &lt; (m+1)**2: return m elif m**2 &lt; x: l = m + 1 else: h = m - 1 return l 374. çŒœæ•°å­—å¤§å°123456789101112131415161718192021# The guess API is already defined for you.# @param num, your guess# @return -1 if my number is lower, 1 if my number is higher, otherwise return 0# def guess(num):class Solution(object): def guessNumber(self, n): &quot;&quot;&quot; :type n: int :rtype: int &quot;&quot;&quot; l, h = 1, n while l &lt;= n: m = (l + h) // 2 r = guess(m) if not r: return m elif r == 1: l = m + 1 else: h = m - 1 33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„12345678910111213141516171819202122232425262728class Solution: def search(self, nums: List[int], target: int) -&gt; int: # å¯»æ‰¾æ–­ç‚¹ k, l, h = 0, 1, len(nums) - 1 while l &lt;= h: m = (l + h) // 2 if nums[m] &lt; nums[m - 1]: k = m break elif nums[m] &gt; nums[0]: l = m + 1 else: h = m - 1 # æ¢å¤å‡åº nums[k:], nums[:0] = [], nums[k:] # æœç´¢ç›®æ ‡ l, h = 0, len(nums) - 1 while l &lt;= h: m = (l + h) // 2 if nums[m] == target: return (m + k) % len(nums) elif nums[m] &lt; target: l = m + 1 else: h = m - 1 return -1 é¦–å…ˆé€šè¿‡ç¬¬ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾å¾—åˆ°å‡åºæ’åˆ—æ—¶çš„å¼€å¤´ï¼ˆä¹Ÿå°±æ˜¯æ•°ç»„ä¸­çš„æœ€å°å€¼ï¼‰ï¼Œç§°å…¶ä¸ºæ–­ç‚¹ k æ¢å¤æ•°ç»„åé€šè¿‡ç¬¬äºŒä¸ªäºŒåˆ†æŸ¥æ‰¾å¾—åˆ°ç›®æ ‡ç´¢å¼• â˜„ æ¨¡æ¿ II 278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬1234567891011121314151617181920# The isBadVersion API is already defined for you.# @param version, an integer# @return a bool# def isBadVersion(version):class Solution: def firstBadVersion(self, n): &quot;&quot;&quot; :type n: int :rtype: int &quot;&quot;&quot; l, h = 1, n while l &lt;= h: m = (l + h) // 2 if isBadVersion(m) &gt; m * isBadVersion(m - 1): return m elif isBadVersion(m): h = m - 1 else: l = m + 1 æœ¬é¢˜äºŒåˆ†æœç´¢ä¸­åˆ¤æ–­è¿”å›çš„æ¡ä»¶ä¸º å½“å‰ç‰ˆæœ¬ä¸ºTrueä¸”ï¼ˆå½“å‰ç´¢å¼•ä¸º0 æˆ– å·¦è¾¹çš„ç‰ˆæœ¬ä¸ºFalseï¼‰ m * çš„ä½œç”¨æ˜¯é¿å… m - 1 ä¸ºè´Ÿæ•°ï¼Œå¦‚æœ m ä¸º 0ï¼Œåˆ™ä»£è¡¨å·¦è¾¹æ²¡æœ‰ç‰ˆæœ¬ï¼Œåªéœ€åˆ¤æ–­å½“å‰ç‰ˆæœ¬æ˜¯å¦ä¸º True True &gt; False æˆ– 0162. å¯»æ‰¾å³°å€¼1234567891011class Solution: def findPeakElement(self, nums: List[int]) -&gt; int: l, h = 0, len(nums) - 1 while l &lt;= h: m = (l + h) // 2 if (not m or nums[m-1] &lt; nums[m]) and (m == len(nums) - 1 or nums[m] &gt; nums[m+1]): return m elif not m or nums[m] &gt; nums[m-1]: l = m + 1 else: h = m - 1 æ ‡å‡†çš„ä¸‰å²”äºŒåˆ†æœç´¢ python äºŒåˆ†å…¬å¼å¥—è·¯Aï¼š1234class Solution: def findPeakElement(self, nums: List[int]) -&gt; int: self.__class__.__getitem__ = lambda self, m: m and nums[m-1] &gt; nums[m] return bisect.bisect_left(self, True, 0, len(nums)) - 1 153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼12345678910class Solution: def findMin(self, nums: List[int]) -&gt; int: l, h = 0, len(nums) - 1 while l &lt; h: m = (l + h) // 2 if nums[m] &lt; nums[-1]: h = m else: l = m + 1 return nums[l] æ ‡å‡†äºŒå²”äºŒåˆ†æœç´¢ python äºŒåˆ†å…¬å¼å¥—è·¯Bï¼š1234class Solution: def findMin(self, nums: List[int]) -&gt; int: self.__class__.__getitem__ = lambda self, m: nums[m] &lt;= nums[-1] return nums[bisect.bisect_left(self, True, 0, len(nums))] â˜„ æ¨¡æ¿ III 34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®1234567891011121314151617181920212223242526class Solution: def searchRange(self, nums: List[int], target: int) -&gt; List[int]: r = [-1, -1] l, h = 0, len(nums) - 1 while l &lt; h: m = (l + h) // 2 if target &lt;= nums[m]: h = m else: l = m + 1 if nums and nums[l] == target: r[0] = l l, h = 0, len(nums) - 1 while l &lt; h: m = (l + h) // 2 if target &lt; nums[m] or (target == nums[m] and (m == len(nums) - 1 or nums[m] &lt; nums[m+1])): h = m else: l = m + 1 if nums and nums[l] == target: r[1] = l return r 658. æ‰¾åˆ° K ä¸ªæœ€æ¥è¿‘çš„å…ƒç´ 12345678910class Solution: def findClosestElements(self, arr: List[int], k: int, x: int) -&gt; List[int]: l, h = 0, len(arr) - 1 while l &lt; h: m = (l + h) // 2 if arr[m] &gt;= x: h = m else: l = m + 1 return sorted(sorted(arr[max(0, l-k) : l+k], key=lambda y: abs(y - x))[:k]) äºŒåˆ†æŸ¥æ‰¾ + é‚»åŸŸæ’åº162. å¯»æ‰¾å³°å€¼1234567891011class Solution: def findPeakElement(self, nums: List[int]) -&gt; int: l, h = 0, len(nums) - 1 while l &lt;= h: m = (l + h) // 2 if (not m or nums[m-1] &lt; nums[m]) and (m == len(nums) - 1 or nums[m] &gt; nums[m+1]): return m elif not m or nums[m] &gt; nums[m-1]: l = m + 1 else: h = m - 1 æ ‡å‡†çš„ä¸‰å²”äºŒåˆ†æœç´¢ python äºŒåˆ†å…¬å¼å¥—è·¯Aï¼š1234class Solution: def findPeakElement(self, nums: List[int]) -&gt; int: self.__class__.__getitem__ = lambda self, m: m and nums[m-1] &gt; nums[m] return bisect.bisect_left(self, True, 0, len(nums)) - 1 â˜„ å°ç»“ 50. Pow(x, n)1234class Solution: def myPow(self, x, n, r=1) -&gt; float: x, n = n &lt; 0 and 1 / x or x, abs(n) return self.myPow(x * x, n // 2, r * (not n % 2 or x)) if n else r å°¾é€’å½’ $O(\\log N)$ è§£æ³• x^4 æ­£å¸¸è®¡ç®—è¿‡ç¨‹ï¼šx * x * x * xï¼Œ$O(N)$ ä¼˜åŒ–åï¼š(x**2)**2ï¼Œ$O(\\log N)$367. æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°12345678910class Solution: def isPerfectSquare(self, num: int) -&gt; bool: l, h = 0, num while l &lt; h: m = (l + h) // 2 if m * m &gt;= num: h = m else: l = m + 1 return l * l == num ä¸€ä¸ªæ•°å­—çš„ç®—æœ¯å¹³æ–¹æ ¹ä¸€å®šå°äºç­‰äºå®ƒè‡ªèº«ï¼Œå› æ­¤ç­”æ¡ˆè¢«é™åˆ¶åœ¨[0, num]çš„èŒƒå›´å†…ï¼Œä¸”å¾…é€‰ç­”æ¡ˆå‘ˆå‡åºæ’åˆ—ï¼Œæ•…å¯ç”¨äºŒåˆ†æŸ¥æ‰¾744. å¯»æ‰¾æ¯”ç›®æ ‡å­—æ¯å¤§çš„æœ€å°å­—æ¯12345678910class Solution: def nextGreatestLetter(self, letters: List[str], target: str) -&gt; str: l, h = 0, len(letters) - 1 while l &lt; h: m = (l + h) // 2 if letters[m] &gt; target: h = m else: l = m + 1 return letters[l] if letters[l] &gt; target else letters[0] äºŒåˆ†æŸ¥æ‰¾ O(logN) æ‰€è°“çš„å¾ªç¯åªæœ‰åœ¨æ•°ç»„ä¸­æ‰€æœ‰å­—ç¬¦æ¯”ç›®æ ‡å°çš„æ—¶å€™èµ·ä½œç”¨ï¼Œåªéœ€è¦åœ¨æœ€åå¢åŠ ä¸€ä¸ªåˆ¤æ–­å°±è¡Œäº†12345class Solution: def nextGreatestLetter(self, letters: List[str], target: str) -&gt; str: self.__class__.__getitem__ = lambda self, m: target &lt; letters[m] i = bisect.bisect_left(self, True, 0, len(letters) - 1) return letters[i] if letters[i] &gt; target else letters[0] å¥—è·¯B â˜„ æ›´å¤šç»ƒä¹  153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼12345678910class Solution: def findMin(self, nums: List[int]) -&gt; int: l, h = 0, len(nums) - 1 while l &lt; h: m = (l + h) // 2 if nums[m] &lt; nums[-1]: h = m else: l = m + 1 return nums[l] -æ ‡å‡†äºŒå²”äºŒåˆ†æœç´¢ python äºŒåˆ†å…¬å¼å¥—è·¯Bï¼š1234class Solution: def findMin(self, nums: List[int]) -&gt; int: self.__class__.__getitem__ = lambda self, m: nums[m] &lt;= nums[-1] return nums[bisect.bisect_left(self, True, 0, len(nums))] 154. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ II123456789101112class Solution: def findMin(self, nums: List[int]) -&gt; int: l, h = 0, len(nums) - 1 while l &lt; h: m = (l + h) // 2 if nums[m] &lt; nums[h]: h = m elif nums[m] == nums[h]: h -= 1 else: l = m + 1 return nums[l] æ¯æ¬¡éƒ½éœ€è¦åˆ¤æ–­ m æ˜¯å¦åœ¨æœªè¢«æ—‹è½¬çš„éƒ¨åˆ†ä¸Šï¼ˆå³éƒ¨ï¼‰ï¼Œå¦‚æœåœ¨ï¼Œåˆ™å‘å·¦æœç´¢ï¼Œå¦åˆ™å‘å³æœç´¢ å½“ nums[m] &lt; nums[h] æ—¶å¯ä»¥ç¡®å®šåœ¨å³éƒ¨ï¼Œç”±äºå­˜åœ¨é‡å¤æ•°å­—ï¼Œå½“ m æŒ‡å‘çš„æ•°å­—å’Œ h æŒ‡å‘çš„ç›¸åŒæ—¶ï¼Œå¯ä»¥ç›´æ¥æ”¶ç¼©æœç´¢èŒƒå›´(h -= 1ï¼‰ï¼Œåæ­£ä»–ä»¬æ‰€ä»£è¡¨çš„æ•°å­—è¿˜æœ‰è‡³å°‘ä¸€ä¸ªåœ¨æœç´¢èŒƒå›´å†…349. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†123class Solution: def intersection(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: return [*set(nums1) &amp; set(nums2)] ç»è¿‡ set ä¹‹åï¼Œé‡å¤çš„å…ƒç´ è¢«åˆ é™¤ ä¸è¿ç®—å¯¹äºé›†åˆæ¥è¯´å°±æ˜¯æ±‚äº¤é›†350. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† II123class Solution: def intersect(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: return [*(collections.Counter(nums1) &amp; collections.Counter(nums2)).elements()] å¯¹äºä¸¤ä¸ª Counter å¯¹è±¡ï¼Œä¸æ“ä½œæ„å‘³ç€å–ä¸¤è€…éƒ½æœ‰çš„key, valueå–å°çš„é‚£ä¸€ä¸ª å‚è€ƒï¼šPython Counter è®¡æ•°å·¥å…·12345678910111213141516class Solution: def intersect(self, nums1: List[int], nums2: List[int]) -&gt; List[int]: nums1.sort() nums2.sort() r = [] i = j = 0 while i &lt; len(nums1) and j &lt; len(nums2): if nums1[i] == nums2[j]: r.append(nums1[i]) i += 1 j += 1 elif nums1[i] &lt; nums2[j]: i += 1 else: j += 1 return r è¿›é˜¶è§£æ³• â†‘ ä½¿ç”¨åŒæŒ‡é’ˆå°†ä¸¤ä¸ªåˆ—è¡¨ä¸­å…±åŒçš„å…ƒç´ æŠ ä¸‹æ¥ï¼Œå› ä¸ºå·²ç»æ’åºï¼Œæ‰€ä»¥é‡åˆ°ä¸åŒå…ƒç´ æ—¶æ•°å€¼å°çš„é‚£ä¸ªåˆ—è¡¨çš„æŒ‡é’ˆå‘å‰ç§»åŠ¨167. ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„123456789class Solution: def twoSum(self, numbers: List[int], target: int) -&gt; List[int]: i, j = 0, len(numbers) - 1 while numbers[i] + numbers[j] != target: if numbers[i] + numbers[j] &gt; target: j -= 1 else: i += 1 return [i+1, j+1] â˜„ æ›´å¤šç»ƒä¹  II 287. å¯»æ‰¾é‡å¤æ•°12345678910class Solution: def findDuplicate(self, nums: List[int]) -&gt; int: l, h = 0, len(nums) - 1 while l &lt; h: m = (l + h) &gt;&gt; 1 if sum(n &lt;= m for n in nums) &gt; m: h = m else: l = m + 1 return l æœ¬é¢˜å¯ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ•´ä¸ªç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º O(NlogN)ï¼Œç”±é¢˜æ„å¯çŸ¥æœç´¢èŒƒå›´åœ¨ 1 åˆ° n ä¹‹é—´ï¼Œé‚£ä¹ˆå¦‚ä½•ç¼©å°èŒƒå›´ï¼Ÿåªéœ€åˆ¤æ–­æ•°ç»„ä¸­ä¸è¶…è¿‡ä¸­é—´æ•° m çš„å…ƒç´ æ•°é‡æ˜¯å¦å¤§äº m å³å¯ï¼Œè‹¥å¤§äºï¼Œåˆ™è¡¨ç¤ºèŒƒå›´ 1 åˆ° m å†…è‚¯å®šåŒ…å«é‡å¤çš„æ•°å­— æœç´¢èŒƒå›´ä¸º [1, n]ï¼Œå‘å·¦ï¼ˆåŒ…æ‹¬targetï¼‰æœç´¢çš„æ¡ä»¶ä¸ºï¼šä¸å¤§äº n çš„æ•°å­—åœ¨ nums å­˜åœ¨è¶…è¿‡ m ä¸ªï¼Œå³æœç´¢èŒƒå›´å¯ä»¥è¢«ç¼©å°ä¸º [1, m]1234class Solution: def findDuplicate(self, nums: List[int]) -&gt; int: self.__class__.__getitem__ = lambda sef, m: sum(n &lt;= m for n in nums) &gt; m return bisect.bisect_left(self, True, 1, len(nums) - 1) å¥—è·¯B4. å¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°123456789101112131415161718class Solution: def findMedianSortedArrays(self, nums1: List[int], nums2: List[int]) -&gt; float: if len(nums1) &lt; len(nums2): a, b = nums1, nums2 else: a, b = nums2, nums1 m = (len(nums1) + len(nums2) - 1) &gt;&gt; 1 l, h = 0, len(a) while l &lt; h: i = (l + h) &gt;&gt; 1 if m-i-1 &lt; 0 or a[i] &gt;= b[m-i-1]: h = i else: l = i + 1 r = sorted(a[l: l + 2] + b[m - l: m - l + 2]) return (r[0] + r[1 - (len(a) + len(b)) % 2]) / 2 1234567class Solution: def findMedianSortedArrays(self, nums1: List[int], nums2: List[int]) -&gt; float: a, b, m = *sorted((nums1, nums2), key=len), (len(nums1) + len(nums2) - 1) // 2 self.__class__.__getitem__ = lambda self, i: m-i-1 &lt; 0 or a[i] &gt;= b[m-i-1] i = bisect.bisect_left(self, True, 0, len(a)) r = sorted(a[i:i+2] + b[m-i:m-i+2]) return (r[0] + r[1 - (len(a) + len(b)) % 2]) / 2 æœ¬é¢˜æ€è·¯ä¸å®˜æ–¹é¢˜è§£ç±»ä¼¼ï¼Œæ—¶é—´å¤æ‚åº¦O(log(min(m, n)))ï¼Œæ²¡çœ‹è¿‡çš„è¯å»ºè®®å…ˆå¤§ä½“äº†è§£ä¸€ä¸‹ python ä¸­ bisect æ¨¡å—é’ˆå¯¹çš„æ˜¯ list, å¦‚æœç›´æ¥æ„é€  listï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(min(m, n))ï¼Œå› æ­¤æˆ‘ä»¬ä¿®æ”¹å½“å‰ç±»çš„é­”æ³•æ–¹æ³•ä¼ªé€  list åœ¨ä¸€ä¸ªæœ‰åºé€’å¢æ•°åˆ—ä¸­ï¼Œä¸­ä½æ•°å·¦è¾¹çš„é‚£éƒ¨åˆ†çš„æœ€å¤§å€¼ä¸€å®šå°äºæˆ–ç­‰äºå³è¾¹éƒ¨åˆ†çš„æœ€å°å€¼ å¦‚æœæ€»æ•°ç»„é•¿åº¦ä¸ºå¥‡æ•°ï¼Œm ä»£è¡¨ä¸­ä½æ•°çš„ç´¢å¼•ï¼Œå¦åˆ™ m ä»£è¡¨ç”¨äºè®¡ç®—ä¸­ä½æ•°çš„é‚£ä¸¤ä¸ªæ•°å­—çš„å·¦è¾¹ä¸€ä¸ªã€‚æ¯”å¦‚è¾“å…¥ä¸º[1,2]ï¼Œ[3]ï¼Œé‚£ä¹ˆmåº”è¯¥ä¸º[1,2,3]ä¸­ä½æ•°2çš„ç´¢å¼•1ï¼Œå¦‚æœè¾“å…¥ä¸º[1,3]ï¼Œ[2,4]ï¼Œé‚£ä¹ˆmåº”è¯¥ä¸º[1,2,3,4]ä¸­2çš„ç´¢å¼•1 ä½¿ç”¨äºŒåˆ†æœç´¢æ‰¾åˆ° m å¯¹åº”çš„å€¼åœ¨aæˆ–bä¸­å¯¹åº”çš„ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦æ‰¾çš„ä¸­ä½æ•°æˆ–ä¸­ä½æ•°å·¦éƒ¨åº”è¯¥æ˜¯ a[i] æˆ–è€… b[m-i] bisect.bisect_left æœç´¢åˆ—è¡¨ä¸­ä¿æŒåˆ—è¡¨å‡åºçš„æƒ…å†µä¸‹ï¼ŒTrueåº”è¯¥æ’å…¥çš„ä½ç½®ï¼ˆä»å·¦ä¾§ï¼‰ï¼Œæ¯”å¦‚ [F,F,T] è¿”å› 2ï¼Œ[F,F] è¿”å› 2 è¿™é‡Œä¿è¯ a æ˜¯ nums1 å’Œ nums2 ä¸­è¾ƒçŸ­çš„é‚£ä¸ªï¼Œæ˜¯ä¸ºäº†é˜²æ­¢äºŒåˆ†æœç´¢çš„æ—¶å€™ç´¢å¼•è¶Šç•Œ sortedè¿”å›ä¸€ä¸ªlistï¼Œå‡è®¾è¿”å›å€¼æ˜¯ [nums1, nums2]ï¼Œé‚£ä¹ˆå‰é¢åŠ ä¸ª * å·å°±ä»£è¡¨å–å‡ºåˆ—è¡¨çš„æ‰€æœ‰å†…å®¹ï¼Œç›¸å½“äºä¸€ä¸ªè¿­ä»£å™¨ï¼Œç»“æœç›¸å½“äºç›´æ¥å†™ nums1, nums2719. æ‰¾å‡ºç¬¬ k å°çš„è·ç¦»å¯¹1234567891011121314151617181920class Solution: def smallestDistancePair(self, nums: List[int], k: int) -&gt; int: nums.sort() l, h = 0, max(nums) - min(nums) while l &lt; h: m = (l + h) &gt;&gt; 1 # æ»‘åŠ¨çª—å£æ±‚å°äº m çš„å¯¹æ•° c = j = 0 for i, n in enumerate(nums[:-1]): while j &lt; len(nums) and nums[j] - nums[i] &lt;= m: j += 1 c += j - i - 1 if c &gt;= k: h = m else: l = m + 1 return l äºŒåˆ†æœç´¢ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º O(Nlog(max(nums) - min(nums))) m æœç´¢èŒƒå›´ä¸º[0, max(nums) - min(nums)] åªè¦æ»¡è¶³æ‰€æœ‰æ•°å¯¹ä¸­è·ç¦»å°äºç­‰äº m çš„å¯¹æ•°å¤§äºç­‰äº k å³å¯å‘å·¦æœç´¢ åˆ¤æ–­ä»¥ä¸Šæ¡ä»¶æ—¶ä½¿ç”¨åŒæŒ‡é’ˆæ»‘çª—ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(N)410. åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼12345678910111213141516171819202122class Solution: def splitArray(self, nums: List[int], m: int) -&gt; int: l, h = 0, sum(nums) while l &lt; h: mid = (l + h) &gt;&gt; 1 # è´ªå¿ƒè¯•é”™ c = 1; r = s = 0 for i, n in enumerate(nums): if s + n &gt; mid: c += 1 r = max(r, s) s = n else: s += n r = max(r, s) if c &lt;= m and r &lt;= mid: h = mid else: l = mid + 1 return l æœ¬é¢˜æ˜¯äºŒåˆ†æœç´¢è¯•é”™æ³•çš„åˆä¸€ç»å…¸æ¡ˆä¾‹ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º O(Nlog(sum(nums))) æˆ‘ä»¬å¯»æ±‚çš„ç­”æ¡ˆï¼ˆæœ€å°çš„å­æ•°ç»„å„è‡ªå’Œæœ€å¤§å€¼ï¼‰mid è¢«é™åˆ¶äºä¸€ä¸ªæœ‰åºçš„åŒºé—´ [0, sum(nums)] ä¹‹å†… å‘å·¦æœç´¢ï¼ˆåŒ…æ‹¬ targetï¼‰çš„æ¡ä»¶ä¸ºï¼šnums å¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸è¶…è¿‡ m ä¸ªå’Œä¸è¶…è¿‡ mid çš„å­æ•°ç»„ åˆ¤æ–­æ¡ä»¶æˆç«‹ä½¿ç”¨äº†è´ªå¿ƒç®—æ³•ï¼šè®¡æ•° cï¼šnums å¯ä»¥è¢«åˆ’åˆ†ä¸ºè‡³å°‘å¤šå°‘ä¸ªå’Œä¸è¶…è¿‡ mid çš„å­æ•°ç»„ï¼ˆæ³¨æ„å¦‚æœå•ä¸ªæ•°å­—å·²ç»è¶…è¿‡ mid å°†è¢«å•ç‹¬åˆ’åˆ†ï¼Œæ‰€ä»¥æœ€åéœ€è¦åˆ¤æ–­æœ€å¤§å­æ•°ç»„å’Œ r æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼‰ğŸŒ  äºŒå‰æ ‘ â˜„ æ ‘çš„éå† 144. äºŒå‰æ ‘çš„å‰åºéå†12345678910# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def preorderTraversal(self, root: TreeNode) -&gt; List[int]: return root and sum(([root.val], *map(self.preorderTraversal, [root.left, root.right])), []) or [] é€’å½’éå†12345678910111213141516# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def preorderTraversal(self, root: TreeNode) -&gt; List[int]: r, stack = [], root and [root] or [] while stack: root = stack.pop() r.append(root.val) stack += root.right and [root.right] or [] stack += root.left and [root.left] or [] return r DFS å°±æ˜¯å‰åºéå†94. äºŒå‰æ ‘çš„ä¸­åºéå†12345678910111213141516171819202122232425# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def inorderTraversal(self, root: TreeNode) -&gt; List[int]: r = [] # åˆå§‹åŒ–æ ˆ stack = [] # è¿›å…¥å †æ ˆå¾ªç¯ while stack or root: if root: # å…¥æ ˆæ¡ä»¶ stack.append(root) root = root.left else: # å‡ºæ ˆæ¡ä»¶ root = stack.pop() r.append(root.val) root = root.right return r æœ¬é¢˜éœ€ä½¿ç”¨æ ˆæ¥è§£å†³ï¼Œå…³é”®ç‚¹åœ¨äºå…¥æ ˆæ¡ä»¶å’Œå‡ºæ ˆæ¡ä»¶çš„ç¡®å®š145. äºŒå‰æ ‘çš„ååºéå†12345678910# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def postorderTraversal(self, root: TreeNode) -&gt; List[int]: return root and sum((*map(self.postorderTraversal, [root.left, root.right]), [root.val]), []) or [] é€’å½’12345678910111213141516# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def postorderTraversal(self, root: TreeNode) -&gt; List[int]: r, stack = [], root and [root] or [] while stack: root = stack.pop() r.append(root.val) stack += root.left and [root.left] or [] stack += root.right and [root.right] or [] return r[::-1] è¿­ä»£ DFSçš„è¾“å‡ºé¡ºåºä¸º æ ¹-å³-å·¦ï¼Œæˆ‘ä»¬çš„ç›®æ ‡ï¼ˆååºéå†ï¼‰ä¸º å·¦-å³-æ ¹ï¼Œå› æ­¤åªéœ€å¯¹è°ƒæ•´åçš„ DFS é€†åºè¾“å‡ºå³ä¸ºååºéå†102. äºŒå‰æ ‘çš„å±‚æ¬¡éå†12345678910111213141516171819202122232425# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def levelOrder(self, root: TreeNode) -&gt; List[List[int]]: q = root and collections.deque([(root, 0)]) r = [] while q: node, layer = q.popleft() if len(r) &lt; layer + 1: r.append([]) r[layer].append(node.val) if node.left: q.append((node.left, layer + 1)) if node.right: q.append((node.right, layer + 1)) return r ä½¿ç”¨ BFS éå†äºŒå‰æ ‘ï¼Œé˜Ÿåˆ—åŒæ—¶è®°å½•èŠ‚ç‚¹ä¸å±‚æ¬¡ â˜„ è¿ç”¨é€’å½’è§£å†³æ ‘çš„é—®é¢˜ ğŸ’¡ã€ä¸€èˆ¬æ€è·¯ã€‘ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨é€’å½’ï¼Ÿ é€’å½’å¯ä»¥çœ‹ä½œæ˜¯å››ç»´ç©ºé—´ä¸­çš„é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯ç›¸æ¯”æ™®é€šçš„ä¸€ä¸ªå‡½æ•°å¤šäº†ä¸€ä¸ªæ—¶é—´ç»´åº¦ï¼Œå½“ä¸‹ä¸€æ¬¡çš„ç»“æœéœ€è¦ä»¥ä¸Šä¸€æ¬¡çš„ç»“æœä½œä¸ºè¾“å…¥æ—¶ä½¿ç”¨é€’å½’å‡½æ•° ç®€å•æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªè¾“å…¥ï¼Œä¸€èˆ¬çš„å‡½æ•°æ‰§è¡Œä¸€æ¬¡å³å¯å¾—åˆ°ç­”æ¡ˆå¹¶è¿”å›ï¼Œé€’å½’å‡½æ•°é‡å¤æ‰§è¡Œå¤šæ¬¡åè¿”å› ğŸ’¡ã€ä¸€èˆ¬æ€è·¯ã€‘å¦‚ä½•ä½¿ç”¨é€’å½’ï¼Ÿ è€ƒè™‘åˆå§‹çŠ¶æ€ è€ƒè™‘ä¸¤æ¡æ”¯è·¯ï¼š è¿”å›çš„ç»“æœè¿˜éœ€è¦å†æ¬¡é€’å½’çš„ç»“æœï¼šè€ƒè™‘å¦‚ä½•è¿æ¥ä¸åŒæ—¶é—´ä¸Šçš„ä¿©ä¸ªç»“æœ è¿”å›çš„ç»“æœä¸éœ€è¦å†æ¬¡é€’å½’çš„ç»“æœï¼šé€šè¿‡å…¶ä»–æ¡ä»¶åˆ¤æ–­åç›´æ¥è¿”å› ã€å¥—è·¯ã€‘æ ‘å½¢é€’å½’ æ ‘å½¢é€’å½’ç±»é¢˜ç›®ä¸€èˆ¬å°†ç›®å…‰é›†ä¸­åœ¨æŸä¸ªèŠ‚ç‚¹ä¸Šï¼Œè€ƒè™‘èŠ‚ç‚¹ã€å·¦å­èŠ‚ç‚¹ã€å³å­èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œä¸€èˆ¬é€’å½’å­èŠ‚ç‚¹ é€šå¸¸é€‰æ‹©ä¸€ä¸ª3å±‚å®Œç¾äºŒå‰æ ‘çš„ç¬¬2å±‚å·¦å­èŠ‚ç‚¹ä½œä¸ºå‚è€ƒç›®æ ‡ï¼Œç„¶åè®¾è®¡é€’å½’æ€è·¯104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦1234567891011121314151617# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def maxDepth(self, root: TreeNode) -&gt; int: if not root: return 0 f = self.maxDepth l = f(root.left) r = f(root.right) return max(l, r) + 1 101. å¯¹ç§°äºŒå‰æ ‘123456789101112131415161718192021# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def isSymmetric(self, root: TreeNode) -&gt; bool: if not root or root.left is root.right: return True l, r = root.left, root.right if (l and l.val) != (r and r.val): return False i, o = TreeNode(0), TreeNode(0) i.left, i.right = l.left, r.right o.left, o.right = l.right, r.left return self.isSymmetric(i) and self.isSymmetric(o) ä¸€æ£µæ ‘å¯¹ç§°æ„å‘³ç€ï¼š å·¦èŠ‚ç‚¹ == å³èŠ‚ç‚¹ å·¦èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸å³èŠ‚ç‚¹å³å­æ ‘å¯¹ç§° å·¦èŠ‚ç‚¹çš„å³å­æ ‘ä¸å³èŠ‚ç‚¹å·¦å­æ ‘å¯¹ç§° å‰6è¡Œå¤„ç†ç‰¹æ®Šæƒ…å†µï¼šrootä¸ºNoneæˆ–rootæ— å­èŠ‚ç‚¹ç›´æ¥è¿”å›Trueï¼Œrootåªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹æˆ–rootä¸¤ä¸ªå­èŠ‚ç‚¹ä¸ç›¸ç­‰ç›´æ¥è¿”å›False ç¬¬ä¸€ä¸ªæ¡ä»¶åœ¨å‰6è¡Œå¤„ç†è¿‡äº†ï¼Œå¯¹äºç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬åˆ†åˆ«æ„é€ ä¸¤ä¸ªå‡æ ‘i(inner)å’Œo(outer)ï¼Œiä»£è¡¨å†…å‡æ ‘ï¼Œå¯¹åº”æ¡ä»¶äºŒï¼Œoä»£è¡¨å¤–å‡æ ‘ï¼Œå¯¹åº”æ¡ä»¶ä¸‰ã€‚é€’å½’å†…å¤–å‡æ ‘å³å¯112. è·¯å¾„æ€»å’Œ123456789101112131415161718# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def hasPathSum(self, root: TreeNode, sum: int) -&gt; bool: if root: if root.left is root.right: return sum == root.val else: l = root.left and self.hasPathSum(root.left, sum - root.val) r = root.right and self.hasPathSum(root.right, sum - root.val) return l or r else: return False è€ƒè™‘åˆå§‹çŠ¶æ€ï¼šå½“æ ‘ä¸å­˜åœ¨æ—¶ç›´æ¥è¿”å› False è€ƒè™‘æ”¯è·¯1ï¼šå½“å‰èŠ‚ç‚¹ä¸ºå¶èŠ‚ç‚¹æ—¶ç›´æ¥åˆ¤æ–­æ€»å’Œæ˜¯å¦è¾¾åˆ°è¦æ±‚ è€ƒè™‘æ”¯è·¯2ï¼šå½“å‰èŠ‚ç‚¹ä¸ºéå¶èŠ‚ç‚¹æ—¶å°†æ€»å’Œç¼©å°å¹¶ç»§ç»­é€’å½’ï¼Œåˆ¤æ–­å·¦å³èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„ å½“é€’å½’å‡½æ•°åˆ°è¾¾å¶èŠ‚ç‚¹æ—¶ï¼Œsum å·²ç»è¢«å‰Šå‡äº†å¤šæ¬¡ï¼Œæ­¤æ—¶ sum - node.val å³ä¸º åŸå§‹çš„sum - æ•´æ¡è·¯å¾„çš„æ€»å’Œ â˜„ æ€»ç»“ 106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘12345678910111213141516171819# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def buildTree(self, inorder: List[int], postorder: List[int]) -&gt; TreeNode: if not postorder: return None root = TreeNode(postorder[-1]) n = inorder.index(root.val) root.left = self.buildTree(inorder[:n],postorder[:n]) root.right = self.buildTree(inorder[n+1:],postorder[n:-1]) return root ååºéå†é¡ºåºä¸º å·¦, å³, æ ¹ï¼Œå› æ­¤ååºéå†çš„æœ«å°¾ä¸€å®šä¸ºæ ¹èŠ‚ç‚¹ ä¸­åºåˆ—è¡¨ä¸º [å·¦å­æ ‘ä¸­åºåºåˆ—, æ ¹èŠ‚ç‚¹, å³å­æ ‘ä¸­åºåºåˆ—] ååºåˆ—è¡¨ä¸º [å·¦å­æ ‘ååºåºåˆ—, å³å­æ ‘ååºåºåˆ—, æ ¹èŠ‚ç‚¹] ç”±äºæ ‘ä¸­æ²¡æœ‰é‡å¤å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ index å‡½æ•°ç¡®å®šæ ¹èŠ‚ç‚¹åœ¨ä¸­åºåˆ—è¡¨çš„ä½ç½®ï¼Œè¿›è€Œç¡®å®šå·¦å³å­æ ‘å„è‡ªåŒ…å«çš„èŠ‚ç‚¹æ€»æ•°ï¼Œå°†ä¸­åºä¸ååºåˆ—è¡¨åˆ’åˆ†å¼€ æ¯æ¬¡é€’å½’ç”Ÿæˆæ ¹èŠ‚ç‚¹å¹¶ç»§ç»­é€’å½’å·¦å³å­èŠ‚ç‚¹å³å¯105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘12345678910111213141516171819# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def buildTree(self, preorder: List[int], inorder: List[int]) -&gt; TreeNode: if not inorder: return None root = TreeNode(preorder[0]) n = inorder.index(root.val) root.left = self.buildTree(preorder[1:n+1], inorder[:n]) root.right = self.buildTree(preorder[n+1:], inorder[n+1:]) return root å‰åºéå†é¡ºåºä¸º æ ¹, å·¦, å³ï¼Œå› æ­¤å‰åºéå†çš„å¼€ç«¯ä¸€å®šä¸ºæ ¹èŠ‚ç‚¹ ä¸­åºåˆ—è¡¨ä¸º [å·¦å­æ ‘ä¸­åºåºåˆ—, æ ¹èŠ‚ç‚¹, å³å­æ ‘ä¸­åºåºåˆ—] å‰åºåˆ—è¡¨ä¸º [æ ¹èŠ‚ç‚¹, å·¦å­æ ‘ååºåºåˆ—, å³å­æ ‘ååºåºåˆ—] ç”±äºæ ‘ä¸­æ²¡æœ‰é‡å¤å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ index å‡½æ•°ç¡®å®šæ ¹èŠ‚ç‚¹åœ¨ä¸­åºåˆ—è¡¨çš„ä½ç½®ï¼Œè¿›è€Œç¡®å®šå·¦å³å­æ ‘å„è‡ªåŒ…å«çš„èŠ‚ç‚¹æ€»æ•°ï¼Œå°†ä¸­åºä¸å‰åºåˆ—è¡¨åˆ’åˆ†å¼€ æ¯æ¬¡é€’å½’ç”Ÿæˆæ ¹èŠ‚ç‚¹å¹¶ç»§ç»­é€’å½’å·¦å³å­èŠ‚ç‚¹å³å¯116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ123456789101112131415161718192021&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, left, right, next): self.val = val self.left = left self.right = right self.next = next&quot;&quot;&quot;class Solution: def connect(self, root: &#x27;Node&#x27;) -&gt; &#x27;Node&#x27;: if root and root.left: root.left.next = root.right if root.next: root.right.next = root.next.left self.connect(root.left) self.connect(root.right) return root å¯¹äºä»»æ„ä¸€æ¬¡é€’å½’ï¼Œåªéœ€è¦è€ƒè™‘å¦‚ä½•è®¾ç½®å­èŠ‚ç‚¹çš„ next å±æ€§ï¼š å°†å·¦å­èŠ‚ç‚¹è¿æ¥åˆ°å³å­èŠ‚ç‚¹ å°†å³å­èŠ‚ç‚¹è¿æ¥åˆ° root.next çš„å·¦å­èŠ‚ç‚¹ é€’å½’å·¦å³èŠ‚ç‚¹117. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ II12345678910111213141516171819202122232425&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, left, right, next): self.val = val self.left = left self.right = right self.next = next&quot;&quot;&quot;class Solution: def connect(self, root: &#x27;Node&#x27;) -&gt; &#x27;Node&#x27;: if root and (root.left or root.right): if root.left and root.right: root.left.next = root.right node = root.right or root.left head = root.next while head and not (head.left or head.right): head = head.next node.next = head and (head.left or head.right) self.connect(root.right) self.connect(root.left) return root å¯¹äºä»»æ„ä¸€æ¬¡é€’å½’ï¼Œåªè€ƒè™‘å¦‚ä½•è®¾ç½®å­èŠ‚ç‚¹çš„ next å±æ€§,åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š æ²¡æœ‰å­èŠ‚ç‚¹ï¼šç›´æ¥è¿”å› æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼šå°†è¿™ä¸ªå­èŠ‚ç‚¹çš„ next å±æ€§è®¾ç½®ä¸ºåŒå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³ä¸º root.next çš„æœ€å·¦è¾¹çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœ root.next æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™è€ƒè™‘ root.next.nextï¼Œä¾æ¬¡ç±»æ¨ æœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼šå·¦å­èŠ‚ç‚¹æŒ‡å‘å³å­èŠ‚ç‚¹ï¼Œç„¶åå³å­èŠ‚ç‚¹åŒç¬¬äºŒç§æƒ…å†µçš„åšæ³• æ³¨æ„é€’å½’çš„é¡ºåºéœ€è¦ä»å³åˆ°å·¦236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ123456789101112# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def lowestCommonAncestor(self, root: &#x27;TreeNode&#x27;, p: &#x27;TreeNode&#x27;, q: &#x27;TreeNode&#x27;) -&gt; &#x27;TreeNode&#x27;: l = root.left and self.lowestCommonAncestor(root.left, p, q) r = root.right and self.lowestCommonAncestor(root.right, p, q) return root if root in (p, q) or l and r else l or r é€’å½’å…¨éƒ¨èŠ‚ç‚¹ï¼Œp çš„ç¥–å…ˆèŠ‚ç‚¹å…¨éƒ¨è¿”å› pï¼Œq çš„ç¥–å…ˆèŠ‚ç‚¹å…¨éƒ¨è¿”å› qï¼Œå¦‚æœå®ƒåŒæ—¶æ˜¯ä¿©ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘ç¥–å…ˆï¼Œé‚£ä¹ˆè¿”å›è‡ªèº«ï¼Œå¦åˆ™è¿”å› None297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950# Definition for a binary tree node.# class TreeNode(object):# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Codec: def serialize(self, root): &quot;&quot;&quot;Encodes a tree to a single string. :type root: TreeNode :rtype: str &quot;&quot;&quot; l = [] q = collections.deque([root]) while q: root = q.popleft() if root: l.append(root.val) q.extend([root.left, root.right]) else: l.append(None) return str(l) def deserialize(self, data): &quot;&quot;&quot;Decodes your encoded data to tree. :type data: str :rtype: TreeNode &quot;&quot;&quot; l = eval(data) head = TreeNode(l[0]) if l[0] is not None else None q = collections.deque([head]) i = 1 while q: root = q.popleft() if root is not None: root.left = TreeNode(l[i]) if l[i] is not None else None root.right = TreeNode(l[i + 1]) if l[i + 1] is not None else None i += 2 q.extend([root.left, root.right]) return head # Your Codec object will be instantiated and called as such:# codec = Codec()# codec.deserialize(codec.serialize(root)) BFSæ‰«æï¼Œè®°å½•æ‰€æœ‰èŠ‚ç‚¹å’Œä»–ä»¬çš„å­èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬ å­Noneï¼‰ åˆ©ç”¨é˜Ÿåˆ—è®°å½•å¾…è¿˜åŸèŠ‚ç‚¹ï¼Œæ¯æ¬¡ç”Ÿæˆæ–°èŠ‚ç‚¹ååˆå§‹åŒ–å…¶å­èŠ‚ç‚¹å¹¶æŠ•å…¥é˜Ÿåˆ—ğŸŒ  äºŒå‰æœç´¢æ ‘ â˜„ äºŒå‰æœç´¢æ ‘ç®€ä»‹ 98. éªŒè¯äºŒå‰æœç´¢æ ‘12345678910111213141516# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def isValidBST(self, root: TreeNode, first=True) -&gt; bool: if not root: return first or [] f = self.isValidBST l = f(root.left, 0) + [root.val] + f(root.right, 0) return all([a &gt; b for a, b in zip(l[1:], l)]) if first else l æœç´¢äºŒå‰æ ‘çš„ä¸­åºéå†ç»“æœå‘ˆå‡åº è‹¥å½“å‰é€’å½’èŠ‚ç‚¹ä¸ºæ ¹ï¼ˆfirst ä¸º Trueï¼‰åˆ™åˆ¤æ–­éå†ç»“æœæ˜¯å¦å‘ˆå‡åºï¼Œå¦åˆ™è¿”å›ä¸­åºéå†åˆ—è¡¨ç”¨äºæ‹¼æ¥173. äºŒå‰æœç´¢æ ‘è¿­ä»£å™¨12345678910111213141516171819202122232425262728293031323334353637# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass BSTIterator: def __init__(self, root: TreeNode): self.s = [] while root: self.s.append(root) root = root.left def next(self) -&gt; int: &quot;&quot;&quot; @return the next smallest number &quot;&quot;&quot; r = self.s.pop() root = r.right while root: self.s.append(root) root = root.left return r.val def hasNext(self) -&gt; bool: &quot;&quot;&quot; @return whether we have a next smallest number &quot;&quot;&quot; return bool(self.s)# Your BSTIterator object will be instantiated and called as such:# obj = BSTIterator(root)# param_1 = obj.next()# param_2 = obj.hasNext() æ¨¡æ‹Ÿä¸­åºéå†çš„è¿­ä»£è¿‡ç¨‹ï¼Œä½¿ç”¨å †æ ˆ self.s è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ ç©ºé—´å¤æ‚åº¦ä¸º O(æ ‘çš„é«˜åº¦) å¹³å‡æ—¶é—´å¤æ‚åº¦ = å¾ªç¯æ€»æ¬¡æ•°ï¼ˆNï¼‰ / è¿­ä»£å™¨é•¿åº¦ï¼ˆNï¼‰ = O(1) â˜„ åœ¨äºŒå‰æœç´¢æ ‘ä¸­å®ç°æœç´¢æ“ä½œ 700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢1234567891011121314# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def searchBST(self, root: TreeNode, val: int) -&gt; TreeNode: if not root or root.val == val: return root else: root = root.right if root.val &lt; val else root.left return self.searchBST(root, val) æ ¹æ®BSTçš„ç‰¹æ€§ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼š å¦‚æœç›®æ ‡å€¼ç­‰äºèŠ‚ç‚¹çš„å€¼ï¼Œåˆ™è¿”å›èŠ‚ç‚¹; å¦‚æœç›®æ ‡å€¼å°äºèŠ‚ç‚¹çš„å€¼ï¼Œåˆ™ç»§ç»­åœ¨å·¦å­æ ‘ä¸­æœç´¢; å¦‚æœç›®æ ‡å€¼å¤§äºèŠ‚ç‚¹çš„å€¼ï¼Œåˆ™ç»§ç»­åœ¨å³å­æ ‘ä¸­æœç´¢ã€‚701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ123456789101112131415161718192021222324252627# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def insertIntoBST(self, root: TreeNode, val: int) -&gt; TreeNode: root = copy.deepcopy(root) stack = [root] while stack: node = stack.pop() if node.val &gt; val: if node.left: stack.append(node.left) else: node.left = TreeNode(val) else: if node.right: stack.append(node.right) else: node.right = TreeNode(val) return root æ­¤å¤„éµå¾ªç»å…¸æ’å…¥æ–¹æ³•ï¼Œç§ä½¿æ•´ä½“æ“ä½œå˜åŒ–æœ€å° å¯»æ‰¾åˆ°åˆé€‚çš„å¶ä½ç½®åæ’å…¥æ–°èŠ‚ç‚¹ï¼Œè¿™æ ·çš„æ“ä½œåªéœ€è¦åœ¨åŸæ ‘çš„æŸä¸ªå¶èŠ‚ç‚¹å¤„å»¶ä¼¸ä¸€ä¸ªèŠ‚ç‚¹ è¿™é‡Œå¯ä»¥ç›´æ¥æ·±æ‹·è´æ„é€ æ–°æ ‘ï¼Œç„¶åä¿®æ”¹450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹1234567891011121314151617181920212223242526272829303132333435# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def deleteNode(self, root: TreeNode, key: int) -&gt; TreeNode: dummy = TreeNode(float(&#x27;-inf&#x27;)) dummy.right = root root = dummy while root: child_str = &#x27;root.left&#x27; if root.val &gt; key else &#x27;root.right&#x27; child = eval(child_str) if not child or child.val != key: # ç»§ç»­æœç´¢åˆ é™¤ç›®æ ‡çš„çˆ¶èŠ‚ç‚¹ root = child else: # å·²ç»æ‰¾åˆ°åˆ é™¤ç›®æ ‡çš„çˆ¶èŠ‚ç‚¹ root å’Œç›®æ ‡ child if child.left is child.right: # æƒ…å†µ1.ç›®æ ‡æ²¡æœ‰å­èŠ‚ç‚¹ exec(f&#x27;&#123;child_str&#125; = None&#x27;) elif not (child.left and child.right): # æƒ…å†µ2.ç›®æ ‡åªæœ‰å·¦å­æˆ–å³å­ exec(f&#x27;&#123;child_str&#125; = child.left or child.right&#x27;) else: # æƒ…å†µ3.ç›®æ ‡æœ‰å·¦å­å’Œå³å­ parent = child root = parent.right while root and root.left: # æœç´¢ä¸­åºåç»§èŠ‚ç‚¹ parent, root = root, root.left child.val = root.val side = &#x27;right&#x27; if parent is child else &#x27;left&#x27; exec(f&#x27;parent.&#123;side&#125; = root.right&#x27;) return dummy.right æ­¤ç±»é¢˜ç›®ç»†èŠ‚æ¯”è¾ƒå¤šï¼Œå»ºè®®ç½—åˆ—æ‰€æœ‰æƒ…å†µåå†å†™ä»£ç  æœ¬æ®µä»£ç ä¸ºè¿­ä»£æµï¼Œæ¶‰åŠå¤æ‚çŸ¥è¯†ç‚¹ eval, exec, ä¸­åºåç»§èŠ‚ç‚¹ï¼Œä¸»è¦æ€æƒ³åŒæ¢ç´¢ä»‹ç»çš„ï¼Œå°½é‡ä¿æŒåŸæ ‘ç»“æ„ é¦–å…ˆå¯ä»¥åˆ†ä¸ºä¿©ç±»æƒ…å†µï¼Œåˆ é™¤ç›®æ ‡ä¸º root æˆ–ä¸ä¸º rootï¼Œæ„å»ºä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹è¿æ¥ä¸ŠåŸæ¥çš„ rootï¼Œå³å¯æŠŠæ‰€æœ‰æƒ…å†µå½’ä¸ºåˆ é™¤ç›®æ ‡ä¸ä¸º root ç±» ç»†åˆ†æœ‰3ç§æƒ…å†µï¼š ç›®æ ‡æ²¡æœ‰å­èŠ‚ç‚¹ï¼šç›´æ¥åˆ é™¤ ç›®æ ‡åªæœ‰å·¦å­æˆ–å³å­ï¼šç”¨ç›®æ ‡å”¯ä¸€çš„å­èŠ‚ç‚¹æ›¿æ¢ç›®æ ‡ ç›®æ ‡æœ‰å·¦å­å’Œå³å­ï¼šæ›¿æ¢ç›®æ ‡çš„å€¼ä¸ºä¸­åºåç»§èŠ‚ç‚¹çš„å€¼å¹¶åˆ é™¤åç»§èŠ‚ç‚¹ â˜„ å°ç»“ 703. æ•°æ®æµä¸­çš„ç¬¬Kå¤§å…ƒç´ 12345678910111213class KthLargest: def __init__(self, k: int, nums): self.k, self.nums = k, heapq.nlargest(k, nums + [float(&#x27;-inf&#x27;)]) heapq.heapify(self.nums) def add(self, val: int) -&gt; int: heapq.heappushpop(self.nums,val) return self.nums[0]# Your KthLargest object will be instantiated and called as such:# obj = KthLargest(k, nums)# param_1 = obj.add(val) é¢˜ç›®ä¸­æåˆ° len(nums) &gt;= k-1ï¼Œå› æ­¤æˆ‘ä»¬åŠ å…¥ä¸€ä¸ªæ— ç©·å°ä½¿å¾— len(nums) &gt;= kï¼Œä»¥ä¾¿æ„é€ ä¸€ä¸ª k å°ºå¯¸çš„å°æ ¹å † å †ä¸­çš„æ•°æ®æ„å‘³ç€ä»ç¬¬ k å¤§çš„æ•°å­—åˆ°æœ€å¤§çš„æ•°å­— ç»´æŠ¤å †çš„æ—¶é—´å¤æ‚åº¦ä¸º O(Tlogk)236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ12345678910111213141516# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def lowestCommonAncestor(self, root: &#x27;TreeNode&#x27;, p: &#x27;TreeNode&#x27;, q: &#x27;TreeNode&#x27;) -&gt; &#x27;TreeNode&#x27;: l = root.left and self.lowestCommonAncestor(root.left, p, q) r = root.right and self.lowestCommonAncestor(root.right, p, q) if root in (p, q) or l and r: return root else: return l or r é€’å½’å…¨éƒ¨èŠ‚ç‚¹ï¼Œp çš„ç¥–å…ˆèŠ‚ç‚¹è¿”å› pï¼Œq çš„ç¥–å…ˆèŠ‚ç‚¹è¿”å› qï¼Œå¦åˆ™è¿”å› None å¦‚æœåŒæ—¶æ˜¯ä¿©ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘ç¥–å…ˆï¼Œä¹Ÿå°±æ˜¯ pï¼Œq åˆ†åˆ«ä½äºå·¦å³å­æ ‘ï¼Œæˆ–è€…æœ¬èº«æ˜¯ pã€q ä¸­çš„ä¸€ä¸ªï¼Œé‚£ä¹ˆè¿”å›è‡ªèº«220. å­˜åœ¨é‡å¤å…ƒç´  III1234567891011121314class Solution: def containsNearbyAlmostDuplicate(self, nums: List[int], k: int, t: int) -&gt; bool: l = [] for j, n in enumerate(nums): if j &gt; k: # æ»‘åŠ¨çª—å£ del l[bisect.bisect_left(l, nums[j - k - 1], 0, len(l))] i = bisect.bisect_left(l, n, 0, len(l)) l.insert(i, n) if i and abs(l[i] - l[i - 1]) &lt;= t or i &lt; len(l) - 1 and abs(l[i] - l[i + 1]) &lt;= t: return True return False k å®é™…ä¸Šé™åˆ¶äº†æ»‘åŠ¨çª—å£çš„å¤§å°ï¼Œå¯¹äºæ¯ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬åªéœ€è¦æ£€æŸ¥å…¶å‰é¢çš„ k-1 ä¸ªæ•°å­—ä¸­æ˜¯å¦å­˜åœ¨ä¸å½“å‰æ•°å­—è·ç¦»ä¸è¶…è¿‡ t çš„æ•°å­—å³å¯ æ£€æŸ¥çš„æ–¹æ³•æ˜¯åœ¨å‡åºçš„åˆ—è¡¨ä¸­æ£€æŸ¥å½“å‰æ•°å­—æ‰€åœ¨ç´¢å¼•çš„å·¦å³ä¸¤ä¾§æ˜¯å¦æ³¢åŠ¨ä¸è¶…è¿‡ t å› ä¸ºä½¿ç”¨äº†çª—å£ï¼Œæ‰€ä»¥ç»´æŠ¤æ’åºåªéœ€åœ¨ä¹‹å‰å·²ç»æ’å¥½åºçš„æ•°ç»„ l çš„åŸºç¡€ä¸Šä¿æŒå‡åºå¾—æ’å…¥æ–°æ•°å­—å³å¯ï¼Œè¿™é‡Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æœç´¢æ’å…¥ä½ç½® æ—¶é—´å¤æ‚åº¦ä¸º O(Nlog(min(N, K))) ç©ºé—´å¤æ‚åº¦ä¸º O(min(N, K)) â˜„ é™„å½•ï¼šé«˜åº¦å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ 110. å¹³è¡¡äºŒå‰æ ‘12345678910111213141516171819# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def isBalanced(self, root: TreeNode, first=True) -&gt; bool: if not root: return True if first else 0 l = self.isBalanced(root.left, False) r = self.isBalanced(root.right, False) if l is False or r is False: return False return abs(l - r) &lt;= 1 and max(l, r) + 1 DFSé€’å½’æ¯ä¸ªèŠ‚ç‚¹ å¦‚æœè¿™ä¸ªèŠ‚ç‚¹ä¸å¹³è¡¡ï¼Œé‚£ä¹ˆè¿™æ£µæ ‘è‚¯å®šä¸å¹³è¡¡ï¼Œå®ƒå’Œå®ƒçš„æ‰€æœ‰çˆ¶èŠ‚ç‚¹éƒ½è¿”å› False å¦‚æœèŠ‚ç‚¹å¹³è¡¡ï¼Œåˆ™è¿”å›å½“å‰æ ‘çš„é«˜åº¦ + 1ï¼ˆå¦‚æœæ˜¯æ ¹èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›Trueï¼‰108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘1234567891011121314# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def sortedArrayToBST(self, nums: List[int]) -&gt; TreeNode: if nums: m = len(nums) // 2 r = TreeNode(nums[m]) r.left, r.right = map(self.sortedArrayToBST, [nums[:m], nums[m+1:]]) return r å¹³è¡¡äºŒå‰æœç´¢æ ‘éœ€è¦ä¿è¯ä¿©ç‚¹ï¼š æ ¹èŠ‚ç‚¹å¤§äºå·¦å­æ ‘ä»»æ„èŠ‚ç‚¹ï¼Œå°äºå³å­æ ‘ä»»æ„èŠ‚ç‚¹ å·¦å³å­æ•°é«˜åº¦ç›¸å·®ä¸è¶…è¿‡ 1 ç”±ä»¥ä¸Šæ€§è´¨ï¼Œä¸€ä¸ªå¯è¡Œçš„é€’å½’æ¡ä»¶å¯ä»¥å¾—å‡ºï¼š æ¯æ¬¡è¿”å›çš„æ ¹èŠ‚ç‚¹å¤„äºæ•°ç»„ä¸­é—´ï¼Œä»¥å…¶å·¦å³åŠæ•°ç»„åˆ†åˆ«é€’å½’æ„é€ å·¦å³å­æ ‘ é‚£ä¹ˆå°±æ„å‘³ç€å·¦å­å°äºæ ¹ï¼Œå³å­å¤§äºæ ¹ï¼Œä¸”æ‰€æœ‰èŠ‚ç‚¹å·¦å³å­æ ‘èŠ‚ç‚¹æ•°ç›¸å·®ä¸è¶…è¿‡ 1 ï¼ˆç”±äºé€’å½’çš„æ„æ ‘æ–¹å¼ç›¸åŒï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æ»¡è¶³é«˜åº¦å¹³è¡¡ï¼‰ ğŸŒ  Nå‰æ ‘â˜„ éå† 589. Nå‰æ ‘çš„å‰åºéå†123456789101112131415161718&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val=None, children): self.val = val self.children = children&quot;&quot;&quot;class Solution: def preorder(self, root: &#x27;Node&#x27;) -&gt; List[int]: s = bool(root) * [root] r = [] while s: root = s.pop() r.append(root.val) s += root.children[::-1] return r root ä¸º [] æ—¶ bool å€¼ä¸º False åŒ 0ï¼Œä¹˜æ³•ç»“æœä¸º []ï¼Œå³å¯è·³è¿‡ while root éç©ºæ—¶ dfs æ ˆå¼è¿­ä»£ é€†è½¬ children æ˜¯ç”±äºæ ˆçš„ FILO(å…ˆå…¥åå‡º) ç‰¹æ€§590. N-ary Tree Postorder Traversal123456789101112131415161718&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val=None, children=None): self.val = val self.children = children&quot;&quot;&quot;class Solution: def postorder(self, root: &#x27;Node&#x27;) -&gt; List[int]: s = bool(root) * [root] r = [] while s: root = s.pop() r.append(root.val) s += root.children return r[::-1] ååºéå†ä¸º å·¦å³æ ¹ï¼Œåªéœ€å°†å‰åºéå† æ ¹å·¦å³ çš„å­èŠ‚ç‚¹éå†é¡ºåºé€†è½¬å¹¶å€’åºè¾“å‡ºå³å¯ï¼Œå¤§ä½“åšæ³•åŒå‰ä¸€é¢˜429. Nå‰æ ‘çš„å±‚åºéå†12345678910111213141516171819202122&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val, children): self.val = val self.children = children&quot;&quot;&quot;class Solution: def levelOrder(self, root: &#x27;Node&#x27;) -&gt; List[List[int]]: q = root and collections.deque([(root, 0)]) r = [] while q: root, layer = q.pop() if len(r) &lt; layer + 1: r.append([]) r[layer].append((root.val)) q.extendleft([(child, layer + 1) for child in root.children]) return r ä½¿ç”¨é˜Ÿåˆ— BFS éå† åœ¨é˜Ÿåˆ—ä¸­å¤šä¿ç•™ä¸€ä¸ªå±‚æ¬¡åºå·è®°å½•ç›¸åº”å±‚ç´¢å¼• â˜„ é€’å½’ 559. Nå‰æ ‘çš„æœ€å¤§æ·±åº¦12345678910&quot;&quot;&quot;# Definition for a Node.class Node: def __init__(self, val=None, children=None): self.val = val self.children = children&quot;&quot;&quot;class Solution: def maxDepth(self, root: &#x27;Node&#x27;) -&gt; int: return root and 1 + max(map(self.maxDepth, root.children or [None])) or 0 Bottom Up é€’å½’ ç²¾é€‰ğŸŒ  é€’å½’ Iâ˜„ é€’å½’åŸç† 344. åè½¬å­—ç¬¦ä¸²1234567class Solution: def reverseString(self, s: List[str]) -&gt; None: &quot;&quot;&quot; Do not return anything, modify s in-place instead. &quot;&quot;&quot; for i in range(len(s) - 1, 0, -1): s.insert(i, s.pop(0)) å–å‡ºæ¥ï¼Œæ’åˆ°å¯¹åº”ä½ç½®24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹1234567891011121314# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def swapPairs(self, head: ListNode) -&gt; ListNode: if head and head.next: seco = head.next head.next = self.swapPairs(seco.next) seco.next = head return seco return head äº¤æ¢åˆ—è¡¨ä¸­çš„å‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ head å’Œ head.next(seco) seco æŒ‡å‘ headï¼Œhead æŒ‡å‘é€’å½’ seco.next åè¿”å›çš„ååºé“¾è¡¨çš„å¤´ç»“ç‚¹ è¿”å›æ–°çš„å¤´ç»“ç‚¹ seco â˜„ é€’æ¨å…³ç³» 118. æ¨è¾‰ä¸‰è§’123456789class Solution: def generate(self, numRows: int) -&gt; List[List[int]]: if numRows &lt;= 1: return numRows * [[1]] prev = self.generate(numRows - 1) last = [sum(prev[-1][j-1:j+1]) for j in range(1, numRows-1)] prev.append([1, *last, 1]) return prev é¦–å…ˆåˆ¤æ–­ç‰¹æ®Šæƒ…å†µï¼ŒnumRows ä¸º 0 åˆ™è¿”å› []ï¼Œä¸º 1 è¿”å› [[1]] é€šè¿‡é€’å½’è·å¾—å‰å‡ å±‚ç»“æœ prev é€šè¿‡ä¸Šä¸€å±‚ç»“æœè®¡ç®—æ–°çš„æœ€åä¸€å±‚ç»“æœ lastï¼Œf(i,j) = f(iâˆ’1, jâˆ’1) + f(iâˆ’1, j) ï¼ˆä¸¤è¾¹çš„ 1 ä¼šåœ¨ä¸‹ä¸€è¡Œä»£ç ä¸­å¦å¤–åŠ ï¼‰ åŠ å…¥æ–°è¡Œå¹¶è¿”å›119. æ¨è¾‰ä¸‰è§’ II12345678class Solution: def getRow(self, rowIndex: int) -&gt; List[int]: if rowIndex == 0: return [1] prev = self.getRow(rowIndex - 1) last = [sum(prev[j-1:j+1]) for j in range(1, rowIndex)] return [1, *last, 1] å’Œå‰ä¸€é¢˜åŸºæœ¬ä¸€è‡´206. åè½¬é“¾è¡¨123456789101112# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def reverseList(self, head: ListNode, tail=None) -&gt; ListNode: if head: head.next, tail, head = tail, head, head.next return self.reverseList(head, tail) return tail å¯¹äºæ¯ä¸€æ¬¡é€’å½’ï¼Œå°†å½“å‰èŠ‚ç‚¹çš„ next å±æ€§æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åé€’å½’è°ƒç”¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ å¦‚æœå½“å‰èŠ‚ç‚¹ä¸º None åˆ™è¿”å›ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™è¿”å›é€’å½’ä¸€ä¸‹ä¸ªèŠ‚ç‚¹çš„ç»“æœ â˜„ Memoizationï¼ˆè®°å¿†åŒ–ï¼‰æŠ€æœ¯ é€’å½’ + è®°å¿† = åŠ¨æ€è§„åˆ’509. æ–æ³¢é‚£å¥‘æ•°12345678class Solution: cache = &#123;0:0, 1:1&#125; def fib(self, N: int) -&gt; int: if N not in self.cache: self.cache[N] = sum(map(self.fib, [N - 1, N - 2])) return self.cache[N] ä½¿ç”¨å“ˆå¸Œè®°å¿†è¿›è¡Œå‰ªæ70. çˆ¬æ¥¼æ¢¯12345678class Solution: d = &#123;0:0, 1:1, 2:2&#125; def climbStairs(self, n: int) -&gt; int: if n not in self.d: self.d[n] = sum(map(self.climbStairs, [n - 1, n - 2])) return self.d[n] åˆ°è¿™ä¸€å±‚çš„æ–¹æ³•æ•° = åˆ°å‰äºŒå±‚æ–¹æ³•æ•°çš„æ€»å’Œ â˜„ å¤æ‚åº¦åˆ†æ 104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦1234567891011121314151617# Definition for a binary tree node.# class TreeNode:# def __init__(self, x):# self.val = x# self.left = None# self.right = Noneclass Solution: def maxDepth(self, root: TreeNode, prev=0) -&gt; int: if not root: return 0 f = self.maxDepth l = f(root.left) r = f(root.right) return max(l, r) + 1 æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œæ¯æ¬¡é€’å½’è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ€»å…±Nä¸ªèŠ‚ç‚¹ ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œæœ€ç³Ÿç³•çš„æƒ…å†µæ˜¯æ ‘å®Œå…¨ä¸å¹³è¡¡ï¼Œé€’å½’å¼€æ ˆæ¶ˆè€— O(N) ç©ºé—´50. Pow(x, n)1234567class Solution: def myPow(self, x: float, n: int) -&gt; float: if abs(n) &lt;= 1: return (1, x, 1/x)[n] root = self.myPow(x, n // 2) return (1, x)[n % 2] * root * root æ—¶é—´å¤æ‚åº¦ï¼š$O(\\log N)$ ç©ºé—´å¤æ‚åº¦ï¼š$O(\\log N)$ $x^4 = x^2 * x^2$ï¼Œ $x^5 = x^2 * x^2 * x$ï¼Œ å€Ÿæ­¤æ–¹æ³•å¯ä»¥ç¼©å‡è®¡ç®—é‡ â˜„ æ€»ç»“ 21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨123456789101112# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def mergeTwoLists(self, l1: ListNode, l2: ListNode) -&gt; ListNode: if l1 and l2: if l1.val &gt; l2.val: l1, l2 = l2, l1 l1.next = self.mergeTwoLists(l1.next, l2) return l1 or l2 779. ç¬¬Kä¸ªè¯­æ³•ç¬¦å·123class Solution: def kthGrammar(self, N: int, K: int) -&gt; int: return 0 if N == 1 else (K + 1) % 2 ^ self.kthGrammar(N - 1, (K + 1) // 2); ç”±äºé€’æ¨å…³ç³»å¼å¯çŸ¥ç¬¬ N è¡Œçš„ç¬¬ K ä¸ªæ•°è®¡ç®—è‡ªç¬¬ N - 1 è¡Œçš„ç¬¬ (K + 1) // 2 ä¸ªæ•° æˆ‘ä»¬ç§°ç¬¬ N è¡Œçš„ç¬¬ K ä¸ªæ•°ä¸ºCï¼Œç¬¬ N - 1 è¡Œçš„ç¬¬ (K + 1) // 2 ä¸ªæ•°ä¸º P 0 â†’ 01ï¼Œ1 â†’ 10ï¼Œå¯è§å˜æ¢åå®é™…ä¸Šæ˜¯åœ¨åŸæ¥çš„æ•°å­—ååŠ äº†ç›¸å¯¹çš„æ•°ï¼ˆè¿™é‡Œç§° 0 ä¸ 1 ç›¸å¯¹ï¼‰ï¼Œé‚£ä¹ˆå¦‚æœ K ä¸ºå¥‡æ•°åˆ™ C = Pï¼Œå¦åˆ™ C = P çš„ç›¸å¯¹æ•°95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II1234567891011121314151617# Definition for a binary tree node.class TreeNode: def __init__(self, x, l=None, r=None): self.val = x self.left = l self.right = rclass Solution: def generateTrees(self, n: int) -&gt; List[TreeNode]: def gen(num): if not num: yield None for i, n in enumerate(num): for l in gen(num[:i]): for r in gen(num[i + 1:]): yield TreeNode(n, l, r) return bool(n) * [*gen([*range(1, 1 + n)])] æ„å»ºé€’å½’ç”Ÿæˆå™¨ genï¼Œè¾“å…¥æ˜¯ä¸€ç³»åˆ—å‡åºçš„æ•°å­—ï¼Œè¿”å›è¿™äº›æ•°å­—å¯èƒ½æ„æˆçš„æ‰€æœ‰äºŒå‰æ ‘ç»“æ„ é¦–å…ˆï¼Œæ‰€æœ‰æ•°å­—éƒ½æœ‰å¯èƒ½ä½œä¸ºæ ¹ï¼Œå› æ­¤éå† num ä½œä¸ºæ ¹ æ ¹æ®äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ï¼ˆå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å°äºæ ¹ï¼Œå³å­æ ‘å¤§äºï¼‰ï¼Œå¯çŸ¥æ ¹çš„å·¦å­æ ‘ç”±æ¯”æ ¹å°çš„æ•°å­—æ„æˆï¼Œé€’å½’ num[:i] å°±æ˜¯å·¦å­æ ‘æ‰€æœ‰çš„å¯èƒ½ç»“æ„ï¼ŒåŒç†å¯è·å¾—å³å­æ ‘æ‰€æœ‰å¯èƒ½çš„ç»“æ„ å·¦å³é€’å½’ç»“æœçš„ç¬›å¡å°”ç§¯ + rootï¼Œå³ä¸ºæ•´æ£µæ ‘æ‰€æœ‰å¯èƒ½çš„ç»“æ„ å¸¸ç”¨æŠ€å·§æ€»ç»“ set ä¸­çš„ in æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º O(1) dict.get å¯ä»¥è®¾ç½®é¢„è®¾å€¼ï¼Œé¿å…å–åˆ°ä¸å­˜åœ¨çš„ key æ—¶æŠ¥é”™ é‡åˆ°å…³äºæ•°ç»„çš„é—®é¢˜ï¼Œä¸å¦¨å…ˆæƒ³æƒ³æ˜¯å¦åº”è¯¥å…ˆæ’åº æœ€çŸ­è·¯å¾„æœç´¢é—®é¢˜é€šå¸¸ä½¿ç”¨ bfs è¿­ä»£å™¨æ˜¯ç¼©å° space efficiency çš„åˆ©å™¨ è®©æ•°å­—åœ¨ä¸€å®šèŒƒå›´å†…å¾ªç¯é€’å¢å¸¸å¸¸ä½¿ç”¨ % æ“ä½œ a &lt;&lt; b ç›¸å½“äº a * 2**bï¼Œa &gt;&gt; b ç›¸å½“äº a // 2**b a, b = a + b, a - b çš„è®¡ç®—é¡ºåºä¸ºï¼š a + b a - b èµ‹å€¼ a èµ‹å€¼ b a = b = 1 + 1 çš„è®¡ç®—é¡ºåºä¸ºï¼š 1 + 1 èµ‹å€¼ a èµ‹å€¼ b éšè—çš„å‘ éå† set æ—¶ï¼Œè¾“å‡ºæ˜¯æ— åºçš„ï¼Œè¾“å‡ºé¡ºåºå¯èƒ½éšç€è®¡ç®—æœºç¯å¢ƒè€Œæ”¹å˜ [True, False, 0].index(0) è¾“å‡ºä¸º 1ï¼Œå› ä¸º False == 0 ä¸ºçœŸï¼Œä½† False is 0 ä¸ºå‡ / ä¸ºæµ®ç‚¹æ•°é™¤æ³•ï¼Œ// ä¸ºæ•´æ•°é™¤æ³•ã€‚eg. 8 / 2.5 = 3.2, 8 // 2.5 = 3.0ï¼Œæ³¨æ„ // çš„ç»“æœä¸ä¸€å®šä¸ºæ•´æ•°å‹ï¼Œa//b çš„ç»“æœå€¼ç­‰ä»·äº math.floor(a / b) ä½¿ç”¨è®°å¿†åŒ–æŠ€æœ¯æ—¶ï¼Œå­—å…¸åœ¨å¤šä¸ª case ä¹‹é—´å…±äº«ï¼Œåº”è¯¥è€ƒè™‘ä¸åŒ case çš„ key æ˜¯å¦ç›¸äº’å½±å“ è§£æ³•æ±‡æ€»è´¡çŒ®è€…æ³¨ï¼šæ­¤å¤„è´¡çŒ®åå•ä»…ä»£è¡¨æ±‡æ€»æœé›†è´¡çŒ®ï¼Œä¸ä»£è¡¨å…¨éƒ¨åŸåˆ›ï¼Œæ¬¢è¿æ‰€æœ‰æ›´çŸ­çš„è§£æ³•ğŸ¤“ æ­¤å¤„æ’åä¸åˆ†å…ˆåï¼Œä»…ä»¥é¦–æ¬¡å‚ä¸æ—¶é—´è®°å½•ï¼Œæ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ğŸ¤Ÿ Knifeä¸¶[QQ1272068154 å¾®ä¿¡ly18597591102] zdylzdyl ajin grg909 Lebhoryi","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://hwame.top/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://hwame.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}]},{"title":"Pythonæ•è·å¼‚å¸¸åå¦‚ä½•å¯¹tryè¯­å¥é‡è¯•","slug":"retry-from-try-clause-when-catch-error-in-python","date":"2020-05-27T02:11:54.000Z","updated":"2020-05-27T07:03:37.000Z","comments":true,"path":"20200527/retry-from-try-clause-when-catch-error-in-python.html","link":"","permalink":"https://hwame.top/20200527/retry-from-try-clause-when-catch-error-in-python.html","excerpt":"æ‘˜è¦ï¼šå¼€å‘Pythonçˆ¬è™«ç¨‹åºæ•è·å¼‚å¸¸åï¼Œå¦‚ä½•å¯¹tryè¯­å¥é‡è¯•ï¼ŒåŒæ—¶è¿˜éœ€è¦æ»¡è¶³å¯¹çˆ¬å–æ•°æ® ä¸é‡ä¸æ¼ çš„è¦æ±‚ã€‚","text":"æ‘˜è¦ï¼šå¼€å‘Pythonçˆ¬è™«ç¨‹åºæ•è·å¼‚å¸¸åï¼Œå¦‚ä½•å¯¹tryè¯­å¥é‡è¯•ï¼ŒåŒæ—¶è¿˜éœ€è¦æ»¡è¶³å¯¹çˆ¬å–æ•°æ® ä¸é‡ä¸æ¼ çš„è¦æ±‚ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« è¯´æ˜ï¼šæœ¬æ–‡é¦–å‘äº2019-09-27@segmentfaultï¼Œæ›´æ–°äº2020-05-27@hwame.topã€‚å¦è¯·å‚è€ƒï¼šsegmentfaultï¼šPythonä¸­try-exceptå‡ºé”™åå¦‚ä½•ä»tryå‡ºé”™åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼Ÿå¦è¯·å‚è€ƒï¼šsegmentfaultï¼šåœ¨pythonä¸­å¤„ç†é”™è¯¯æ—¶ï¼Œåœ¨æ‰§è¡Œå®Œexceptè¯­å¥ä¸‹çš„å†…å®¹åæ˜¯å¦æœ‰åŠæ³•å›è·³åˆ°ä»£ç å‡ºé”™çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œæ–‡ç« ä½œè€…ï¼šå¦‚æœæˆ‘å¯ä»¥å¿˜è®°åˆ›å»ºæ—¶é—´ï¼š2019-09-27æ›´æ–°æ—¶é—´ï¼š2020-05-27 1.é—®é¢˜èƒŒæ™¯æœ€è¿‘åœ¨å†™ä¸€ä¸ªçˆ¬è™«ç¨‹åºï¼Œæ•°æ®å’Œé¡µé¢å¾ˆç®€å•ï¼Œæ²¡æœ‰ä¹±ä¸ƒå…«ç³Ÿçš„åçˆ¬æªæ–½ï¼Œä½†æ˜¯æ•°æ®é‡å¾ˆå¤§ï¼ˆæ¯é¡µ5æ¡è®°å½•ï¼Œå…±12wé¡µï¼Œæ€»è®°å½•è¾¾61wï¼‰ï¼Œå› æ­¤ä¼šå‡ºç°ç½‘ç»œè¿æ¥çš„é—®é¢˜ã€‚æœ¬ç€å­¦ä¹ çš„ç›®çš„ï¼Œä¸å€ŸåŠ©å…¶ä»–çˆ¬è™«æ¡†æ¶ï¼Œä»…ä½¿ç”¨å¿…éœ€çš„åº“ï¼ŒåŒ…æ‹¬ï¼š requestsï¼Œhttpè¯·æ±‚åº“ï¼› lxmlï¼Œç”¨äºè§£æç½‘é¡µå†…å®¹å’Œç»“æ„ï¼› reï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„Pythonæ ‡å‡†åº“ï¼Œå¤„ç†å­—ç¬¦ä¸²ï¼› csvï¼Œå°†çˆ¬å–çš„æ•°æ®å­˜å…¥csvæ–‡ä»¶ã€‚ 2.é¢˜ç›®æè¿°ğŸŒ¹åŸå§‹æ–¹æ¡ˆ123456789for n in range(2, pages + 1): url = base_url + &#x27;?pageSize=10&amp;pageNo=&#123;&#125;&#x27;.format(n) text = requests.get(url, headers=header).text html = etree.HTML(text) with open(filename, &quot;a&quot;, newline=&#x27;&#x27;, encoding=&#x27;GB2312&#x27;) as file: csv_file = csv.DictWriter(file, fieldnames=table_head) for row in range(1, 6): data = html.xpath(&#x27;//tbody/tr[&#x27; + str(row) + &#x27;]/td/@data-value&#x27;) csv_file.writerow(&#123;&#x27;key1&#x27;: value1, &#x27;key2&#x27;: value2, &#x27;key3&#x27;: value3,...&#125;) è¿™æ®µä»£ç å¯¹äºå°‘é‡æ•°æ®çš„çˆ¬å–å¯ä»¥å®Œæˆï¼Œä½†æ˜¯æœ¬æ¬¡12w+çš„é¡µé¢ï¼Œæ²¡åŠæ³•åœ¨ç½‘ç»œæ–­å¼€åé‡è¯•ï¼Œå› æ­¤éœ€è¦æ”¹è¿›ã€‚ ğŸŒ¹æ”¹è¿›æ€è·¯ä¸ºäº†ä½¿å…¶å®Œæ•´çˆ¬å–12w+çš„é¡µé¢ï¼Œéœ€è¦ä½¿ç”¨tryâ€”exceptè¯­å¥è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚è®¾æƒ³ä½¿å…¶åœ¨ $[2, \\; pages + 1]$ ä¸­çš„æŸä¸€é¡µï¼ˆå¦‚ $i=99$ ï¼‰å‡ºé”™ï¼ˆå³TimeOutè¿æ¥è¶…æ—¶ï¼‰æ—¶ï¼Œexceptæ•è·åˆ°è¿™ä¸ªå¼‚å¸¸ï¼ŒåŒæ—¶ä½¿ç¨‹åºèƒ½æ­£ç¡®çš„é‡æ–°çˆ¬å–è¿™ä¸€é¡µï¼ˆ $i=99$ ï¼‰ã€‚ æ€è·¯1ï¼š forå¾ªç¯åŒ…æ‹¬æ•´ä¸ªtryâ€”exceptè¯­å¥1234567# æ€è·¯1for n in range(2, pages + 1): try: append_data_to_csv(filepath, n) print(&quot;Page &#123;&#125; finished...&quot;.format(n)) except TimeoutError as err: print(&quot;Page &#123;0&#125; failed: &#123;1&#125;&quot;.format(n, err)) æ€è·¯2ï¼š forå¾ªç¯åªåœ¨tryå­å¥ä¸­ï¼Œå‡½æ•°function_restarting(start_point)ä¸­æœ‰ä¸€ä¸ªforå¾ªç¯123456789101112# æ€è·¯2def function_restarting(args): for n in range(pages + 1): parse_HTML() append_data_to_csv()start_point = 2while start_point &lt; numbers: try: function_restarting(start_point) except TimeoutError as err: print(&quot;\\tCurrent page failed: &#123;&#125;&quot;.format(err)) 3.é—®é¢˜æè¿°ğŸŒ·æ€è·¯1å­˜åœ¨çš„é—®é¢˜å¦‚ä¸Šæ€è·¯1æ‰€ç¤ºï¼Œå¦‚æœforå¾ªç¯åŒ…æ‹¬äº†æ•´ä¸ªtryâ€”exceptè¯­å¥ï¼Œé‚£ä¹ˆè™½ç„¶å¯ä»¥ç»§ç»­å¾ªç¯ï¼Œä½†æ˜¯æ˜¯ä» $i=100$ å¼€å§‹çš„ï¼Œ $i=99$ è¢«è·³è¿‡äº†ï¼Œè¿™å°†å¯¼è‡´çˆ¬å–æ•°æ®çš„ç¼ºå¤±ï¼Œä¸ç¬¦åˆé¢„æœŸã€‚ ğŸŒ·æ€è·¯2å­˜åœ¨çš„é—®é¢˜å¦‚ä¸Šæ€è·¯2æ‰€ç¤ºï¼Œforå¾ªç¯åªåœ¨tryé‡Œé¢ï¼Œä»èµ·å§‹é¡µï¼ˆstart_point = 2ï¼‰å¼€å§‹ï¼Œå‡è®¾ä»åœ¨ç¬¬99é¡µï¼ˆ $i=99$ ï¼‰å‡ºé”™ï¼Œæ§åˆ¶å°è¾“å‡ºä¿¡æ¯å¦‚ä¸‹ï¼š1234567.............ï¼ˆçœç•¥ï¼‰.............Page 98 collecting...............Page 99 collecting............... Current page failed: ï¼ˆçœç•¥TimeoutErrorå…·ä½“ä¿¡æ¯ï¼‰Page 2 collecting...............Page 3 collecting............................ï¼ˆçœç•¥ï¼‰.............æŠ¥é”™æ‰“å°é”™è¯¯ä¿¡æ¯åä»ä»start_pointï¼ˆ= 2ï¼‰ï¼Œç›¸å½“äºé‡æ–°è¿è¡Œäº†æ•´ä¸ªç¨‹åºï¼Œå¹¶æ²¡æœ‰ç»§ç»­ä»99å¼€å§‹ï¼Œä¸ç¬¦åˆé¢„æœŸã€‚ ğŸŒ·é—®é¢˜æç‚¼é—®é¢˜1ï¼šæ€æ ·è®©ä»–é‡è¯•ä¸€æ¬¡ $i=99$ è€Œä¸æ˜¯ç›´æ¥è·³è¿‡ï¼Ÿé—®é¢˜2ï¼šPage 99å¤±è´¥åæ€æ ·ç»§ç»­Page 99è€Œä¸æ˜¯é‡æ–°å¼€å§‹ä»Page 2è¿è¡Œï¼Ÿ 4.è§£å†³æ–¹æ¡ˆğŸ€æ€è·¯åŠé€”å¾„âœ‰ å¦‚ä½•å°†å‘ç”Ÿå¼‚å¸¸æ—¶çš„é¡µç è®°å½•ä¸‹æ¥å¹¶å¯è¢«ä½¿ç”¨å‘¢ï¼Ÿ âœ‰ å°†tryâ€”exceptä½œä¸ºå‡½æ•°ä½“ã€é¡µç å€¼ä½œä¸ºè¿”å›å€¼ï¼ å½“exceptè¯­å¥æ•è·å¼‚å¸¸æ—¶ï¼Œå°†æ­¤æ—¶çš„é¡µç  $i$ è¿”å›ï¼Œå°†å†å°†è¯¥è¿”å›å€¼èµ‹å€¼ç»™start_pointï¼Œä»¥æ­¤æ¥æ›´æ–°èµ·å§‹é¡µï¼Œä»è€Œé¿å…æ€è·¯2ä¸­çš„é—®é¢˜ã€‚ å®Œæ•´çš„ç¨‹åºä»£ç å¦‚ä¸‹ã€‚ ğŸ€å®Œæ•´ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940import requests, re, csv, timefrom lxml import etreehead = &#123;&#x27;Cookie&#x27;: &#x27;*&#x27;, &#x27;User-Agent&#x27;: &#x27;*&#x27;&#125;url = &#x27;http://www.*.cn/**/***&#x27; # base URLpath = &#x27;D:/data/**.csv&#x27; # çˆ¬å–æ•°æ®å­˜å‚¨åˆ°csvæ–‡ä»¶çš„è·¯å¾„pages = 122422 # æ€»é¡µæ•°ä¸º12w+items = pages * 5 # æ¯é¡µ5æ¡def restarting(start_point): try: for i in range(start_point, pages + 1): print(&quot;Page &#123;&#125; collecting............&quot;.format(i)) urls = url + &#x27;?searchType=simple&amp;rnum=0&amp;pageSize=10&amp;pageNo=&#123;&#125;&#x27;.format(i) text = requests.get(urls, headers=head).text html = etree.HTML(text) with open(path, &quot;a&quot;, newline=&#x27;&#x27;, encoding=&#x27;GB2312&#x27;) as file: tbhead = [&#x27;key1&#x27;, &#x27;key2&#x27;, &#x27;key3&#x27;, ...] csv_file = csv.DictWriter(file, fieldnames=tbhead) # çˆ¬å–ç¬¬ä¸€ä¸ªé¡µé¢æ—¶ï¼Œå°†è¡¨å¤´å†™å…¥csvæ–‡ä»¶ if i == 1: csv_file.writeheader() for n in range(1, 6): data = html.xpath(&#x27;//tbody/tr[&#x27; + str(n) + &#x27;]/td/@data-value&#x27;) csv_file.writerow(&#123;&#x27;key1&#x27;: value1, &#x27;key2&#x27;: value2, &#x27;key3&#x27;: value3, ...&#125;) except TimeoutError as err: # æ‰“å°å¼‚å¸¸ä¿¡æ¯ï¼Œç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤å­—ç¬¦ä¸² print(&quot;ERROR info: &quot; + str(re.sub(r&#x27;:\\s/[a-z]&#123;5&#125;/.*&gt;&#x27;, &#x27;&#x27;, str(err)))) print(&quot;Page &#123;&#125; failed, retry in 10 seconds............\\n&quot;.format(i)) # é¿å…å› çŸ­æ—¶é—´å†…çš„é‡è¯•è€Œå¯¼è‡´åŒæ ·çš„å¼‚å¸¸ time.sleep(10) # è®°å½•å¹¶è¿”å›å‡ºé”™çš„é¡µç  return i# main entranceif __name__ == &quot;__main__&quot;: start_point = 1 while start_point &lt; pages: error_at = restarting(start_point) start_point = error_at 5.åè®°è‹¥ç›´æ¥ä½¿ç”¨çˆ¬è™«æ¡†æ¶ï¼Œä¾‹å¦‚scrapyç­‰ï¼Œå…¶å¯¹å¼‚å¸¸å¤„ç†æœ‰å®Œæ•´çš„å¤„ç†æœºåˆ¶ã€‚æœ¬æ–‡ä»…ä¸ºå­¦ä¹ ä¹‹ç”¨ï¼ŒæŠ±ç€å­¦ä¹ çš„æ€åº¦æä¾›ä¸€ç§å¯è¡Œçš„æ€è·¯ã€‚ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå½“ç¬¬10562é¡µå‡ºé”™æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œèƒ½æ­£ç¡®åœ°é‡è¯•ï¼Œå¹¶ä½¿å¾—ç¨‹åºç»§ç»­è¿è¡Œã€‚","categories":[{"name":"python","slug":"python","permalink":"https://hwame.top/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://hwame.top/tags/python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://hwame.top/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"Windowsä½¿ç”¨PyCharmè¿œç¨‹è¿æ¥Linuxçš„pythonç¯å¢ƒ","slug":"pycharm-connect-linux-from-windows","date":"2020-05-25T05:22:14.000Z","updated":"2020-08-28T05:59:51.000Z","comments":true,"path":"20200525/pycharm-connect-linux-from-windows.html","link":"","permalink":"https://hwame.top/20200525/pycharm-connect-linux-from-windows.html","excerpt":"æ‘˜è¦ï¼šç”±äºå¼€å‘éœ€è¦ï¼Œæœ¬åœ°ä½¿ç”¨IDEç¼–å†™ä»£ç æ—¶å¯èƒ½è¦æ±‚ä¸åŒçš„Pythonç¯å¢ƒï¼Œè™šæ‹Ÿç¯å¢ƒæœ‰æ—¶ä¹Ÿä¸æ˜¯æœ€ä½³é€‰é¡¹ï¼Œå¦‚ä½•åœ¨æœ¬åœ°pycharmä¸­ç›´æ¥è¿æ¥è¿œç¨‹æœåŠ¡å™¨ç¯å¢ƒå‘¢ï¼Ÿ","text":"æ‘˜è¦ï¼šç”±äºå¼€å‘éœ€è¦ï¼Œæœ¬åœ°ä½¿ç”¨IDEç¼–å†™ä»£ç æ—¶å¯èƒ½è¦æ±‚ä¸åŒçš„Pythonç¯å¢ƒï¼Œè™šæ‹Ÿç¯å¢ƒæœ‰æ—¶ä¹Ÿä¸æ˜¯æœ€ä½³é€‰é¡¹ï¼Œå¦‚ä½•åœ¨æœ¬åœ°pycharmä¸­ç›´æ¥è¿æ¥è¿œç¨‹æœåŠ¡å™¨ç¯å¢ƒå‘¢ï¼Ÿ æ–‡ç« è¯´æ˜æ–‡ç« æ¥æºï¼šé´»å¡µæ–‡ç« ä½œè€…ï¼šé´»å¡µåŸæ–‡é“¾æ¥ï¼šhttps://hwame.top/20200525/pycharm-connect-linux-from-windows.html 1.èƒŒæ™¯LinuxæœåŠ¡å™¨é›†ç¾¤æ­å»ºåœ¨è™šæ‹Ÿæœºä¸­ï¼Œé˜¿é‡Œäº‘æœåŠ¡å™¨é…ç½®ä¹Ÿå¾ˆä½ï¼Œæ‰€ä»¥éƒ½æ²¡æœ‰å®‰è£…GUIå›¾å½¢ç•Œé¢ï¼Œè¦æƒ³ä½¿é¡¹ç›®è·‘åœ¨Linuxé›†ç¾¤ä¸Šï¼Œå¿…é¡»å…ˆå°†é¡¹ç›®ä»£ç æ‰“åŒ…ä¸Šä¼ ï¼Œç„¶åæ‰èƒ½è¿è¡Œã€‚ä½†æ˜¯å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š ç”±äºç¡¬ä»¶å’Œç»æµçš„é™åˆ¶ï¼ŒLinuxè™šæ‹Ÿæœºå’Œé˜¿é‡Œäº‘æœåŠ¡å™¨çš„é…ç½®éƒ½ä¸é«˜ï¼Œæ²¡æœ‰å®‰è£…å›¾å½¢ç•Œé¢ï¼Œæ›´åˆ«è¯´IDEäº† è€Œä¸”ç”±äºWindowså’ŒLinuxæœ¬èº«çš„åŒºåˆ«ï¼Œå¼€å‘è°ƒè¯•è¿‡ç¨‹ä¸­ä¼šå‡ºç°ä¸å¯é¢„æ–™çš„é—®é¢˜ Windowsæ‰“åŒ…ä¸Šä¼ ã€Linuxè¿è¡Œæµ‹è¯•ï¼Œæµç¨‹ç¹çï¼Œæ•ˆç‡ä½ä¸‹ å› æ­¤ï¼Œå¦‚æœèƒ½ç›´æ¥åœ¨Windowsçš„IDEä¸­ä½¿ç”¨Linuxç¯å¢ƒï¼Œé—®é¢˜å°±ä¼šè¿åˆƒè€Œè§£ã€‚æ³¨æ„ï¼šå¯èƒ½å› ä¸ºPyCharmä¸“ä¸šç‰ˆå’Œç¤¾åŒºå…è´¹ç‰ˆçš„åŸå› è€Œæ— æ³•ä½¿ç”¨ï¼Œæœ¬æ–‡ä½¿ç”¨çš„æ˜¯PyCharm 2019.1 (Professional Edition)ã€‚ 2.æ“ä½œæ­¥éª¤ è™šæ‹Ÿæœºå¼€æœºã€‚ PyCharmä¸­æ–°å»ºæˆ–æ‰“å¼€ä¸€ä¸ªé¡¹ç›®ï¼Œç‚¹å‡»â€œFileâ€â†’â€œSettingsâ€ï¼Œå±•å¼€è‡³â€œProject: xxxâ€â†’â€œProject Interpreterâ€ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰å¯ç”¨çš„ç¼–è¯‘å™¨ä»¥åŠå®‰è£…çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚å…¶ä¸­Project Interpreterä¸ºå½“å‰é¡¹ç›®çš„ç¼–è¯‘å™¨ï¼ŒPath mappingsä¸ºå½“å‰é¡¹ç›®è·¯å¾„çš„æ˜ å°„ï¼Œäº¦å³æœ¬åœ°Windowsæ–‡ä»¶ä¸è¿œç¨‹Linuxæ–‡ä»¶çš„è·¯å¾„å¯¹åº”å…³ç³»ã€‚å¹¶ä¸”å¯ä»¥æœ‰å¤šä¸ªæ˜ å°„ã€‚ åœ¨é…ç½®ä¹‹å‰åªæœ‰æœ¬åœ°çš„pythonç¯å¢ƒå’Œè™šæ‹Ÿç¯å¢ƒï¼Œå½“è¿æ¥è¿œç¨‹æœåŠ¡å™¨åæ‰æœ‰Linuxçš„pythonç¯å¢ƒã€‚ ç‚¹å‡»Project Interpreterå³è¾¹çš„è®¾ç½®æŒ‰é’®ï¼Œé€‰æ‹©Addæ·»åŠ Python Interpreterï¼Œå¯ä»¥çœ‹åˆ°èƒ½é…ç½®çš„ç¼–è¯‘å™¨å…±æœ‰9ç§ï¼Œæˆ‘ä»¬é€‰æ‹©SSH Interpreterï¼Œå¡«å†™ä¸»æœºIPå’Œç”¨æˆ·åï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ è®¤è¯æ–¹å¼å¯ä»¥é€‰æ‹©å¯†ç æˆ–å¯†é’¥å¯¹ã€‚å¡«å†™æ­£ç¡®å¯†ç æˆ–è€…é€‰æ‹©å¯†é’¥æ–‡ä»¶åç‚¹å‡»nextã€‚ è®¾ç½®pythonç¼–è¯‘å™¨åŠé¡¹ç›®æ–‡ä»¶å¤¹æ˜ å°„ï¼ŒInterpreteré€‰æ‹©éœ€è¦ä½¿ç”¨çš„ä½äºæœåŠ¡å™¨ä¸Šçš„pythonç¼–è¯‘å™¨ï¼ŒSync foldersä¸ºæœ¬åœ°é¡¹ç›®è·¯å¾„ä¸è¿œç¨‹é¡¹ç›®è·¯å¾„çš„æ˜ å°„å…³ç³»ã€‚è¯¦ç»†è®¾ç½®åŠå«ä¹‰è§åæ–‡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ ç‚¹å‡»å®Œæˆå³å¯çœ‹åˆ°æ·»åŠ å¥½çš„Interpreterã€‚ç‚¹å‡»Project Interpreterå³è¾¹çš„è®¾ç½®æŒ‰é’®ï¼Œé€‰æ‹©Show All...å³å¯æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ç¼–è¯‘å™¨ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ é€‰æ‹©éœ€è¦çš„Interpreterï¼Œç‚¹å‡»Applyå³å¯æ„‰å¿«çš„å¼€å‘äº†ã€‚ 3.è®¾ç½®pythonç¼–è¯‘å™¨åŠé¡¹ç›®è·¯å¾„æ˜ å°„ğŸŒ¸pythoç¼–è¯‘å™¨æœåŠ¡å™¨ä¸Šè¿è¡Œå¦‚ä¸‹å‘½ä»¤ä»¥æŸ¥çœ‹pythoç¼–è¯‘å™¨çš„ä½ç½®ï¼Œé€‰æ‹©éœ€è¦çš„ï¼š 12345678which python# /usr/bin/pythonwhich python3# /usr/bin/python3which python2# /usr/bin/python2 æ³¨æ„ï¼š/usr/bin/pythonæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªè½¯è¿æ¥ï¼ŒæŒ‡å‘äº†å®é™…çš„pythonå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€‚æ³¨æ„ï¼š`å¦‚æœéœ€è¦ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œåˆ™éœ€å…·ä½“åˆ°è™šæ‹Ÿç¯å¢ƒä½ç½®åŠå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚123456# æŸ¥çœ‹pythonå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ls -lh /usr/bin | grep python# ç”±å›¾å¯ä»¥çœ‹åˆ°ï¼š# python â†’ python3 â†’ python3.6# python2 â†’ python2.7 å› æ­¤ï¼Œåªè¦ä¿è¯èƒ½æŒ‡å‘æ­£ç¡®çš„å¯æ‰§è¡Œæ–‡ä»¶å³å¯ã€‚ ğŸŒ¸é¡¹ç›®è·¯å¾„æ˜ å°„Sync foldersä¸­çš„&lt;Project root&gt;ä¸ºæœ¬åœ°é¡¹ç›®çš„æ ¹è·¯å¾„ï¼Œç®­å¤´å³è¾¹ä¸ºè¿œç¨‹é¡¹ç›®è·¯å¾„ï¼Œé»˜è®¤ä¸º/tmp/pycharm_project_xxxï¼Œç‚¹å‡»â€œå³ä¾§æ–‡ä»¶å¤¹å›¾æ ‡â€å¯è¿›è¡Œä¿®æ”¹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚æ³¨æ„ï¼šå¯æ·»åŠ å¤šå¯¹æ˜ å°„ã€‚ ğŸŒ¸æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ æœåŠ¡å™¨è®¾ç½®å¥½pythonç¼–è¯‘å™¨å’Œé¡¹ç›®è·¯å¾„æ˜ å°„åï¼Œå‹¾é€‰â€œè‡ªåŠ¨ä¸Šä¼ é¡¹ç›®æ–‡ä»¶è‡³æœåŠ¡å™¨ï¼ˆAutomatically upload project files to the serverï¼‰â€ã€‚å½“æœ¬åœ°æ–‡ä»¶æœ‰å˜æ›´æ—¶ï¼Œåªè¦æœ‰ä¿å­˜æ“ä½œå°±èƒ½è‡ªåŠ¨ä¸Šä¼ æœåŠ¡å™¨ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ ğŸŒ¸å…³äºéƒ¨ç½²é…ç½®å½“é…ç½®å®Œè¿œç¨‹pythonç¼–è¯‘å™¨åï¼Œå°±é»˜è®¤åˆ›å»ºäº†éƒ¨ç½²ç¯å¢ƒï¼Œåœ¨Event Logä¸­å¯ä»¥çœ‹åˆ°14:35 Deployment configuration to 39.xxx.xxx.xxx has been created.ç‚¹å‡»â€œFileâ€â†’â€œSettingsâ€ï¼Œå±•å¼€è‡³â€œBuild, Execution, Deploymentâ€â†’â€œDeploymentâ€ï¼Œå¯ä»¥çœ‹åˆ°å·²è‡ªåŠ¨è®¾ç½®å¥½éƒ¨ç½²ç¯å¢ƒï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹æˆ–åˆ é™¤ã€‚ 4.è¿è¡Œå’Œè°ƒè¯•è¿è¡Œå’Œè°ƒè¯•æ—¶ï¼ŒPyCharmä¼šè‡ªåŠ¨sshè¿æ¥ç„¶åè¿è¡Œï¼š1234ssh://root@192.168.xx.xx:22/bin/python -u /tmp/pycharm_project_xxx/test.py******Process finished with exit code 0","categories":[{"name":"python","slug":"python","permalink":"https://hwame.top/categories/python/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/tags/Linux/"},{"name":"python","slug":"python","permalink":"https://hwame.top/tags/python/"}]},{"title":"CentOS7 ç¯å¢ƒå˜é‡è¯¦è§£","slug":"centos7-environment-variables","date":"2020-05-23T02:39:58.000Z","updated":"2020-05-23T04:34:56.000Z","comments":true,"path":"20200523/centos7-environment-variables.html","link":"","permalink":"https://hwame.top/20200523/centos7-environment-variables.html","excerpt":"æ‘˜è¦ï¼šæ–‡ç« ä»‹ç»äº†CentOS7ç¯å¢ƒå˜é‡çš„ç›¸å…³çŸ¥è¯†ï¼Œä»¥åŠå…·ä½“é…ç½®ç¯å¢ƒå˜é‡æ—¶çš„æ³¨æ„äº‹é¡¹åŠå»ºè®®ã€‚","text":"æ‘˜è¦ï¼šæ–‡ç« ä»‹ç»äº†CentOS7ç¯å¢ƒå˜é‡çš„ç›¸å…³çŸ¥è¯†ï¼Œä»¥åŠå…·ä½“é…ç½®ç¯å¢ƒå˜é‡æ—¶çš„æ³¨æ„äº‹é¡¹åŠå»ºè®®ã€‚ å‚è€ƒæ–‡ç« æ–‡ç« æ¥æºï¼šCè¯­è¨€æŠ€æœ¯ç½‘æ–‡ç« ä½œè€…ï¼šç å†œæœ‰é“åŸæ–‡é“¾æ¥ï¼šhttps://www.cnblogs.com/wucongzhou/p/12579468.html ä¸€ã€ç¯å¢ƒå˜é‡çš„æ¦‚å¿µ1ã€ç¯å¢ƒå˜é‡çš„å«ä¹‰ç¨‹åºï¼ˆæ“ä½œç³»ç»Ÿå‘½ä»¤å’Œåº”ç”¨ç¨‹åºï¼‰çš„æ‰§è¡Œéƒ½éœ€è¦è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªç¯å¢ƒæ˜¯ç”±å¤šä¸ªç¯å¢ƒå˜é‡ç»„æˆçš„ã€‚ 2ã€ç¯å¢ƒå˜é‡çš„åˆ†ç±» æŒ‰ç”Ÿæ•ˆçš„èŒƒå›´åˆ†ç±»ã€‚ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼šå…¬å…±çš„ï¼Œå¯¹å…¨éƒ¨çš„ç”¨æˆ·éƒ½ç”Ÿæ•ˆã€‚ç”¨æˆ·ç¯å¢ƒå˜é‡ï¼šç”¨æˆ·ç§æœ‰çš„ã€è‡ªå®šä¹‰çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œåªå¯¹è¯¥ç”¨æˆ·ç”Ÿæ•ˆã€‚ æŒ‰ç”Ÿå­˜å‘¨æœŸåˆ†ç±»ã€‚æ°¸ä¹…ç¯å¢ƒå˜é‡ï¼šåœ¨ç¯å¢ƒå˜é‡è„šæœ¬æ–‡ä»¶ä¸­é…ç½®ï¼Œç”¨æˆ·æ¯æ¬¡ç™»å½•æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™äº›è„šæœ¬ï¼Œç›¸å½“äºæ°¸ä¹…ç”Ÿæ•ˆã€‚ä¸´æ—¶ç¯å¢ƒå˜é‡ï¼šä½¿ç”¨æ—¶åœ¨Shellä¸­ä¸´æ—¶å®šä¹‰ï¼Œé€€å‡ºShellåå¤±æ•ˆã€‚ 3ã€Linuxç¯å¢ƒå˜é‡Linuxç¯å¢ƒå˜é‡ä¹Ÿç§°ä¹‹ä¸ºShellç¯å¢ƒé‡å˜ï¼Œä»¥ä¸‹åˆ’çº¿å’Œå­—æ¯æ‰“å¤´ï¼Œç”±ä¸‹åˆ’çº¿ã€å­—æ¯ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰å’Œæ•°å­—ç»„æˆï¼Œä¹ æƒ¯ä¸Šä½¿ç”¨å¤§å†™å­—æ¯ï¼Œä¾‹å¦‚PATHã€HOSTNAMEã€LANGç­‰ã€‚ äºŒã€å¸¸ç”¨çš„ç¯å¢ƒå˜é‡1ã€æŸ¥çœ‹ç¯å¢ƒå˜é‡ envå‘½ä»¤ echoå‘½ä»¤ 2ã€å¸¸ç”¨çš„ç¯å¢ƒå˜é‡ PATHï¼šå¯æ‰§è¡Œç¨‹åºçš„æœç´¢ç›®å½•ï¼Œå¯æ‰§è¡Œç¨‹åºåŒ…æ‹¬Linuxç³»ç»Ÿå‘½ä»¤å’Œç”¨æˆ·çš„åº”ç”¨ç¨‹åºï¼ŒPATHå˜é‡çš„å…·ä½“ç”¨æ³•æœ¬æ–‡åé¢çš„ç« èŠ‚ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ LANGï¼šLinuxç³»ç»Ÿçš„è¯­è¨€ã€åœ°åŒºã€å­—ç¬¦é›†ï¼ŒLANGå˜é‡çš„å…·ä½“ç”¨æ³•æœ¬æ–‡åé¢çš„ç« èŠ‚ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ HOSTNAMEï¼šæœåŠ¡å™¨çš„ä¸»æœºåã€‚ SHELLï¼šç”¨æˆ·å½“å‰ä½¿ç”¨çš„Shellè§£æå™¨ã€‚ HISTSIZEï¼šä¿å­˜å†å²å‘½ä»¤çš„æ•°ç›®ã€‚ USERï¼šå½“å‰ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åã€‚ HOMEï¼šå½“å‰ç™»å½•ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚ PWDï¼šå½“å‰å·¥ä½œç›®å½•ã€‚ LD_LIBRARY_PATHï¼šC/C++è¯­è¨€åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶æœç´¢çš„ç›®å½•ï¼Œå®ƒä¸æ˜¯Linuxç¼ºçœçš„ç¯å¢ƒå˜é‡ï¼Œä½†å¯¹C/C++ç¨‹åºå‘˜æ¥è¯´éå¸¸é‡è¦ï¼Œå…·ä½“ç”¨æ³•æœ¬æ–‡åé¢çš„ç« èŠ‚ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ CLASSPATHï¼šJAVAè¯­è¨€åº“æ–‡ä»¶æœç´¢çš„ç›®å½•ï¼Œå®ƒä¹Ÿä¸æ˜¯Linuxç¼ºçœçš„ç¯å¢ƒå˜é‡ï¼Œä½†å¯¹JAVAç¨‹åºå‘˜æ¥è¯´éå¸¸é‡è¦ï¼Œå…·ä½“ç”¨æ³•æœ¬æ–‡åé¢çš„ç« èŠ‚ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ ä¸‰ã€è®¾ç½®ç¯å¢ƒé‡å¦‚æœç¯å¢ƒå˜é‡çš„å€¼æ²¡æœ‰ç©ºæ ¼ç­‰ç‰¹æ®Šç¬¦å·ï¼Œå¯ä»¥ä¸ç”¨å•å¼•å·åŒ…å«ã€‚é‡‡ç”¨exportè®¾ç½®çš„ç¯å¢ƒå˜é‡ï¼Œåœ¨é€€å‡ºShellåå°±ä¼šå¤±æ•ˆï¼Œä¸‹æ¬¡ç™»å½•æ—¶éœ€è¦é‡æ–°è®¾ç½®ã€‚å¦‚æœå¸Œæœ›ç¯å¢ƒå˜é‡æ°¸ä¹…ç”Ÿæ•ˆï¼Œéœ€è¦åœ¨ç™»å½•è„šæœ¬æ–‡ä»¶ä¸­é…ç½®ã€‚ 1ã€ç³»ç»Ÿç¯å¢ƒå˜é‡ç³»ç»Ÿç¯å¢ƒå˜é‡å¯¹å…¨éƒ¨çš„ç”¨æˆ·ç”Ÿæ•ˆï¼Œè®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡æœ‰ä¸‰ç§æ–¹æ³•ã€‚1ï¼‰åœ¨/etc/profileæ–‡ä»¶ä¸­è®¾ç½®ã€‚ç”¨æˆ·ç™»å½•æ—¶æ‰§è¡Œ/etc/profileæ–‡ä»¶ä¸­è®¾ç½®ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ã€‚ä½†æ˜¯ï¼ŒLinuxä¸å»ºè®®åœ¨/etc/profileæ–‡ä»¶ä¸­è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚2ï¼‰åœ¨/etc/profile.dç›®å½•ä¸­å¢åŠ ç¯å¢ƒå˜é‡è„šæœ¬æ–‡ä»¶ï¼Œè¿™æ˜¯Linuxæ¨èçš„æ–¹æ³•ã€‚/etc/profileåœ¨æ¯æ¬¡å¯åŠ¨æ—¶ä¼šæ‰§è¡Œ/etc/profile.dä¸‹å…¨éƒ¨çš„è„šæœ¬æ–‡ä»¶ã€‚/etc/profile.dæ¯”/etc/profileå¥½ç»´æŠ¤ï¼Œä¸æƒ³è¦ä»€ä¹ˆå˜é‡ç›´æ¥åˆ é™¤/etc/profile.dä¸‹å¯¹åº”çš„shellè„šæœ¬å³å¯ã€‚3ï¼‰åœ¨/etc/bashrcæ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ã€‚è¯¥æ–‡ä»¶é…ç½®çš„ç¯å¢ƒå˜é‡å°†ä¼šå½±å“å…¨éƒ¨ç”¨æˆ·ä½¿ç”¨çš„bash shellã€‚ä½†æ˜¯ï¼ŒLinuxä¹Ÿä¸å»ºè®®åœ¨/etc/bashrcæ–‡ä»¶ä¸­è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚ 2ã€ç”¨æˆ·ç¯å¢ƒå˜é‡ç”¨æˆ·ç¯å¢ƒå˜é‡åªå¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼Œè®¾ç½®ç”¨æˆ·ç¯å¢ƒå˜é‡ä¹Ÿæœ‰å¤šç§æ–¹æ³•ã€‚åœ¨ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œæœ‰å‡ ä¸ªç‰¹åˆ«çš„æ–‡ä»¶ï¼Œç”¨lsæ˜¯çœ‹ä¸è§çš„ï¼Œç”¨ls .bash_*å¯ä»¥çœ‹è§ã€‚1ï¼‰.bash_profileï¼ˆæ¨èé¦–é€‰ï¼‰å½“ç”¨æˆ·ç™»å½•æ—¶æ‰§è¡Œï¼Œæ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨è¯¥æ–‡ä»¶æ¥é…ç½®ä¸“å±äºè‡ªå·±çš„ç¯å¢ƒå˜é‡ã€‚ 2ï¼‰.bashrcå½“ç”¨æˆ·ç™»å½•æ—¶ä»¥åŠæ¯æ¬¡æ‰“å¼€æ–°çš„Shellæ—¶è¯¥æ–‡ä»¶éƒ½å°†è¢«è¯»å–ï¼Œä¸æ¨èåœ¨é‡Œé¢é…ç½®ç”¨æˆ·ä¸“ç”¨çš„ç¯å¢ƒå˜é‡ï¼Œå› ä¸ºæ¯å¼€ä¸€ä¸ªShellï¼Œè¯¥æ–‡ä»¶éƒ½ä¼šè¢«è¯»å–ä¸€æ¬¡ï¼Œæ•ˆç‡è‚¯å®šå—å½±å“ã€‚ 3ï¼‰.bash_logoutå½“æ¯æ¬¡é€€å‡ºç³»ç»Ÿï¼ˆé€€å‡ºbash shellï¼‰æ—¶æ‰§è¡Œè¯¥æ–‡ä»¶ã€‚ 4ï¼‰.bash_historyä¿å­˜äº†å½“å‰ç”¨æˆ·ä½¿ç”¨è¿‡çš„å†å²å‘½ä»¤ã€‚ 3ã€ç¯å¢ƒå˜é‡è„šæœ¬æ–‡ä»¶çš„æ‰§è¡Œé¡ºåºç¯å¢ƒå˜é‡è„šæœ¬æ–‡ä»¶çš„æ‰§è¡Œé¡ºåºï¼ˆç”±ä¸Šåˆ°ä¸‹ï¼‰å¦‚ä¸‹ï¼š12345/etc/profile/etc/profile.d/etc/bashrcç”¨æˆ·çš„.bash_profileç”¨æˆ·çš„.bashrcåŒåçš„ç¯å¢ƒå˜é‡ï¼Œå¦‚æœåœ¨å¤šä¸ªè„šæœ¬ä¸­æœ‰é…ç½®ï¼Œä»¥æœ€åæ‰§è¡Œçš„è„šæœ¬ä¸­çš„é…ç½®ä¸ºå‡†ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œåœ¨/etc/profileä¸­æ‰§è¡Œäº†/etc/profile.dçš„è„šæœ¬ï¼Œæ‰€ä»¥ï¼Œ/etc/profile.då’Œ/etc/profileçš„æ‰§è¡Œé¡ºåºè¿˜è¦çœ‹ä»£ç æ€ä¹ˆå†™ã€‚ä»£ç å¦‚ä¸‹ï¼š123456789for i in /etc/profile.d/*.sh ; do if [ -r &quot;$i&quot; ]; then if [ &quot;$&#123;-#*i&#125;&quot; != &quot;$-&quot; ]; then . &quot;$i&quot; else . &quot;$i&quot; &gt;/dev/null fi fidone å››ã€é‡è¦ç¯å¢ƒå˜é‡çš„è¯¦è§£1ã€PATHç¯å¢ƒå˜é‡å¯æ‰§è¡Œç¨‹åºçš„æœç´¢ç›®å½•ï¼Œå¯æ‰§è¡Œç¨‹åºåŒ…æ‹¬Linuxç³»ç»Ÿå‘½ä»¤å’Œç”¨æˆ·çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœå¯æ‰§è¡Œç¨‹åºçš„ç›®å½•ä¸åœ¨PATHæŒ‡å®šçš„ç›®å½•ä¸­ï¼Œæ‰§è¡Œæ—¶éœ€è¦æŒ‡å®šç›®å½•ã€‚1ï¼‰PATHç¯å¢ƒå˜é‡å­˜æ”¾çš„æ˜¯ç›®å½•åˆ—è¡¨ï¼Œç›®å½•ä¹‹é—´ç”¨å†’å·:åˆ†éš”ï¼Œæœ€åçš„åœ†ç‚¹.è¡¨ç¤ºå½“å‰ç›®å½•ã€‚1export PATH=ç›®å½•1:ç›®å½•2:ç›®å½•3:......ç›®å½•n:.2ï¼‰PATHç¼ºçœåŒ…å«äº†Linuxç³»ç»Ÿå‘½ä»¤æ‰€åœ¨çš„ç›®å½•/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbinï¼Œå¦‚æœä¸åŒ…å«è¿™äº›ç›®å½•ï¼ŒLinuxçš„å¸¸ç”¨å‘½ä»¤ä¹Ÿæ— æ³•æ‰§è¡Œï¼ˆè¦è¾“å…¥ç»å¯¹è·¯å¾„æ‰èƒ½æ‰§è¡Œï¼‰ã€‚3ï¼‰åœ¨ç”¨æˆ·çš„.bash_profileæ–‡ä»¶ä¸­ï¼Œä¼šå¯¹PATHè¿›è¡Œæ‰©å……ï¼Œå¦‚ä¸‹ï¼š1export PATH=$PATH:$HOME/bin4ï¼‰å¦‚æœPATHå˜é‡ä¸­æ²¡æœ‰åŒ…å«åœ†ç‚¹.ï¼Œæ‰§è¡Œå½“å‰ç›®å½•ä¸‹çš„ç¨‹åºéœ€è¦åŠ ./æˆ–ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚ 2ã€LANGç¯å¢ƒå˜é‡LANGç¯å¢ƒå˜é‡å­˜æ”¾çš„æ˜¯Linuxç³»ç»Ÿçš„è¯­è¨€ã€åœ°åŒºã€å­—ç¬¦é›†ï¼Œå®ƒä¸éœ€è¦ç³»ç»Ÿç®¡ç†å‘˜æ‰‹å·¥è®¾ç½®ï¼Œ/etc/profileä¼šè°ƒç”¨/etc/profile.d/lang.shè„šæœ¬å®Œæˆå¯¹PATHçš„è®¾ç½®ã€‚ CentOS6.x å­—ç¬¦é›†é…ç½®æ–‡ä»¶åœ¨/etc/syscconfig/i18næ–‡ä»¶ä¸­ã€‚ CentOS7.x å­—ç¬¦é›†é…ç½®æ–‡ä»¶åœ¨/etc/locale.confæ–‡ä»¶ä¸­ï¼Œå†…å®¹å¦‚ä¸‹ï¼š1234-bash-4.2# cat /etc/locale. confLANG=zh_CN.gbk#LANG=zh_CN.utf8#LANG=zh_CN.gb18030 3ã€LD_LIBRARY_PATHç¯å¢ƒå˜é‡C/C++è¯­è¨€åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶æœç´¢çš„ç›®å½•ï¼Œå®ƒä¸æ˜¯Linuxç¼ºçœçš„ç¯å¢ƒå˜é‡ï¼Œä½†å¯¹C/C++ç¨‹åºå‘˜æ¥è¯´éå¸¸é‡è¦ã€‚LD_LIBRARY_PATHç¯å¢ƒå˜é‡å­˜æ”¾çš„ä¹Ÿæ˜¯ç›®å½•åˆ—è¡¨ï¼Œç›®å½•ä¹‹é—´ç”¨å†’å·:åˆ†éš”ï¼Œæœ€åçš„åœ†ç‚¹.è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œä¸PATHçš„æ ¼å¼ç›¸åŒã€‚1export LD_LIBRARY_PATH=ç›®å½•1:ç›®å½•2:ç›®å½•3:......ç›®å½•n:. 4ã€CLASSPATHJAVAè¯­è¨€åº“æ–‡ä»¶æœç´¢çš„ç›®å½•ï¼Œå®ƒä¹Ÿä¸æ˜¯Linuxç¼ºçœçš„ç¯å¢ƒå˜é‡ï¼Œä½†å¯¹JAVAç¨‹åºå‘˜æ¥è¯´éå¸¸é‡è¦ã€‚CLASSPATHç¯å¢ƒå˜é‡å­˜æ”¾çš„ä¹Ÿæ˜¯ç›®å½•åˆ—è¡¨ï¼Œç›®å½•ä¹‹é—´ç”¨å†’å·:åˆ†éš”ï¼Œæœ€åçš„åœ†ç‚¹.è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œä¸PATHçš„æ ¼å¼ç›¸åŒã€‚ äº”ã€ç¯å¢ƒå˜é‡çš„ç”Ÿæ•ˆ1ï¼‰åœ¨Shellä¸‹ï¼Œç”¨exportè®¾ç½®çš„ç¯å¢ƒå˜é‡å¯¹å½“å‰Shellç«‹å³ç”Ÿæ•ˆï¼ŒShellé€€å‡ºåå¤±æ•ˆã€‚2ï¼‰åœ¨è„šæœ¬æ–‡ä»¶ä¸­è®¾ç½®çš„ç¯å¢ƒå˜é‡ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œé€€å‡ºShellåé‡æ–°ç™»å½•æ—¶æ‰ç”Ÿæ•ˆï¼Œæˆ–è€…ç”¨sourceå‘½ä»¤è®©å®ƒç«‹å³ç”Ÿæ•ˆï¼Œä¾‹å¦‚ï¼š1source /etc/profile å…­ã€åº”ç”¨ç»éªŒè™½ç„¶è®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹æ³•æœ‰å¤šç§ï¼Œä½†æ˜¯å»ºè®®ç³»ç»Ÿç¯å¢ƒå˜é‡å»ºè®®åœ¨/etc/profile.dç›®å½•ä¸­é…ç½®ï¼Œç”¨æˆ·ç¯å¢ƒå˜é‡åœ¨ç”¨æˆ·çš„.bash_profileä¸­é…ç½®ï¼Œä¸å»ºè®®åœ¨å…¶å®ƒè„šæœ¬æ–‡ä»¶ä¸­é…ç½®ç¯å¢ƒå˜ï¼Œä¼šå¢åŠ è¿ç»´çš„éº»çƒ¦ï¼Œå®¹æ˜“å‡ºé”™ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/tags/Linux/"},{"name":"CentOS","slug":"CentOS","permalink":"https://hwame.top/tags/CentOS/"}]},{"title":"Hadoopé›†ç¾¤æ­å»ºè¯¦ç»†æ­¥éª¤","slug":"bigdata-cluster-with-hadoop-scala-spark","date":"2020-05-22T09:04:39.000Z","updated":"2020-05-28T01:36:41.000Z","comments":true,"path":"20200522/bigdata-cluster-with-hadoop-scala-spark.html","link":"","permalink":"https://hwame.top/20200522/bigdata-cluster-with-hadoop-scala-spark.html","excerpt":"æ‘˜è¦ï¼šå²ä¸Šæœ€è¯¦ç»†çš„Hadoop-Sparké›†ç¾¤æ­å»ºé‡‡å‘è¿‡ç¨‹ï¼ŒåŒ…æ‹¬VMwareã€Linux-CentOS-7ã€Java/JDKã€Hadoopã€Scalaä»¥åŠSparkçš„å®‰è£…é…ç½®ï¼Œå›¾æ–‡å¹¶èŒ‚ï¼Œæ¯ä¸€ä¸ªå‘éƒ½å¡«æ»¡ã€‚","text":"æ‘˜è¦ï¼šå²ä¸Šæœ€è¯¦ç»†çš„Hadoop-Sparké›†ç¾¤æ­å»ºé‡‡å‘è¿‡ç¨‹ï¼ŒåŒ…æ‹¬VMwareã€Linux-CentOS-7ã€Java/JDKã€Hadoopã€Scalaä»¥åŠSparkçš„å®‰è£…é…ç½®ï¼Œå›¾æ–‡å¹¶èŒ‚ï¼Œæ¯ä¸€ä¸ªå‘éƒ½å¡«æ»¡ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« æ¥æºï¼šæœ¬æ–‡ç”±Wordæ–‡ä»¶è½¬æ¢è€Œæ¥ï¼Œå› æ­¤ä¿ç•™äº†åŸå§‹æ ·å¼ï¼Œå­—ä½“ä¸ºå®‹ä½“ï¼‹Times New Romanï¼‹Consolasã€‚æ–‡ç« è¯´æ˜ï¼šå²ä¸Šæœ€è¯¦ç»†çš„Hadoopé›†ç¾¤æ­å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬VMwareã€Linux-CentOS-7ã€Java/JDKã€Hadoopã€Scalaï¼Œä»¥åŠSparkã€‚åŸæ–‡å…±87é¡µï¼Œå­—æ•°å…±12497ï¼Œåˆè®¡29460å­—ç¬¦ï¼Œ13ç« ï¼Œæ®µè½æ•°865ï¼Œè¡Œæ•°1335è¡Œï¼Œå›¾ç‰‡å…±113å¼ ã€‚æœ¬æ–‡æºç MarkDownæ–‡ä»¶å­—æ•°å…±è®¡47w+å­—ç¬¦ï¼Œè¡Œæ•°2235è¡Œã€‚æ›´æ–°è¯´æ˜ï¼š(1)åŸæ–‡åˆ›å»ºäº2019-12-24ï¼Œæ›´æ–°äº2020-05-22ï¼Œç”±äºæ—¶é—´è¾ƒä¹…ï¼Œå…¶ä¸­CentOS-7å·²æ— 1908ç‰ˆï¼›(2)ç‰©ç†æœºå®‰è£…ç¯å¢ƒä¸ºWindows 10 1503ç‰ˆï¼Œå‡çº§ä¸ºWindows 10 1909ç‰ˆåæ— æ³•ä½¿ç”¨VMware Workstation 15 Proï¼Œåº”å‡çº§è‡³15.5+ï¼Œå®‰è£…åŒ…å’Œæ³¨å†Œæœºç½‘ç›˜é“¾æ¥ä¸ºã€å¤©ç¿¼äº‘ç›˜ï¼Œç‚¹æˆ‘ä¸‹è½½ã€‘ï¼›(3)å›¾ç‰‡è¶³æœ‰113å¼ ï¼ŒåŠ è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…ï½ï½æ–‡ç« ä½œè€…ï¼šé´»å¡µ 1.æ¦‚è¿°1.1.è½¯ä»¶ç¯å¢ƒ1. è½¯ä»¶ç¯å¢ƒï¼šVMware Workstation 15 Proï¼› 2. è™šæ‹Ÿæœºæ“ä½œç³»ç»Ÿï¼ˆæ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™-CentOS7ä¸‹è½½ï¼‰ï¼Œä¸‹è½½é“¾æ¥åœ°å€ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1908.iso è¡¨1.1 è™šæ‹Ÿæœºä¸­ä¸»æœºååŠä½¿ç”¨çš„é•œåƒæ–‡ä»¶ åç§° ç³»ç»ŸåŠæ–‡ä»¶å master CentOS-7-x86_64-Minimal-1908.iso slave1 CentOS-7-x86_64-Minimal-1908.iso slave2 CentOS-7-x86_64-Minimal-1908.iso 3. ç½‘ç»œï¼šæˆ‘ä»¬å®éªŒå®¤ä½¿ç”¨æ ¡å›­ç½‘æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š 1.è¿æ¥xxxx_WIRELESSï¼Œç„¶ååœ¨å¼¹å‡ºçš„ç½‘é¡µä¸­ç™»é™†ï¼› 2.æ’å…¥ç½‘çº¿ï¼Œç„¶ååœ¨å¼¹å‡ºçš„ç½‘é¡µä¸­ç™»é™†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå®‰è£…çš„è™šæ‹Ÿæœºéœ€è¦è”ç½‘ï¼Œå¿…é¡»è£…æ¡Œé¢ç‰ˆï¼Œç„¶ååœ¨è‡ªå¸¦çš„FireFoxä¸­ç™»é™†ã€‚ å›¾1.1 ç™»é™†ç½‘ç»œçš„ä¸¤ç§æ–¹å¼ 4. è™šæ‹Ÿç½‘ç»œé‡‡ç”¨NATæ¨¡å¼ï¼Œè¯¦è§åæ–‡ã€‚è¸©è¿‡çš„å‘æœ‰å¾ˆå¤šï¼Œè¯•è¿‡æ¡¥æ¥æ¨¡å¼ï¼Œåœ¨Windowsç‰©ç†ä¸»æœºã€Masterã€Slave1ã€Slave2å››å°æœºå™¨ä¹‹é—´äº’pingï¼Œä¸èƒ½ä¿è¯ç›¸äº’pingé€šã€‚ 2.å®‰è£…VMware Workstationå®‰è£…æœ€æ–°ç‰ˆçš„VMware Workstation 15 Proï¼Œæ³¨æ„ä¸èƒ½ç›´æ¥åŒå‡»å®‰è£…åŒ…ï¼Œè€Œè¦å³é”®â€œä»¥ç®¡ç†å‘˜æ–¹å¼è¿è¡Œâ€ï¼ˆå› ä¸ºå®‰è£…è¿‡ç¨‹ä¸­éœ€è¦åˆ›å»ºç›¸å…³VMwareæœåŠ¡ï¼Œå¯èƒ½ä¼šæœ‰æƒé™çš„é—®é¢˜ï¼‰ã€‚ åŸºæœ¬æ˜¯å‚»ç“œå¼å®‰è£…ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ã€‚ æ–‡ä»¶åï¼šVMware Workstation 15 Pro ç½‘ç›˜é“¾æ¥ï¼šhttps://pan.baidu.com/s/1G-Z4r2sLisuYwJbuHsmPPAï¼Œæå–ç ï¼šgf7q è®¸å¯è¯å¯†é’¥ï¼šYG5H2-ANZ0H-M8ERY-TXZZZ-YKRV8 æ–‡ä»¶åï¼šVMware-workstation-full-15.5.0-14665864 ç½‘ç›˜é“¾æ¥ï¼šhttps://pan.baidu.com/s/1ObkjLqzlY5KbAUYMErQN4gï¼Œæå–ç ï¼š1314 è®¸å¯è¯å¯†é’¥ï¼šGF7TA-2VGD3-08EZZ-15XGG-X7KF2ï¼ˆè‹¥é”™è¯¯åˆ™éœ€ä½¿ç”¨æ³¨å†ŒæœºKeyGen.exeæ¿€æ´»ï¼Œä¸‹è½½åœ°å€è§é¡¶éƒ¨ã€Šæ–‡ç« è¯´æ˜ã€‹ï¼‰ å»ºè®®ï¼š1. å°½é‡ä¸è¦å®‰è£…åœ¨Cç›˜ï¼Œæ›´æ”¹åˆ°å…¶ä»–ç›˜ç¬¦ï¼›2. å–æ¶ˆå‹¾é€‰â€œå¯åŠ¨æ—¶æ£€æŸ¥äº§å“æ›´æ–°â€å’Œâ€œåŠ å…¥å®¢æˆ·ä½“éªŒæå‡è®¡åˆ’â€ï¼›3. æ˜¾ç¤ºâ€œVMware Workstation Proå®‰è£…å‘å¯¼å·²å®Œæˆâ€æ—¶ä¸è¦ç‚¹å‡»â€œå®Œæˆâ€ï¼Œåº”è¯¥ç‚¹å‡»â€œè®¸å¯è¯â€ï¼Œè¾“å…¥ä¸Šé¢çš„è®¸å¯è¯å¯†é’¥åå†ç‚¹å‡»â€œè¾“å…¥â€ã€‚ 3.ç½‘ç»œé…ç½®å‡†å¤‡å·¥ä½œ3.1.VMwareè®¾ç½®åœ¨VMwareä¸­ç‚¹å‡»â€œç¼–è¾‘â€ â†’ â€œè™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨â€ï¼Œç‚¹å‡»â€œæ›´æ”¹è®¾ç½®â€ï¼Œå¦‚ä¸‹å›¾ã€‚ å›¾3.1 ç¼–è¾‘è™šæ‹Ÿç½‘ç»œ é€‰æ‹©VMnet8ï¼ˆå³NATæ¨¡å¼ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼Œç‚¹å‡»â€œNATè®¾ç½®â€å‡ºç°å³å›¾ã€‚å…¶ä¸­ï¼Œå­ç½‘IPå’Œå­ç½‘æ©ç é»˜è®¤å³å¯ï¼Œç½‘å…³IPå°†æœ€åä¸€ä½éšæ„ä¿®æ”¹ä¸€ä¸‹ï¼ˆä¸IPä¸åŒï¼‰ã€‚è®°ä½ä¸‹å›¾ä¸­çš„ä¸‰ä¸ªå€¼ï¼š å›¾3.2 è®¾ç½®NATæ¨¡å¼ è¡¨3.1 è™šæ‹Ÿæœºä¸­ä¸»æœºååŠä½¿ç”¨çš„é•œåƒæ–‡ä»¶ åç§° IPåœ°å€ å¤‡æ³¨ å­ç½‘IP 192.168.176.0 é»˜è®¤å€¼ å­ç½‘æ©ç  255.255.255.0 é»˜è®¤å€¼ ç½‘å…³IP 192.168.176.x ä¿®æ”¹xï¼Œæ­¤å¤„çš„å€¼ä¸ºx=2 3.2.æ§åˆ¶é¢æ¿ç½‘ç»œè®¾ç½®3.2.1.æŸ¥çœ‹ç½‘å¡æ‰“å¼€æ§åˆ¶é¢æ¿ â†’ ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒ â†’ æ›´æ”¹é€‚é…å™¨è®¾ç½®ï¼Œå¦‚ä¸‹å›¾ã€‚ å›¾3.3 æ§åˆ¶é¢æ¿ç½‘ç»œè¿æ¥æƒ…å†µ æ³¨1ï¼šä¹‹å‰å®‰è£…çš„VMwareç‰ˆæœ¬ä¸ºVM10ï¼Œå‡ºç°çš„ä¸æ˜¯â€œå·²å¯ç”¨â€è€Œæ˜¯â€œæœªè¯†åˆ«çš„ç½‘ç»œâ€ï¼Œé€šè¿‡å®‰è£…æœ€æ–°ç‰ˆæœ¬VM15è§£å†³ï¼› æ³¨2ï¼šå¯ä»¥å‘ç°ï¼Œä¸Šå›¾ä¸­æ²¡æœ‰VMnet0ï¼ˆæ¡¥æ¥æ¨¡å¼ï¼‰ï¼Œè¿™ä¸ªé—®é¢˜åº”è¯¥æ˜¯æ‰“å¼€VMwareæ—¶æ²¡æœ‰é€‰æ‹©ä»¥ç®¡ç†å‘˜æ–¹å¼è¿è¡Œã€‚ 3.2.2.é…ç½®è™šæ‹Ÿç½‘å¡VMnet8åŒå‡»VMnet8ï¼ˆNATæ¨¡å¼ï¼‰ï¼Œç‚¹å‡»â€œå±æ€§â€ï¼Œå…ˆé€‰ä¸­â€œInternetåè®®ç‰ˆæœ¬4(TCP/IPv4â€ç„¶åç‚¹å‡»â€œå±æ€§â€ï¼Œé€‰æ‹©â€œä½¿ç”¨ä¸‹é¢çš„IPåœ°å€â€å’Œâ€œä½¿ç”¨ä¸‹é¢çš„DNSæœåŠ¡å™¨åœ°å€â€ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾3.4 è®¾ç½®è™šæ‹Ÿç½‘å¡IPæ®µ &#xa0; å…¶ä¸­å­ç½‘æ©ç å’Œé»˜è®¤ç½‘å…³çš„åœ°å€å’Œ2.1èŠ‚VMwareè®¾ç½®ä¸­ä¸€è‡´ï¼Œä½†IPåœ°å€ä¸å’Œå­ç½‘IPç›¸åŒï¼Œæ¯”å¦‚æˆ‘åœ¨è¿™é‡Œè®¾ç½®ä¸º20ã€‚ 3.3.æŸ¥çœ‹ç‰©ç†ä¸»æœºä¿¡æ¯æŒ‰â€œWindowsé”®ï¼‹Râ€è¾“å…¥â€œcmdâ€æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥ipconfig /allï¼ŒæŸ¥çœ‹ç‰©ç†ä¸»æœºçš„Windows IPè®¾ç½®ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾3.5 æŸ¥çœ‹Windowsç‰©ç†ä¸»æœºIPä¿¡æ¯ &#xa0; å¯ä»¥çœ‹åˆ°ï¼Œç‰©ç†ä¸»æœºä¿¡æ¯å’ŒVMwareé»˜è®¤çš„å€¼å¾ˆä¸ä¸€æ ·ã€‚è¿™æ˜¯å› ä¸ºWindowsç‰©ç†æœºæœ¬èº«æ˜¯å¤„äºæ ¡å›­ç½‘ä¸­ï¼Œè·å¾—çš„IPåœ°å€ä¹Ÿæ˜¯è‡ªåŠ¨åˆ†é…çš„ï¼Œå¦‚æœä½¿ç”¨WiFiè¿æ¥ç™»é™†åˆ™IPåˆä¸ä¸€æ ·ã€‚æ­¤å¤„çš„IPæ˜¯æ’å…¥ç½‘çº¿è·å¾—çš„ï¼Œä¿è¯IPä¸å˜ã€‚ è¡¨3.2 Windowsç‰©ç†ä¸»æœºIPä¿¡æ¯ Windowsç‰©ç†ä¸»æœº IPåœ°å€ å¤‡æ³¨ IPv4åœ°å€ 222.20.82.252 ä¸åŒäºVMwareåŠVMnet å­ç½‘æ©ç  255.255.252.0 ä¸åŒäºVMwareåŠVMnet é»˜è®¤ç½‘å…³ 222.20.83.254 ä¸åŒäºVMwareåŠVMnet DNSæœåŠ¡å™¨1 202.114.0.131 é»˜è®¤å€¼ DNSæœåŠ¡å™¨2 202.114.0.242 é»˜è®¤å€¼ &#xa0; 4.å®‰è£…è™šæ‹Ÿæœº4.1.å®‰è£…Master4.1.1.è¯´æ˜1. å¿…é¡»åœ¨ç½‘ç»œé…ç½®å®Œæˆåæ‰å¯è¿›è¡Œæ¥ä¸‹æ¥çš„æ­¥éª¤ã€‚ 2. ä¸ºä¿è¯ä»¥ä¸‹é¡ºåˆ©è¿›è¡Œï¼Œéœ€è¦ä¿è¯VMwareæœåŠ¡å·²å…¨éƒ¨å¼€å¯ï¼ˆVM15åº”è¯¥æ— éœ€è€ƒè™‘ï¼‰ï¼ŒæŸ¥çœ‹æ˜¯å¦å¯åŠ¨æ­¥éª¤ï¼šæ­¤ç”µè„‘å³é”® â†’ ç®¡ç† â†’ åŒå‡»æœåŠ¡å’Œåº”ç”¨ç¨‹åº â†’ åŒå‡»æœåŠ¡ï¼Œç¡®ä¿VMwareç›¸å…³æœåŠ¡çš„çŠ¶æ€ä¸ºâ€œæ­£åœ¨è¿è¡Œâ€ï¼ˆè‡³å°‘ä¿è¯â‘ Authorization Serviceã€â‘¡NAT Serviceã€â‘¢Workstation Serverä¸‰è€…æ­£åœ¨è¿è¡Œï¼‰ï¼Œå¦‚ä¸‹å›¾ã€‚ å›¾4.1 å¯åŠ¨VMwareç›¸å…³çš„æœåŠ¡ 4.1.2.æ–°å»ºè™šæ‹Ÿæœºæ‰“å¼€â€œæ–°å»ºè™šæ‹Ÿæœºå‘å¯¼â€ â†’ é€‰æ‹©è‡ªå®šä¹‰ï¼Œä¸‹ä¸€æ­¥ â†’ ç¡¬ä»¶å…¼å®¹æ€§é»˜è®¤ï¼Œä¸‹ä¸€æ­¥ â†’ é€‰æ‹©â€œç¨åå®‰è£…æ“ä½œç³»ç»Ÿâ€ï¼Œä¸‹ä¸€æ­¥ â†’ æ“ä½œç³»ç»Ÿé€‰æ‹©Linuxï¼Œç‰ˆæœ¬é€‰æ‹©CentOS 7 64ä½ï¼Œä¸‹ä¸€æ­¥ â†’ ä¿®æ”¹è™šæ‹Ÿæœºåç§°ã€é»˜è®¤ä½ç½®å¯åœ¨â€œç¼–è¾‘â€ â†’ â€œé¦–é€‰é¡¹â€ä¿®æ”¹ï¼Œé»˜è®¤Cç›˜ï¼Œä¹Ÿå¯æ‰‹åŠ¨æŒ‡å®šï¼Œä½†å¿…é¡»å…ˆä¿®æ”¹ä½ç½®ç„¶åå‘½åè™šæ‹Ÿæœºåç§°ã€‘ï¼Œå¦‚ä¸‹å›¾ã€‚ å›¾4.2 æ–°å»ºè™šæ‹Ÿæœºå‘å¯¼ &#xa0; å¤„ç†å™¨é…ç½®é»˜è®¤å³å¯ â†’ è™šæ‹Ÿæœºå†…å­˜é€‰æ‹©2048MBï¼ˆå¦‚æœè‡ªå·±ç”µè„‘å†…å­˜å°äº8Gï¼Œå»ºè®®é»˜è®¤1024MBï¼‰ â†’ ç½‘ç»œç±»å‹é€‰æ‹©â€œç½‘ç»œåœ°å€è½¬æ¢NATâ€ï¼Œä¸‹ä¸€æ­¥ â†’ I/Oæ§åˆ¶å™¨ç±»å‹å’Œç£ç›˜ç±»å‹é»˜è®¤ â†’ é€‰æ‹©â€œåˆ›å»ºæ–°è™šæ‹Ÿç£ç›˜â€ â†’ ç£ç›˜å¤§å°é»˜è®¤20.0GBï¼Œé€‰æ‹©â€œæ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶â€ï¼ˆç”±äºæ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œå› æ­¤å®é™…ä¸ä¼šä½¿ç”¨åˆ°20.0GBï¼‰ â†’ æŒ‡å®šç£ç›˜æ–‡ä»¶é»˜è®¤ â†’ ç‚¹å‡»â€œè‡ªå®šä¹‰ç¡¬ä»¶â€å¼¹å‡ºç¡¬ä»¶çª—å£ï¼Œåœ¨â€œç¡¬ä»¶â€çª—å£ä¸­ç‚¹å‡»â€œæ–°CD/DVDï¼ˆIDEï¼‰â€é€‰ä¸­ä½¿ç”¨ISOæ˜ åƒæ–‡ä»¶å¹¶é€‰æ‹©ä¸‹è½½å¥½çš„CentOS-7-x86_64-Minimal-1908.isoæ–‡ä»¶ï¼ˆå¦‚å›¾4.3æ‰€ç¤ºï¼‰ï¼Œç„¶åç‚¹å‡»å…³é—­ï¼Œæœ€åç‚¹å‡»å®Œæˆã€‚ å›¾4.3 é€‰æ‹©ISOæ˜ åƒæ–‡ä»¶ &#xa0; 4.1.3.å®‰è£…è™šæ‹Ÿæœºè¯´æ˜ï¼šå› ä¸ºæˆ‘çš„é›†ç¾¤å·²ç»æ­å»ºå®Œæˆï¼Œä¸‹æ–‡ä»¥Testerä¸ºä¾‹ã€‚ å›¾4.4 è™šæ‹Ÿæœºæ–°å»ºå®Œæˆ é€‰ä¸­æ–°å»ºçš„è™šæ‹ŸæœºTesterï¼Œç‚¹å‡»â€œå¼€å¯æ­¤è™šæ‹Ÿæœºâ€ï¼Œå¦‚ä¸Šå›¾ã€‚è¿›å…¥å®‰è£…ç•Œé¢ï¼Œè¾“å…¥â€œchiâ€ä»¥ç­›é€‰ï¼Œç„¶åé€‰æ‹©ä¸­æ–‡ï¼Œå¦‚ä¸‹å›¾ã€‚ å›¾4.5 è™šæ‹Ÿæœºå®‰è£…ç•Œé¢é€‰æ‹©è¯­è¨€ ç‚¹å‡»â€œå®‰è£…ä½ç½®â€ï¼Œæ— éœ€æ›´æ”¹ï¼Œç›´æ¥ç‚¹å‡»â€œå®Œæˆâ€ï¼Œç„¶åç‚¹å‡»â€œç½‘ç»œå’Œä¸»æœºåâ€ï¼Œå¦‚ä¸‹å›¾ã€‚ å›¾4.6 å®‰è£…ä¿¡æ¯æ‘˜è¦ åœ¨å¼¹å‡ºçš„â€œç½‘ç»œå’Œä¸»æœºåâ€ä¸­å°†ä¸»æœºåæ”¹ä¸ºâ€œmasterï¼ˆæ­¤å¤„ä»¥testerä¸ºä¾‹ï¼‰â€åç‚¹å‡»â€œåº”ç”¨â€ï¼Œå³è¾¹â€œå½“å‰ä¸»æœºåâ€ä¼šå˜ä¸ºmasterï¼ˆæ­¤å¤„ä»¥testerä¸ºä¾‹ï¼‰ï¼Œå¦‚å›¾ã€‚ å›¾4.7 ä¿®æ”¹ä¸»æœºåï¼ˆä»¥testerä¸ºä¾‹ï¼‰ 4.1.4.é…ç½®Masterç½‘ç»œï¼ˆ1ï¼‰ä¿®æ”¹ä¸»æœºååï¼Œç‚¹å‡»â€œé…ç½®â€ã€‚åœ¨â€œä»¥å¤ªç½‘â€é€‰é¡¹å¡ä¸­ï¼Œå°†â€œè®¾å¤‡â€æ”¹ä¸ºå¸¦æœ‰MACåœ°å€çš„ens33ï¼ˆ00:0C:29:03:C5:51ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾4.8 é…ç½®ä¹‹â€œä»¥å¤ªç½‘â€é€‰é¡¹å¡ï¼ˆä»¥testerä¸ºä¾‹ï¼‰ ï¼ˆ2ï¼‰åœ¨â€œIPv4è®¾ç½®â€é€‰é¡¹å¡ä¸­ï¼Œé¦–å…ˆå°†æ–¹æ³•ä¿®æ”¹ä¸ºâ€œæ‰‹åŠ¨â€ï¼Œç„¶åç‚¹å‡»â€œAddâ€æ·»åŠ åœ°å€å’ŒDNSæœåŠ¡å™¨ã€‚å…¶ä¸­ï¼Œmasterçš„IPåœ°å€è®¾ç½®ä¸º192.168.172.200ï¼ˆä»¥testerä¸ºä¾‹ï¼Œæ­¤å¤„è®¾ç½®çš„æ˜¯192.168.176.203ï¼‰ï¼›å­ç½‘æ©ç å„èŠ‚ç‚¹ç›¸åŒï¼ˆä¸VMwareè™šæ‹Ÿç½‘ç»œä¸­çš„å­ç½‘æ©ç ä¸€è‡´ï¼‰ï¼Œéƒ½æ˜¯255.255.255.0ï¼Œä¹Ÿå¯å†™ä¸º24ï¼Œä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼›DNSæœåŠ¡å™¨åœ°å€æœ‰ä¸¤ä¸ª202.114.0.131å’Œ202.114.0.242ï¼Œä»¥è‹±æ–‡é€—å·åˆ†éš”ï¼Œä¸”æ— å¤šä½™ç©ºæ ¼ã€‚ é…ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾4.9 é…ç½®ä¹‹â€œIPv4è®¾ç½®â€é€‰é¡¹å¡ï¼ˆä»¥testerä¸ºä¾‹ï¼‰ &#xa0; ï¼ˆ3ï¼‰åœ¨â€œIPv6è®¾ç½®â€é€‰é¡¹å¡ä¸­ï¼Œå°†æ–¹æ³•æ”¹ä¸ºâ€œå¿½ç•¥â€ä»¥ç¦ç”¨ï¼Œé…ç½®å®Œæˆç‚¹å‡»â€œä¿å­˜â€ã€‚ç„¶åæ‰“å¼€ç½‘ç»œè¿æ¥ï¼Œå¯ä»¥çœ‹åˆ°é…ç½®ç”Ÿæ•ˆï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾4.10 æ‰“å¼€ä»¥å¤ªç½‘è¿æ¥é…ç½®ç”Ÿæ•ˆï¼ˆä»¥testerä¸ºä¾‹ï¼‰ ï¼ˆ4ï¼‰æœ€ååœ¨â€œç½‘ç»œå’Œä¸»æœºåâ€é¡µé¢ç‚¹å‡»å®Œæˆï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰å®‰è£…ä¿¡æ¯å‡å·²å®Œæˆï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œæœ€åç‚¹å‡»â€œå¼€å§‹å®‰è£…â€ã€‚ å›¾4.11 å®‰è£…ä¿¡æ¯æ‘˜è¦å…¨éƒ¨å®Œæˆé…ç½® 4.1.5.è®¾ç½®rootå¯†ç ï¼ˆ1ï¼‰ç”±ä¸Šå¼€å§‹å®‰è£…åï¼Œç•Œé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­¤æ—¶å¿…é¡»è®¾ç½®rootå¯†ç ä»¥å®Œæˆå¸¦æœ‰è­¦å‘Šå›¾æ ‡çš„å†…å®¹ï¼ˆåªéœ€è¦è®¾ç½®rootå¯†ç ï¼Œä¸¤å¤„çš„æ ‡è®°å³å¯æ­£å¸¸ï¼‰ã€‚ å›¾4.12 CentOS7æ­£åœ¨å®‰è£…ä½†å°šæœªè®¾ç½®rootå¯†ç  ï¼ˆ2ï¼‰ç‚¹å‡»è®¾ç½®rootå¯†ç ï¼Œå¦‚æœå¯†ç å¼ºåº¦å¤ªå¼±ï¼Œåˆ™éœ€è¦ç‚¹å‡»ä¸¤æ¬¡â€œå®Œæˆâ€ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾4.13 è®¾ç½®rootå¯†ç  ï¼ˆ3ï¼‰å®Œæˆrootå¯†ç çš„è®¾ç½®ï¼Œå³ä½¿æ²¡æœ‰å‚åŠ ç”¨æˆ·ä¹Ÿä¸ä¼šæœ‰æ ‡è®°ï¼Œç‚¹å‡»â€œå®Œæˆé…ç½®â€ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ è¯´æ˜ï¼šåœ¨å¤§æ•°æ®é›†ç¾¤æ­å»ºè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªç”¨æˆ·rootå’Œhadoopï¼Œç›®å‰åªéœ€è¦rootç®¡ç†å‘˜å³å¯ã€‚ å›¾4.14 è®¾ç½®rootå¯†ç  &#xa0; ï¼ˆ4ï¼‰ç‚¹å‡»â€œå®Œæˆé…ç½®â€åç»§ç»­ç­‰å¾…å…¶ä»–å¿…è¦é…ç½®å®Œæˆï¼Œæœ€åç‚¹å‡»é‡å¯ï¼Œä»è€Œå¯åŠ¨è™šæ‹Ÿæœºmasterï¼ˆæ­¤å¤„ä¸ºtesterï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾4.15 å¯åŠ¨CentOSè™šæ‹ŸæœºMasterï¼ˆæ­¤å¤„ä¸ºTesterï¼‰ 4.2.å®‰è£…Slave1åŒ4.1èŠ‚ï¼Œå°†è™šæ‹Ÿæœºåç§°è®¾ç½®ä¸ºâ€œSlave1â€ï¼ŒåŒæ—¶å°†ä¸»æœºåä¿®æ”¹ä¸ºâ€œslave1â€ï¼Œä¸”ç½‘ç»œé…ç½®ä¸­slave1çš„IPåœ°å€è®¾ç½®ä¸º192.168.172.201ã€‚ 4.3.å®‰è£…Slave2åŒ4.1èŠ‚ï¼Œå°†è™šæ‹Ÿæœºåç§°è®¾ç½®ä¸ºâ€œSlave2â€ï¼ŒåŒæ—¶å°†ä¸»æœºåä¿®æ”¹ä¸ºâ€œslave2â€ï¼Œä¸”ç½‘ç»œé…ç½®ä¸­slave2çš„IPåœ°å€è®¾ç½®ä¸º192.168.172.202ã€‚ è‡³æ­¤ï¼Œä¸€ä¸»äºŒæ¬¡çš„è™šæ‹Ÿæœºå®‰è£…å®Œæˆï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆæœªåˆ é™¤æµ‹è¯•æœºTesterï¼‰ã€‚ å›¾4.16 ä¸€ä¸»äºŒæ¬¡çš„é›†ç¾¤Masterï¼‹Slave1ï¼‹Slave2 &#xa0; 5.è™šæ‹Ÿæœºé…ç½®5.1.è®¾ç½®å„èŠ‚ç‚¹åç§°ä»¥Testerä¸ºä¾‹ï¼Œè¾“å…¥å¹¶å›è½¦ï¼ŒæŒ‰â€œIâ€é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚ è¾“ï¼š [root@ tester ~] # vi /etc/sysconfig/network &#xa0; æ—§ï¼š# Created by anaconda &#xa0; æ–°ï¼š# Created by anaconda &nbsp&nbsp&nbsp&nbspNETWORKING=yes &nbsp&nbsp&nbsp&nbspHOSTNAME=master &nbsp&nbsp&nbsp&nbspGATEWAY=192.168.176.2 ç¼–è¾‘å®Œæˆåï¼ŒæŒ‰â€œEscâ€é”®é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œç„¶åæŒ‰â€œShiftï¼‹ï¼šâ€ï¼Œæœ€åè¾“å…¥â€œwqâ€ï¼ˆå¿…é¡»å°å†™ï¼‰å¹¶å›è½¦ä¿å­˜é€€å‡ºã€‚ æ³¨ï¼šâ‘ å†…å®¹ç¼–è¾‘è¿‡ï¼Œéœ€è¦ä¿å­˜å¹¶é€€å‡ºï¼Œåˆ™è¾“å…¥â€œwqâ€ï¼› â‘¡å†…å®¹ç¼–è¾‘è¿‡ï¼Œä¸ä¿å­˜å¼ºåˆ¶é€€å‡ºï¼Œåˆ™è¾“å…¥â€œq!â€ï¼› â‘¢å†…å®¹æœªç¼–è¾‘è¿‡ï¼Œç›´æ¥é€€å‡ºï¼Œåˆ™è¾“å…¥â€œqâ€ã€‚ è®¾ç½®å®Œæˆåå„èŠ‚ç‚¹åç§°å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾5.1 è®¾ç½®MasterèŠ‚ç‚¹åç§° &#xa0; å›¾5.2 è®¾ç½®Slave1èŠ‚ç‚¹åç§° &#xa0; å›¾5.3 è®¾ç½®Slave2èŠ‚ç‚¹åç§° &#xa0; 5.2.é…ç½®hostsä»¥Testerä¸ºä¾‹ï¼Œé…ç½®hostsã€‚ è¾“ï¼š[root@tester ~]#vi /etc/hosts &#xa0; ä¿®æ”¹å‰åŸhostsæ–‡ä»¶å†…å®¹ä¸ºï¼š 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localhost localhost.localdomain localhost4 localhost4.localdomain4 ä¿®æ”¹åçš„hostsæ–‡ä»¶å†…å®¹ä¸ºï¼š 127.0.0.1localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1&nbsp;&nbsp;&nbsp;localhostlocalhost.localdomainlocalhost4localhost4.localdomain4 192.168.176.203tester 192.168.176.201slave1 192.168.176.202slave2 &#xa0; ä¿å­˜ä¹‹åï¼Œåœ¨Masterä¸Šå°†è¯¥æ–‡ä»¶åˆ†åˆ«æ‹·è´è‡³å¦å¤–ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå¦‚å›¾5.4æ‰€ç¤ºã€‚ è¾“ï¼š[root@master ~]#scp /etc/hosts root@192.168.176.201:/etc/ è¾“ï¼š[root@master ~]#scp /etc/hosts root@192.168.176.202:/etc/ å›¾5.4 è¿œç¨‹æ‹·è´hostsé…ç½®æ–‡ä»¶ &#xa0; è®¾ç½®å®Œæˆåå„èŠ‚ç‚¹hostsæ–‡ä»¶éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾5.5 å„ä¸»æœºçš„hostsé…ç½®ï¼ˆMasterï¼ŒSlave1ï¼ŒSlave2ç›¸åŒï¼‰ &#xa0; 5.3.é…ç½®å„èŠ‚ç‚¹ç½‘å¡ä»¥Testerä¸ºä¾‹ï¼Œé…ç½®ç½‘å¡ens33ã€‚ç”±äºåœ¨å®‰è£…è™šæ‹Ÿæœºçš„è¿‡ç¨‹ä¸­å·²ç»åŸºæœ¬é…ç½®å¥½ç½‘ç»œï¼Œå› æ­¤åªéœ€è¦ä¿®æ”¹ä¸ºé™æ€IPå³å¯ï¼ˆç†è®ºä¸Šï¼Œè¿™ä¸€æ­¥ä¹Ÿä¸éœ€è¦ï¼Œé»˜è®¤å€¼æ˜¯BOOTPROTO=â€noneâ€ï¼‰ã€‚ æŸ¥çœ‹åŸå§‹ç½‘å¡ä¿¡æ¯å¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@tester ~]#cat /etc/sysconfig/network-scripts/ifcfg-ens33 å›¾5.6 Testerç½‘å¡ens33ä¿¡æ¯ viç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œå°†BOOTPROTO=â€noneâ€ä¿®æ”¹ä¸ºBOOTPROTO=â€staticâ€ï¼Œä¿å­˜åé‡å¯ç½‘ç»œï¼š è¾“ï¼š[root@tester ~]#systemctl restart network &#xa0; 5.4.å…³é—­é˜²ç«å¢™5.4.1.ä»¥Testerä¸ºä¾‹ä»¥Testerä¸ºä¾‹ï¼Œé¦–å…ˆæŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼ˆstatusï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆé»˜è®¤çŠ¶æ€ä¸ºå¼€å¯ï¼‰ï¼š è¾“ï¼š[root@tester ~]#systemctl status firewalld å›¾5.7 æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ è¯´æ˜ï¼šæˆ‘ä»¬éœ€è¦ç¦ç”¨ï¼ˆæ°¸ä¹…å…³é—­ï¼‰é˜²ç«å¢™ï¼Œæ“ä½œoperationä¸ºâ€œdisableâ€ï¼›å¦‚æœæ˜¯ä¸´æ—¶å…³é—­ï¼Œåˆ™æ“ä½œoperationä¸ºâ€œstopâ€ï¼›å¼€å¯é˜²ç«å¢™çš„æ“ä½œoperationä¸ºâ€œstartâ€ã€‚ ç¦ç”¨åéœ€è¦é‡å¯ç½‘ç»œå¹¶é‡å¯è™šæ‹Ÿæœºï¼ˆæˆ–è€…å…³é—­&lt;stop&gt;é˜²ç«å¢™å³å¯ï¼Œè€Œä¸éœ€è¦é‡å¯è™šæ‹Ÿæœºï¼‰ä½¿ä¹‹ç”Ÿæ•ˆï¼Œå†æ¬¡æŸ¥çœ‹çŠ¶æ€ï¼Œå¯ä»¥å‘ç°å·²ç»ç¦ç”¨ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ è¾“ï¼š[root@tester ~]#systemctl disable firewalld &#xa0; è¾“ï¼š[root@tester ~]#systemctl restart network &#xa0; è¾“ï¼š[root@tester ~]#rebootï¼ˆæˆ–è€…ï¼‰systemctl stop firewalld &#xa0; è¾“ï¼š[root@tester ~]#systemctl status firewalld &#xa0; å›¾5.8 rebooté‡å¯åå†æ¬¡æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ &#xa0; è¯´æ˜ï¼šè¯¥æ­¥éª¤åˆ†åˆ«åœ¨Masterã€Slave1å’ŒSlave2ä¸Šè¿›è¡Œï¼Œç¦ç”¨æ‰€æœ‰èŠ‚ç‚¹çš„é˜²ç«å¢™ã€‚ &#xa0; 5.4.2.Masterå…³é—­é˜²ç«å¢™æˆªå›¾ä»¥Testerä¸ºä¾‹ï¼Œé¦–å…ˆæŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼ˆstatusï¼‰ä¸ºactiveï¼ˆrunningï¼‰ï¼ˆå› ä¸ºé˜²ç«å¢™é»˜è®¤æ˜¯å¼€å¯çš„ï¼‰ï¼Œç„¶åç¦ç”¨é˜²ç«å¢™æœåŠ¡ï¼Œæ­¤æ—¶é˜²ç«å¢™ä¾ç„¶æ˜¯è¿è¡ŒçŠ¶æ€ï¼ˆå› ä¸ºåœ¨é˜²ç«å¢™å·²ç»æ˜¯å¼€å¯çš„çŠ¶æ€ä¸‹ç¦ç”¨æœåŠ¡ï¼Œåªèƒ½å½±å“ä¸‹ä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦é‡å¯ç”Ÿæ•ˆæˆ–è€…æ‰‹åŠ¨å…³é—­é˜²ç«å¢™ï¼‰ã€‚å…³é—­ï¼ˆstopï¼‰é˜²ç«å¢™åå†æ¬¡æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°å…¶çŠ¶æ€ä¸ºinactiveï¼ˆdeadï¼‰ã€‚å¦‚å›¾æ‰€ç¤ºï¼š å›¾5.9 Masterå…³é—­é˜²ç«å¢™ 5.5.äº’pingæµ‹è¯•5.5.1.Windowsç‰©ç†ä¸»æœºæ‰“å¼€cmdçª—å£ï¼Œåˆ†åˆ«pingå››å°è™šæ‹Ÿæœºï¼ˆåŒ…æ‹¬Testerï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ç‰©ç†ä¸»æœºpingä¸»èŠ‚ç‚¹Masterï¼š è¾“ï¼šC:\\Users\\é´»å¡µ&gt;ping 192.168.176.200 &#xa0; ç‰©ç†ä¸»æœºpingä»èŠ‚ç‚¹Slave1ï¼š è¾“ï¼šC:\\Users\\é´»å¡µ&gt;ping 192.168.176.201 &#xa0; ç‰©ç†ä¸»æœºpingä»èŠ‚ç‚¹Slave2ï¼š è¾“ï¼šC:\\Users\\é´»å¡µ&gt;ping 192.168.176.202 &#xa0; ç‰©ç†ä¸»æœºpingæµ‹è¯•æœºTesterï¼š è¾“ï¼šC:\\Users\\é´»å¡µ&gt;ping 192.168.176.203 å›¾5.10 Windowsç‰©ç†ä¸»æœº 5.5.2.Materè™šæ‹Ÿæœºè™šæ‹ŸæœºMateråˆ†åˆ«pingç‰©ç†ä¸»æœºã€è™šæ‹ŸæœºSlave1ã€è™šæ‹ŸæœºSlave2å’Œæµ‹è¯•æœºTesterï¼ˆæ­¤å¤„æœªæˆªå›¾ï¼Œå®é™…èƒ½pingé€šï¼‰ï¼Œä»¥åŠå¤–ç½‘ï¼ˆç™¾åº¦ï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å›¾5.11 Materè™šæ‹Ÿæœº &#xa0; 5.5.3.Slave1è™šæ‹Ÿæœºè™šæ‹ŸæœºSlave1åˆ†åˆ«pingç‰©ç†ä¸»æœºã€è™šæ‹ŸæœºMaterã€è™šæ‹ŸæœºSlave2å’Œæµ‹è¯•æœºTesterï¼ˆæ­¤å¤„æœªæˆªå›¾ï¼Œå®é™…èƒ½pingé€šï¼‰ï¼Œä»¥åŠå¤–ç½‘ï¼ˆç™¾åº¦ï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å›¾5.12 Slave1è™šæ‹Ÿæœº &#xa0; 5.5.4.Slave2è™šæ‹Ÿæœºè™šæ‹ŸæœºSlave2åˆ†åˆ«pingç‰©ç†ä¸»æœºã€è™šæ‹ŸæœºMaterã€è™šæ‹ŸæœºSlave1å’Œæµ‹è¯•æœºTesterï¼ˆæ­¤å¤„æœªæˆªå›¾ï¼Œå®é™…èƒ½pingé€šï¼‰ï¼Œä»¥åŠå¤–ç½‘ï¼ˆç™¾åº¦ï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å›¾5.13 Slave2è™šæ‹Ÿæœº &#xa0; ç”±ä¸Šï¼Œé›†ç¾¤å†…ä¸‰å°è™šæ‹Ÿæœºå¯ä»¥ç›¸äº’é€šä¿¡ï¼Œä¹Ÿå¯ä»¥å’ŒWindowsç‰©ç†ä¸»æœºç›¸äº’é€šä¿¡ï¼Œå¹¶ä¸”å¯è®¿é—®å¤–ç½‘ã€‚ &#xa0; 6.JDKçš„å®‰è£…ä¸é…ç½®ç”±äºHadoopçš„ç¼–è¯‘åŠMapReduceçš„è¿è¡Œéƒ½éœ€è¦ä½¿ç”¨JDKï¼Œæ‰€ä»¥éœ€è¦åœ¨é›†ç¾¤ä¸­çš„æ¯ä¸€å°æœºå™¨ä¸Šæå‰å®‰è£…å¥½èƒ½å¤Ÿæ»¡è¶³Hadoopæœ€ä½ç‰ˆæœ¬è¦æ±‚çš„JDKã€‚ å‚è€ƒæ–‡ç« ï¼šhttps://blog.csdn.net/github_38336924/article/details/82221258 6.1.æ£€æŸ¥æ˜¯å¦å·²å®‰è£…JDKåŠå¸è½½æµ‹è¯•æœºTesteræœªå®‰è£…è¿‡Javaï¼Œæ•…ä»¥Testerä¸ºä¾‹ã€‚ æ£€æŸ¥æ˜¯å¦å·²å®‰è£…JDKï¼ˆä¸­æ‹¬å·é€‰å…¶ä¸€ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼ˆå›¾ä¸­æ²¡æœ‰è¾“å‡ºä¿¡æ¯å³ä»£è¡¨æ²¡æœ‰ç›¸å…³çš„å®‰è£…æ–‡ä»¶ï¼‰ï¼š è¾“ï¼š[root@tester ~]#yum list installed | grep [java][jdk] &#xa0; æŸ¥è¯¢å·²å®‰è£…çš„åŒ…æ–‡ä»¶ï¼ˆä¸­æ‹¬å·é€‰å…¶ä¸€ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼ˆå›¾ä¸­æ²¡æœ‰è¾“å‡ºä¿¡æ¯å³ä»£è¡¨æ²¡æœ‰ç›¸å…³çš„å®‰è£…æ–‡ä»¶ï¼‰ï¼š è¾“ï¼š[root@tester ~]#rpm -qa | grep [java][jdk][gcj] &#xa0; å›¾6.1 æ£€æŸ¥æ˜¯å¦å·²å®‰è£…JDK &#xa0; æ²¡æœ‰Javaç›¸å…³çš„æ–‡ä»¶ï¼Œå› æ­¤ä¸éœ€è¦å¸è½½ã€‚å®‰è£…è¿‡ç¨‹çœç•¥ã€‚ &#xa0; 6.2.Masterå®‰è£…JDK6.2.1.æŸ¥çœ‹JDKè½¯ä»¶åŒ…åˆ—è¡¨æŸ¥çœ‹JDKè½¯ä»¶åŒ…åˆ—è¡¨ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master ~]#yum search java-1.8.0 | grep â€“i --color jdk å›¾6.2 æŸ¥çœ‹JDKè½¯ä»¶åŒ…åˆ—è¡¨ &#xa0; 6.2.2å®‰è£…openjdkåœ¨ä¸Šå›¾JDKè½¯ä»¶åŒ…åˆ—è¡¨ä¸­ï¼Œä¸éœ€è¦å®‰è£…æ‰€æœ‰åŒ…ï¼Œåªéœ€è¦å®‰è£…å…¶ä¸­java-1.8.0-openjdkå’Œjava-1.8.0-openjdk-develå³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master ~]#yum install â€“y java-1.8.0-openjdk java-1.8.0-openjdk â€“devel &#xa0; è¯´æ˜ï¼šyumé€‰é¡¹åŠ å…¥â€œ-yâ€æ˜¯å¯¹æ‰€æœ‰çš„æé—®éƒ½å›ç­”â€œyesâ€ï¼Œå¯ä»¥é¿å…åœ¨å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°çš„åå¤ç¡®è®¤ï¼Œä»è€ŒåŠ å¿«å®‰è£…é€Ÿåº¦ã€‚java-1.8.0-openjdkå’Œjava-1.8.0-openjdk-develä¸¤ä¸ªåŒ…å°†è¢«ä¸€èµ·å®‰è£…ï¼ŒåŒæ—¶æ‰€éœ€çš„ä¾èµ–ä¹Ÿä¼šè¢«å®‰è£…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ &#xa0; å›¾6.3 å®‰è£…JDK ç­‰å¾…å®‰è£…å®Œæˆï¼Œå¯ä»¥çœ‹åˆ°java-1.8.0-openjdkå’Œjava-1.8.0-openjdk-develå·²ç»å®‰è£…ï¼Œå¹¶ä¸”5ä¸ªä¾èµ–åŒ…ä¹Ÿä¸€å¹¶è¢«å®‰è£…ã€‚ 6.2.3.æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ è¾“ï¼š[root@master ~]#java -version &#xa0; è¾“ï¼š[root@master ~]#javac -version å›¾6.4 æˆåŠŸå®‰è£…JDK è¯´æ˜ï¼šyumæ–¹å¼å®‰è£…JDKï¼Œå…¶é»˜è®¤è·¯å¾„æ˜¯/usr/lib/jvmï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾6.5 JDKå®‰è£…è·¯å¾„ &#xa0; 6.2.4.é…ç½®ç¯å¢ƒå˜é‡ç¼–è¾‘/etc/profileæ–‡ä»¶ è¾“ï¼š[root@master ~]#vi /etc/profile &#xa0; æœ«å°¾å¤„æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼ˆæ–‡ä»¶ä¸­ # ä»£è¡¨æ³¨é‡Šï¼‰ï¼š JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64 PATH=\\$PATH:\\$JAVA_HOME/bin CLASSPATH=.:\\$JAVA_HOME/lib/dt.jar:\\$JAVA_HOME/lib/tools.jar export JAVA_HOME CLASSPATH PATH &#xa0; ä½¿é…ç½®ç”Ÿæ•ˆï¼ˆä¹Ÿå¯é‡å¯è™šæ‹Ÿæœºï¼‰ï¼š è¾“ï¼š[root@master ~]#source /etc/profile &#xa0; ä½¿ç”¨echoå‘½ä»¤æŸ¥çœ‹JDKå˜é‡ï¼š è¾“ï¼š[root@master ~]#echo $JAVA_HOME &#xa0; è¾“ï¼š[root@master ~]#echo $PATH &#xa0; è¾“ï¼š[root@master ~]#echo $CLASSPATH &#xa0; è®¾ç½®å®Œæˆåå¦‚å›¾æ‰€ç¤ºï¼š å›¾6.6 é…ç½®JDKç¯å¢ƒå˜é‡ 6.3.Slave1å’ŒSlave2å®‰è£…JDKå®‰è£…æ­¥éª¤å’ŒMasterç›¸åŒï¼Œä¹Ÿå¯å°†Masterå®‰è£…æ–‡ä»¶å¤¹è¿œç¨‹æ‹·è´è‡³Slave1å’ŒSlave2èŠ‚ç‚¹ï¼ˆä¸æ¨èï¼Œå› ä¸ºé‡‡ç”¨yumå®‰è£…ä¸ä»…ä»…åœ¨/usr/lib/jvmæ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚å›¾ï¼‰ï¼ŒæŒ‰6.2èŠ‚æ­¥éª¤å³å¯ã€‚ å›¾6.7 JDKå®‰è£…æ–‡ä»¶ä½ç½® 7.é…ç½®SSHå…å¯†ç ç™»å½•åœ¨ Hadoop é›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´éœ€è¦ä½¿ç”¨ SSH é¢‘ç¹åœ°è¿›è¡Œé€šä¿¡ï¼Œä¸ºäº†é¿å…æ¯æ¬¡çš„é€šä¿¡éƒ½è¦æ±‚è¾“å…¥å¯†ç ï¼Œéœ€è¦å¯¹å„ä¸ªèŠ‚ç‚¹è¿›è¡Œ SSH å…å¯†ç ç™»å½•é…ç½®ã€‚ 7.1.å¼€å¯sshdå¯†é’¥è®¤è¯åœ¨è¿›è¡ŒSSHå…å¯†ç ç™»å½•é…ç½®ä¹‹å‰ï¼Œéœ€è¦å…ˆå¼€å¯ sshdå¯†é’¥è®¤è¯ã€‚ç¼–è¾‘æ¯ä¸€å°æœºå™¨ï¼ˆä»¥Testerä¸ºä¾‹ï¼‰çš„ /etc/ssh/sshd_config æ–‡ä»¶ï¼Œå»æ‰åŸæ–‡ä»¶ä¸‹é¢è¿™3è¡Œå‰çš„â€œ#â€æ³¨é‡Šã€‚ æ—§ï¼šâ‘ # RSAAuthentication &nbsp;&nbsp;&nbsp;&nbsp;yes &nbsp;&nbsp;â‘¡# PubkeyAuthentication &nbsp;yes &nbsp;&nbsp;â‘¢# AuthorizedKeysFile.ssh/authorized_keys æ³¨æ„ï¼š/etc/ssh/sshd_configæ–‡ä»¶å†…å®¹å¦‚å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°åªæœ‰ä¸Šè¿°ä¸‰è¡Œä¸­çš„â‘¡â‘¢è¡Œï¼Œå¹¶æ²¡æœ‰â‘ # RSAAuthentication yesã€‚è¿™æ˜¯å› ä¸ºç¬¬1ä»£sshé€šè®¯åè®®ä½¿ç”¨çš„é…ç½®é¡¹RSAè®¤è¯ï¼ˆRSAAuthenticationï¼‰å·²åºŸé™¤ï¼Œç¬¬2ä»£sshé€šè®¯åè®®çš„å¯†é’¥éªŒè¯æ˜¯PubkeyAuthenticationã€‚è€Œä¸”ç¬¬â‘¢è¡Œé»˜è®¤æ˜¯å¼€å¯çš„ï¼ˆå¦‚å›¾ç¬¬47è¡Œï¼‰ï¼Œæ•…åªéœ€å»æ‰ä¸Šè¿°ç¬¬â‘¡è¡Œçš„æ³¨é‡Šï¼ˆå¯¹åº”æ–‡ä»¶ç¬¬43è¡Œï¼Œå¦‚å›¾æ‰€ç¤ºï¼‰ã€‚å‚è€ƒæ–‡ç« ï¼šhttps://www.cnblogs.com/Leroscox/p/9627809.html å›¾7.1 sshdé…ç½®æ–‡ä»¶ &#xa0; ç»¼ä¸Šæ‰€è¿°ï¼Œç¼–è¾‘ /etc/ssh/sshd_config æ–‡ä»¶ï¼Œå»æ‰ç¬¬43è¡Œæ³¨é‡Šå³å¯ï¼Œå¦‚ä¸Šå›¾â‘ å¤„ã€‚å¦å¤–ï¼ŒæŒ‰ä¸Šè¿°æ–‡ç« ï¼Œè¿˜åº”å…è®¸rootè®¤è¯ç™»é™†ï¼ˆPermitRootLoginï¼‰ï¼Œå»æ‰ç¬¬38è¡Œæ³¨é‡Šå³å¯ï¼Œå¦‚ä¸Šå›¾â‘¢å¤„ã€‚ è¾“ï¼š[root@tester ~]#vi /etc/ssh/sshd_config &#xa0; è®¾ç½®å®Œæˆä¿å­˜åï¼Œé‡å¯sshdæœåŠ¡ï¼š è¾“ï¼š[root@tester ~]#systemctl restart sshd æ³¨ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦é…ç½®ã€‚ &#xa0; 7.2.åˆ›å»ºå…å¯†ç ç™»å½•è´¦æˆ·ç”±äºHadoop é›†ç¾¤ä¸­çš„å„èŠ‚ç‚¹é»˜è®¤ä¼šä½¿ç”¨å½“å‰çš„è´¦å·SSHå…å¯†ç ç™»å½•å…¶å®ƒèŠ‚ç‚¹ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­åˆ›å»ºä¸€ä¸ªç›¸åŒçš„ä¾› Hadoop é›†ç¾¤ä¸“ç”¨çš„è´¦æˆ·ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„è´¦æˆ·ä¸º hadoop ã€‚ æ³¨ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦åˆ›å»ºhadoopç”¨æˆ·ï¼Œè‡³æ­¤æ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰rootå’Œhadoopä¸¤ä¸ªç”¨æˆ·ã€‚ åˆ›å»ºç”¨æˆ·ï¼š è¾“ï¼š[root@tester ~]#useradd hadoop &#xa0; è®¾ç½®å¯†ç ï¼š è¾“ï¼š[root@tester ~]#passwd hadoop &#xa0; å¦‚å›¾æ‰€ç¤ºï¼š å›¾7.2 åˆ›å»ºhadoopç”¨æˆ·å¹¶è®¾ç½®å¯†ç  &#xa0; 7.3.ç”Ÿæˆå…¬é’¥å¯†é’¥å¯¹åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šåˆ†åˆ«æ‰§è¡Œï¼ˆä»¥Testerä¸ºä¾‹ï¼‰ï¼š é¦–å…ˆåˆ‡æ¢åˆ°hadoopç”¨æˆ·ï¼ˆæ³¨æ„æç¤ºç¬¦ï¼Œ# è¡¨ç¤ºrootç”¨æˆ·ï¼Œ$ è¡¨ç¤ºä¸€èˆ¬ç”¨æˆ·ï¼‰ï¼š è¾“ï¼š[root@tester ~]#su hadoop &#xa0; ç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œæ ¹æ®æç¤ºæŒ‰ä¸‰æ¬¡å›è½¦é”®ç›´åˆ°ç”Ÿæˆç»“æŸï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ è¾“ï¼š[hadoop@tester root]$ ssh-keygen -t rsa &#xa0; å›¾7.3 TesterèŠ‚ç‚¹ä¸Šç”Ÿæˆå…¬é’¥å¯†é’¥å¯¹ &#xa0; åœ¨Masterã€Slave1å’ŒSlave2ä¸‰ä¸ªèŠ‚ç‚¹ä¸Šåˆ†åˆ«éƒ½æ‰§è¡Œä¸Šè¿°æ­¥éª¤åï¼ˆä»¥hadoopç”¨æˆ·èº«ä»½ï¼‰ï¼Œä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹çš„/home/hadoop/.sshç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶id_rsaå’Œid_rsa.pubï¼Œå…¶ä¸­å‰è€…ä¸ºç§é’¥ï¼Œåè€…ä¸ºå…¬é’¥ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ Slave1èŠ‚ç‚¹ä¸Šç”Ÿæˆå…¬é’¥å¯†é’¥å¯¹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾7.4 Slave1èŠ‚ç‚¹ä¸Šåˆ›å»ºhadoopç”¨æˆ·å¹¶ç”Ÿæˆå…¬é’¥å¯†é’¥å¯¹ &#xa0; Slave2èŠ‚ç‚¹ä¸Šç”Ÿæˆå…¬é’¥å¯†é’¥å¯¹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾7.5 Slave2èŠ‚ç‚¹ä¸Šåˆ›å»ºhadoopç”¨æˆ·å¹¶ç”Ÿæˆå…¬é’¥å¯†é’¥å¯¹ 7.4.å°†å…¬é’¥å¯¼å…¥è®¤è¯æ–‡ä»¶å¯†é’¥ç”Ÿæˆä¹‹åï¼Œéœ€è¦å°†æ¯å°æœºå™¨çš„å…¬é’¥éƒ½æ‹·è´åˆ°ä¸»èŠ‚ç‚¹çš„è®¤è¯æ–‡ä»¶ authorized_keys ä¸­ï¼Œä»¥ä¸‹æ“ä½œéƒ½åœ¨ä¸»èŠ‚ç‚¹Masterä¸Šç”±hadoopç”¨æˆ·å®Œæˆï¼ˆå¦‚å›¾7-6æ‰€ç¤ºï¼‰ã€‚ â‘ å°†Masterçš„å…¬é’¥å¯¼å…¥ä¸»èŠ‚ç‚¹çš„è®¤è¯æ–‡ä»¶ä¸­ï¼š è¾“ï¼š[hadoop@master ~]$ cat /home/hadoop/.ssh/id_rsa.pub &gt;&gt; /home/hadoop/.ssh/authorized_keys â‘¡å°†Slave1çš„å…¬é’¥å¯¼å…¥ä¸»èŠ‚ç‚¹çš„è®¤è¯æ–‡ä»¶ä¸­ï¼ˆæ ¹æ®æç¤ºè¾“å…¥â€œyesâ€åŠå¯†ç ï¼‰ï¼š è¾“ï¼š[hadoop@master ~]$ ssh hadoop@slave1 cat /home/hadoop/.ssh/id_rsa.pub &gt;&gt; /home/hadoop/.ssh/authorized_keys â‘¢å°†Slave2çš„å…¬é’¥å¯¼å…¥ä¸»èŠ‚ç‚¹çš„è®¤è¯æ–‡ä»¶ä¸­ï¼ˆæ ¹æ®æç¤ºè¾“å…¥â€œyesâ€åŠå¯†ç ï¼‰ï¼š è¾“ï¼š[hadoop@master ~]$ ssh hadoop@slave2 cat /home/hadoop/.ssh/id_rsa.pub &gt;&gt; /home/hadoop/.ssh/authorized_keys â‘£å„èŠ‚ç‚¹çš„å…¬é’¥å¯¼å…¥å®Œæˆåï¼ŒæŸ¥çœ‹è®¤è¯æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°å„ä¸ªèŠ‚ç‚¹çš„hadoopç”¨æˆ·çš„å…¬é’¥ä¿¡æ¯ï¼Œå¦‚å›¾7-6æ‰€ç¤ºã€‚ è¾“ï¼š[hadoop@master ~]$ cat /home/hadoop/.ssh/authorized_keys å›¾7.6 å°†æ¯å°æœºå™¨çš„å…¬é’¥éƒ½æ‹·è´åˆ°ä¸»èŠ‚ç‚¹çš„è®¤è¯æ–‡ä»¶ä¸­ 7.5.è®¾ç½®æƒé™å¹¶è¡¥å…¨Masterä¿¡æ¯åœ¨ Master ä¸»æœºä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯¹è®¤è¯æ–‡ä»¶çš„æ“ä½œæƒé™è¿›è¡Œè®¾ç½®ï¼Œå¦‚å›¾7.7æ‰€ç¤ºï¼š è¾“ï¼š[hadoop@master ~]$ chmod 700 /home/hadoop/.ssh è¾“ï¼š[hadoop@master ~]$ chmod 600 /home/hadoop/.ssh/authorized_keys æŸ¥çœ‹known_hostsæ–‡ä»¶ä¸­ä¸»æœºåˆ—è¡¨ï¼Œå‘ç°åªæœ‰Slave1å’ŒSlave2è€Œæ²¡æœ‰Masterè‡ªèº«ï¼ˆå¦‚å›¾7.7æ‰€ç¤ºç®­å¤´å¤„ï¼‰ï¼Œæ‰€ä»¥éœ€è¦åœ¨Masterä¸»æœºä¸Šsshå…å¯†ç™»å½•è‡ªå·±ï¼Œå°†è‡ªèº«çš„ä¸»æœºä¿¡æ¯æ·»åŠ åˆ°known_hostsåˆ—è¡¨ä¸­ã€‚ è¾“ï¼š[hadoop@master ~]$ ssh master æ³¨æ„ï¼šç™»é™†æˆåŠŸåçš„çŠ¶æ€æ˜¯ä»¥hadoop@masterçš„èº«ä»½sshç™»é™†hadoop@masterï¼Œæ‰€ä»¥æç¤ºç¬¦éƒ½æ˜¯[hadoop@master ~]$ã€‚ç™»é™†æˆåŠŸåå³å°†å…¶ä¿¡æ¯å†™å…¥åˆ°known_hostsæ–‡ä»¶ä¸­ï¼ˆæ³¨æ„sshç™»é™†æ—¶çš„è­¦å‘Šï¼‰ï¼Œæ‰€ä»¥è¿˜è¦è¾“å…¥exité€€å‡ºè¿œç¨‹ç™»é™†å›åˆ°å½“å‰çš„hadoop@masterèº«ä»½ã€‚ é€€å‡ºåï¼Œå†æ¬¡æŸ¥çœ‹known_hostsæ–‡ä»¶ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å·²æˆåŠŸå°†MasterèŠ‚ç‚¹ä¿¡æ¯å†™å…¥å…¶ä¸»æœºåˆ—è¡¨ä¸­ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾7.7 è®¾ç½®è®¤è¯æ–‡ä»¶æƒé™å¹¶åœ¨known_hostsä¸­è¡¥å…¨Masterä¿¡æ¯ &#xa0; 7.6.å°†è®¤è¯æ–‡ä»¶å¤åˆ¶åˆ°slaveèŠ‚ç‚¹åœ¨ Master ä¸»æœºä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†ç”Ÿæˆçš„ authorized_keys æ–‡ä»¶ä» Master ä¸»æœºå¤åˆ¶åˆ° Slave1 å’Œ Slave2 èŠ‚ç‚¹ï¼Œå¦‚å›¾7.8æ‰€ç¤ºã€‚ è¾“ï¼š[hadoop@master ~]$ scp /home/hadoop/.ssh/authorized_keys hadoop@slave1:/home/hadoop/.ssh/authorized_keys è¾“ï¼š[hadoop@master ~]$ scp /home/hadoop/.ssh/authorized_keys hadoop@slave2:/home/hadoop/.ssh/authorized_keys åœ¨ Master ä¸»æœºä¸Šæµ‹è¯•sshè¿œç¨‹ç™»é™†Slave1 å’Œ Slave2 èŠ‚ç‚¹ï¼Œå¦‚å›¾7.8æ‰€ç¤ºï¼Œå¯ä»¥å‘ç°ä¸éœ€è¦ç™»é™†å¯†ç äº†ã€‚ è¾“ï¼š[hadoop@master ~]$ ssh slave1 è¾“ï¼š[hadoop@master ~]$ ssh slave2 å›¾7.8 å°†è®¤è¯æ–‡ä»¶å¤åˆ¶åˆ°å…¶ä»–èŠ‚ç‚¹å¹¶è¿œç¨‹ç™»é™†æµ‹è¯• &#xa0; åœ¨ Master ä¸»æœºä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†ç”Ÿæˆçš„ known_hosts æ–‡ä»¶ä» Master ä¸»æœºå¤åˆ¶åˆ° Slave1 å’Œ Slave2 èŠ‚ç‚¹ã€‚ è¾“ï¼š[hadoop@master ~]$ scp /home/hadoop/.ssh/known_hosts hadoop@slave1:/home/hadoop/.ssh/known_hosts è¾“ï¼š[hadoop@master ~]$ scp /home/hadoop/.ssh/ known_hosts hadoop@slave2:/home/hadoop/.ssh/known_hosts &#xa0; 7.7.è®¾ç½®ä»èŠ‚ç‚¹è®¤è¯æ–‡ä»¶æƒé™è®¾ç½®ä»èŠ‚ç‚¹Slave1è®¤è¯æ–‡ä»¶æƒé™ï¼š è¾“ï¼š[hadoop@slave1 ~]$ chmod 700 /home/hadoop/.ssh è¾“ï¼š[hadoop@slave1 ~]$ chmod 600 /home/hadoop/.ssh/authorized_keys &#xa0; è®¾ç½®ä»èŠ‚ç‚¹Slave2è®¤è¯æ–‡ä»¶æƒé™ï¼š è¾“ï¼š[hadoop@slave2 ~]$ chmod 700 /home/hadoop/.ssh è¾“ï¼š[hadoop@slave2 ~]$ chmod 600 /home/hadoop/.ssh/authorized_keys 7.8.ä¸‰èŠ‚ç‚¹äº’ç›¸sshç™»é™†æµ‹è¯•Masterç™»é™†Slave1åŠSlave2ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å›¾7.9 Masterç™»é™†Slave1åŠSlave2 Slave1ç™»é™†MasteråŠSlave2ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å›¾7.10 Slave1ç™»é™†MasteråŠSlave2 Slave2ç™»é™†MasteråŠSlave1ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å›¾7.11 Slave2ç™»é™†MasteråŠSlave1 &#xa0; 8.å®‰è£…HadoopHadoopå®‰è£…å…¶å®å°±æ˜¯ä¸€ä¸ªå°†ä¸‹è½½å¥½çš„Hadoopå‹ç¼©åŒ…è§£å‹åˆ°æ‰€æœ‰æœåŠ¡å™¨ä¸Šå¹¶è¿›è¡Œé…ç½®çš„è¿‡ç¨‹ï¼Œæ¨èå°†Hadoopå®‰è£…åœ¨å„ä¸ªèŠ‚ç‚¹æœåŠ¡å™¨çš„ç›¸åŒç›®å½•ä¸‹æ–¹ä¾¿é…ç½®ã€‚ æˆ‘ä»¬ä½¿ç”¨çš„Hadoopç‰ˆæœ¬æ˜¯hadoop-2.7.7ï¼ŒæŒ‡å®šçš„Hadoopçš„å®‰è£…ç›®å½•ï¼ˆä»¥rootèº«ä»½å®‰è£…ï¼‰æ˜¯/usr/local/hadoop-2.7.7ã€‚ 8.1.ä¸‹è½½å‹ç¼©åŒ…å¯ä»å®˜ç½‘ä¸‹è½½å‹ç¼©åŒ…ï¼Œä¸‹è½½åœ°å€ï¼š https://www-us.apache.org/dist/hadoop/common/hadoop-2.7.7/hadoop-2.7.7.tar.gz æ¨èä»æœ¬åœ°é•œåƒç«™ç‚¹ä¸‹è½½ï¼Œä¸ä»…ç¨³å®šè€Œä¸”ä¸‹è½½é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚å¯ä»æ¸…åå¤§å­¦é•œåƒç«™ä¸‹è½½å‹ç¼©åŒ…ï¼ˆè€—æ—¶38sï¼‰ï¼Œä¸‹è½½åœ°å€ï¼š https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-2.7.7/hadoop-2.7.7.tar.gz &#xa0; åˆ©ç”¨wgetä¸‹è½½ï¼Œå¿…é¡»é¦–å…ˆå®‰è£…wgetï¼ˆä»¥æµ‹è¯•æœºTesterä¸ºä¾‹ï¼‰ï¼š è¾“ï¼š[root@tester ~]# yum â€“y install wget &#xa0; æ³¨æ„ï¼šåˆ©ç”¨wgetä¸‹è½½æ˜¯å°†æ–‡ä»¶ä¸‹è½½åˆ°å½“å‰ç›®å½•ï¼Œå› æ­¤è¦å…ˆè¿›å…¥ /usr/local ç›®å½•ï¼Œç„¶åæ‰§è¡Œä¸‹è½½å‘½ä»¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ è¾“ï¼š[root@tester ~]# cd /usr/local &#xa0; è¾“ï¼š[root@tester local]# wget https://mirrors.tuna.tsinghua.edu.cn/apache/ hadoop/common/hadoop-2.7.7/hadoop-2.7.7.tar.gz &#xa0; ä¸‹è½½å®Œæˆåï¼Œåœ¨/usr/localè·¯å¾„ä¸‹å°±æœ‰äº†è¯¥å‹ç¼©åŒ…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾8.1 Testerä¸‹è½½Hadoopå‹ç¼©åŒ… &#xa0; 8.2.è§£å‹Hadoopå‹ç¼©åŒ…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è§£å‹Hadoopå‹ç¼©åŒ…ï¼š è¾“ï¼š[root@tester local]# tar zxvf hadoop-2.7.7.tar.gz &#xa0; ç­‰å¾…è§£å‹å®Œæˆï¼Œä¼šåœ¨å½“å‰ç›®å½•/usr/localå¤šå‡ºä¸€ä¸ªhadoop-2.7.7æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å³ä¸ºè§£å‹çš„å†…å®¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾8.2 è§£å‹Hadoopå‹ç¼©åŒ… &#xa0; 8.3.æ›´æ”¹ç”¨æˆ·ç»„ç”±äºè§£å‹æ—¶ä½¿ç”¨çš„æ˜¯ root è´¦æˆ·ï¼Œæ‰€ä»¥è¿˜éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†Hadoopçš„å®‰è£…ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„æ”¹ä¸º hadoopï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@tester local]# chown -R hadoop:hadoop /usr/local/hadoop-2.7.7 &#xa0; æ³¨â‘ ï¼šåœ¨å›¾8.3ä¸­ï¼ŒæŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ä¸­çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„ï¼Œç¬¬ä¸€ä¸ªrootä¸ºæ‰€å±ç”¨æˆ·ï¼ˆUserï¼‰ï¼Œç¬¬äºŒä¸ªrootä¸ºæ‰€å±ç»„ï¼ˆGroupï¼‰ã€‚ æ³¨â‘¡ï¼šå®‰è£…Hadoopã€Scalaå’ŒSparkæ—¶ï¼Œéƒ½æ˜¯ä»¥rootç”¨æˆ·çš„èº«ä»½å®‰è£…ï¼Œä½†åœ¨å®é™…ä¸­æ“ä½œHadoopæ˜¯ä»¥hadoopç”¨æˆ·çš„èº«ä»½è¿è¡Œçš„ï¼Œå› æ­¤åœ¨Hadoopã€Scalaå’ŒSparkå®‰è£…å®Œæˆåéƒ½éœ€è¦æ›´æ”¹ç”¨æˆ·ç»„ï¼ˆåæ–‡ä¹Ÿæœ‰è¯´æ˜ï¼‰ã€‚ å›¾8.3 æ›´æ”¹ç”¨æˆ·ç»„ 8.4.é…ç½®ç¯å¢ƒå˜é‡ç¼–è¾‘é…ç½®æ–‡ä»¶ /etc/profile ä»¥é…ç½®ç¯å¢ƒå˜é‡ï¼š è¾“ï¼š[root@tester local]# vi /etc/profile åœ¨æœ«å°¾å¤„åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š export HADOOP_HOME=/usr/local/hadoop-2.7.7 PATH=\\$PATH:\\$HOME/.local/bin:\\$HOME/bin:\\$HADOOP_HOME/bin:$HADOOP_HOME/sbin export PATH ä¿å­˜é€€å‡ºåï¼Œä½¿ä¹‹ç”Ÿæ•ˆï¼š è¾“ï¼š[root@tester local]# source /etc/profile ç”±æ­¤å®Œæˆå®‰è£…ï¼ŒæŸ¥çœ‹Hadoopç‰ˆæœ¬ä¿¡æ¯ï¼š è¾“ï¼š[root@tester local]# hadoop version è¯´æ˜ï¼šç”±äºTesteræœªå®‰è£…javaç¯å¢ƒï¼ˆè§6.1ï¼‰ï¼Œå› æ­¤çœ‹ä¸åˆ°Hadoopç‰ˆæœ¬ä¿¡æ¯ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼šError: JAVA_HOME is not set and could not be foundï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾8.4 é…ç½®hadoopç¯å¢ƒå˜é‡ &#xa0; 8.5.å®é™…å®‰è£…Hadoopçš„è¯´æ˜8.5.1.å®‰è£…ä½ç½®çš„é—®é¢˜Masterå®‰è£…Hadoopæ—¶ï¼Œåœ¨ /usr/local ç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ hadoop-2.7.7ï¼Œä½¿å¾—å°†å‹ç¼©åŒ…æ”¾åˆ°äº†/usr/local/hadoop-2.7.7ä¸‹è€Œä¸æ˜¯ /usr/localï¼Œå¯¼è‡´è§£å‹åå˜æˆäº†/usr/local/hadoop-2.7.7/hadoop-2.7.7ï¼Œè€Œä¸æ˜¯/usr/local/hadoop-2.7.7ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆå›¾ä¸­åº”è¯¥æ˜¯åˆ›å»º/usr/localæ–‡ä»¶å¤¹ï¼‰ã€‚ å›¾8.5 Masterä¸‹è½½Hadoopå‹ç¼©åŒ…ï¼ˆæ ‡æ³¨æœ‰è¯¯ï¼‰ åˆ©ç”¨scpè¿œç¨‹æ‹·è´æ–‡ä»¶æ—¶ä¹ŸçŠ¯äº†åŒæ ·çš„é”™è¯¯ï¼Œéƒ½æ˜¯æ‹·è´åˆ°äº†/usr/local/hadoop-2.7.7ä¸‹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å›¾8.6 Masterè¿œç¨‹ä¸Šä¼ Hadoopå‹ç¼©åŒ…è‡³Slave1åŠSlave2ï¼ˆä½ç½®é”™è¯¯ï¼‰ &#xa0; å›¾8.7 Slave1èŠ‚ç‚¹ä¼ è¾“å‰åï¼ˆä½ç½®é”™è¯¯ï¼‰ &#xa0; å›¾8.8 Slave2èŠ‚ç‚¹ä¼ è¾“å‰åï¼ˆä½ç½®é”™è¯¯ï¼‰ &#xa0; 8.5.2è§£å†³å®‰è£…ä½ç½®çš„é—®é¢˜å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œé¦–å…ˆå°†ä½äº/usr/local/hadoop-2.7.7ä¸‹çš„å‹ç¼©åŒ…ç§»åŠ¨åˆ°/usr/localï¼Œç„¶ååˆ é™¤hadoop-2.7.7æ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæˆªå›¾ä¸ºSlave2ï¼‰ï¼š å›¾8.9 è§£å†³å®‰è£…ä½ç½®çš„é—®é¢˜ è§£å‹å®Œæˆååˆ é™¤å‹ç¼©åŒ…ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆæˆªå›¾ä¸ºSlave2ï¼‰ï¼š å›¾8.10 è§£å‹å®Œæˆååˆ é™¤å‹ç¼©åŒ… &#xa0; 8.5.3.å„ä¸ªèŠ‚ç‚¹â‘ æ›´æ”¹ä½ç½®ï¼Œå¦‚ä¸Š8.5.2èŠ‚ï¼› â‘¡è§£å‹hadoop-2.7.7.tar.gzæ–‡ä»¶ï¼Œå®Œæˆååˆ é™¤å‹ç¼©åŒ…ï¼› â‘¢æ›´æ”¹ç”¨æˆ·ç»„ä¸ºhadoopï¼› â‘£é…ç½®ç¯å¢ƒå˜é‡å¹¶ä½¿ä¹‹ç”Ÿæ•ˆï¼› â‘¤æŸ¥çœ‹Hadoopç‰ˆæœ¬ã€‚ è®¾ç½®å®Œæˆåå¦‚å›¾8.11~8.13æ‰€ç¤ºï¼š å›¾8.11 MasterèŠ‚ç‚¹ å›¾8.12 Slave1èŠ‚ç‚¹ å›¾8.13 Slave2èŠ‚ç‚¹ &#xa0; 8.5.4.ä»èŠ‚ç‚¹Hadoopçš„å®‰è£…å½“ä¸»èŠ‚ç‚¹Masterå®‰è£…å®Œæˆåï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨scpå°†æ•´ä¸ª/usr/local/hadoop-2.7.7æ–‡ä»¶å¤¹ä¼ åˆ°ä»èŠ‚ç‚¹Slave1å’ŒSlave2ï¼Œè€Œä¸éœ€è¦å†æ¬¡å®‰è£…ã€‚ &#xa0; 9.é…ç½®Hadoopé›†ç¾¤Hadoopé›†ç¾¤çš„é…ç½®æ–‡ä»¶ä½äº/usr/local/hadoop-2.7.7/etc/hadoopæ–‡ä»¶å¤¹ä¸‹ï¼Œé»˜è®¤é…ç½®ä¸éœ€è¦ä¿®æ”¹ï¼Œä¸»è¦é…ç½®èŠ‚ç‚¹çš„ä¸ªæ€§é…ç½®ï¼Œå³â‘ core-site.xmlï¼Œâ‘¡hdfs-site.xmlï¼Œâ‘¢mapred-site.xml.templateå’Œâ‘£yarn-site.xmlå››ä¸ªæ–‡ä»¶ï¼Œä»¥åŠâ‘¤slaveså’Œâ‘¥hadoop-env.shä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾9.1 éœ€è¦é…ç½®çš„6ä¸ªæ–‡ä»¶ 9.1.é…ç½®core-site.xmlç¼–è¾‘Hadoopé…ç½®æ–‡ä»¶/usr/local/hadoop-2.7.7/etc/hadoop/core-site.xmlï¼Œåœ¨&lt;configuration&gt;å’Œ&lt;/configuration&gt;ä¹‹é—´åŠ å…¥ä»¥ä¸‹é…ç½®å†…å®¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆå…¶ä¸­ï¼ŒæŒ‰â€œTabâ€é”®ç¼©è¿›ï¼Œ&lt;!â€” xxx â€”&gt;çš„å†…å®¹ä¸ºæ³¨é‡Šï¼‰ï¼š &lt;configuration&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- The name of the default file system --&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;fs.defaultFS&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;hdfs://master:9000&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- The size of buffer for use in sequence files --&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;io.file.buffer.size&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;131072&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- A base for other temporary directories --&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:/usr/local/hadoop-2.7.7/tmp&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &lt;/configuration&gt; å›¾9.2 é…ç½®core-site.xmlæ–‡ä»¶ &#xa0; 9.2.é…ç½®hdfs-site.xmlç¼–è¾‘/usr/local/hadoop-2.7.7/etc/hadoop/hdfs-site.xmlæ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹é…ç½®å†…å®¹ï¼Œå¦‚å›¾9.3æ‰€ç¤ºï¼š &lt;configuration&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;file:/usr/local/hadoop-2.7.7/data/namespace&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Path on the local filesystem where the NameNode stores&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;/usr/local/hadoop-2.7.7/data/dataspace&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Path on the local filesystem where the DataNode stores Data&lt;/description&gt;/span> &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;/span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;slave1:50090&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;The secondary namenode http server address and port&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.webhdfs.enabled&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;true&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Enable WebHDFS (REST API) in Namenodes and Datanodes&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.permissions&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;false&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Disable permission checking in HDFS&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;dfs.replication&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;2&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Default block replication&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &lt;/configuration&gt; å›¾9.3 é…ç½®hdfs-site.xmlæ–‡ä»¶ &#xa0; 9.3.é…ç½®mapred-site.xmlç¼–è¾‘/usr/local/hadoop-2.7.7/etc/hadoop/mapred-site.xml.templateæ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹é…ç½®å†…å®¹ï¼Œå¦‚å›¾9.4æ‰€ç¤ºï¼š è¯´æ˜ï¼šæ­¤æ¨¡æ¿æ–‡ä»¶mapred-site.xml.templateåº”å°†å…¶é‡å‘½åä¸ºmapred-site.xmlã€‚ &lt;configuration&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;mapreduce.framework.name&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;yarn&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;The runtime framework for executing MapReduce jobs&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &lt;/configuration&gt; å›¾9.4 é…ç½®mapred-site.xml.templateæ–‡ä»¶ &#xa0; 9.4.é…ç½®yarn-site.xmlç¼–è¾‘/usr/local/hadoop-2.7.7/etc/hadoop/yarn-site.xmlæ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹é…ç½®å†…å®¹ï¼Œå¦‚å›¾9.5æ‰€ç¤ºï¼š &lt;configuration&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;slave2:8030&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;The address of the scheduler interface&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;slave2:8031&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;The address and port of Resource Manager of YARN at Slave2&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.address&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;slave2:8032&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;The address of the applications manager interface in the RM&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;slave2:8033&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;The address of the RM admin interface&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;slave2:8088&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;The http address of the RM web application&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &#xa0; &nbsp;&nbsp;&nbsp;&nbsp;&lt;property&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;mapreduce_shuffle&lt;/value&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;final&gt;true&lt;/final&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Node Manager of YARN&lt;/description&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt; &lt;/configuration&gt; å›¾9.5 é…ç½®yarn-site.xmlæ–‡ä»¶ &#xa0; 9.5.é…ç½®slavesç¼–è¾‘/usr/local/hadoop-2.7.7/etc/hadoop/slavesæ–‡ä»¶ï¼Œåˆ é™¤åŸæœ‰çš„localhostï¼ˆä¹Ÿå¯ä»¥ç›´æ¥æ³¨é‡Šæ‰ï¼‰åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master ~]#vi /usr/local/hadoop-2.7.7/etc/hadoop/slaves &#xa0; æ—§ï¼šlocalhost &#xa0; æ–°ï¼šmaster &nbsp;&nbsp;&nbsp;&nbsp;slave1 &nbsp;&nbsp;&nbsp;&nbsp;slave2 å›¾9.6 é…ç½®slavesæ–‡ä»¶ &#xa0; 9.6.é…ç½®hadoop-env.shç¼–è¾‘/usr/local/hadoop-2.7.7/etc/hadoop/hadoop-env.shæ–‡ä»¶ï¼Œå°†â€œ# The java implementation to use.â€ä¸‹çš„â€œexport JAVA_HOME=${JAVA_HOME}â€ä¿®æ”¹ä¸ºï¼šexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64ã€‚ å…¶ä¸­ï¼Œè·¯å¾„/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64ä¸ºå®‰è£…Javaæ—¶è®¾ç½®çš„ç¯å¢ƒå˜é‡ï¼ˆè§6.2.4èŠ‚ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾9.7 é…ç½®hadoop-env.shæ–‡ä»¶ &#xa0; 9.7.å°†é…ç½®åˆ†å‘åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šè¿°9.1~9.6éƒ½æ˜¯åœ¨ä¸»èŠ‚ç‚¹Masterä¸Šé…ç½®ï¼Œå› æ­¤éœ€è¦å°†å…¶åˆ†å‘åˆ°Slave1å’ŒSlave2ä¸¤ä¸ªä»èŠ‚ç‚¹ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ è¾“ï¼š[root@master ~]#scp -r /usr/local/hadoop-2.7.7/etc/hadoop/* slave1:/usr/local/hadoop-2.7.7/etc/hadoop/ &#xa0; è¾“ï¼š[root@master ~]#scp -r /usr/local/hadoop-2.7.7/etc/hadoop/* slave2:/usr/local/hadoop-2.7.7/etc/hadoop/ å›¾9.8 å°†Masteré…ç½®åˆ†å‘åˆ°Slave1å’ŒSlave2èŠ‚ç‚¹ &#xa0; è¯´æ˜ï¼šä¸Šå›¾ä¸­ï¼Œå°šæœªé…ç½®/usr/local/hadoop-2.7.7/etc/hadoop/hadoop-env.shæ–‡ä»¶ï¼Œå› æ­¤scpåéœ€è¦å¯¹æ¯ä¸ªèŠ‚ç‚¹çš„hadoop-env.shæ–‡ä»¶è¿›è¡Œé…ç½®ã€‚è‹¥å…ˆå°†Masterä¸Šçš„æ­¤æ–‡ä»¶é…ç½®å¥½ï¼Œç„¶åscpåˆ°ä»èŠ‚ç‚¹ï¼Œåˆ™ä¸éœ€åœ¨ä»èŠ‚ç‚¹ä¸Šé…ç½®è¯¥æ–‡ä»¶ã€‚ &#xa0; 10.æ“ä½œHadoopé›†ç¾¤è¯´æ˜ï¼šä»¥ä¸‹æ“ä½œHadoopé›†ç¾¤éƒ½æ˜¯ä½¿ç”¨hadoopç”¨æˆ·ï¼Œæç¤ºç¬¦ä¸º[hadoop@master ~]$ã€‚ 10.1.æ ¼å¼åŒ–NameNodeç¬¬ä¸€æ¬¡å¯åŠ¨HDFSéœ€è¦å…ˆè¿›è¡Œæ ¼å¼åŒ–ï¼Œä½¿ç”¨æ ¼å¼ä¸ºâ€œ$HADOOP_PREFIX/bin/hdfs namenode -format &lt;cluster_name&gt;â€çš„å¦‚ä¸‹å‘½ä»¤ï¼š è¾“ï¼š[hadoop@master ~]$ hdfs namenode -format master &#xa0; ç­‰å¾…Masteræ ¼å¼åŒ–å®Œæˆï¼Œå‡ºç°Exiting with status 0çš„ä¿¡æ¯å³ä¸ºæ ¼å¼åŒ–æˆåŠŸï¼Œå¦‚å›¾10.1æ‰€ç¤ºã€‚ å›¾10.1 æ ¼å¼åŒ–NameNode 10.2.å¯åŠ¨HDFSé›†ç¾¤HDFSæ ¼å¼åŒ–å®Œæˆåï¼Œä½¿ç”¨æ ¼å¼ä¸ºâ€œ$HADOOP_PREFIX/sbin/start-dfs.shâ€çš„å¦‚ä¸‹å‘½ä»¤æ¥å¯åŠ¨HDFSé›†ç¾¤ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[hadoop@master ~]$ start-dfs.sh è¯´æ˜ï¼šä½¿ç”¨è¯¥å‘½ä»¤å¯åŠ¨HDFSé›†ç¾¤æ—¶ï¼Œåœ¨é›†ç¾¤çš„ä»»æ„èŠ‚ç‚¹ä¸Šæ‰§è¡Œéƒ½èƒ½å¤Ÿå¯åŠ¨é›†ç¾¤ã€‚ å›¾10.2 åœ¨Masterä¸Šå¯åŠ¨HDFSé›†ç¾¤ æ­¤æ—¶ï¼Œå„èŠ‚ç‚¹jpsè¿›ç¨‹å¦‚è¡¨10.1æ‰€ç¤ºï¼Œå¦‚å›¾10.2ã€å›¾10.3ã€å›¾10.4æ‰€ç¤ºã€‚ å›¾10.3 Slave1ä¸Šjpsè¿›ç¨‹ &#xa0; å›¾10.4 Slave2ä¸Šjpsè¿›ç¨‹ &#xa0; è¡¨10.1 Masterå¯åŠ¨HDFSé›†ç¾¤åå„èŠ‚ç‚¹ä¸Šjpsè¿›ç¨‹ åç§° jpsè¿›ç¨‹ master Jpsï¼ŒNameNodeï¼ŒDataNode slave1 Jpsï¼ŒSecondaryNameNodeï¼ŒDataNode slave2 Jpsï¼ŒDataNode æ­¤æ—¶å¯åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€http://192.168.176.200:50070æŸ¥çœ‹HDFSçš„ç®¡ç†ç•Œé¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾10.5 æµè§ˆå™¨æŸ¥çœ‹HDFSçš„ç®¡ç†ç•Œé¢ 10.3.å¯åŠ¨YARNå¯åŠ¨HDFSåï¼Œä½¿ç”¨æ ¼å¼ä¸ºâ€œ$HADOOP_PREFIX/sbin/start-yarn.shâ€çš„å¦‚ä¸‹å‘½ä»¤æ¥å¯åŠ¨YARNï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[hadoop@slave2 ~]$ start-yarn.sh è¯´æ˜ï¼šåœ¨ä½¿ç”¨ start-yarn.sh å‘½ä»¤å¯åŠ¨YARNé›†ç¾¤æ—¶ï¼Œå¿…é¡»åœ¨ResourceManageræ‰€åœ¨èŠ‚ç‚¹Slave2ä¸Šæ‰§è¡Œè¯¥å‘½ä»¤æ‰èƒ½å¤Ÿå¯åŠ¨ ResourceManagerï¼›å½“ Namenodeå’ŒResourceMangerä¸åœ¨åŒä¸€å°ä¸»æœºæ—¶ï¼Œå°±ä¸èƒ½åœ¨NameNodeä¸Šå¯åŠ¨ YARNäº†ï¼Œåº”è¯¥åœ¨ResouceManageræ‰€åœ¨çš„æœºå™¨Slave2ä¸Šå¯åŠ¨YARNã€‚ å›¾10.6 åœ¨Slave2ä¸Šå¯åŠ¨YARNé›†ç¾¤ &#xa0; æ­¤æ—¶ï¼Œå„èŠ‚ç‚¹jpsè¿›ç¨‹å¦‚è¡¨10.2æ‰€ç¤ºï¼Œå¦‚å›¾10.6ã€å›¾10.7ã€å›¾10.8æ‰€ç¤ºã€‚ è¡¨10.2 Masterå¯åŠ¨HDFSé›†ç¾¤åå„èŠ‚ç‚¹ä¸Šjpsè¿›ç¨‹ï¼ˆçº¢è‰²è¡¨ç¤ºæ–°å¢ï¼‰ åç§° jpsè¿›ç¨‹ master Jpsï¼ŒNameNodeï¼ŒDataNodeï¼ŒNodeManager slave1 Jpsï¼ŒSecondaryNameNodeï¼ŒDataNodeï¼ŒNodeManager slave2 Jpsï¼ŒDataNodeï¼ŒResourceManagerï¼ŒNodeManager &#xa0; å›¾10.7 Masterä¸Šjpsè¿›ç¨‹ &#xa0; å›¾10.8 Slave1ä¸Šjpsè¿›ç¨‹ &#xa0; æ­¤æ—¶å¯åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€http://192.168.176.202:8088æŸ¥çœ‹YARNçš„ç®¡ç†ç•Œé¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾10.9 æµè§ˆå™¨æŸ¥çœ‹YARNçš„ç®¡ç†ç•Œé¢ 11.å„èŠ‚ç‚¹scalaå®‰è£…11.1.ä¸»èŠ‚ç‚¹Masterä¸Šå®‰è£…scala11.1.1ä¸‹è½½scalaæ‰“å¼€scalaå®˜ç½‘ï¼šhttp://www.scala-lang.org/download/2.12.10.htmlï¼Œæ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå¯¹åº”çš„ä¸‹è½½é“¾æ¥ä¸ºï¼šhttps://downloads.lightbend.com/scala/2.12.10/scala-2.12.10.tgzã€‚ å›¾11.1 scalaå®˜ç½‘ scalaå®‰è£…è·¯å¾„æ˜¯/usr/local/scala-2.12.10ã€‚é¦–å…ˆè¿›å…¥å®‰è£…ç›®å½•/usr/localï¼Œä½¿ç”¨wgetä¸‹è½½ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master ~]# cd /usr/local &#xa0; è¾“ï¼š[root@master local]# wget https://downloads.lightbend.com/scala/2.12.10/scala-2.12.10.tgz &#xa0; å›¾11.2 ä¸‹è½½scala &#xa0; ç”±äºæ²¡æœ‰é‡‡ç”¨é•œåƒç«™ç‚¹èµ„æºä¸‹è½½ï¼Œå› æ­¤ä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œè€å¿ƒç­‰å¾…ä¸‹è½½å®Œæˆã€‚ä¸‹è½½å®Œæˆåä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆscalaæ–‡ä»¶ï¼š/usr/local/scala-2.12.10.tgzã€‚ &#xa0; 11.1.2è§£å‹scalaå‹ç¼©åŒ…è§£å‹scalaåˆ°å½“å‰æ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾11.3æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# tar â€“zvxf scala-2.12.10.tgz &#xa0; è§£å‹å®Œæˆåï¼Œä¼šåœ¨å½“å‰ç›®å½•åˆ›å»ºæ–‡ä»¶å¤¹/usr/local/scala-2.12.10ï¼Œscalaå‹ç¼©åŒ…å†…çš„æ‰€æœ‰æ–‡ä»¶éƒ½è¢«è§£å‹åˆ°è¯¥ç›®å½•ã€‚ è§£å‹å®Œæˆåï¼Œåˆ é™¤åŸå‹ç¼©åŒ…ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š è¾“ï¼š[root@master local]# rm â€“f scala-2.12.10.tgz è¯´æ˜ï¼šåˆ é™¤å‘½ä»¤é€‰é¡¹â€œâ€“fâ€è¡¨ç¤ºå¼ºåˆ¶åˆ é™¤ï¼Œåˆ é™¤è¿‡ç¨‹ä¸­æ²¡æœ‰â€œæ˜¯å¦ç¡®è®¤åˆ é™¤â€çš„æç¤ºã€‚æ…ç”¨æ­¤é€‰é¡¹ï¼Œå°½é‡åªåœ¨åˆ é™¤æœ‰å¾ˆå¤šå­æ–‡ä»¶å¤¹æ—¶é…åˆâ€œâ€“râ€ï¼ˆé€’å½’å¤„ç†ï¼‰ä½¿ç”¨ã€‚ å›¾11.3 è§£å‹scala &#xa0; 11.1.3é…ç½®scalaç¯å¢ƒå˜é‡é…ç½®scalaç¯å¢ƒå˜é‡ï¼ŒåŠ å…¥export PATH=$PATH:/usr/local/scala-2.12.10/binï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# vi /etc/profile &#xa0; scalaç¯å¢ƒå˜é‡é…ç½®å®Œæˆåï¼Œä½¿ä¹‹ç”Ÿæ•ˆï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# source /etc/profile &#xa0; è‡³æ­¤ï¼ŒMasterä¸Šscalaå®‰è£…å®Œæˆï¼ŒæŸ¥çœ‹scalaç‰ˆæœ¬ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# scala -version å›¾11.4 é…ç½®scalaç¯å¢ƒå˜é‡ &#xa0; 11.2ä»èŠ‚ç‚¹ä¸Šå®‰è£…scala11.2.1.scpä¼ è¾“scalaå®‰è£…æ–‡ä»¶å°†ä¸»èŠ‚ç‚¹Masterä¸Šå®‰è£…å¥½çš„scalaæ–‡ä»¶å¤¹åˆ©ç”¨scpä¼ åˆ°ä»èŠ‚ç‚¹Slave1å’ŒSlave2ä¸Šï¼Œå¦‚ä¸‹å›¾11.5æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# scp â€“r scala-2.12.10 slave1:/usr/local &#xa0; è¾“ï¼š[root@master local]# scp â€“r scala-2.12.10 slave2:/usr/local æ³¨æ„ï¼šæ­¤å¤„ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå› ä¸ºå½“å‰ç›®å½•ä¸º/usr/localï¼Œä¹Ÿå¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼ˆç»å¯¹è·¯å¾„ï¼‰æ¥ä¼ è¾“ï¼ŒäºŒè€…æ²¡æœ‰åŒºåˆ«ï¼š è¾“ï¼š[root@master local]# scp â€“r /usr/local/scala-2.12.10 slave1:/usr/local &#xa0; è¾“ï¼š[root@master local]# scp â€“r /usr/local/scala-2.12.10 slave2:/usr/local å›¾11.5 Masterä¸Šscpä¼ è¾“scalaåˆ°ä»èŠ‚ç‚¹Slave1å’ŒSlave2 11.2.2é…ç½®ç¯å¢ƒå˜é‡scpä¼ è¾“å®Œæˆåï¼Œåœ¨Slave1ä¸Šé…ç½®scalaç¯å¢ƒå˜é‡ï¼Œæ­¥éª¤åŒ11.1.3èŠ‚ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å›¾11.6 Slave1é…ç½®scalaç¯å¢ƒå˜é‡ scpä¼ è¾“å®Œæˆåï¼Œåœ¨Slave2ä¸Šé…ç½®scalaç¯å¢ƒå˜é‡ï¼Œæ­¥éª¤åŒ11.1.3èŠ‚ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å›¾11.7 Slave2é…ç½®scalaç¯å¢ƒå˜é‡ &#xa0; 12.Sparkå®‰è£…åŠé…ç½®12.1.ä¸»èŠ‚ç‚¹Masterä¸Šå®‰è£…spark12.1.1ä¸‹è½½sparkå‹ç¼©åŒ…æ¸…åå¤§å­¦é•œåƒç«™ä¸‹è½½spark-2.4.4-bin-hadoop2.7.tgzæ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå…¶ä¸‹è½½é“¾æ¥ä¸ºï¼šhttps://mirrors.tuna.tsinghua.edu.cn/apache/spark/spark-2.4.4/spark-2.4.4-bin-hadoop2.7.tgzã€‚ sparkçš„å®‰è£…è·¯å¾„æ˜¯/usr/local/ spark-2.4.4-bin-hadoop2.7ã€‚é¦–å…ˆè¿›å…¥å®‰è£…ç›®å½•/usr/localï¼Œä½¿ç”¨wgetä¸‹è½½ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master ~]# cd /usr/local &#xa0; è¾“ï¼š[root@master local]# wget https://mirrors.tuna.tsinghua.edu.cn/apache/spark/spark-2.4.4/spark-2.4.4-bin-hadoop2.7.tgz å›¾12.1 ä¸‹è½½spark 12.1.2.è§£å‹sparkå‹ç¼©åŒ…è§£å‹sparkåˆ°å½“å‰æ–‡ä»¶å¤¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# tar â€“zvxf spark-2.4.4-bin-hadoop2.7.tgz å›¾12.2 è§£å‹spark è§£å‹å®Œæˆåï¼Œåˆ é™¤åŸå‹ç¼©åŒ…ã€‚ &#xa0; 12.1.3.ä¿®æ”¹sparké…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶è·¯å¾„ä¸º/usr/local/spark-2.4.4-bin-hadoop2.7/confï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå¹¶ä¸”å°†spark-env.sh.templateé‡å‘½åä¸ºspark-env.shã€‚ å›¾12.3 sparké…ç½®æ–‡ä»¶ &#xa0; ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶spark-env.shï¼Œå¦‚å›¾12.4æ‰€ç¤ºã€‚ è¾“ï¼š[root@master ~]# vi /usr/local/spark-2.4.4-bin-hadoop2.7/conf/spark- env.sh å›¾12.4 ä¿®æ”¹sparké…ç½®æ–‡ä»¶spark-env.sh &#xa0; åœ¨æœ«å°¾åŠ ä¸Šå¦‚ä¸‹çº¢è‰²å­—ä½“å†…å®¹ï¼ˆå…¶ä¸­JAVA_HOMEåº”ä¸javaå®‰è£…æ—¶çš„é…ç½®ä¿æŒä¸€è‡´ï¼Œé»‘è‰²å­—ä½“ä¸ºæ³¨é‡Šï¼‰ï¼Œå¦‚å›¾12.4æ‰€ç¤ºï¼š # é…ç½®JAVA_HOMEï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸é…ç½®ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæœ€å¥½è¿˜æ˜¯é…ä¸Š # é…ç½®JAVA_HOMEåº”ä¸javaå®‰è£…æ—¶çš„é…ç½®ä¿æŒä¸€è‡´ï¼Œè§6.2.4èŠ‚ export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.232.b09-0.el7_7.x86_64&#xa0; # ä¸€èˆ¬æ¥è¯´ï¼Œsparkä»»åŠ¡æœ‰å¾ˆå¤§å¯èƒ½æ€§éœ€è¦å»HDFSä¸Šè¯»å–æ–‡ä»¶ï¼Œæ‰€ä»¥é…ç½®ä¸Š # å¦‚æœè¯´ä½ çš„sparkå°±è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿä¸éœ€è¦yarnç®¡ç†ï¼Œåˆ™ä¸ç”¨é… export HADOOP_CONF_DIR=/usr/local/hadoop-2.7.7/etc/hadoop &#xa0; # è®¾ç½®Masterçš„ä¸»æœºå export SPARK_MASTER_HOST=master &#xa0; # æäº¤Applicationçš„ç«¯å£ï¼Œé»˜è®¤å°±æ˜¯è¿™ä¸ªï¼Œä¸‡ä¸€è¦æ”¹å°±æ”¹è¿™é‡Œ export SPARK_MASTER_PORT=7077 &#xa0; # æ¯ä¸€ä¸ªWorkeræœ€å¤šå¯ä»¥ä½¿ç”¨çš„cpu coreçš„ä¸ªæ•°ï¼Œæˆ‘è™šæ‹Ÿæœºå°±ä¸€ä¸ª... # çœŸå®æœåŠ¡å™¨å¦‚æœæœ‰32ä¸ªï¼Œä½ å¯ä»¥è®¾ç½®ä¸º32ä¸ª export SPARK_WORKER_CORES=1 &#xa0; # æ¯ä¸€ä¸ªWorkeræœ€å¤šå¯ä»¥ä½¿ç”¨çš„å†…å­˜ï¼Œè™šæ‹Ÿæœºè®¾ç½®çš„æ˜¯2G # çœŸå®æœåŠ¡å™¨å¦‚æœæœ‰128Gï¼Œä½ å¯ä»¥è®¾ç½®ä¸º100G export SPARK_WORKER_MEMORY=1g &#xa0; 12.1.4.ä¿®æ”¹slavesæ–‡ä»¶å¦‚å›¾12.3ï¼Œé¦–å…ˆå°†slaves.templateé‡å‘½åä¸ºslavesï¼Œç„¶åä¿®æ”¹slavesæ–‡ä»¶ï¼Œåˆ é™¤æˆ–æ³¨é‡Šæ‰â€œlocalhostâ€ï¼ŒåŠ å…¥ä¸‰å°èŠ‚ç‚¹çš„ä¸»æœºåï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾12.5 ä¿®æ”¹slavesæ–‡ä»¶å†…å®¹ 12.1.5.é…ç½®sparkç¯å¢ƒå˜é‡é…ç½®sparkç¯å¢ƒå˜é‡ï¼š è¾“ï¼š[root@master ~]# vi /etc/profile&#xa0; åŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š export SPARK_HOME=/usr/local/spark-2.4.4-bin-hadoop2.7 export PATH=\\$PATH:\\$SPARK_HOME/bin:\\$SPARK_HOME/sbin &#xa0; sparkç¯å¢ƒå˜é‡é…ç½®å®Œæˆåï¼Œä½¿ä¹‹ç”Ÿæ•ˆï¼Œå¦‚å›¾12.6æ‰€ç¤ºï¼š è¾“ï¼š[root@master ~]# source /etc/profile&#xa0; å›¾12.6 é…ç½®sparkç¯å¢ƒå˜é‡å¹¶å¯åŠ¨ &#xa0; è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨Sparkï¼Œå¦‚å›¾12.6æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# spark-shell&#xa0; 12.2.ä»èŠ‚ç‚¹ä¸Šå®‰è£…spark12.2.1.scpä¼ è¾“sparkå®‰è£…æ–‡ä»¶å°†ä¸»èŠ‚ç‚¹Masterä¸Šå®‰è£…å¥½çš„sparkåˆ©ç”¨scpä¼ åˆ°ä»èŠ‚ç‚¹Slave1å’ŒSlave2ä¸Šï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# scp â€“r spark-2.4.4-bin-hadoop2.7 slave1:/usr/local&#xa0; è¾“ï¼š[root@master local]# scp â€“r spark-2.4.4-bin-hadoop2.7 slave2:/usr/local æ³¨æ„ï¼šæ­¤å¤„ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå› ä¸ºå½“å‰ç›®å½•ä¸º/usr/localï¼Œä¹Ÿå¯ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚ &#xa0; å›¾12.7 Masterä¸Šscpä¼ è¾“sparkåˆ°ä»èŠ‚ç‚¹Slave1å’ŒSlave2 &#xa0; &#xa0; &#xa0; 12.2.2.é…ç½®sparkç¯å¢ƒå˜é‡ï¼ˆ1ï¼‰Slave1èŠ‚ç‚¹é…ç½®sparkç¯å¢ƒå˜é‡ scpä¼ è¾“å®Œæˆåï¼Œåœ¨Slave1ä¸Šé…ç½®sparkç¯å¢ƒå˜é‡ï¼Œæ­¥éª¤åŒ12.1.5èŠ‚ã€‚ Slave1èŠ‚ç‚¹ä¸Šsparkç¯å¢ƒå˜é‡é…ç½®å®Œæˆåï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨Sparkï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¾“ï¼š[root@slave1 local]# spark-shell&#xa0; å›¾12.8 Slave1é…ç½®sparkç¯å¢ƒå˜é‡å¹¶å¯åŠ¨ &#xa0; ï¼ˆ2ï¼‰Slave2èŠ‚ç‚¹é…ç½®sparkç¯å¢ƒå˜é‡ scpä¼ è¾“å®Œæˆåï¼Œåœ¨Slave2ä¸Šé…ç½®sparkç¯å¢ƒå˜é‡ï¼Œæ­¥éª¤åŒ12.1.5èŠ‚ã€‚ Slave2èŠ‚ç‚¹ä¸Šsparkç¯å¢ƒå˜é‡é…ç½®å®Œæˆåï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨Sparkï¼Œå¦‚å›¾12.9æ‰€ç¤ºï¼š è¾“ï¼š[root@slave2 local]# spark-shell&#xa0; å›¾12.9 Slave2é…ç½®sparkç¯å¢ƒå˜é‡å¹¶å¯åŠ¨ è¯´æ˜ï¼šé€€å‡ºscalaæ—¶éœ€è¾“å…¥â€œ:quitâ€ï¼Œä¸Šå›¾æ˜¯spark-shellä¸‹çš„å‘½ä»¤è¡Œï¼Œç•Œé¢ä¸scalaä¸‹çš„å‘½ä»¤è¡Œä¸åŒï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾12.10 scalaä¸‹çš„å‘½ä»¤è¡Œ &#xa0; 12.3.ä¿®æ”¹spark-env.shåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ”¹æ­£spark-env.shçš„é”™è¯¯ï¼ˆå¦‚å›¾12.4ï¼‰ï¼Œå°†æœ€åä¸€è¡Œâ€œecportâ€ä¿®æ”¹ä¸ºâ€œexportâ€ã€‚ é…ç½®æ–‡ä»¶è·¯å¾„ä¸º/usr/local/spark-2.4.4-bin-hadoop2.7/conf/spark-env.shï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾12.11 æ”¹æ­£spark-env.shé…ç½®æ–‡ä»¶ &#xa0; 13.å¯åŠ¨Sparké›†ç¾¤å‚è€ƒï¼šhttps://www.cnblogs.com/ZJdiem/p/11664634.html 13.1.è¯´æ˜Hadoopã€Scalaå’ŒSparkéƒ½æ˜¯å®‰è£…åœ¨/usr/localæ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚å›¾13.1~13.3æ‰€ç¤ºã€‚ ç”±äºå®‰è£…æ—¶æ˜¯ä»¥rootèº«ä»½å®‰è£…çš„ï¼Œä½†æ“ä½œHadoopç›¸å…³çš„ä¸œè¥¿æ—¶æ˜¯ä»¥hadoopç”¨æˆ·ï¼Œå› æ­¤ä¼šäº§ç”Ÿæƒé™çš„é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ç™»é™†rootè´¦å·ï¼Œæ›´æ”¹ç”¨æˆ·ç»„ä¸ºhadoopç”¨æˆ·ï¼Œè§8.3èŠ‚ã€‚ ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒHadoopçš„æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„æ­£å¸¸ï¼ˆå› ä¸ºå®‰è£…Hadoopæ—¶å·²ç»ä¿®æ”¹è¿‡ï¼‰ï¼Œè€ŒScalaå’ŒSparkçš„æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„åˆ™ä¸å¯¹ï¼Œåæ–‡ä¿®æ”¹ã€‚ å›¾13.1 ä¸»èŠ‚ç‚¹Masterçš„Hadoopã€Scalaå’ŒSparkä¿¡æ¯ å›¾13.2 ä»èŠ‚ç‚¹Slave1çš„Hadoopã€Scalaå’ŒSparkä¿¡æ¯ å›¾13.3 ä»èŠ‚ç‚¹Slave2çš„Hadoopã€Scalaå’ŒSparkä¿¡æ¯ &#xa0; 13.2.æ›´æ”¹Scalaå’ŒSparkçš„ç”¨æˆ·ç»„13.2.1.ä¸»èŠ‚ç‚¹Masteråœ¨Masterä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†Scalaå’ŒSparkçš„å®‰è£…ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„æ”¹ä¸ºhadoopç”¨æˆ·ï¼Œå¦‚å›¾13.4æ‰€ç¤ºï¼š è¾“ï¼š[root@master local]# chown -R hadoop:hadoop /usr/local/scala-2.12.10&#xa0; è¾“ï¼š[root@master local]# chown -R hadoop:hadoop /usr/local/spark-2.4.4-bin-hadoop2.7&#xa0; è¯´æ˜ï¼šç”±äºå‰é¢å®‰è£…Sparkæ—¶å·²ç»æ›´æ”¹è¿‡ï¼Œå› æ­¤åªéœ€è¦æ›´æ”¹Scalaå®‰è£…ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„ï¼Œå¦‚å›¾13.4æ‰€ç¤ºã€‚ç”±å›¾å¯çŸ¥ï¼Œä¿®æ”¹å‰ï¼Œscalaçš„ç”¨æˆ·ç»„ä¸º2000ã€sparkçš„ç”¨æˆ·ç»„ä¸ºhadoopï¼›ä¿®æ”¹åï¼Œscalaçš„ç”¨æˆ·ç»„ä¸ºhadoopã€sparkçš„ç”¨æˆ·ç»„ä¸ºhadoopã€‚ å›¾13.4 Masterçš„Scalaå’ŒSparkçš„ç”¨æˆ·ç»„ &#xa0; 13.2.2.ä»èŠ‚ç‚¹Slave1åœ¨Slave1ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†Scalaå’ŒSparkçš„å®‰è£…ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„æ”¹ä¸ºhadoopç”¨æˆ·ï¼Œå¦‚å›¾13.5æ‰€ç¤ºï¼š è¾“ï¼š[root@slave1 local]# chown -R hadoop:hadoop /usr/local/scala-2.12.10&#xa0; è¾“ï¼š[root@slave1 local]# chown -R hadoop:hadoop /usr/local/spark-2.4.4-bin-hadoop2.7&#xa0; ç”±å›¾å¯çŸ¥ï¼Œä¿®æ”¹å‰ï¼Œscalaå’Œsparkçš„ç”¨æˆ·ç»„å‡ä¸ºrootï¼›ä¿®æ”¹åï¼Œscalaå’Œsparkçš„ç”¨æˆ·ç»„ä¸ºhadoopã€‚ å›¾13.5 Slave1çš„Scalaå’ŒSparkçš„ç”¨æˆ·ç»„ &#xa0; 13.2.3.ä»èŠ‚ç‚¹Slave2åœ¨Slave2ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆæ­¤å¤„ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼‰å°†Scalaå’ŒSparkçš„å®‰è£…ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„æ”¹ä¸ºhadoopç”¨æˆ·ï¼Œå¦‚å›¾13.6æ‰€ç¤ºï¼š è¾“ï¼š[root@slave2 local]# chown -R hadoop:hadoop scala-2.12.10 &#xa0; è¾“ï¼š[root@slave2 local]# chown -R hadoop:hadoop spark-2.4.4-bin-hadoop2.7 &#xa0; ç”±å›¾å¯çŸ¥ï¼Œä¿®æ”¹å‰ï¼Œscalaå’Œsparkçš„ç”¨æˆ·ç»„å‡ä¸ºrootï¼›ä¿®æ”¹åï¼Œscalaå’Œsparkçš„ç”¨æˆ·ç»„ä¸ºhadoopã€‚ å›¾13.6 Slave2çš„Scalaå’ŒSparkçš„ç”¨æˆ·ç»„ &#xa0; 13.3.å¯åŠ¨Hadoopé›†ç¾¤æ³¨æ„ï¼šå¯åŠ¨Sparké›†ç¾¤ä¹‹å‰å¿…é¡»å…ˆå¯åŠ¨Hadoopé›†ç¾¤ã€‚ é¦–å…ˆä»¥hadoopç”¨æˆ·èº«ä»½ç™»é™†ï¼Œç„¶ååœ¨ä¸»èŠ‚ç‚¹Masterä¸Šè¿è¡Œstart-dfs.shå¯åŠ¨HDFSé›†ç¾¤ï¼ˆæ­¤æ—¶å„èŠ‚ç‚¹jpsè¿›ç¨‹å¦‚è¡¨13.1æ‰€ç¤ºï¼‰ï¼Œæœ€ååœ¨ä»èŠ‚ç‚¹Slave2ä¸Šè¿è¡Œstart-yarn.shå¯åŠ¨YARNé›†ç¾¤ï¼ˆæ­¤æ—¶å„èŠ‚ç‚¹jpsè¿›ç¨‹å¦‚è¡¨13.1æ‰€ç¤ºï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ å›¾13.7 Masterå¯åŠ¨HDFSé›†ç¾¤ å›¾13.8 Slave2å¯åŠ¨YARNé›†ç¾¤ &#xa0; 13.4.å¯åŠ¨Sparké›†ç¾¤æ³¨æ„ï¼šå¯åŠ¨Sparké›†ç¾¤ä¹‹å‰å¿…é¡»å…ˆå¯åŠ¨Hadoopé›†ç¾¤ã€‚ Hadoopé›†ç¾¤å¯åŠ¨åï¼Œé¦–å…ˆåœ¨MasterèŠ‚ç‚¹è¿›å…¥sparkç›®å½•ï¼Œç„¶åå¯åŠ¨Sparké›†ç¾¤ï¼Œå¦‚å›¾ï¼š è¾“ï¼š[hadoop@master ~]$ cd /usr/local/spark-2.4.4-bin-hadoop2.7 &#xa0; è¾“ï¼š[hadoop@master spark-2.4.4-bin-hadoop2.7]$sbin/start-master.sh &#xa0; è¾“ï¼š[hadoop@master spark-2.4.4-bin-hadoop2.7]$sbin/start-slaves.sh å›¾13.9 Masterå¯åŠ¨Sparké›†ç¾¤ è‡³æ­¤ï¼ŒSparké›†ç¾¤å¯åŠ¨å®Œæˆï¼Œæ­¤æ—¶ä¸»èŠ‚ç‚¹Masterä¸Šjpsè¿›ç¨‹å¦‚å›¾13.9æ‰€ç¤ºï¼Œä»èŠ‚ç‚¹Slave1å’ŒSlave2ä¸Šjpsè¿›ç¨‹å¦‚å›¾13.10æ‰€ç¤ºï¼Œå„èŠ‚ç‚¹é›†ç¾¤å¯åŠ¨å‰åjpsè¿›ç¨‹å¦‚è¡¨13.1æ‰€ç¤ºã€‚ å›¾13.10 ä»èŠ‚ç‚¹Slave1å’ŒSlave2ä¸Šjpsè¿›ç¨‹ &#xa0; è¡¨13.1 å¯åŠ¨é›†ç¾¤åå„èŠ‚ç‚¹ä¸Šjpsè¿›ç¨‹ èŠ‚ç‚¹åç§° Masterå¯åŠ¨HDFS Slave2å¯åŠ¨YARN Masterå¯åŠ¨Spark master Jpsï¼ŒNameNodeï¼ŒDataNode Jpsï¼ŒNameNodeï¼ŒDataNode NodeManager Jpsï¼ŒNameNodeï¼ŒDataNode NodeManager Masterï¼ŒWorker slave1 Jpsï¼ŒSecondaryNameNodeï¼ŒDataNode Jpsï¼ŒSecondaryNameNodeï¼ŒDataNode NodeManager Jpsï¼ŒSecondaryNameNodeï¼ŒDataNode NodeManager Worker slave2 Jpsï¼ŒDataNode Jpsï¼ŒDataNode ResourceManagerï¼ŒNodeManager Jpsï¼ŒDataNode ResourceManagerï¼ŒNodeManager Worker æ³¨ï¼šè¡¨ä¸­ä¸åŒé¢œè‰²ä»£è¡¨å¯åŠ¨ä¸åŒé›†ç¾¤åå¢åŠ çš„jpsè¿›ç¨‹ï¼Œå…¶ä¸­ç»¿è‰²ä¸ºMasterå¯åŠ¨HDFSé›†ç¾¤åå¢åŠ çš„è¿›ç¨‹ï¼Œæ´‹çº¢ä¸ºSlave2å¯åŠ¨YARNé›†ç¾¤åå¢åŠ çš„è¿›ç¨‹ï¼Œç»¿è‰²ä¸ºMasterå¯åŠ¨Sparké›†ç¾¤åå¢åŠ çš„è¿›ç¨‹ï¼›å•å…ƒæ ¼å†…å®¹ä¸ºå¯åŠ¨ä¸åŒé›†ç¾¤åå„èŠ‚ç‚¹æ‰€æœ‰çš„jpsè¿›ç¨‹ã€‚ &#xa0; æ­¤æ—¶å¯åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€http://192.168.176.200:8080ï¼ŒæŸ¥çœ‹Sparké›†ç¾¤çš„ç®¡ç†ç•Œé¢ï¼Œå¦‚ä¸‹å›¾13.11æ‰€ç¤ºã€‚ åŒæ—¶ï¼ŒHDFSçš„ç®¡ç†ç•Œé¢ä¸ºhttp://192.168.176.200:50070ï¼Œè§10.2èŠ‚å›¾10.5ï¼›YARNçš„ç®¡ç†ç•Œé¢ä¸ºhttp://192.168.176.202:8088ï¼Œè§10.3èŠ‚å›¾10.9ã€‚ å›¾13.11 æµè§ˆå™¨æŸ¥çœ‹Sparkçš„ç®¡ç†ç•Œé¢ &#xa0;&#xa0;è‡³æ­¤ï¼Œé›†ç¾¤æ­å»ºå®Œæ¯•ã€‚&#xa0;","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"}],"tags":[{"name":"Spark","slug":"Spark","permalink":"https://hwame.top/tags/Spark/"},{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"https://hwame.top/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"}]},{"title":"Nginxé…ç½®ä¸uWSGIé…ç½®è¯¦è§£","slug":"configuration-of-nginx-and-uwsgi","date":"2020-05-22T00:18:48.000Z","updated":"2020-07-02T09:29:09.000Z","comments":true,"path":"20200522/configuration-of-nginx-and-uwsgi.html","link":"","permalink":"https://hwame.top/20200522/configuration-of-nginx-and-uwsgi.html","excerpt":"æ‘˜è¦ï¼šæ–‡ç« ä»‹ç»äº†Nginxä¸uWSGIçš„çŸ¥è¯†ï¼Œå¹¶ä¾å…·ä½“çš„ä¾‹å­å¯¹Webåº”ç”¨è¿›è¡Œè¯¦ç»†é…ç½®ã€‚","text":"æ‘˜è¦ï¼šæ–‡ç« ä»‹ç»äº†Nginxä¸uWSGIçš„çŸ¥è¯†ï¼Œå¹¶ä¾å…·ä½“çš„ä¾‹å­å¯¹Webåº”ç”¨è¿›è¡Œè¯¦ç»†é…ç½®ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« ä½œè€…ï¼šé´»å¡µæ–‡ç« é“¾æ¥ï¼šhttps://hwame.top/20200522/configuration-of-nginx-and-uwsgi.html ä¸€ã€Nginxé…ç½®æ–‡ä»¶1.æŒ‡ä»¤Nginxé…ç½®æ–‡ä»¶åŒ…å«æŒ‡å®šæŒ‡ä»¤æ§åˆ¶çš„æ¨¡å—ï¼ŒæŒ‡ä»¤åˆ†ä¸º ç®€å•æŒ‡ä»¤ å’Œ å—æŒ‡ä»¤ ï¼Œå¦‚æœå—æŒ‡ä»¤å¤§æ‹¬å·å†…æœ‰å…¶ä»–æŒ‡ä»¤ï¼Œå°±è¢«ç§°ä¸ºä¸€ä¸ª ä¸Šä¸‹æ–‡ ï¼Œæ¯”å¦‚events, http, server, locationç­‰ã€‚ ç®€å•æŒ‡ä»¤ï¼šç”±åç§°å’Œå‚æ•°ç»„æˆï¼Œä»¥ç©ºæ ¼åˆ†éš”ï¼Œå¹¶ä»¥åˆ†å·ç»“å°¾ï¼›å—æŒ‡ä»¤ï¼šå…·æœ‰å’Œç®€å•æŒ‡ä»¤ç›¸åŒçš„ç»“æ„ï¼Œä»¥å¤§æ‹¬å·åŒ…å›´çš„ä¸€å †é™„åŠ æŒ‡ä»¤ç»“æŸã€‚æŒ‡ä»¤ï¼š nginx -tä¸è¿è¡Œï¼Œä»…æµ‹è¯•é…ç½®æ–‡ä»¶ï¼›nginx -c config_pathä»æŒ‡å®šè·¯å¾„åŠ è½½é…ç½®æ–‡ä»¶ï¼›nginx -t -c config_pathæµ‹è¯•æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚ 2.æ§åˆ¶å‘½ä»¤å¯åŠ¨Nginxï¼šnginx [-c config_path]ï¼Œé»˜è®¤é…ç½®ç›®å½•ä¸º/etc/nginx/nginx.confã€‚æŸ¥çœ‹ä¿¡æ¯ï¼šnginx -vï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼›nginx -Vï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚æŸ¥çœ‹è¿›ç¨‹ï¼šps -ef | grep nginxï¼Œåˆ©ç”¨ç®¡é“å‘½ä»¤æŸ¥çœ‹è¿›ç¨‹ï¼Œpså‘½ä»¤ç”¨æ³•å‚è§ï¼šã€Linuxå‘½ä»¤å¤§å…¨ã€‘æ§åˆ¶Nginxï¼šnginx -s signalï¼Œå‚æ•°signalæœ‰stop, quit, reloadï¼Œåˆ†åˆ«è¡¨ç¤ºå¿«é€Ÿå…³é—­ã€ä¼˜é›…å…³é—­ã€é‡è½½é…ç½®ç³»ç»Ÿç®¡ç†ï¼šsystemctl option nginxï¼Œå‚æ•°optionæœ‰status, start, stop, enable, disableï¼Œåˆ†åˆ«è¡¨ç¤ºæŸ¥çœ‹çŠ¶æ€ã€å¯åŠ¨æœåŠ¡ã€å…³é—­æœåŠ¡ã€è®¾ç½®å¼€æœºè‡ªå¯ã€ç¦æ­¢å¼€æœºè‡ªå¯ 3.æ–‡ä»¶è¯¦æƒ…nginx.confæ–‡ä»¶ä½ç½®ï¼šé»˜è®¤ä½äº/etc/nginx/nginx.confï¼Œæ­¤ä¹ƒé»˜è®¤é…ç½®æ–‡ä»¶ï¼ŒæœåŠ¡å¯åŠ¨åŸºäºè¯¥æ–‡ä»¶ã€‚åŸæ–‡å†…å®¹ï¼š12345678910111213141516171819202122232425262728user nginx;worker_processes 1;error_log /var/log/nginx/error.log warn;pid /var/run/nginx.pid;events &#123; worker-connections 1024 ; &#125;http &#123; include /etc/nginx/mime.types; default_type appplication/octet-stream; log_format main &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27; &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27; &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;; access_log /var/log/nginx/access.log main; sendfile on; #tcp_nopush on; keepalive_timeout 65; #gzip on; include /etc/nginx/conf.d/*.conf; &#125; æ–‡ä»¶ç»“æ„ï¼š ä¸ºç»“æ„æ¸…æ™°ï¼Œç‰¹åˆ æ‰å¤§æ‹¬å·ï¼ŒÂ·Â·Â·Â·Â·Â·å¤„è¡¨ç¤ºå—æŒ‡ä»¤ã€‚ 1234567891011main ã€å…¨å±€è®¾ç½®ã€‘events ã€æŒ‡å®šå·¥ä½œæ¨¡å¼ï¼Œè¿æ¥é…ç½®ä¸Šé™ã€‘ Â·Â·Â·Â·Â·Â·http ã€httpçš„é…ç½®ã€‘ Â·Â·Â·Â·Â·Â· upstream xxx ã€è´Ÿè½½å‡è¡¡é…ç½®ã€‘ Â·Â·Â·Â·Â·Â· server ã€ä¸»æœºè®¾ç½®ã€‘ Â·Â·Â·Â·Â·Â· location ã€URLåŒ¹é…ã€‘ Â·Â·Â·Â·Â·Â· å‚æ•°è¯¦è§£ï¼š main userï¼šworkerè¿›ç¨‹è¿è¡Œçš„ç”¨æˆ·å’Œç»„ worker_processesï¼šæŒ‡å®šå¼€å¯çš„å­è¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºä¸CPUæ•°ç›¸ç­‰ error_logï¼šç”¨æ¥å®šä¹‰å…¨å±€é”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼Œå¦‚åŸæ–‡ä¸­è·¯å¾„ä¸º/var/log/nginx/error.logï¼Œçº§åˆ«levelæœ‰debug, info, notice, warn, error, crit pidï¼šæŒ‡å®šè¿›ç¨‹IDçš„å­˜å‚¨æ–‡ä»¶ä½ç½® events useï¼šæŒ‡å®šNginxå·¥ä½œæ¨¡å¼ï¼Œâ‘ epoll=é«˜æ•ˆå·¥ä½œæ¨¡å¼ï¼ŒLinuxï¼Œé»˜è®¤ï¼Œâ‘¡kqueue=é«˜æ•ˆå·¥ä½œæ¨¡å¼ï¼ŒBSDï¼Œâ‘¢poll=æ ‡å‡†æ¨¡å¼ï¼Œâ‘£epoll=æ ‡å‡†æ¨¡å¼ worker_connectionsï¼šæ¯ä¸ªè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ï¼Œå…¶ä¸­$æ­£å‘ä»£ç†=è¿æ¥æ•°Ã—è¿›ç¨‹æ•°$ï¼Œ$åå‘ä»£ç†=\\frac{1}{4}\\times\\text{è¿æ¥æ•°}\\times\\text{è¿›ç¨‹æ•°}$ã€Linuxç³»ç»Ÿé™åˆ¶æœ€å¤šèƒ½åŒæ—¶æ‰“å¼€$65535=2^{16}$ä¸ªæ–‡ä»¶ï¼Œäº¦å³é»˜è®¤ä¸Šé™ï¼Œèƒ½ä»¥ulimit -n 65535è§£é™¤ã€‘ httpæœ€æ ¸å¿ƒçš„æ¨¡å—ï¼Œä¸»è¦è´Ÿè´£httpæœåŠ¡å™¨ç›¸å…³é…ç½®ï¼ŒåŒ…å«serverå’Œupstreamå­æ¨¡å—ï¼Œè§åæ–‡ includeï¼šç¬¬12è¡Œinclude mime.typesè®¾ç½®æ–‡ä»¶çš„mimeç±»å‹ä¸º/etc/nginx/mime.typesæ‰€å®šä¹‰çš„ç±»å‹ï¼Œç¬¬27è¡Œxxx.configåŒ…å«å…¶ä»–é…ç½®æ–‡ä»¶ï¼ˆåˆ†å¼€è§„åˆ’è§£è€¦ä½œç”¨ï¼‰çš„server default_typeï¼šè®¾ç½®é»˜è®¤ç±»å‹ï¼Œå½“æ–‡ä»¶ç±»å‹æœªçŸ¥æ—¶å°†ä½¿ç”¨é»˜è®¤ï¼ˆæ³¨ï¼šoctet-stream=å…«è¿›åˆ¶å­—èŠ‚æµï¼‰ log_formatï¼šè®¾ç½®æ—¥å¿—æ ¼å¼ access_logï¼šè®¿é—®æ—¥å¿—ï¼Œä¸­é—´ä¸ºæ—¥å¿—è·¯å¾„ï¼Œæœ€åmainä¸ºæ—¥å¿—æ ¼å¼log_formatä¸­çš„main sendfileï¼šè®¾ç½®é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼ keepalive_timeoutï¼šè®¾ç½®å®¢æˆ·ç«¯è¿æ¥æ´»è·ƒè¶…æ—¶ gzipï¼šgzipå‹ç¼© æ ¸å¿ƒæ¨¡å—httpï¼š upstreamå­æ¨¡å—ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå¤šæœåŠ¡å™¨åå‘ä»£ç† server ip:port weight=1ï¼šæŒ‡å®šåå‘ä»£ç†æœåŠ¡å™¨åŠåˆ†æµæƒé‡ serverå­æ¨¡å—ï¼Œç”¨æ¥æŒ‡å®šè™šæ‹Ÿä¸»æœº listen 80;ï¼šæŒ‡å®šè™šæ‹Ÿä¸»æœºç›‘å¬çš„ç«¯å£ï¼Œ80ç«¯å£è¡¨ç¤ºhttp server_name localhost;ï¼šæŒ‡å®šipåœ°å€æˆ–åŸŸåï¼Œå¤šä¸ªåŸŸåä»¥ç©ºæ ¼åˆ†éš” charset utf-8ï¼šæŒ‡å®šç½‘é¡µçš„é»˜è®¤ç¼–ç æ ¼å¼ error_page 500 502 /50x.html;ï¼šæŒ‡å®šé”™è¯¯é¡µé¢ï¼Œè§/etc/nginx/conf.d/*.confå³default.conf access_log xxx main;ï¼šæŒ‡å®šè™šæ‹Ÿä¸»æœºçš„è®¿é—®æ—¥å¿—å­˜æ”¾è·¯å¾„ error_log xxx main;ï¼šæŒ‡å®šè™šæ‹Ÿä¸»æœºçš„é”™è¯¯æ—¥å¿—å­˜æ”¾è·¯å¾„ root xxx;ï¼šæŒ‡å®šè™šæ‹Ÿä¸»æœºçš„æ ¹ç›®å½• index xxx;ï¼šæŒ‡å®šé»˜è®¤ä¸»é¡µ locationï¼šæ ¸å¿ƒã€serverã€‘ä¸­çš„æ ¸å¿ƒã€locationã€‘ï¼Œåé¢ä¸»è¦å°±æ˜¯é…ç½®è¿™é‡Œï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…å’Œæ¡ä»¶ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯å®šä½å’Œè§£æURLã€å®ç°åŠ¨é™åˆ†ç¦»ã€‚è¯­æ³•æ ¼å¼ï¼šlocation [modifier] uri &#123;æŒ‡ä»¤ xxx&#125;ï¼Œå¯é€‰ä¿®é¥°ç¬¦modifierè¡¨ç¤ºå®šä½URLçš„æ–¹å¼ï¼šâ‘ =ï¼Œä½¿ç”¨ç²¾ç¡®åŒ¹é…å¹¶ä¸”ç»ˆæ­¢æœç´¢â‘¡~ï¼ŒåŒºåˆ†å¤§å°å†™çš„æ­£åˆ™â‘¢~*ï¼Œä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™â‘£^~ï¼Œæœ€ä½³åŒ¹é…é€šå¸¸ç”¨æ¥åŒ¹é…ç›®å½•ï¼ˆéæ­£åˆ™åŒ¹é…ï¼‰ï¼›å¸¸ç”¨æŒ‡ä»¤ä¸ºaliasï¼Œaliaså®šä¹‰äº†locationçš„åˆ«åï¼ˆéœ€è¦åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­èƒ½å¤Ÿæ‰¾åˆ°ï¼‰ï¼Œå¦‚æœlocationæŒ‡å®šäº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œaliaså°†ä¼šåº”ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ•è·ï¼Œaliasæ›¿ä»£locationä¸­åŒ¹é…çš„éƒ¨åˆ†ï¼Œæ²¡æœ‰åŒ¹é…çš„éƒ¨åˆ†å°†åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœç´¢ default.confæ–‡ä»¶ä½ç½®ï¼šä½äº/etc/nginx/conf.d/nginx.confï¼ŒåªåŒ…å«ä¸€ä¸ªserveræ¨¡å—ã€‚NginxæœåŠ¡å¯åŠ¨æ—¶ç”±nginx.confé€šè¿‡include /etc/nginx/conf.d/*.conf;å¼•ç”¨å…¶å†…å®¹ï¼ˆå³serverï¼‰ï¼Œä»è€Œå®ç°è§£è€¦ã€‚åŸæ–‡å†…å®¹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445server &#123; listen 80; server_name localhost; #charset koi8-r; #access_log /var/log/nginx/host.access.log main; location / &#123; root /usr/share/nginx/html; index index.html index.htm; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache&#x27;s document root # concurs with nginx&#x27;s one # #location ~ /\\.ht &#123; # deny all; #&#125;&#125; äºŒã€uwsgié…ç½®æ–‡ä»¶1.å‘½ä»¤å¯åŠ¨ï¼šuwsgi --ini uwsgi.iniï¼Œå½“å‰ç›®å½•ï¼ˆé¡¹ç›®ç›®å½•ï¼‰ä¸‹æ–°å»ºiniæ–‡ä»¶åœæ­¢ï¼šuwsgi --stop uwsgi.pidï¼ŒuWSGIæœåŠ¡å™¨å¯åŠ¨ååœ¨å½“å‰ç›®å½•è‡ªåŠ¨ç”Ÿæˆpidæ–‡ä»¶ï¼Œæ— éœ€æ–°å»º 2.æ–‡ä»¶è¯¦æƒ…æ–‡ä»¶ä½ç½®ï¼šä½äº[Project_Dir]/uwsgi.iniï¼Œæ­¤ä¹ƒç”¨æˆ·å»ºç«‹çš„é…ç½®æ–‡ä»¶ï¼ŒuwsgiæœåŠ¡å¯åŠ¨åŸºäºè¯¥æ–‡ä»¶ã€‚æ–‡ä»¶å†…å®¹ï¼š123456789101112131415161718192021222324252627[uwsgi]# ç”¨äºnginxä¸uwsgiå¯¹æ¥æ—¶çš„uwsgié…ç½®# (1)ä½¿ç”¨nginxè¿æ¥æ—¶ï¼Œä½¿ç”¨socketsocket = ip:port# (2)ç›´æ¥ä½œä¸ºwebæœåŠ¡å™¨ä½¿ç”¨(ç›¸å½“äºæµ‹è¯•ï¼Œ(1)(2)äºŒé€‰ä¸€)#http = ip:port# (3)é…ç½®å·¥ç¨‹ç›®å½•ï¼Œwsgi-fileä¸ºå…¥å£æ–‡ä»¶ï¼Œæ­¤ç”¨äºFlaskchdir = [Project_Absolute_dir]wsgi-file = app.py# routercallable = app_flask_instance# (4)é…ç½®é¡¹ç›®çš„wsgiç›®å½•ï¼Œç›¸å¯¹äºå·¥ç¨‹ç›®å½•(3)ï¼Œæ­¤ç”¨äºDjango#chdir = [Project_Absolute_dir]#wsgi-file = Project_name/wsgi.py#Note: unlike Flask, wsgi.py generated by Django automaticly# (5)é…ç½®è¿›ç¨‹å’Œçº¿ç¨‹ä¿¡æ¯processes = 4threads = 10enable-threads = Truemaster = Truepidfile = uwsgi.piddaemonize = uwsgi.log ä¸‰ã€é¡¹ç›®éƒ¨ç½²1.é¡¹ç›®æè¿°é¡¹ç›®ä½ç½®ï¼šä½äº/usr/local/flask_covid/é¡¹ç›®æ–‡ä»¶ï¼šä¸»è¦åŒ…æ‹¬app.pyï¼Œspider.pyï¼Œstatic/css+js/ï¼Œtemplates/main.htmlï¼Œä»¥åŠæµ‹è¯•é™æ€è·¯ç”±çš„æ–‡æœ¬æ–‡ä»¶static/mmdd.mdã€‚ 2.é…ç½®å‡†å¤‡ å°†Nginxé»˜è®¤çš„é…ç½®æ–‡ä»¶/etc/nginx/nginx.confå’Œ/etc/nginx/conf.d/default.confå¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œdefault.confç”¨å¤„ä¸å¤§ï¼ˆåªéœ€ç”¨åˆ°å°‘é‡å†…å®¹ï¼‰ ç¼–è¾‘é…ç½®æ–‡ä»¶/usr/local/flask_covid/nginx.confã€è‹¥å› érootç”¨æˆ·ä¿®æ”¹è€Œå‡ºç°æƒé™é—®é¢˜ï¼Œåˆ™éœ€ä¿®æ”¹æ–‡ä»¶æƒé™ã€‘ï¼Œå°†default.confå†…å®¹å»æ³¨é‡Šåå¤åˆ¶åˆ°nginx.confä¸­çš„include /etc/nginx/conf.d/*.conf;å¤„ã€ç”±äºå°†defaulté…ç½®è½¬ç§»è¿‡æ¥äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦includeè¯­å¥æ¥å¼•ç”¨ï¼Œåˆ é™¤ä¹‹ã€‘ï¼Œnginx.confå†…å®¹ä¸ºï¼š 1234567891011121314151617Â·Â·Â·omit text aboveÂ·Â·Â·#include /etc/nginx/conf.d/*.conf;#Copy &quot;server &#123;...&#125;&quot; from file=&quot;default.conf&quot;server &#123; listen 80; server_name localhost; #charset koi8-r; location / &#123; root /usr/share/nginx/html; index index.html index.htm; &#125; location = /50x.html &#123; root /usr/share/nginx/html; &#125; &#125; #Copy and replace over. ç»§ç»­ç¼–è¾‘é…ç½®æ–‡ä»¶/usr/local/flask_covid/nginx.confï¼Œæ–‡ä»¶å¦‚ä¸Šï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š (1)ä¿®æ”¹å­—ç¬¦é›†ï¼šcharset utf-8; (2)å°†rootç§»åŠ¨åˆ°ä¸Šä¸€çº§serverä¸‹ï¼Œå¹¶ä¿®æ”¹è·¯å¾„ä¸ºé¡¹ç›®çš„ç»å¯¹è·¯å¾„ï¼šroot /usr/local/flask_covid; (3)ä¿®æ”¹URLé™æ€è·¯ç”±çš„è§£æï¼šé¦–å…ˆå°†location / &#123;Â·Â·Â·&#125;ä¿®æ”¹ä¸ºlocation /static &#123;Â·Â·Â·&#125;ï¼Œä»¥ä¾¿äºè®¿é—®./staticé™æ€èµ„æºã€æ³¨ï¼šppt18ï¼Œå½“clientè¯·æ±‚å‘å‡ºè¯·æ±‚æ—¶ï¼Œç”±Nginxç›´æ¥æä¾›é™æ€èµ„æºï¼Œç”±uwsgié€šè¿‡Nginxæä¾›åŠ¨æ€èµ„æºï¼Œåè€…æ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ä»£ç†ã€‘ï¼Œç„¶åä¸ºå…¶å†…å®¹è®¾ç½®åˆ«åalias [Project_Absolute_dir]/static; (4)ç”±äºé»˜è®¤ç”¨æˆ·ä¸ºuser nginx;æ—¶è¿›ç¨‹master_process = root, worker_process = nginxï¼Œä¸ºäº†é¿å…è¯·æ±‚é™æ€èµ„æºæ—¶å‡ºç°çš„å› æƒé™ä¸å¤Ÿè€Œè¯·æ±‚å¤±è´¥çš„é—®é¢˜ï¼Œæ•…éœ€ä¿®æ”¹ç”¨æˆ·ï¼šuser root; æ­¤æ—¶åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œnginx -c /usr/local/flask_covid/nginx.confå¯åŠ¨NginxæœåŠ¡å™¨ï¼Œäºæ˜¯å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://ip/static/file_nameï¼ˆä¸åŠ ç«¯å£å·ï¼‰è®¿é—®åˆ°é™æ€èµ„æºï¼Œå°±å¦‚åŒæ“ä½œæ–‡ä»¶å¤¹ä¸€æ ·ã€å®æµ‹æˆåŠŸï¼Œç›´æ¥ä¸‹è½½åˆ°äº†./static/mmdd.mdæ–‡ä»¶ï¼Œå¹¶ä¸”./staticæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰èµ„æºçš†å¯è®¿é—®åˆ°ã€‘ã€‚ä¿®æ”¹ånginx.confå†…å®¹ä¸ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839user root;worker_processes 1;error_log /var/log/nginx/error.log warn;pid /var/run/nginx.pid;events &#123; worker-connections 1024 ; &#125;http &#123; include /etc/nginx/mime.types; default_type appplication/octet-stream; log_format main &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27; &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27; &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;; access_log /var/log/nginx/access.log main; sendfile on; #tcp_nopush on; keepalive_timeout 65; #gzip on; #include /etc/nginx/conf.d/*.conf; # ********** VERY IMPORTANT PARAGRAPH ********** #Copy &quot;server &#123;...&#125;&quot; from file=&quot;default.conf&quot; server &#123; listen 80; server_name localhost; charset utf-8; root /usr/local/flask_covid; location /static &#123; alias /usr/local/flask_covid/static; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125; &#125; #Copy and replace over. &#125; è‡³æ­¤æµ‹è¯•æˆåŠŸ 3.uWSGIé…ç½® å®‰è£…uwsgiï¼špip install uwsgi å·¥ç¨‹ç›®å½•ä¸‹åˆ›å»ºuwsgi.inié…ç½®æ–‡ä»¶å¹¶æ·»åŠ é…ç½®ä¿¡æ¯ï¼Œè§2.2 ä¸ªæ€§åŒ–ä¿®æ”¹å¦‚ä¸‹ï¼š éƒ¨ç½²æ—¶ç”¨(1)ï¼Œæµ‹è¯•æ—¶ç”¨(2)ï¼Œipè®¾ç½®ä¸º0.0.0.0ä¿è¯æ‰€æœ‰äººå¯ä»¥è®¿é—®ï¼Œç«¯å£å·ä¸app.pyç›¸åŒï¼› Flaské¡¹ç›®ç”¨(3)ï¼ŒDjangoé¡¹ç›®ç”¨(4)ï¼Œé…ç½®å·¥ç¨‹ç›®å½•chdirä¸ºé¡¹ç›®å®Œæ•´ç»å¯¹è·¯å¾„ï¼Œå¹¶ä¸nginx.confçš„server â†’ rootç›¸åŒï¼šchdir = /usr/local/flask_covidï¼›wsgi-fileä¸ºé¡¹ç›®å¯åŠ¨æ–‡ä»¶ã€æ³¨ï¼šDjangoé¡¹ç›®ä¼šè‡ªåŠ¨ç”Ÿæˆ./[Project_Name/wsgi.py]ã€‘ï¼› é…ç½®è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œå…¶ä¸­enable-threadsè¡¨ç¤ºçº¿ç¨‹å¯ç”¨ ä¿®æ”¹å®Œæˆåuwsgi.iniå†…å®¹ä¸ºï¼š 12345678910111213141516171819202122232425[uwsgi]# ç”¨äºnginxä¸uwsgiå¯¹æ¥æ—¶çš„uwsgié…ç½®# (1)ä½¿ç”¨nginxè¿æ¥æ—¶ï¼Œä½¿ç”¨socketsocket = 0.0.0.0:5000# (2)ç›´æ¥ä½œä¸ºwebæœåŠ¡å™¨ä½¿ç”¨(ç›¸å½“äºæµ‹è¯•ï¼Œéƒ¨ç½²æ—¶ä¸(1)äºŒé€‰ä¸€)#http = 0.0.0.0:5000# (3)é…ç½®å·¥ç¨‹ç›®å½•ï¼Œwsgi-fileä¸ºå…¥å£æ–‡ä»¶ï¼Œcallableä¸ºflaskå®ä¾‹ï¼Œæ­¤ç”¨äºFlaskchdir = /usr/local/flask_covidwsgi-file = app.py# routercallable = app# (4)é…ç½®é¡¹ç›®çš„wsgiç›®å½•ï¼Œç›¸å¯¹äºå·¥ç¨‹ç›®å½•(3)ï¼Œæ­¤ç”¨äºDjango#chdir = /usr/local/flask_covid#wsgi-file = flask_covid/wsgi.py#Note: unlike flask, wsgi.py generated by Django automaticly# (5)é…ç½®è¿›ç¨‹å’Œçº¿ç¨‹ä¿¡æ¯processes = 2threads = 4enable-threads = Truemaster = Truepidfile = uwsgi.piddaemonize = uwsgi.log ä½¿ç”¨uWSGIæœåŠ¡å™¨ï¼š å¯åŠ¨ï¼šuwsgi --ini uwsgi.iniï¼Œä¸èƒ½åŠ sudo åœæ­¢ï¼šuwsgi --stop uwsgi.pidï¼ŒuWSGIæœåŠ¡å™¨å¯åŠ¨ååœ¨å½“å‰ç›®å½•è‡ªåŠ¨ç”Ÿæˆpidæ–‡ä»¶ï¼Œæ— éœ€æ–°å»º æµ‹è¯•ï¼ˆæ‰“å¼€(2)ã€å…³é—­(1)ï¼‰ï¼šå¯åŠ¨ Nginxå’ŒuWSGIæœåŠ¡å™¨ï¼Œå‡ºç°[uWSGI] getting INI configuration from /usr/local/flask_covid/uwsgi.iniçš„ä¿¡æ¯è¡¨æ˜ uWSGIé…ç½®æˆåŠŸï¼Œæ­¤æ—¶å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://ip:portï¼ˆåŠ ç«¯å£å·ï¼‰è®¿é—® éƒ¨ç½²ï¼ˆæ‰“å¼€(1)ã€å…³é—­(2)ï¼‰ï¼šè§3.2 4.Nginxé…ç½® é¦–å…ˆåœæ­¢3.3çš„æµ‹è¯•ï¼šuwsgi --stop /usr/local/flask_covid/uwsgi.pidã€æ³¨ï¼šå¦‚æœæ— æ³•åœæ­¢å¹¶æŠ¥é”™ï¼šsignal_pidfile()/kill(): No such process [core/uwsgi.c line 1693]ï¼Œé¦–å…ˆåˆ©ç”¨ps -ef | grep uwsgiæŸ¥è¯¢å…¶è¿›ç¨‹å·ï¼Œç„¶åå°†uwsgi.pidæ–‡ä»¶ä¿®æ”¹ä¸ºç›¸åº”è¿›ç¨‹å·ï¼Œæœ€åæ‰§è¡Œåœæ­¢å‘½ä»¤ã€‘ éƒ¨ç½²æ—¶ï¼ŒuWSGIä¸ Nginxçš„å¯¹æ¥ä¾èµ–äº/etc/nginx/uwsgi_paramsæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åœ¨å®‰è£…uwsgiæ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œå…¶å®šä¹‰äº†ä¸€ç³»åˆ—çš„uwsgiå‚æ•° ç¼–è¾‘é…ç½®æ–‡ä»¶/usr/local/flask_covid/nginx.confï¼Œåœ¨åŸæ¥é…ç½®å¥½äº†çš„é™æ€æ–‡ä»¶ä¸‹é…ç½®é¦–é¡µç›®å½•ï¼Œlocationå®šä½å’Œè§£æçš„URL/å°±è¡¨ç¤ºé¦–é¡µï¼Œç„¶ååˆ©ç”¨includeå»å¯¹æ¥uwsgi_paramsæ–‡ä»¶ï¼Œuwsgi_passå»å…³è”localhostã€å› ä¸ºuWSGIä¸ æœåŠ¡å™¨åŒå±ä¸€ä¸ªåœ°æ–¹ã€‘ï¼Œç«¯å£å·portå¿…é¡»ä¸3.3uwsgi.iniçš„socketä¸€è‡´ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567location /static &#123; alias xxx/static/; &#125;location / &#123; include /etc/nginx/uwsgi_params; uwsgi_pass localhost:5000; &#125; ç”±äºä¿®æ”¹äº†Nginxé…ç½®ï¼Œå› æ­¤éœ€è¦å…ˆå…³é—­æœåŠ¡nginx -s quitï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼šnginx -c /usr/local/flask_covid/nginx.conf å¯åŠ¨uWSGIæœåŠ¡å™¨ï¼šuwsgi --ini /usr/local/flask_covid/uwsgi.ini æ­¤æ—¶nginxä¸uwsgiä¾¿å¯¹æ¥æˆåŠŸï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://ipï¼ˆä¸åŠ ç«¯å£å·ï¼‰è¿›è¡Œè®¿é—®ã€ç”±äºlocation /&#123;...&#125;ä¸‹é¢æœ‰uwsgi_pass localhost:8000è¿›è¡Œè½¬å‘ä»£ç†ï¼Œè‡ªåŠ¨åŠ ä¸Športï¼Œå› æ­¤ä¸èƒ½åŠ ç«¯å£å·ã€‘ å››ã€æ€»ç»“å»ºè®®ä¸å»ºè®®æ”¹å˜Nginxé»˜è®¤çš„é…ç½®æ–‡ä»¶/etc/nginx/nginx.confçš„ä½ç½®ï¼Œå½“éƒ¨ç½²å¤§å‹é¡¹ç›®æ—¶ï¼Œæˆ–æœ‰å¤šä¸ªæœåŠ¡éœ€è¦åŒæ—¶è¿è¡Œï¼Œåˆ™å°†å¯¼è‡´é…ç½®æ–‡ä»¶çš„æ··ä¹±ï¼Œä¸”éš¾ä»¥ä½¿ç”¨ç³»ç»ŸæœåŠ¡ç®¡ç†å·¥å…·systemctlï¼Œå»ºè®®çš„åšæ³•æ˜¯é’ˆå¯¹å…·ä½“çš„é¡¹ç›®ï¼Œåœ¨/etc/nginx/conf.d/ç›®å½•ä¸‹åˆ›å»ºå…·æœ‰æ ‡è¯†æ€§çš„ç‹¬ç”¨äºæœ¬é¡¹ç›®çš„é…ç½®æ–‡ä»¶myproject.confï¼Œä¾¿äºç»´æŠ¤ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"}],"tags":[{"name":"Linuxéƒ¨ç½²","slug":"Linuxéƒ¨ç½²","permalink":"https://hwame.top/tags/Linux%E9%83%A8%E7%BD%B2/"}]},{"title":"å¦‚ä½•ä½¿matplotlibåŒæ—¶ä½¿ç”¨å®‹ä½“å’ŒTimes New Roman","slug":"customize-matplotlib-fonts","date":"2020-05-21T02:38:22.000Z","updated":"2020-05-21T12:20:05.000Z","comments":true,"path":"20200521/customize-matplotlib-fonts.html","link":"","permalink":"https://hwame.top/20200521/customize-matplotlib-fonts.html","excerpt":"æ‘˜è¦ï¼šä¸€èˆ¬è®ºæ–‡è¦æ±‚ä¸­æ–‡å®‹ä½“ã€è¥¿æ–‡Times New Romanï¼Œå› æ­¤ä¸ºäº†è§„èŒƒæ’ç‰ˆï¼Œæœ‰å¿…è¦è§£å†³å®ƒã€‚ç„¶è€Œå¯¹äºmatplotlibçš„ç»˜å›¾ç½‘ä¸Šå¹¶æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€è°“çš„åŠæ³•éƒ½æ˜¯æ¸…ä¸€è‰²çš„ã€Œé»‘ä½“ã€ï¼Œå› æ­¤æœ¬æ–‡å¯»æ±‚äº†ä¸€ç§æ›¿ä»£æ–¹æ¡ˆä½œä¸ºæŠ˜ä¸­ã€‚","text":"æ‘˜è¦ï¼šä¸€èˆ¬è®ºæ–‡è¦æ±‚ä¸­æ–‡å®‹ä½“ã€è¥¿æ–‡Times New Romanï¼Œå› æ­¤ä¸ºäº†è§„èŒƒæ’ç‰ˆï¼Œæœ‰å¿…è¦è§£å†³å®ƒã€‚ç„¶è€Œå¯¹äºmatplotlibçš„ç»˜å›¾ç½‘ä¸Šå¹¶æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€è°“çš„åŠæ³•éƒ½æ˜¯æ¸…ä¸€è‰²çš„ã€Œé»‘ä½“ã€ï¼Œå› æ­¤æœ¬æ–‡å¯»æ±‚äº†ä¸€ç§æ›¿ä»£æ–¹æ¡ˆä½œä¸ºæŠ˜ä¸­ã€‚ æ–‡ç« è¯´æ˜æ–‡ç« è¯´æ˜ï¼šæœ¬æ–‡é¦–å‘äº2019-12-15@çŸ¥ä¹ï¼Œæ›´æ–°äº2020-05-21@GitPagesã€‚å¦è¯·å‚è€ƒï¼šçŸ¥ä¹ï¼šç”¨Pythonçš„matplotlibç”»å›¾ï¼Œæ€ä¹ˆä¿è¯xlabelä¸­ä¸­æ–‡ç”¨å®‹ä½“ï¼Œè‹±æ–‡ç”¨æ–°ç½—é©¬ï¼Ÿå¦è¯·å‚è€ƒï¼šçŸ¥ä¹ï¼šMatplotlib ä¸­è‹±æ–‡åŠå…¬å¼å­—ä½“è®¾ç½®â€”â€”ã€æ–‡ç« ä½œè€…ï¼šcherichy@çŸ¥ä¹ã€‘æ–‡ç« ä½œè€…ï¼šå¦‚æœæˆ‘å¯ä»¥å¿˜è®°åˆ›å»ºæ—¶é—´ï¼š2019-12-15æ›´æ–°æ—¶é—´ï¼š2020-05-21 å†™åœ¨å‰é¢å†™åœ¨å‰é¢ï¼šæŠ±ç€å¯¹è‡ªå·±è¯´è¯è´Ÿè´£çš„æ€åº¦ï¼šæ­¤é¢˜æ— è§£ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬çœŸçš„å¯¹ä»–æ²¡è¾™å„¿äº†å—ï¼Ÿéä¹Ÿã€‚ä¸¤ç§æ€è·¯ï¼šâ‘ æ‰¾åˆ°ä¸€ç§å­—ä½“TimesSong.ttfï¼›â‘¡å¯»æ‰¾ä¸€ç§æ›¿ä»£å“ï¼Œé€€è€Œæ±‚å…¶æ¬¡ã€‚ ä½œä¸ºä¸€æšæ ‡å‡†å¤„å¥³åº§ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå›°æ‰°äº†æˆ‘å¥½ä¹…ã€‚ä¸€èˆ¬è®ºæ–‡ä¸­å­—ä½“ä¸­æ–‡è¦æ±‚å®‹ä½“ã€è¥¿æ–‡ï¼»è‹±æ–‡ï¼‹æ•°å­—ï¼½è¦æ±‚Times New Romanï¼Œå› æ­¤ä¸ºäº†è§„èŒƒæ’ç‰ˆï¼Œæœ‰å¿…è¦è§£å†³å®ƒã€‚ è¯´æ˜ï¼šä¸‹æ–‡é…ç½®ä¸­çš„æ­¥éª¤å°½é‡ç®€å†™ï¼Œé»˜è®¤ä¸ºå¤§å®¶çŸ¥é“å¦‚ä½•ä¿®æ”¹é…ç½®æ–‡ä»¶matplotlibrcï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹æˆ‘åœ¨SegmentFaultæ€å¦æé—®çš„å¸–å­ï¼šSegmentFaulté—®ç­”ï¼šmatplotlibå­—ä½“é…ç½®é—®é¢˜ã€‚ ä»¥ä¸‹è¯¦è°ˆã€‚ ä¸æƒ³çœ‹çš„ç›´æ¥æ‹‰åˆ°æœ«å°¾&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; æ€è·¯ä¸€ï¼šæ‰¾åˆ°ä¸€ç§å­—ä½“TimesSong.ttfï¼ˆéšæ„å–åï¼‰è¿™ç§æ€è·¯æ˜¯æœ‰æ ¹æ®çš„ï¼Œå› ä¸ºç»æˆ‘æµ‹è¯•ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œmatplotlibåªèƒ½åŒæ—¶æ”¯æŒä¸€ç§å­—ä½“ï¼Œè€Œå®‹ä½“å’ŒTimes New Romanæ˜¯â€œä¸å…¼å®¹â€ï¼ˆæè¿°ä¸å‡†ï¼Œæ„ä¼šå³å¯ï¼‰çš„ï¼Œæˆ‘ä»¬èƒ½å¦å°†å®‹ä½“å’ŒTimes New Romanè¿™ä¸¤ç§å­—ä½“åˆå¹¶ä¸ºæ–°çš„å­—ä½“TimesSong.ttfå‘¢ï¼Ÿ è·å¾—TimesSong.ttfå­—ä½“åï¼Œå°†å…¶æ·»åŠ åˆ°D:\\Python3.7.3\\Lib\\site-packages\\matplotlib\\mpl-data\\fonts\\ttfæ–‡ä»¶å¤¹ã€å†™å…¥matplotlibrcæ–‡ä»¶ï¼Œä¿å­˜ååˆ é™¤ç¼“å­˜C:\\Users\\é´»å¡µ.matplotlibå³å¯ã€‚ æ­¤æ³•ç†è®ºå¯è¡Œï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“æ€ä¹ˆåˆå¹¶å­—ä½“ï¼ˆæ®è¯´è¿æ³•ï¼Œç‰ˆæƒä»€ä¹ˆçš„â€¦ï¼‰ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è¯•è¯•ï¼»å…¶å®æˆ‘è¯•è¿‡ï¼Œä½†é‚£ä¸ªè½¯ä»¶æ— æ³•æ¿€æ´»ï¼½ã€‚ æ€è·¯äºŒï¼šå¯»æ‰¾ä¸€ç§æ›¿ä»£å“ï¼šSTSongè¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šå›¾çœ‹çœ‹ï¼š ä»£ç å¦‚ä¸‹ï¼š123&gt;&gt;&gt; import matplotlib.pyplot as plt &gt;&gt;&gt; plt.title(u&#x27;ä»Šå¤©æ˜¯2019.12.14ï¼ŒSaturday&#x27;) &gt;&gt;&gt; plt.xlabel(r&#x27;LaTexå…¬å¼$+\\sum_&#123;n=0&#125;^&#123;\\infty&#125;\\frac&#123;1&#125;&#123;(2n+1)^2&#125;=\\frac&#123;\\pi^2&#125;&#123;8&#125;$&#x27;)ä¸ä»…èƒ½ä¸­è‹±æ··è¾“ï¼Œè€Œä¸”è¿LaTexå…¬å¼éƒ½å¯ä»¥ã€‚ åŒæ ·ï¼Œäººåº”è¯¥å¯¹è‡ªå·±è¯´çš„è¯è´Ÿè´£ï¼š â‘ å…¬å¼æ˜¾ç¤ºæˆ‘ä¿®æ”¹è¿‡é…ç½®æ–‡ä»¶ï¼šmathtext.fontset : stix ï¼»å¤‡æ³¨ï¼š Should be â€˜dejavusansâ€™ (default), â€˜dejavuserifâ€™, â€˜cmâ€™ (Computer Modern), â€˜stixâ€™, â€˜stixsansâ€™ or â€˜customâ€™ï¼½ï¼› â‘¡å…¬å¼ä¸­çš„è¥¿æ–‡å­—ä½“å¯æ­£å¸¸æ˜¾ç¤ºï¼Œå› ä¸ºstixå­—ä½“é›†å°±æ˜¯é€‚é…Timesï¼ˆå¯èƒ½æ˜¯Times New Romanï¼Œè®°ä¸æ¸…ï¼‰å­—ä½“çš„ï¼Œä½†æ˜¯ä¸­æ–‡ä¸è¡Œï¼Œæ‰€ä»¥æˆ‘åœ¨ä¸Šå›¾é‡Œä¸­æ–‡æ˜¯æ²¡æœ‰åŒ…å«åœ¨ç¾å…ƒç¬¦å·é‡Œçš„ï¼Œå¦‚æœç½®äº$$å†…å°†æŠ¥é”™ï¼šFont â€˜rmâ€™ does not have a glyph for â€˜\\u5417â€™ [U+5417], substituting with a dummy symbolã€‚ç†è®ºä¸Šï¼Œå¯ä¿®æ”¹å­—ä½“é›†ä¸ºè‡ªå®šä¹‰customç„¶åä¿®æ”¹æ¯ä¸€ä¸ªç‰¹å®šå­—ä½“ï¼Œä½†æˆ‘å·æ‡’ç›´æ¥æ”¹çš„æ•´ä¸ªå­—ä½“é›†ã€‚ å›åˆ°æ­£æ–‡ï¼Œå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒSTSongå­—ä½“è¿˜æ˜¯æ¯”è¾ƒç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸçš„ï¼Œæ‰€è°“â€œé€€è€Œæ±‚å…¶æ¬¡â€å˜›ï¼Œæ€»æ¯”ç½‘ä¸Šæ¸…ä¸€è‰²çš„â€œSimHeiâ€çš„æ•·è¡å¼çš„ä¸è´Ÿè´£ä»»çš„å›ç­”è¦å¥½å¾—å¤šã€‚ æ‰€ä»¥æ¨èå¤§å®¶é‡‡ç”¨å’Œæˆ‘ç›¸åŒçš„é…ç½®ï¼ˆè§ä¸‹ï¼‰ã€‚ å›ç­”å®Œæ¯•ï¼Œä¸‹æ–‡å¡«å‘ã€‚ 1. æµ‹è¯•å­—ä½“åˆ—è¡¨ç”±äºæˆ‘ä¿®æ”¹è¿‡é…ç½®æ–‡ä»¶matplotlibrcï¼Œæ‰€ä»¥è¯´è¡Œæ•°å¯èƒ½ä¸å‡†ç¡®ï¼Œå› æ­¤ä»¥å®˜ç½‘A sample matplotlibrc fileä¸ºå‡†ï¼šmatplotlibå®˜æ–¹æ•™ç¨‹ã€‚ æ–‡ä»¶169è¡Œè¯´ï¼š The font.family property has five values: xx, xx, xx, xx, and xx. Each of these font families has a default list of font names in decreasing order of priority associated with them. When text.usetex is False, font.family may also be one or more concrete font names. ç¿»è¯‘ï¼šfont.familyå±æ€§æœ‰äº”ä¸ªå€¼ã€‚è¿™äº›å­—ä½“ç³»åˆ—ä¸­çš„æ¯ä¸€ä¸ªéƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„å­—ä½“åç§°åˆ—è¡¨ï¼ŒæŒ‰ç…§ä¸å…¶ç›¸å…³è”çš„ä¼˜å…ˆçº§çš„é™åºæ’åˆ—ã€‚å½“text.usetexå±æ€§ä¸ºFalseæ—¶ï¼Œfont.familyä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå…·ä½“çš„å­—ä½“åç§°ã€‚ è¿™æ®µè¯å‘Šè¯‰æˆ‘ä»¬ï¼ŒæŒ‡å®šfont.familyçš„å±æ€§å€¼ï¼ˆä¸€èˆ¬ä¸ºsans-serif&lt;é»˜è®¤&gt;æˆ–serifï¼‰åï¼Œå°±å¯ä»¥å°†209è¡Œfont.serifæˆ–210è¡Œfont.sans-serifå¯¹åº”çš„å­—ä½“åé»˜è®¤åˆ—è¡¨default list of font namesè°ƒæ•´é¡ºåºï¼ˆä¼˜å…ˆçº§priorityï¼‰ï¼Œä½¿å¾—ä¼˜å…ˆæ˜¾ç¤ºå‰é¢çš„å­—ä½“ã€‚ä½†æ˜¯è¿™æ®µè¯ä¹Ÿè¯¯å¯¼äº†æˆ‘ï¼šæ˜¯ä¸æ˜¯æ„å‘³ç€å½“ç¬¬ä¸€ä¸ªå­—ä½“å¤±è´¥æ—¶è‡ªåŠ¨ä½¿ç”¨ç¬¬äºŒç§å­—ä½“å‘¢ï¼Ÿ æ’å¥é¢˜å¤–è¯ï¼Œæ ¹æ®ç™¾åº¦ç™¾ç§‘çš„è§£é‡Šï¼ŒSans-serifæ˜¯ä¸“æŒ‡è¥¿æ–‡ä¸­æ²¡æœ‰è¡¬çº¿çš„å­—ä½“ï¼Œä¸æ±‰å­—å­—ä½“ä¸­çš„é»‘ä½“ç›¸å¯¹åº”ã€‚ åŸæ¥å¦‚æ­¤ï¼Œè¿™ä¹ˆçœ‹å°±èƒ½å¯¹åº”ä¸Šäº†ã€‚ é¦–å…ˆï¼Œå°†198è¡Œçš„#font.family : sans-serifæ”¹ä¸ºfont.family : serifï¼ˆæ²¡æœ‰è¡Œå†…ä»£ç å¾ˆéš¾å—ï¼‰ï¼Œæ ¹æ®ç™¾ç§‘çš„è¯ä¸­æ–‡åº”ä¸ºè¡¬çº¿å­—ä½“ã€‚ ç„¶åï¼Œå°†209è¡Œ#font.serif : DejaVu Serif, Bitstream Vera Serif, Computer Modern Roman, New Century Schoolbook, Century Schoolbook L, Utopia, ITC Bookman, Bookman, Nimbus Roman No9 L, Times New Roman, Times, Palatino, Charter, serifï¼ˆçœ‹åˆ°æ²¡ï¼Œæœ¬æ¥å°±æœ‰Times New Romançš„ï¼‰æ”¹ä¸ºfont.serif : STSong, SimSun, Times New Roman, Times,DejaVu Serif, Bitstream Vera Serif, Computer Modern Roman, New Century Schoolbook, Century Schoolbook L, Utopia, ITC Bookman, Bookman, Nimbus Roman No9 L, Palatino, Charter, serifï¼Œè°ƒæ•´é¡ºåºå˜›ï¼ŒSTSongä¼˜å…ˆçº§æœ€é«˜ï¼Œåº”ä¸ºå®ƒæ˜¯å”¯ä¸€èƒ½æœ€å¤§ç¨‹åº¦æ»¡è¶³è¦æ±‚çš„å­—ä½“ã€‚ æ³¨æ„ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶æ˜¯ä¸€åŠ³æ°¸é€¸çš„åŠæ³•ï¼Œå¯åŠ¨Pythonå³å¯ç”¨ï¼Œå¦‚æœåœ¨Pythoné‡Œä»¥1&gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;STSong&#x27;]çš„æ–¹å¼ä¿®æ”¹ï¼Œåªèƒ½å½±å“å½“å‰ç¯å¢ƒï¼Œé€€å‡ºPythonå³å¤±æ•ˆã€‚ ç»æˆ‘æµ‹è¯•ï¼Œæ— æ³•ä½¿ä¸¤ç§å­—ä½“åŒæ—¶ç”Ÿæ•ˆï¼Œä½†ä¼˜å…ˆçº§ç¡®å®å¯ä»¥è§£å†³éƒ¨åˆ†é—®é¢˜ã€‚ å•ä¸ªå­—ä½“ï¼šâ‘ Times New Romanï¼›â‘¡Timesï¼›â‘¢SimSunï¼›â‘£STSong 123456789101112131415161718&gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;Times New Roman&#x27;] &gt;&gt;&gt; plt.title(u&#x27;å­—ä½“Python2019&#x27;) &gt;&gt;&gt; # ä¸æŠ¥é”™ï¼Œä½†ä¸­æ–‡æ˜¾ç¤ºå¼‚å¸¸ï¼ˆæ˜¾ç¤ºä¸ºâ–¡â–¡ï¼‰ï¼Œè¥¿æ–‡æ­£å¸¸ä¸”ç¬¦åˆè¦æ±‚ &gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;Times&#x27;] &gt;&gt;&gt; plt.title(u&#x27;å­—ä½“Python2019&#x27;) &gt;&gt;&gt; # æŠ¥é”™ï¼šfindfont: Font family [&#x27;serif&#x27;] not found. Falling back to DejaVu Sans. &gt;&gt;&gt; # ä¸­è‹±æ–‡æ˜¾ç¤ºå‡å¼‚å¸¸ï¼Œä¸å±äºä¸Šè¿°å››ç§ä¹‹ä¸€ï¼ˆTimeså­—ä½“ï¼Ÿä¸è®¤è¯†ï¼Œæœ‰ç‚¹åƒåŠ ç²—çš„é»‘ä½“ï¼‰ &gt;&gt;&gt; # ç¬¬äºŒæ¬¡ä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œä¸çŸ¥ä¸ºä½• &gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;SimSun&#x27;] &gt;&gt;&gt; plt.title(u&#x27;å­—ä½“Python2019&#x27;) &gt;&gt;&gt; # ä¸æŠ¥é”™ï¼Œä¸­è‹±æ–‡çš†ä¸ºå®‹ä½“ &gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;STSong&#x27;] &gt;&gt;&gt; plt.title(u&#x27;å­—ä½“Python2019&#x27;) &gt;&gt;&gt; # ä¸æŠ¥é”™ï¼Œä¸­è‹±æ–‡çš†ä¸ºSTSong &gt;&gt;&gt; # æ­¤ä¸ºæœ€ä½³æ–¹æ¡ˆ ä¸¤ç§å­—ä½“ï¼šâ‘ Times New Romanï¼‹SimSunï¼›â‘¡Times New Romanï¼‹STSongï¼›â‘¢Timesï¼‹SimSunï¼›â‘£Timesï¼‹STSongã€‚ 1234567891011121314151617&gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;Times New Roman&#x27;,&#x27;SimSun&#x27;] &gt;&gt;&gt; plt.title(u&#x27;å­—ä½“Python2019&#x27;) &gt;&gt;&gt; # ç¬¬ä¸€æ¬¡æŠ¥é”™ï¼šRuntimeWarning: Glyph 20307 missing from current font. &gt;&gt;&gt; # ç¬¬äºŒæ¬¡æ²¡æœ‰æŠ¥é”™ï¼Œä¸¤æ¬¡æ˜¾ç¤ºæ•ˆæœä¸€æ · &gt;&gt;&gt; # ä½†ä¸­æ–‡æ˜¾ç¤ºå¼‚å¸¸ï¼ˆæ˜¾ç¤ºä¸ºâ–¡â–¡ï¼‰ï¼Œè¥¿æ–‡æ­£å¸¸ä¸ºTimes New Roman &gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;Times New Roman&#x27;,&#x27;STSong&#x27;] &gt;&gt;&gt; plt.title(u&#x27;å­—ä½“Python2019&#x27;) &gt;&gt;&gt; # ä¸æŠ¥é”™ï¼Œä¸­æ–‡å¼‚å¸¸ã€è¥¿æ–‡æ­£å¸¸ &gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;Times&#x27;,&#x27;SimSun&#x27;] &gt;&gt;&gt; plt.title(u&#x27;å­—ä½“Python2019&#x27;) &gt;&gt;&gt; # ä¸æŠ¥é”™ï¼Œä¸­è‹±æ–‡çš†ä¸ºå®‹ä½“ &gt;&gt;&gt; plt.rcParams[&#x27;font.serif&#x27;] = [&#x27;Times&#x27;,&#x27;STSong&#x27;] &gt;&gt;&gt; plt.title(u&#x27;å­—ä½“Python2019&#x27;) &gt;&gt;&gt; # ä¸æŠ¥é”™ï¼Œä¸­è‹±æ–‡çš†ä¸ºSTSong ç”±ä¸Šæµ‹è¯•å¯çŸ¥ï¼Œä¸è®ºæ˜¯ä¸¤ç§å­—ä½“è¿˜æ˜¯ä¸€ç§å­—ä½“ï¼Œå¥½åƒéƒ½å–å†³äºåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªã€‚ä½†æ˜¯ä¸Šè¿°ä¸¤ç§å­—ä½“çš„åä¸¤ç§æµ‹è¯•åˆä¼¼ä¹è¯´æ˜äº†â€œä¼˜å…ˆçº§â€çš„é—®é¢˜ï¼šå•[â€˜Timesâ€™]æ—¶æŠ¥é”™äº†ä¸€æ¬¡ï¼ŒåŒ[â€˜Timesâ€™,â€™SimSun/STSongâ€™]æ—¶æŒ‰ç¬¬äºŒä¸ªã€‚èƒ½å¦ç†è§£ä¸ºTimeså¤±æ•ˆç»§è€Œé‡‡ç”¨SimSun/STSongå‘¢ï¼Ÿ 2.LaTexå…¬å¼æ–‡ä»¶264è¡Œè¯´ï¼š The following settings allow you to select the fonts in math mode. They map from a TeX font name to a fontconfig font pattern. These settings are only used if mathtext.fontset is â€˜customâ€™. ç¿»è¯‘ï¼šä»¥ä¸‹è®¾ç½®å…è®¸ä½ åœ¨æ•°å­¦æ¨¡å¼ä¸­é€‰æ‹©å­—ä½“ï¼Œå®ƒä»¬ä»TeXå­—ä½“åç§°æ˜ å°„åˆ°fontconfigå­—ä½“æ¨¡å¼ã€‚è¿™äº›è®¾ç½®ä»…åœ¨mathtext.fontsetä¸ºâ€œè‡ªå®šä¹‰â€æ—¶ä½¿ç”¨ã€‚ è¿™æ®µè¯å‘Šè¯‰æˆ‘ä»¬ï¼Œæœ€å¥½åˆ«ä¹±æ”¹ä»¥ä¸‹è¿™å‡ ä¸ªå±æ€§ï¼ˆå«ä¹‰å‚è€ƒLaTeX å„ç§å‘½ä»¤ï¼Œç¬¦å·ï¼‰ï¼š calï¼æ‰‹å†™ä½“ï¼›rmï¼ç½—é©¬ä½“ï¼›ttï¼æ‰“å­—æœºå­—ä½“ï¼›itï¼æ„å¤§åˆ©æ–œä½“ï¼›bfï¼æ­£ç²—ä½“ï¼›sfï¼æ— è¡¬çº¿å­—ä½“ã€‚123456#mathtext.cal : cursive #mathtext.rm : sans #mathtext.tt : monospace #mathtext.it : sans:italic #mathtext.bf : sans:bold #mathtext.sf : sansè‹¥éå¿…è¦ï¼Œè¯·å‹¿æ›´æ”¹ï¼Œç›´æ¥å°†fontsetæ”¹ä¸ºstixå³å¯ã€‚ 3.å…¶ä»–ä¸Šæ–‡ä¸­çš„STSongå­—ä½“å³åæ–‡å®‹ä½“ï¼Œæœ‰çŸ¥å‹æœ‰æ²¡æœ‰ä¸€ç§ç»„åˆå­—ä½“ï¼Œä¸­æ–‡æ˜¯å®‹ä½“ï¼Œè‹±æ–‡æ˜¯times new romanï¼Ÿ - çŸ¥ä¹ç”¨æˆ·çš„å›ç­”è¯´ï¼š åæ–‡å®‹ä½“ã€æ–¹æ­£ä¹¦å®‹ã€æ–¹æ­£æ–°ä¹¦å®‹ã€æ€æºå®‹ä½“ã€Adobeå®‹ä½“ï¼Œè¿™äº›éƒ½æ˜¯åŸç”Ÿæ­é…å¥½çš„ã€‚ ç»æˆ‘åœ¨Wordé‡Œæµ‹è¯•ï¼Œä¸â€œå®‹ä½“ï¼‹Times New Romanâ€æœ€æ¥è¿‘çš„åªæœ‰åæ–‡å®‹ä½“ï¼ˆæ³¨æ„ï¼šç”±äºç”µè„‘æ²¡æœ‰å®‰è£…æ–¹æ­£å®‹ä½“ã€æ–¹æ­£æ–°ä¹¦å®‹å’Œæ€æºå®‹ä½“ï¼Œæ•…ä»¥é»‘ä½“ä»£æ›¿å¹¶å¡«å……ç»¿è‰²ï¼›å¦Adobeå®‹ä½“åç§°ä¸ºAdobeå®‹ä½“StdLï¼‰ã€‚ é™¤ä¸Šè¿°ä¿®æ”¹å¤–ï¼Œæ–‡ä»¶329è¡Œçš„axes.unicode_minuså±æ€§åº”æ”¹ä¸ºFalseä»¥æ­£å¸¸æ˜¾ç¤ºç¬¦å·ã€‚ 4.æ€»ç»“ é€€å‡ºPythonï¼Œåˆ é™¤ç”¨æˆ·ç›®å½•ä¸‹çš„ç¼“å­˜æ–‡ä»¶ï¼ˆC:\\Users\\é´»å¡µ.matplotlibæ•´ä¸ªæ–‡ä»¶å¤¹ï¼‰ï¼› ä¿®æ”¹é…ç½®æ–‡ä»¶matplotlibrcï¼ˆD:\\Python3.7.3\\Lib\\site-packages\\matplotlib\\mpl-data\\matplotlibrcï¼‰ï¼› ç¬¬198è¡Œï¼šåŸæ–‡#font.family : sans-serifï¼Œä¿®æ”¹font.family : serifï¼› ç¬¬209è¡Œï¼šåŸæ–‡#font.serif : DejaVu Serif, Bitstream Vera Serif, Computer Modern Roman, New Century Schoolbook, Century Schoolbook L, Utopia, ITC Bookman, Bookman, Nimbus Roman No9 L, Times New Roman, Times, Palatino, Charter, serifï¼Œä¿®æ”¹font.serif : STSong, SimSun, Times New Roman, Times, DejaVu Serif, Bitstream Vera Serif, Computer Modern Roman, New Century Schoolbook, Century Schoolbook L, Utopia, ITC Bookman, Bookman, Nimbus Roman No9 L, Palatino, Charter, serifï¼› ç¬¬275è¡Œï¼šåŸæ–‡#mathtext.fontset : dejavusansï¼Œä¿®æ”¹mathtext.fontset : stixï¼› ç¬¬329è¡Œï¼šåŸæ–‡#axes.unicode_minus : Trueï¼Œä¿®æ”¹axes.unicode_minus : Falseï¼› ä¿å­˜é€€å‡ºï¼ˆä¸Šè¿°å››ä¸ªä½ç½®ä¿®æ”¹æ—¶åˆ‡è®°å»æ‰æ³¨é‡Šç¬¦ï¼‰ã€‚ è¯´æ˜ï¼š æ­¤æ–¹æ³•ä¿®æ”¹æ˜¯åŸºäºé…ç½®æ–‡ä»¶matplotlibrcçš„ï¼Œä¸€ç»ä¿®æ”¹æ°¸ä¹…ç”Ÿæ•ˆä¸”å½±å“å…¨å±€å­—ä½“ï¼Œä½†ä»å¯åœ¨å…·ä½“åº”ç”¨æ—¶plt.rcParams[â€˜xxxâ€™]=[â€˜xxxâ€™]åŠ¨æ€ä¿®æ”¹ï¼› å…¬å¼å­—ä½“æ˜¯ç‹¬ç«‹çš„ï¼Œä¸å—å…¶ä»–è®¾ç½®å½±å“ï¼Œå…¬å¼å­—ä½“ä¸æ”¯æŒä¸­æ–‡ï¼ˆstixé›†ä¸æ”¯æŒï¼‰ï¼Œåº”ç”¨æ—¶è‹¥æœ‰éœ€è¦å¯ä»¥å°†ä¸­æ–‡æ”¾åœ¨ç¾å…ƒå·å¤–ï¼Œè‹¥ä¸­æ–‡å¿…é¡»åœ¨$$å†…ï¼Œå¯å°è¯•mathtext.fontset = customåå†ä¿®æ”¹ç±»ä¼¼äºmathtext.rm : sansçš„ç›¸å…³å±æ€§ï¼ˆæ ¹æ®æŠ¥é”™æç¤ºä¿®æ”¹ï¼‰ï¼› é™¤ä¿®æ”¹matplotlibrcæ–‡ä»¶å¤–ï¼Œæˆ‘è¿˜æ‹·äº†Times New Romanã€å®‹ä½“ç­‰å¥½å‡ ç§å­—ä½“åˆ°D:\\Python3.7.3\\Lib\\site-packages\\matplotlib\\mpl-data\\fonts\\ttfæ–‡ä»¶å¤¹ä¸‹ï¼Œä½†ä¼¼ä¹è¿™ä¸€æ­¥ä¸éœ€è¦ï¼ˆæœªç»è€ƒè¯ï¼‰ï¼› matplotlibç‰ˆæœ¬ä¸º3.1.0ï¼ŒPythonç‰ˆæœ¬ä¸º3.7.3ï¼Œæœ‰çŸ¥å‹è¯´éœ€è¦ä¿®æ”¹D:\\Python3.7.3\\Lib\\site-packages\\matplotlib\\font_manager.pyæ–‡ä»¶ ä¸Šè¿°åŠæ³•åªç®—æ˜¯è’™æ··è¿‡å…³ï¼Œä¸ç®—è§£å†³æ–¹æ¡ˆï¼Œåç»­è‹¥æœ‰æ›´å¥½çš„å†æ¥æ›´æ–°ï¼› çŸ¥ä¹é¦–ç­”ï¼Œæ¯”è¾ƒæ··ä¹±ï¼Œæœ‰å¾ˆå¤šé‡å¤ï¼Œå¤§å®¶èƒ½çœ‹æ‡‚å°±è¡Œã€‚","categories":[{"name":"python","slug":"python","permalink":"https://hwame.top/categories/python/"}],"tags":[{"name":"matplotlib","slug":"matplotlib","permalink":"https://hwame.top/tags/matplotlib/"},{"name":"python","slug":"python","permalink":"https://hwame.top/tags/python/"}]},{"title":"Hexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜","slug":"hello-hexo-troubleshooting","date":"2020-05-20T12:20:05.000Z","updated":"2020-11-30T05:22:28.000Z","comments":true,"path":"20200520/hello-hexo-troubleshooting.html","link":"","permalink":"https://hwame.top/20200520/hello-hexo-troubleshooting.html","excerpt":"æ‘˜è¦ï¼šè¿™éƒ¨åˆ†å†…å®¹ä¸»è¦å¯¹åšå®¢åšæœ€åçš„å®Œå–„ï¼ŒåŒ…æ‹¬é­”æ”¹éƒ¨åˆ†é¡µé¢å’Œæ‹¯æ•‘å¼ºè¿«ç—‡ã€‚","text":"æ‘˜è¦ï¼šè¿™éƒ¨åˆ†å†…å®¹ä¸»è¦å¯¹åšå®¢åšæœ€åçš„å®Œå–„ï¼ŒåŒ…æ‹¬é­”æ”¹éƒ¨åˆ†é¡µé¢å’Œæ‹¯æ•‘å¼ºè¿«ç—‡ã€‚ Hexoåšå®¢æ­å»ºåšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²ï¼Œç¯å¢ƒæ­å»ºå¹¶éƒ¨ç½²è‡³Githubã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®ï¼Œé’ˆå¯¹pureä¸»é¢˜è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(3)â€”â€”ä¼˜åŒ–è¯„è®ºç³»ç»Ÿï¼Œä¸»è¦å¯¹Valineè¯„è®ºç³»ç»Ÿè¿›è¡Œä¼˜åŒ–ã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ï¼Œä¿®å¤äº†pureä¸»é¢˜çš„ç³»åˆ—å°bugã€‚æ–‡ç« ä½œè€…ï¼šé´»å¡µ 1.å¦‚ä½•ä½¿å…¶æ”¯æŒMathjaxå‚è€ƒæ–‡ç« ï¼šå¦‚ä½•åœ¨ hexo ä¸­æ”¯æŒ Mathjaxï¼Ÿæ³¨ï¼š Mathjaxå…¬å¼ä¸­*å·è¡¨ç¤ºæ–œä½“ï¼Œ\\timesæ‰è¡¨ç¤ºä¹˜å·Ã— 1.ä½¿ç”¨Kramedä»£æ›¿MarkedHexoé»˜è®¤çš„æ¸²æŸ“å¼•æ“æ˜¯markedï¼Œä½†æ˜¯markedä¸æ”¯æŒmathjaxå…¬å¼ï¼Œkramedæ˜¯åœ¨markedçš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¸è½½markedã€å®‰è£…kramedï¼š 12npm uninstall hexo-renderer-marked --savenpm install hexo-renderer-kramed --save ç„¶åä¿®æ”¹./node_modules/hexo-renderer-kramed/lib/renderer.jsç¬¬65è¡Œå‡½æ•°çš„returnéƒ¨åˆ†ï¼š 123456// Change inline math rulefunction formatText(text) &#123; // Fit kramed&#x27;s rule: $$ + \\1 + $$ // return text.replace(/`\\$(.*?)\\$`/g, &#x27;$$$$$1$$$$&#x27;); return text;&#125; 2.åœç”¨hexo-mathå¸è½½hexo-mathï¼Œå®‰è£…hexo-renderer-mathjaxã€GitHubåœ°å€ã€‘ï¼š 12npm uninstall hexo-math --savenpm install hexo-renderer-mathjax --save 3.æ›´æ–°Mathjaxçš„ CDN é“¾æ¥ä¿®æ”¹./node_modules/hexo-renderer-mathjax/mathjax.htmlæœ€åä¸€è¡Œçš„&lt;script&gt;æ ‡ç­¾çš„srcå±æ€§ï¼š 1&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML&quot;&gt;&lt;/script&gt; 4.æ›´æ”¹é»˜è®¤è½¬ä¹‰è§„åˆ™å› ä¸ºHexoé»˜è®¤çš„è½¬ä¹‰è§„åˆ™ä¼šå°†ä¸€äº›å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ¯”å¦‚_è½¬ä¸º&lt;em&gt;ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹é»˜è®¤çš„è§„åˆ™è¿›è¡Œä¿®æ”¹ï¼Œæ–‡ä»¶è·¯å¾„ä¸º./node_modules/kramed/lib/rules/inline.jsï¼š 1234567# ç¬¬11è¡Œï¼ˆä¸Šä¸ºåŸæ–‡ï¼Œä¸‹ä¸ºä¿®æ”¹ï¼‰escape: /^\\\\([\\\\`*&#123;&#125;\\[\\]()#$+\\-.!_&gt;])/,escape: /^\\\\([`*\\[\\]()# +\\-.!_&gt;])/,# ç¬¬20è¡Œï¼ˆä¸Šä¸ºåŸæ–‡ï¼Œä¸‹ä¸ºä¿®æ”¹ï¼‰em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,em: /^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/, 5.å¼€å¯Mathjax åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlä¸­å¼€å¯Mathjaxï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š12mathjax: enable: true åœ¨å·²å‘å¸ƒçš„æ–‡ç« *.mdæ–‡ä»¶çš„Front-matterä¸­å¼€å¯mathjaxï¼š123456---title: xxxcategory: xxxdate: 2020-10-14 21:24:15mathjax: true--- å¯ä¿®æ”¹./scaffolds/post.mdæ¨¡æ¿æ–‡ä»¶ï¼Œåœ¨Front-matterä¸­å¼€å¯Mathjaxï¼šmathjax: trueã€‚ 6.é‡æ–°ç”Ÿæˆé¡µé¢ä¿®æ”¹å®Œæˆåæ¸…é™¤ç¼“å­˜ã€é‡æ–°ç”Ÿæˆé¡µé¢ã€éƒ¨ç½²ï¼Œã€Œä¸€é”®ä¸‰è¿ã€å³å¯ã€‚ 2.å¦‚ä½•æ›´æ”¹å·¦ä¾§IconFont å›¾æ ‡ ä¸»é¢˜é…ç½®æ–‡ä»¶é»˜è®¤çš„æœ‰githubï¼Œå¾®åšï¼Œtwitterï¼Œfacebookç­‰ï¼Œä½†å¯èƒ½ä¸è‡ªå·±éœ€æ±‚ä¸åŒï¼Œæ•…éœ€å®šåˆ¶éœ€è¦å°±åŠ ä¸Šï¼Œä¸éœ€è¦å°±æ³¨é‡Šï¼Œ4~6ä¸ªä¸ºå®œå¯ç”¨å‚è€ƒï¼šé€‚é…IconFont å›¾æ ‡ ç¬¬ä¸€æ­¥ï¼švi ./themes/pure/_config.ymlç¬¬äºŒæ­¥ï¼šprofile â†’ social â†’ linkså±‚çº§ä¸‹å¯¹åº”ä¿®æ”¹ï¼š123456789101112131415161718192021222324# profileprofile: ...... social: links: github: https://github.com/hwame weibo: https://weibo.com/hwamei # twitter: https://twitter.com # facebook: https://facebook.com zhihu: https://www.zhihu.com/people/hwame # dribbble: / # behance: https://www.behance.net # rss: atom.xml segmentfault: https://segmentfault.com/u/hwame gitee: https://gitee.com/hwame # qzone: https://qzone.qq.com/ # email: mailto:user@qq.com # qq: https://im.qq.com/ # wechat: https://wx.qq.com/ # alipay: https://www.alipay.com/ # juejin: https://juejin.im/ stackoverflow: https://stackoverflow.com/questions # friendship: https:// ......ä¾‹å¦‚ï¼Œæˆ‘å¼€å¯äº†ã€Œgithubã€ã€ã€Œweiboã€ã€ã€Œzhihuã€ã€ã€Œsegmentfaultã€ã€ã€Œgiteeã€ã€ã€Œstackoverflowã€å…­ä¸ªï¼Œæ•ˆæœå¦‚å›¾ï¼š 3.å¦‚ä½•å–æ¶ˆæ–‡ç« ç›®å½•çš„è‡ªåŠ¨ç¼–å· æœ‰æ—¶æˆ‘ä»¬æ–‡ç« çš„å±•å¼€ç›®å½•ä¸éœ€è¦è‡ªåŠ¨ç¼–å·ï¼Œè€Œæ˜¯å¸Œæœ›å’Œ*.mdä¿æŒä¸€è‡´ä½†æ˜¯Hexoé»˜è®¤ä¼šåŠ ä¸Šç¼–å·ï¼Œè¿™ä¼šå¯¼è‡´â‘ åœ¨æœ‰ç¼–å·çš„åœ°æ–¹é‡å¤ç¼–å·ï¼›â‘¡åœ¨ä¸éœ€è¦ç¼–å·ï¼ˆè­¬å¦‚æŸäº›ä¸‰çº§ç›®å½•ï¼‰çš„åœ°æ–¹ä¹Ÿä¼šç¼–å·æ‰€ä»¥éœ€è¦ä¿®æ”¹æºç ï¼š./node_modules/hexo/lib/plugins/helper/toc.js ç¬¬ä¸€æ­¥ï¼švi ./node_modules/hexo/lib/plugins/helper/toc.jsç¬¬äºŒæ­¥ï¼šä¿®æ”¹å…¶ä¸­list_number: trueçš„å±æ€§å€¼ï¼Œé»˜è®¤trueä¸ºä½¿ç”¨è‡ªåŠ¨ç¼–å·ï¼Œå¦‚ä¸‹ç¬¬å…­è¡Œ 1234567function tocHelper(str, options = &#123;&#125;) &#123; options = Object.assign(&#123; min_depth: 1, max_depth: 6, class: &#x27;toc&#x27;, list_number: true // è‡ªè¡Œä¿®æ”¹ï¼Œtrue/false &#125;, options); æ³¨æ„ï¼šåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹æ— æ•ˆï¼š 123456789# åŸæ–‡ï¼šconfig: toc: true # æ˜¯å¦å¼€å¯æ–‡ç« ç« èŠ‚ç›®å½•å¯¼èˆª# æ— æ•ˆçš„ä¿®æ”¹ï¼šconfig: toc: enable: true # æ˜¯å¦å¼€å¯æ–‡ç« ç« èŠ‚ç›®å½•å¯¼èˆª number: false å…³äºç›®å½•çš„ç‰¹åˆ«è¯´æ˜æœ‰çš„å°ä¼™ä¼´ä¸çŸ¥é“æ€æ ·å¼€å¯ç›®å½•ï¼Œåœ¨è¿™é‡Œä¸€å¹¶è¯´æ˜ï¼š æ­¤éƒ¨åˆ†æ˜¯ã€Œå¦‚ä½•å–æ¶ˆæ–‡ç« ç›®å½•çš„è‡ªåŠ¨ç¼–å·ã€ï¼Œæ˜¯å¯¹äºã€Œå·²ç»å¼€å¯äº†ç›®å½•æ˜¾ç¤ºã€è€Œè¨€çš„ã€‚é‚£å¦‚ä½•å¼€å¯ç›®å½•æ˜¾ç¤ºå‘¢ï¼Ÿ â‘ ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/pure/_config.ymlé‡Œå¼€å¯ç›®å½•åŠŸèƒ½ï¼šconfig: toc: true; â‘¡æ–‡ç« é‡Œå¿…é¡»æœ‰ç›®å½•ï¼ˆä¸€çº§ç›®å½•#ï¼ŒäºŒçº§ç›®å½•##ç­‰ç­‰ï¼‰ï¼Œç„¶ååœ¨æ–‡ç« çš„Front-matterï¼ˆå°±æ˜¯.mdæ–‡ä»¶é¡¶éƒ¨çš„ä¸¤ä¸ª---ä¹‹é—´çš„éƒ¨åˆ†ï¼‰ä¸­æ·»åŠ toc: trueï¼Œå¦‚å›¾ï¼› â‘¢ä¸Šè¿°æ¡ä»¶ç¼ºä¸€ä¸å¯ã€‚ å› ä¸ºã€Œç›®å½•çš„å±•å¼€/æŠ˜å ã€æ˜¯ä¸»é¢˜è‡ªå¸¦çš„ï¼Œåªéœ€è‡ªè¡Œå¼€å¯ä¸æ¶‰åŠé­”æ”¹ï¼Œæ‰€ä»¥æ²¡æœ‰ç‰¹æ„å†™ã€‚ å¦å¤–åœ¨æ‰‹æœºä¸Šæµè§ˆæ—¶ï¼Œåªæ˜¾ç¤ºä¸€ä¸ªã€Œã€å›¾æ ‡ï¼Œæ‰€ä»¥åŠ ä¸€ä¸ªã€Œæ¸©é¦¨æç¤ºã€ã€‚ç›´æ¥åœ¨&lt;div class=&quot;article-meta&quot;&gt;Â·Â·Â·&lt;/div&gt;åæ·»åŠ å³å¯ï¼Œæ ·å¼è‡ªè¡Œä¿®æ”¹ï¼Œæ–‡ä»¶ä½ç½®./themes/pure/layout/_partial/article.ejsï¼š1234&lt;div class=&quot;article-header&quot;&gt;***çœç•¥***&lt;/div&gt;&lt;div style=&quot;background-color:#D7BDE2;border:1px solid #D7BDE2;border-radius:10px;padding:5px&quot;&gt; &lt;b&gt;æ¸©é¦¨æç¤º&lt;/b&gt;ï¼šç‚¹å‡»é¡µé¢ä¸‹æ–¹&lt;i style=&quot;color:red&quot; class=&quot;icon icon-anchor&quot;&gt;&lt;/i&gt;ä»¥å±•å¼€æˆ–æŠ˜å ç›®å½•~&lt;/div&gt; 4.å¦‚ä½•ä¿®æ”¹ä»£ç å­—ä½“åŠå›¾ç‰‡å±…ä¸­æ­¤éƒ¨åˆ†å‚è€ƒHexoåšå®¢æ­å»ºâ€”â€”CSSæ ·å¼ä¿®æ”¹ï¼Œæ–‡ä»¶ä½ç½®ä¸º./themes/pure/source/css/style.cssï¼Œä¿®æ”¹äº†ä¸‰ä¸ªéƒ¨åˆ†ï¼ˆå¯èƒ½ç”±äºæ·»åŠ è¿‡æ³¨é‡Šï¼Œä»£ç è¡Œæ•°ä¼šæœ‰æ‰€åå·®ï¼‰ï¼š è¡Œå†…ä»£ç é¢œè‰²ï¼ŒåŸå§‹é¢œè‰²å’Œæ­£æ–‡æ¥è¿‘ï¼Œå¯¹æ¯”åº¦åŒºåˆ†ä¸å¤Ÿæ˜æ˜¾ï¼Œä¿®æ”¹ä¸ºæ©™é»„è‰²ï¼› ä»£ç å­—ä½“ï¼ŒåŸå§‹ä»£ç å­—ä½“ä¸ºã€Œå®‹ä½“ã€ï¼Œä¿®æ”¹ç»å…¸çš„ã€ŒConsolasã€ï¼› æ–‡ç« å›¾ç‰‡å±…ä¸­ï¼Œæ–‡ç« å›¾ç‰‡é»˜è®¤ä¸ºå·¦å¯¹é½ï¼Œä¿®æ”¹ä¸ºå±…ä¸­ã€‚ 4.1.è¡Œå†…ä»£ç é¢œè‰²ç¬¬ä¸€æ­¥ï¼švi ./themes/pure/source/css/style.cssç¬¬äºŒæ­¥ï¼š5549è¡Œcodeä¿®æ”¹colorå’Œbackgroundï¼š123456789code &#123; text-shadow: 0 1px #fff; padding: 0.2em 0.4em; margin: 0 0.3em; color: #FF4500; /* è¡Œå†…ä»£ç é¢œè‰²åŠèƒŒæ™¯ */ background: #F0FFFF; border-radius: 3px; font-size: 85%; 4.2.ä»£ç å­—ä½“ç¬¬ä¸€æ­¥ï¼švi ./themes/pure/source/css/style.cssç¬¬äºŒæ­¥ï¼š155è¡Œsampæ·»åŠ Consolaså­—ä½“ï¼š1234samp &#123; font-family: consolas,monospace; font-size: 1em;&#125; 4.3.å¦‚ä½•ä½¿æ–‡ç« å›¾ç‰‡å±…ä¸­ç¬¬ä¸€æ­¥ï¼švi ./themes/pure/source/css/style.cssç¬¬äºŒæ­¥ï¼š125è¡Œimgä¿®æ”¹ï¼š12345678img &#123; border: 0; box-sizing: border-box; margin: auto; padding: 3px; text-align: center; display: block;&#125; 5.å¦‚ä½•æ·»åŠ æ–‡ç« æè¿°å‚è€ƒæ–‡ç« ï¼šå¦‚ä½•æ·»åŠ æ–‡ç« æè¿°-é¦–é¡µæˆªæ–­è®¾ç½®åœ¨mdæ–‡ç« å†™ä¸€ä¸ªæ‘˜è¦ï¼Œç»“å°¾åŠ ä¸Š&lt;!-- more --&gt;å³å¯ã€‚ä¾‹å¦‚12345678910111213---title: Hexoåšå®¢æ­å»º(2)â€”â€”ä¼˜åŒ–åŠå®Œå–„date: 2020-05-20 13:14:52tags: - Hexocategories: - Hexotoc: true---æ–‡ç« æè¿°æµ‹è¯•&lt;!-- more --&gt;ä»¥ä¸‹æ˜¯æ­£æ–‡â€¦â€¦ é¦–é¡µæ•ˆæœå¦‚å›¾ 6.å¦‚ä½•å®ç°ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/pure/_config.ymlè‡ªå¸¦äº†ä¸€ä¸ªé€‰é¡¹fancybox: falseï¼Œå…¶é»˜è®¤æ˜¯å…³é—­çš„ï¼Œæ‰“å¼€ä¹‹åå³å¯å®ç°ã€Œç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ã€çš„åŠŸèƒ½ã€‚ç„¶è€Œï¼Œåœ¨æˆ‘ä»¬ä¸éœ€è¦çš„åœ°æ–¹ä¹Ÿä¼šè¿™æ ·ï¼Œæ¯”å¦‚ï¼Œã€Œå‹æƒ…é“¾æ¥ã€æ¿å—ï¼Œfancybox: trueæ—¶ç‚¹å‡»å¤´åƒå¹¶æ²¡æœ‰è·³è½¬ï¼Œè€Œæ˜¯å½“åšå›¾ç‰‡æ‰“å¼€ï¼Œå¹¶ä¸”ä¹Ÿå¹¶æ²¡æœ‰æ‰“å¼€å›¾ç‰‡ã€‚å› ä¸ºå›¾ç‰‡ï¼ˆå¤´åƒï¼‰å¯¹åº”çš„è¶…é“¾æ¥æ˜¯ã€Œå°ä¼™ä¼´ä¸ªäººä¸»é¡µã€ï¼Œå¤´åƒæœ¬èº«çš„é“¾æ¥æ˜¯ã€Œå›¾åºŠä¸Šçš„å›¾ç‰‡ã€ã€‚æ‰€ä»¥è¦ä¿®æ”¹æºç ï¼š./themes/pure/layout/_partial/archive-link.ejsã€‚ å…¶æ ¸å¿ƒéƒ¨åˆ†ä¸ºfor (var link in site.data.links) &#123;&#125;è¿™ä¸ªå¾ªç¯ï¼Œè·å–æ¯ä¸€ä¸ªå‹é“¾nameï¼Œå¯¹åº”çš„itemä¸ºæ¯ä¸ªå‹é“¾çš„ä¸‰ä¸ªå€¼item.linkã€item.avatarã€item.descï¼Œåˆ†åˆ«æ¸²æŸ“ã€‚ç¬¬ä¸€æ­¥ï¼Œhref=&quot;&lt;%= item.link %&gt;&quot;æ”¹ä¸ºhref=&quot;&lt;%= item.avatar %&gt;&quot;ã€‚æ—¢ç„¶ç‚¹å‡»å¤´åƒæ—¢ä¸èƒ½æŸ¥çœ‹å¤§å›¾ï¼Œä¹Ÿä¸èƒ½è·³è½¬ï¼Œé‚£æˆ‘ä»¬ä¿®æ”¹ä¸ºæŸ¥çœ‹å¤§å›¾å§ã€‚åªéœ€è¦å°†å›¾ç‰‡çš„è¶…é“¾æ¥è¿˜ç»™å¤´åƒè‡ªå·±å³å¯ï¼Œå¦‚ä¸‹ç¬¬7è¡Œï¼Œå°†&lt;a href=&quot;&lt;%= item.link %&gt;&quot; target=&quot;_blank&quot; class=&quot;img-burn thumb-md media-middle&quot;&gt;ä¿®æ”¹ä¸º&lt;a href=&quot;&lt;%= item.avatar %&gt;&quot; target=&quot;_blank&quot; class=&quot;img-burn thumb-md media-middle&quot;&gt;ã€‚ç¬¬äºŒæ­¥ï¼Œalt=&quot;&quot;æ”¹ä¸ºalt=&quot;&lt;%= item.desc %&gt;&quot;ã€‚ç°åœ¨åªè®©ä»–å˜å›¾ç‰‡äº†ï¼Œå¥½äººåšåˆ°åº•ï¼ŒåŠ ä¸ªå›¾ç‰‡æè¿°å§ï¼Œå°±ç”¨é‚£ä¸ªdescï¼šç¬¬8è¡Œï¼Œå°†&lt;img src=&quot;&lt;%= item.avatar %&gt;&quot; class=&quot;w-full&quot; alt=&quot;&quot;&gt;ä¿®æ”¹ä¸º&lt;img src=&quot;&lt;%= item.avatar %&gt;&quot; class=&quot;w-full&quot; alt=&quot;&lt;%= item.desc %&gt;&quot;&gt;ã€‚ç¬¬ä¸‰æ­¥ï¼Œå…¶å®å°±å·²ç»å¥½äº†ï¼Œä½†æ˜¯å‹é“¾è·³è½¬æ˜¯ç‚¹å‡»é‚£ä¸ªã€Œåå­—ã€ï¼Œé»˜è®¤æ˜¯é»‘è‰²ï¼ˆclass=&quot;text-dark&quot;ï¼‰ï¼Œä¸å¤Ÿæ˜æ˜¾ï¼Œå¸Œæœ›æ¢ä¸ªé¢œè‰²è¡¨ç¤ºè¶…é“¾æ¥ã€‚å°†h4ä¸‹çš„&lt;span&gt;ä¿®æ”¹ä¸º&lt;span style=&quot;color:#9932CC&quot; title=&quot;ç‚¹å‡»è·³è½¬&quot;&gt;&lt;%= name %&gt;&lt;/span&gt;ã€‚ ä¿®æ”¹å®Œæˆåçš„æ ¸å¿ƒå¾ªç¯éƒ¨åˆ†å¦‚ä¸‹ï¼š 12345678910111213141516171819202122&lt;% for (var name in site.data.links) &#123; %&gt; &lt;% var item = site.data.links[name]; %&gt; &lt;div class=&quot;col-sm-6 col-md-4&quot;&gt; &lt;div class=&quot;panel panel-default hover-shadow hover-grow&quot;&gt; &lt;figure class=&quot;media media-middle&quot;&gt; &lt;div class=&quot;media-left pr-no&quot;&gt; &lt;a href=&quot;&lt;%= item.avatar %&gt;&quot; target=&quot;_blank&quot; class=&quot;img-burn thumb-md media-middle&quot;&gt; &lt;img src=&quot;&lt;%= item.avatar %&gt;&quot; class=&quot;w-full&quot; alt=&quot;&lt;%= item.desc %&gt;&quot;&gt; &lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;media-body p-0x&quot;&gt; &lt;h4 class=&quot;media-heading&quot;&gt;&lt;a href=&quot;&lt;%= item.link %&gt;&quot; target=&quot;_blank&quot;&gt; &lt;span style=&quot;color:#9932CC&quot; title=&quot;ç‚¹å‡»è·³è½¬&quot;&gt;&lt;%= name %&gt;&lt;/span&gt;&lt;/a&gt; &lt;/h4&gt; &lt;div class=&quot;text-muted&quot;&gt; &lt;%= item.desc %&gt; &lt;/div&gt; &lt;/div&gt; &lt;/figure&gt; &lt;/div&gt; &lt;/div&gt; &lt;% &#125; %&gt; 7.æ·»åŠ ã€Œç›¸å†Œã€é¡µé¢ç”±äºåšä¸»æ²¡æœ‰è±†ç“£è´¦å·ï¼Œä¸»é¢˜è‡ªå¸¦çš„ã€Œè±†ç“£ä¹¦å•ã€é¡µé¢ä¸€ç›´ç”¨ä¸ä¸Šï¼Œå› æ­¤æƒ³ç€æ”¹æˆå…¶ä»–å®ç”¨çš„ã€‚æœ€åˆä¿®æ”¹ä¸ºã€Œç•™è¨€æ¿ã€ï¼Œå¥ˆä½•æ— äººå›åº”ğŸ˜‚ğŸ˜‚ï¼ˆå°´å°¬.jpgï¼‰ï¼Œå—ç¬¬6éƒ¨åˆ†ã€6.å¦‚ä½•å®ç°ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ã€‘çš„å¯å‘ï¼Œæœ€ç»ˆå†³å®šä¿®æ”¹ä¸ºåˆ†äº«æ‘„å½±ä½œå“çš„ã€Œç›¸å†Œã€é¡µé¢ã€‚ 7.1.é‡å‘½åç›¸å…³æ–‡ä»¶æ­¤éƒ¨åˆ†æ˜¯é­”æ”¹ç›¸å†Œï¼Œä»£ç åŠæ–‡ä»¶ï¼ˆå¤¹ï¼‰åŸæœ¬æ˜¯ä»¥book(s)å‘½åçš„ï¼Œæ—¢ç„¶ç°åœ¨æ˜¯ã€Œç›¸å†Œã€äº†ï¼Œå°±å¾—æ”¹åå«ã€Œgalleryã€äº†ã€‚å°†./themes/pure/ä¸‹çš„æ–‡ä»¶æˆ–æ–‡ä»¶å†…å®¹ä¸­æ‰€æœ‰çš„book(s)æ”¹ä¸ºgalleryï¼š åºå· ç±»å‹ åŸæ–‡ä»¶å ä¿®æ”¹åæ–‡ä»¶å 1 æ–‡ä»¶å¤¹ ./themes/pure/_source/books/ ./themes/pure/_source/gallery/ 2 æ–‡ä»¶ ./themes/pure/layout/books.ejs ./themes/pure/layout/gallery.ejs 3 æ–‡ä»¶ ./themes/pure/layout/_partial/archive-book.ejs ./themes/pure/layout/_partial/archive-gallery.ejs 7.2.ä¿®æ”¹æºä»£ç  ./themes/pure/layout/gallery.ejsï¼Œæ–‡ä»¶è·¯å¾„æ”¹ä¸º&#39;_partial/archive-gallery&#39;å³å¯ã€‚ ./themes/pure/layout/_partial/archive-gallery.ejsï¼Œä»£ç å‚è€ƒç¬¬6éƒ¨åˆ†ã€6.å¦‚ä½•å®ç°ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ã€‘ï¼Œä¿®æ”¹åå®Œæ•´å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435&lt;article class=&quot;article article-links article-type-list&quot; itemscope=&quot;&quot;&gt; &lt;header class=&quot;article-header&quot;&gt; &lt;h1 itemprop=&quot;title&quot;&gt;&lt;%= page.title %&gt;&lt;/h1&gt; &lt;p class=&quot;text-muted&quot;&gt; &lt;%= __(&#x27;page.gallery-desc&#x27;) %&gt; &lt;/p&gt; &lt;/header&gt; &lt;div class=&quot;article-body&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;% for (var link in site.data.gallery) &#123; %&gt; &lt;% var item = site.data.gallery[link]; %&gt; &lt;div class=&quot;col-sm-6 col-md-4&quot;&gt; &lt;div class=&quot;panel panel-default hover-shadow hover-grow&quot;&gt; &lt;figure class=&quot;media media-middle&quot;&gt; &lt;div class=&quot;media-left pr-no&quot;&gt; &lt;a href=&quot;&lt;%= item.full_link %&gt;&quot; target=&quot;_blank&quot; class=&quot;img-burn thumb-md media-middle&quot;&gt; &lt;img src=&quot;&lt;%= item.thumb_link %&gt;&quot; class=&quot;w-full&quot; alt=&quot;&quot;&gt; &lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;media-body p-0x&quot;&gt; &lt;h4 class=&quot;media-heading&quot;&gt;&lt;a href=&quot;&lt;%= item.full_link %&gt;&quot; target=&quot;_blank&quot;&gt;&lt;span class=&quot;text-dark&quot;&gt;&lt;%= link %&gt;&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt; &lt;div class=&quot;text-muted&quot;&gt; &lt;%= item.desc %&gt; &lt;/div&gt; &lt;/div&gt; &lt;/figure&gt; &lt;/div&gt; &lt;/div&gt; &lt;% &#125; %&gt; &lt;/div&gt; &lt;/div&gt;&lt;/article&gt;&lt;% if (theme.comment.type &amp;&amp; !is_home()) &#123; %&gt; &lt;%- partial(&#x27;post/comment&#x27;, &#123;post: page&#125;) %&gt;&lt;% &#125; %&gt; 7.3.é…ç½®ç›¸å†Œåœ¨./source/_data/ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªgallery.ymlæ–‡ä»¶ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š Nameï¼šç›¸ç‰‡åç§°ï¼Œå¤šå¼ ç…§ç‰‡ä¿è¯ä¸è¦é‡å full_linkã€thumb_linkï¼šåŸå›¾å’Œç¼©ç•¥å›¾é“¾æ¥ï¼Œå›¾åºŠä¸Šçš„å›¾ç‰‡ç›´æ¥ä»¥åœ°å€å¼•ç”¨ï¼Œ./themes/pure/source/images/æ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡ä»¥/images/subdir/img.jpgçš„æ ¼å¼å¼•ç”¨ descï¼šç›¸ç‰‡æè¿° 1234Name: full_link: /path/to/img.jpg thumb_link: /path/to/thumb_img.jpg desc: &quot;photo description&quot; 7.4.ä¿®æ”¹ä¸»é¢˜ç›¸å…³é…ç½® ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/pure/_config.ymlçš„èœå•é€‰é¡¹ï¼š Books: booksä¿®æ”¹ä¸ºGallery: gallery books: icon-book-fillä¿®æ”¹ä¸ºgallery: icon-deliciousï¼Œå›¾æ ‡åå‚è€ƒã€è¿™é‡Œã€‘ è¯­è¨€é…ç½®æ–‡ä»¶./themes/pure/languages/zh-CN.ymlï¼Œå¦‚æœä½¿ç”¨å…¶ä»–è¯­è¨€åªéœ€å¯¹åº”ä¿®æ”¹ï¼š menuï¼šBooks: ä¹¦å•ä¿®æ”¹ä¸ºGallery: ç›¸å†Œ pageï¼šbooks: ä¹¦å•ä¿®æ”¹ä¸ºgallery: ç›¸å†Œï¼Œbooks-desc: ä¸ªäººæ”¶è—çš„ä¹¦å•æ¨èç»™å¤§å®¶ä¿®æ”¹ä¸ºgallery-desc: æ‘„å½±çˆ±å¥½è€…çš„ä¸ªäººæ‹æ‘„ä½œå“ æ ·å¼è¡¨æ–‡ä»¶./themes/pure/source/css/gallery.cssï¼Œæ•´ç†è¿™éƒ¨åˆ†å†…å®¹æ—¶å‘ç°å¤šå‡ºäº†è¿™ä¸ªCSSæ–‡ä»¶ï¼Œä½†æ˜¯åº”è¯¥ä¸æ˜¯å¿…éœ€çš„ 7.5.ç”Ÿæˆé¡µé¢åŠè¯´æ˜å¦‚æœæ²¡æœ‰./source/gallery/æˆ–./source/gallery/index.mdï¼Œåˆ™æ‰§è¡Œhexo new page &quot;gallery&quot;ç”Ÿæˆæ–°çš„é¡µé¢ï¼Œä¿®æ”¹./source/gallery/index.mdæ–‡ä»¶çš„typeå’Œlayoutï¼š12345678---title: ç›¸å†Œcopyright: falsecomments: truedate: 2020-05-27 11:25:35type: gallerylayout: gallery---è¯´æ˜ï¼š è¯„è®ºåŒºæœ‰å°ä¼™ä¼´æåˆ°åŸç‰ˆgalleryçš„é—®é¢˜ï¼Œæˆ‘åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾ä¸galleryç›¸å…³çš„æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ–‡ä»¶åå«æœ‰galleryçš„æ–‡ä»¶ï¼š .themes/pure/_source/_data/gallery.yml .themes/pure/layout/_partial/post/gallery.ejs æ–‡ä»¶å†…å®¹å«æœ‰galleryçš„æ–‡ä»¶ï¼š .themes/pure/layout/_partial/post/gallery.ejs .themes/pure/layout/_partial/article.ejs å…¶ä¸­gallery.ymlä½äº_sourceæ–‡ä»¶å¤¹å†…ï¼Œæš‚æ—¶ä¸ç”¨è€ƒè™‘ï¼›çœ‹çœ‹å‰©ä¸‹ä¸¤ä¸ª.ejsæ–‡ä»¶çš„ä»£ç ï¼Œåœ¨article.ejsé‡Œå¼•ç”¨äº†gallery.ejsï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°è¿™æ˜¯ã€Œåšæ–‡é…å›¾ã€çš„æ ·å¼ï¼ˆå³fancyboxæ•ˆæœï¼‰ï¼Œè·Ÿã€Œç›¸å†Œã€æ²¡æœ‰å…³ç³»ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å€Ÿé‰´è¿™ä¸ªæ ·å¼ï¼Œæ¥å®šåˆ¶ã€Œç›¸å†Œã€æµè§ˆçš„é¡µé¢ï¼Œå¸ƒå±€å‘¢å¯ä»¥å€Ÿé‰´ã€Œå‹æƒ…é“¾æ¥ã€çš„å¸ƒå±€ã€‚äºæ˜¯å°±æœ‰äº†æ¥è‡ªäºç¬¬6éƒ¨åˆ†ã€6.å¦‚ä½•å®ç°ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ã€‘çš„çµæ„Ÿã€‚å¦ä¸€æ–¹é¢ï¼Œçœ‹çœ‹gallery.ymlçš„æ–‡ä»¶ç»“æ„ï¼Œæ˜¯ä¸æ˜¯ç®€ç›´å’Œlinks.ymlä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç…§ç‰‡æ²¡æœ‰å¿…è¦å†™åˆ°HTMLæˆ–.ejsé‡Œï¼Œä»¿ç…§å‹é“¾ç”¨å¾ªç¯å¤„ç†å¤šå¼ ç…§ç‰‡ï¼Œç„¶åæŠŠç…§ç‰‡ä¿¡æ¯æ·»åŠ åœ¨gallery.ymlé‡Œã€‚è‡³æ­¤ï¼Œæ˜¯ä¸æ˜¯å°±è±ç„¶å¼€æœ—äº†å‘¢ï¼Ÿ 8.å¦‚ä½•æ˜¾ç¤ºã€Œæœ€è¿‘æ–‡ç« ã€ç¼©ç•¥å›¾ç¬¬ä¸€æ­¥ï¼šåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/pure/_config.ymlä¸­å¼€å¯ï¼š12config: thumbnail: true ç¬¬äºŒæ­¥ï¼šåœ¨æ–‡ç« Front-matterä¸­æ·»åŠ æ–‡ç« ç¼©ç•¥å›¾é“¾æ¥åœ°å€ï¼ˆå›¾ç‰‡åœ°å€å¯ä»¥æ˜¯å›¾åºŠä¸Šçš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨./themes/pure/source/images/æ–‡ä»¶å¤¹ä¸‹ï¼Œå¼•ç”¨æ–¹å¼å¦‚ä¸‹ï¼‰ï¼š123456---title: xxxtoc: truedate: 2020-10-15 11:18:23thumbnail: /images/avatar.jpg--- 9.éƒ¨åˆ†åœ°æ–¹ä¸­æ–‡é€‚é…ç”±äºlanguagesä¸­çš„ä¸­æ–‡é…ç½®é—®é¢˜ï¼Œéƒ¨åˆ†åœ°æ–¹æ²¡æœ‰å®Œå…¨æ”¹ä¸ºä¸­æ–‡ï¼šã€Œåˆ†ç±»ã€ã€Œå½’æ¡£ã€é¡µé¢çš„ã€Œå…¨éƒ¨ã€ã€ã€Œå…±xxxç¯‡æ–‡ç« ã€ã€ã€Œç¬¬xé¡µï¼Œå…±xé¡µã€ç­‰ï¼Œåªéœ€è¦ä¿®æ”¹./themes/pure/languages/zh-CN.ymlå³å¯ï¼š å¯¼èˆªnavçš„all: Allä¿®æ”¹ä¸ºall: å…¨éƒ¨ åˆ†é¡µpaginationçš„pageof: Page %d of %sä¿®æ”¹ä¸ºpageof: ç¬¬ %d é¡µï¼Œå…± %s é¡µ 10.å…å¯†éƒ¨ç½²é—®é¢˜å‰æ–‡Hexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²ä¹‹éƒ¨ç½²HexoåŸæœ¬éƒ¨ç½²éƒ¨åˆ†è®¾ç½®çš„æ˜¯repository: https://github.com/username/username.github.io.gitï¼Œè¿™ç§æ–¹å¼æœ‰æ—¶å€™ä¼šéœ€è¦æ‰‹åŠ¨è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œæœ‰æ—¶å€™è¿˜ä¼šå‡ºç°Error: Spawn failedçš„é”™è¯¯ï¼Œå‚è€ƒæ–‡ç« ã€Šhexoå‘ç”Ÿerrorï¼šspawn failedé”™è¯¯çš„è§£å†³æ–¹æ³•ã€‹ï¼Œç›´æ¥ä¿®æ”¹ä¸ºrepository: git@github.com:username/username.github.io.gitå³å¯ã€‚ 11.è‡ªå®šä¹‰å·¦ä¸‹è§’ä¿¡æ¯11.1.æ·»åŠ è®¿é—®é‡å’Œè®¿å®¢æ•°åŸç‰ˆå·¦ä¸‹è§’æ˜¯Theme by cofess base on pure.è¿‡äºå•è°ƒï¼Œè€ƒè™‘åŠ å…¥ã€Œç«™ç‚¹è®¿é—®é‡ã€å’Œã€Œè®¿å®¢æ•°ã€ï¼Œè‡³äºæ–‡ç« é˜…è¯»é‡å¯ä»¥é€šè¿‡LeanCloudå¹¶ä¸”å·²ç»å®ç°ã€‚æ–‡ä»¶ä½ç½®ï¼š./themes/pure/layout/_common/footer.ejsã€‚ ã€Œè®¿é—®é‡ã€å’Œã€Œè®¿å®¢æ•°ã€å¯ä»¥ä½¿ç”¨ã€Œä¸è’œå­-æç®€ç½‘é¡µè®¡æ•°å™¨ã€ï¼Œè¯¥ç½‘ç«™ä¹Ÿæä¾›äº†ã€Œç½‘ç«™æ€»è®¿é—®é‡ã€çš„ç¤ºä¾‹ï¼š12&lt;script async src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;&lt;span id=&quot;busuanzi_container_site_pv&quot;&gt;æœ¬ç«™æ€»è®¿é—®é‡&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;æ¬¡&lt;/span&gt; é€šè¿‡F12å¯ä»¥å‘ç°è®¾ç½®çš„æ–¹æ³•ï¼š æ–‡ç« é˜…è¯»é‡ï¼š&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt; ç«™ç‚¹è®¿é—®é‡ï¼š&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt; ç«™ç‚¹è®¿å®¢æ•°ï¼š&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt; ç»“åˆç½‘ç«™ç¤ºä¾‹ï¼Œå°†Theme by cofess base on pure.æ³¨é‡Šæ‰ï¼Œå¹¶åŠ å…¥ã€Œè®¿é—®é‡ã€å’Œã€Œè®¿å®¢æ•°ã€ï¼Œè¿˜å¯ä»¥é€šè¿‡&lt;div class=&quot;publishby&quot;&gt;æ ‡ç­¾åŠ å…¥ã€Œç½‘ç«™å¤‡æ¡ˆä¿¡æ¯ã€ï¼Œä¿®æ”¹åå¦‚ä¸‹ï¼š12345678910111213141516171819202122232425&lt;script async src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;&lt;footer class=&quot;footer&quot; itemscope itemtype=&quot;http://schema.org/WPFooter&quot;&gt; &lt;%- partial(&#x27;_common/social&#x27;, null, &#123;cache: !config.relative_link&#125;) %&gt; &lt;div class=&quot;copyright&quot;&gt; &lt;% if(theme.site.copyright) &#123; %&gt; &amp;copy; &lt;%= date(new Date(), &#x27;YYYY&#x27;) %&gt; &lt;%= config.author || config.title %&gt; &lt;% &#125; %&gt; &lt;div class=&quot;publishby&quot;&gt; &lt;span id=&quot;busuanzi_container_site_pv&quot;&gt; ç‚¹å‡»&lt;span id=&quot;busuanzi_value_site_pv&quot; style=&quot;font-family:Courier&quot;&gt;&lt;/span&gt;æ¬¡ï¼Œ è®¿å®¢&lt;span id=&quot;busuanzi_value_site_uv&quot; style=&quot;font-family:Courier&quot;&gt;&lt;/span&gt;äºº &lt;/span&gt; &lt;/div&gt; &lt;!-- &lt;div class=&quot;publishby&quot;&gt; &lt;%= __(&#x27;copyright.theme_by&#x27;) %&gt; &lt;a href=&quot;https://github.com/cofess&quot; target=&quot;_blank&quot;&gt; cofess &lt;/a&gt; &lt;%= __(&#x27;copyright.base_on&#x27;) %&gt; &lt;a href=&quot;https://github.com/cofess/hexo-theme-pure&quot; target=&quot;_blank&quot;&gt;pure&lt;/a&gt;. &lt;/div&gt; --&gt; &lt;/div&gt;&lt;/footer&gt; 11.2.æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´æ­¤éƒ¨åˆ†å†…å®¹å‚è€ƒmoyuçš„æ–‡ç« ä¸ºåšå®¢æ·»åŠ ä¸€äº›å°åŠŸèƒ½ä»¥åŠç¾åŒ–ä¹‹å»ºç«™æ—¶é—´æ—¶é—´ã€‚ æ–‡ä»¶ä½ç½®ï¼š./themes/pure/layout/_common/footer.ejsã€‚å…¶å®ç°é€»è¾‘å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536&lt;script&gt;function siteTime()&#123; window.setTimeout(&quot;siteTime()&quot;, 1000); var seconds = 1000; var minutes = seconds * 60; var hours = minutes * 60; var days = hours * 24; var years = days * 365; var today = new Date(); var todayYear = today.getFullYear(); var todayMonth = today.getMonth()+1; var todayDate = today.getDate(); var todayHour = today.getHours(); var todayMinute = today.getMinutes(); var todaySecond = today.getSeconds(); /* Date.UTC() -- è¿”å›dateå¯¹è±¡è·ä¸–ç•Œæ ‡å‡†æ—¶é—´(UTC)1970å¹´1æœˆ1æ—¥åˆå¤œä¹‹é—´çš„æ¯«ç§’æ•°(æ—¶é—´æˆ³) year - ä½œä¸ºdateå¯¹è±¡çš„å¹´ä»½ï¼Œä¸º4ä½å¹´ä»½å€¼ month - 0-11ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æœˆä»½ day - 1-31ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å¤©æ•° hours - 0(åˆå¤œ24ç‚¹)-23ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å°æ—¶æ•° minutes - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„åˆ†é’Ÿæ•° seconds - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„ç§’æ•° microseconds - 0-999ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æ¯«ç§’æ•° */ var t1 = Date.UTC(2020,05,19,21,20,52); //t1ä¸ºå»ºç«™æ—¶é—´ var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond); var diff = t2-t1; var diffYears = Math.floor(diff/years); var diffDays = Math.floor((diff/days)-diffYears*365); var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours); var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes); var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds); document.getElementById(&quot;sitetime&quot;).innerHTML=&quot;å·²è¿è¡Œ&quot;+/*diffYears+&quot; å¹´ &quot;+*/diffDays+&quot;å¤©&quot;+diffHours+&quot;å°æ—¶&quot;+diffMinutes+&quot;åˆ†é’Ÿ&quot;+diffSeconds+&quot;ç§’&quot;; // å› ä¸ºå»ºç«™æ—¶é—´è¿˜æ²¡æœ‰ä¸€å¹´ï¼Œå°±å°†ä¹‹æ³¨é‡Šæ‰äº†ã€‚éœ€è¦çš„å¯ä»¥å–æ¶ˆ &#125; siteTime();&lt;/script&gt;æœ€åå°†æ ‡ç­¾&lt;span id=&quot;sitetime&quot;&gt;&lt;/span&gt;æ·»åŠ åˆ°åˆé€‚çš„ä½ç½®ï¼Œä¾‹å¦‚ä¸Šæ–‡11.1èŠ‚æ·»åŠ è®¿é—®é‡å’Œè®¿å®¢æ•°çš„ã€Œè®¿é—®é‡ã€å’Œã€Œè®¿å®¢æ•°ã€åã€‚ å¯number.toString().padStart(n, &#39;0&#39;)å°†æ•°å­—è½¬æ¢ä¸ºã€Œè¡¥é›¶å­—ç¬¦ä¸²ã€ï¼Œæ•ˆæœä¸ºm:nnn:xx:yy:zzï¼Œè¡¨ç¤ºè¿è¡Œæ—¶é—´ä¸ºmå¹´nnnå¤©xxæ—¶yyåˆ†zzç§’ï¼š1234567// å°†ã€Œæ•°å­—ã€è½¬ã€Œè¡¥é›¶å­—ç¬¦ä¸²ã€var y = diffYears.toString()var d = diffDays.toString().padStart(3, &#x27;0&#x27;)var h = diffHours.toString().padStart(2, &#x27;0&#x27;)var m = diffMinutes.toString().padStart(2, &#x27;0&#x27;)var s = diffSeconds.toString().padStart(2, &#x27;0&#x27;)document.getElementById(&quot;sitetime&quot;).innerHTML = y + &quot;:&quot; + d + &quot;:&quot; + h + &quot;:&quot; + m + &quot;:&quot; + s; 12.ä»£ç å—æ·»åŠ ä¸€é”®å¤åˆ¶æ­¤éƒ¨åˆ†å‚è€ƒkajwebå¤§ä½¬çš„æ–‡ç« Hexoä¼˜åŒ–è®°å½•ä¹‹ä¸ºä»£ç å—å¢åŠ å¤åˆ¶æŒ‰é’®ã€‚ ç”±äºkajwebå¤§ä½¬å·²å†™å¾—å¾ˆæ¸…æ¥šï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š 1.å¢åŠ å…¨å±€å‡½æ•°addLoadEventï¼Œæ³¨æ„æ˜¯åœ¨æ–‡ä»¶æœ«å°¾ï¼Œè€Œä¸æ˜¯åœ¨&#125;);å†…ï¼› 2.æ–°å¢å¤åˆ¶æŒ‰é’®ï¼› 3.æ’å…¥åˆ°é¡µé¢ï¼Œä¸»é¢˜ä»£ç &lt;%- partial(&#39;_partial/article-copy-code&#39;)%&gt;æ’å…¥çš„ä½ç½®ï¼› 4.å¢åŠ è¯­è¨€æ–‡ä»¶ï¼Œä¾‹å¦‚copy_buttonè®¾ç½®ä¸ºä¸€é”®å¤åˆ¶ï¼› 5.ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå¦‚æœå¼€å¯copyrightåˆ™å½“ä¸€é”®å¤åˆ¶ä»£ç åä¼šåŠ ä¸Šcontentç‰ˆæƒå£°æ˜å†…å®¹ï¼Œä¸ªäººä¸å–œæ¬¢æ‰€ä»¥ç¦ç”¨äº†ã€‚ 13.è°ƒæ•´èœå•æ é«˜åº¦ç”±äºé¡µé¢è¾ƒå¤šï¼Œæœ‰æ—¶å€™åœ¨ä¸åŒçš„æµè§ˆå™¨æˆ–ä¸åŒåˆ†è¾¨ç‡ç”µè„‘ä¸Šä¼šå’Œå·¦ä¸‹è§’footeré‡å ï¼Œå› æ­¤è€ƒè™‘è°ƒæ•´èœå•æ çš„é«˜åº¦ã€‚ æ­¤éƒ¨åˆ†åŠä¸‹éƒ¨åˆ†å¦‚ä½•éšè—valineç‰ˆæƒä¿¡æ¯éƒ½éœ€è¦åœ¨CSSæ–‡ä»¶æ·»åŠ è‡ªå®šä¹‰æ ·å¼ï¼Œç‰¹åˆ«æ„Ÿè°¢é™ˆå›­å›­æä¾›çš„å¸®åŠ©ã€‚ æ·»åŠ åæœ‰ä¸€ä¸ªå°bugï¼Œmenu-itemçš„é«˜åº¦ä¸º35pxè€Œaæ ‡ç­¾çš„é«˜åº¦ä¸ºé»˜è®¤å€¼41pxï¼Œå³ä¼šå‡ºç°é‡å éƒ¨åˆ†ï¼Œå‚è€ƒæ–‡ç« CSSè®¾ç½®è¶…é“¾æ¥Aæ ‡ç­¾å®½åº¦å’Œé«˜åº¦çš„ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œä½¿ç”¨display: blockå®ç°è‡ªå®šä¹‰aæ ‡ç­¾çš„é«˜åº¦ã€‚ æ–‡ä»¶ä½ç½®ï¼š./themes/pure/source/css/style.cssï¼Œç›´æ¥åœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š12345678910/* è°ƒæ•´å·¦ä¾§èœå•æ é«˜åº¦ */.menu-item&#123; height: 35px;&#125;/* è°ƒæ•´aæ ‡ç­¾çš„é«˜åº¦ */.menu-item a&#123; display: block; height: 35px;&#125; 14.å¦‚ä½•éšè—valineç‰ˆæƒä¿¡æ¯é‡‡ç”¨Valineè¯„è®ºç³»ç»Ÿä¼šåœ¨è¯„è®ºåŒºå³ä¸‹è§’æ˜¾ç¤ºPowered By Valine v1.4.14çš„å­—æ ·ï¼Œå…¶å®æ˜¯å¦æ˜¾ç¤ºéƒ½æ— æ‰€è°“ï¼Œçº¯ç²¹æ˜¯ä¿®æ”¹ä¸ŠèŠ‚æ—¶çš„ä¸¾æ‰‹ä¹‹åŠ³ã€‚ åŒä¸Šï¼Œéœ€è¦åœ¨CSSæ–‡ä»¶æ·»åŠ è‡ªå®šä¹‰æ ·å¼ã€‚æ–‡ä»¶ä½ç½®ï¼š./themes/pure/source/css/style.cssï¼Œç›´æ¥åœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š1234/* éšè—valineç‰ˆæƒä¿¡æ¯ */.txt-right&#123; display: none;&#125; 15.æ·»åŠ å›åˆ°é¡¶éƒ¨ç”±äºåšæ–‡ç»å¸¸ä¼šæœ‰å¥½å‡ åƒå­—ï¼Œå°½ç®¡æœ‰ç›®å½•èƒ½å¤Ÿå¿«é€Ÿè·³è½¬ï¼Œä½†æ˜¯å¯¹äºé•¿æ–‡æ¥è¯´ã€Œå›åˆ°é¡¶éƒ¨ã€çš„åŠŸèƒ½è¿˜æ˜¯å¾ˆå®ç”¨çš„ã€‚ç„¶è€ŒPureä¸»é¢˜æ°å·§æ²¡æœ‰ï¼Œå› æ­¤æ·»åŠ ä¸€ä¸ªã€Œå›åˆ°é¡¶éƒ¨ã€çš„æŒ‰é’®ï¼Œå‚è€ƒæ–‡ç« Hexoåšå®¢æ­å»ºä¹‹å›åˆ°é¡¶éƒ¨ã€‚ æ–‡ä»¶ä½ç½®ï¼š./themes/pure/layout/_common/script.ejsï¼Œåœ¨åˆé€‚ä½ç½®æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233&lt;div id=&quot;go-top&quot;&gt;&lt;/div&gt;&lt;style type=&quot;text/css&quot;&gt;#go-top &#123; width:40px;height:36px; background-color:#DDA0DD; position:relative; border-radius:2px; position:fixed;right:10px;bottom:60px; cursor:pointer;display:none;&#125;#go-top:after &#123; content:&quot; &quot;; position:absolute;left:14px;top:14px; border-top:2px solid #fff;border-right:2px solid #fff; width:12px;height:12px; transform:rotate(-45deg);&#125;#go-top:hover &#123; background-color:#8A2BE2;&#125;&lt;/style&gt;&lt;script&gt;$(function () &#123; var top=$(&quot;#go-top&quot;); $(window).scroll(function () &#123; ($(window).scrollTop() &gt; 300) ? top.show(300) : top.hide(200); $(&quot;#go-top&quot;).click(function () &#123; $(&#x27;body,html&#x27;).animate(&#123;scrollTop:0&#125;); return false(); &#125;) &#125;);&#125;);&lt;/script&gt; 16.æ·»åŠ RSSè®¢é˜…åŠŸèƒ½RSSç®€ä»‹ï¼ˆæ‘˜è‡ªSegmentfaultç”¨æˆ·ä¸€æ­¥çš„æ–‡ç« ä¸ºhexoåšå®¢æ·»åŠ RSSè®¢é˜…åŠŸèƒ½ï¼‰ï¼š RSS(Really Simple Syndication) ï¼Œå³ã€Œç®€æ˜“ä¿¡æ¯èšåˆã€ï¼Œåœ¨äº’è”ç½‘ä¸Šè¢«å¹¿æ³›é‡‡ç”¨çš„å†…å®¹åŒ…è£…å’ŒæŠ•é€’åã€‚æ˜¯ä¸€ç§æè¿°åŒæ­¥ç½‘ç«™å†…å®¹çš„æ ¼å¼ï¼Œä½¿ç”¨xmlæ ¼å¼. å½“ç½‘ç«™å†…å®¹æ›´æ–°æ—¶ï¼Œå¯ä»¥é€šè¿‡è®¢é˜…RSSæºåœ¨RSSé˜…è¯»å™¨ä¸Šè·å–æ›´æ–°çš„ä¿¡æ¯ã€‚å¤§å¤šæ•°å†…å®¹æä¾›çš„ç½‘ç«™éƒ½ä¼šæä¾›RSSè®¢é˜…çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿ç”¨æˆ·å»è·å–æœ€æ–°çš„å†…å®¹ã€‚ ä¹‹å‰è§‰å¾—ç°åœ¨è¿™ä¸ªæ—¶ä»£RSSè®¢é˜…å°±æ˜¯ä¸€ä¸ªé¸¡è‚‹ï¼Œæ‰€ä»¥åœ¨å‰é¢çš„é…ç½®ä¸­éƒ½æ˜¯ç›´æ¥å…³é—­äº†è¯¥åŠŸèƒ½ï¼Œä½†æ˜¯è§è¿‡çš„åˆ«äººçš„åšå®¢éƒ½æœ‰ï¼Œè¿˜æ˜¯è§‰å¾—å°‘äº†è¿™ä¸€ä¸ªåŠŸèƒ½ä¸å¤ªå¥½ï¼Œå› æ­¤é‡æ–°å¼€å¯ã€‚ ç¬¬ä¸€æ­¥ï¼Œå®‰è£…æ’ä»¶ï¼šç«™ç‚¹æ ¹ç›®å½•æ‰§è¡Œï¼š1npm install hexo-generator-feed --save ç¬¬äºŒæ­¥ï¼Œä¿®æ”¹é…ç½®ï¼šåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯rssã€é…ç½®rssæ–‡ä»¶è·¯å¾„ï¼š12345678# rssrss: true# profileprofile: social: links: rss: atom.xml 17.è®¾ç½®æ–‡ç« ç½®é¡¶ã€Œåšæ–‡ç½®é¡¶ã€çš„åŠŸèƒ½ç®—æ˜¯åˆšéœ€äº†ï¼Œä½†æ˜¯åœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šæ•™ç¨‹ï¼Œéƒ½æ²¡æœ‰åŸºäºPureä¸»é¢˜çš„ï¼Œå°½ç®¡å¦‚æ­¤è¿˜æ˜¯æ‰¾åˆ°äº†ä¸€äº›æ€è·¯ã€‚ æ­¤éƒ¨åˆ†ä¸»è¦å‚è€ƒhexoåšå®¢ä¼˜åŒ–ä¹‹æ–‡ç« ç½®é¡¶+ç½®é¡¶æ ‡ç­¾ã€‚ ç¬¬ä¸€æ­¥ï¼Œå®‰è£…æ’ä»¶ï¼šç«™ç‚¹æ ¹ç›®å½•æ‰§è¡Œï¼š12npm uninstall hexo-generator-index --savenpm install hexo-generator-index-pin-top --saveç¬¬äºŒæ­¥ï¼Œä¿®æ”¹æ ‡é¢˜æ–‡ä»¶ï¼šå…¶å®åœ¨å®‰è£…äº†æ’ä»¶ä¹‹åå°±å·²ç»å¯ä»¥å®ç°ã€Œæ–‡ç« ç½®é¡¶ã€åŠŸèƒ½äº†ï¼Œä½†æ˜¯å³ä½¿æ–‡ç« ä½äºé¡¶éƒ¨ï¼Œå¦‚æœæ²¡æœ‰ç½®é¡¶æ ‡å¿—çš„è¯ä¼šæ¯”è¾ƒè«åå…¶å¦™å°±å¾ˆå°´å°¬ï¼ˆåˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“ï¼‰ã€‚ ç½‘ä¸Šæ–‡ç« éƒ½æ˜¯å®šä½åˆ°&lt;div class=&quot;post-meta&quot;&gt;æ ‡ç­¾ï¼Œä½†æ˜¯æˆ‘ä»¬çš„Pureä¸»é¢˜æ²¡æœ‰å•Šï¼Œå®ƒæ˜¯&lt;div class=&quot;article-header&quot;&gt;ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶æ˜¯./themes/pure/layout/_partial/post/title.ejsï¼Œè€Œä¸æ˜¯post.xxxã€‚åˆ†æäº†ä¸€ä¸‹ï¼Œåœ¨&lt;h1 itemprop=&quot;name&quot;&gt;åç›´æ¥æ·»åŠ åˆ¤æ–­å³å¯ï¼šå¦‚æœè®¾ç½®äº†ç½®é¡¶ï¼Œåˆ™æ˜¾ç¤ºä¸€ä¸ªã€ŒğŸ“Œç½®é¡¶ã€ï¼š1234&lt;h1 itemprop=&quot;name&quot;&gt; &lt;% if (post.top) &#123; %&gt; &lt;span class=&quot;&lt;%= class_name %&gt;&quot; style=&quot;color:#7D26CD&quot;&gt;ğŸ“Œç½®é¡¶&lt;/span&gt; &lt;% &#125; %&gt;è¯´æ˜ï¼šæˆ‘ä½¿ç”¨çš„æ˜¯ğŸ“Œemojiä½œä¸ºå›¾æ ‡ï¼Œå¦‚æœæŒ‰å‚è€ƒæ–‡ç« å†™çš„ï¼Œå› ä¸ºä¸åŒä¸»é¢˜ä½¿ç”¨çš„å›¾æ ‡ä¸ä¸€æ ·ï¼Œéœ€è¦è‡ªè¡Œä¿®æ”¹ï¼ˆè¯¦è§Pureä¸»é¢˜å›¾æ ‡æ ·å¼ï¼‰ï¼Œä¸è¿‡å¥½åƒæ²¡ä»€ä¹ˆåˆé€‚çš„ï¼Œä¾‹å¦‚å¯ä»¥æ”¹æˆä¸‹é¢è¿™æ ·ï¼šæ³¨æ„ï¼šæŒ‰å‚è€ƒæ–‡ç« å†™çš„ä¼šè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç½®é¡¶æ ‡å¿—å’Œæ ‡é¢˜å­—å·ä¸ä¸€è‡´æ¯”è¾ƒçªå…€ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸æ ‡é¢˜ç›¸åŒçš„classï¼Œå¦‚ä¸Šclass=&quot;&lt;%= class_name %&gt;&quot;ï¼›åˆ¤æ–­è¯­å¥ç”¨&lt;% clause %&gt;è€Œé&#123;% clause %&#125;ã€‚123456&lt;h1 itemprop=&quot;name&quot;&gt;&lt;% if (post.top) &#123; %&gt; &lt;i class=&quot;icon icon-map-marker&quot;&gt;&lt;/i&gt; &lt;font color=#7D26CD&gt;ç½®é¡¶&lt;/font&gt; &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;&lt;% &#125; %&gt;è‡³äºè¿›ä¸€æ­¥ç¾åŒ–ç½®é¡¶ï¼Œé‚£å°±éœ€è¦å„ä½è‡ªå·±å»è°ƒäº†~ ç¬¬ä¸‰æ­¥ï¼Œä½¿ç”¨ç½®é¡¶ï¼šåœ¨éœ€è¦è¢«ç½®é¡¶çš„æ–‡ç« Front-matterä¸­æ·»åŠ top: trueæˆ–top: 999å³å¯ï¼Œç½®é¡¶æ’åºè§„åˆ™ä¸ºï¼šæ•°å€¼è¶Šå¤§è¶Šé ä¸Šï¼ˆç›¸åŒåˆ™æŒ‰æ—¶é—´ï¼‰ã€‚ 18.æ·»åŠ æ–‡ç« æ›´æ–°æ—¶é—´æœ‰æ—¶å€™ä¸€ç¯‡æ–‡ç« å†™å®Œåï¼Œå¯èƒ½ä¼šå¤šæ¬¡ä¿®æ”¹åå¤æ›´æ–°ï¼Œå› æ­¤éœ€è¦å°†ã€Œåšæ–‡æ›´æ–°æ—¶é—´ã€ä¹Ÿæ˜¾ç¤ºåœ¨æ–‡ç« ä¸Šï¼Œç„¶è€Œå°ä¼—ä¸»é¢˜å¯ä¾›å‚è€ƒçš„æ–‡ç« å‡ ä¹æ²¡æœ‰ã€‚ æ‰¾äº†ä¸€åœˆï¼Œå‘ç°Hikerä¸»é¢˜å’ŒPureä¸»é¢˜å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œäºæ˜¯å‚è€ƒäº†Hexoåšå®¢Hikerä¸»é¢˜å¢åŠ æ–‡ç« æœ€åç¼–è¾‘æ—¶é—´å¹¶æŒ‰ç…§æœ€åç¼–è¾‘æ—¶é—´æ’åºã€‚åœ¨æ­¤éå¸¸æ„Ÿè°¢Vientianeè¯¦ç»†è€Œæ¸…æ™°çš„ä¿®æ”¹æ•™ç¨‹ï¼Œæœ¬æ–‡ä»…é’ˆå¯¹äºè‡ªå·±çš„éœ€æ±‚è¿›è¡Œä¿®æ”¹ï¼Œè‹¥éœ€æ›´å¤šé…ç½®ï¼Œçƒ¦è¯·ç§»æ­¥åŸæ–‡ã€‚ Hikerä¸»é¢˜å’ŒPureä¸»é¢˜layoutç»“æ„æ˜¯ä¸€è‡´çš„ï¼Œæ ¹æ®Vientianeçš„åˆ†æå’Œç½‘é¡µHTMLç»“æ„ï¼Œéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ä¸º./themes/pure/layout/_partial/post/date.ejsã€‚ data.ejsè¿™ä¸ªæ–‡ä»¶åœ¨å¾ˆå¤šåœ°æ–¹ä¼šè¢«å¼•ç”¨åˆ°ï¼Œå¯è°“æ˜¯ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«å•Šï¼Œå¦‚æœä½ æ”¹åœ¨è¿™ä¸ªæ–‡ä»¶ä¸Šï¼Œå°±ä¼šå‘ç°æ‰€æœ‰åŸæœ¬å‡ºç°å‘å¸ƒæ—¶é—´çš„åœ°æ–¹åŒæ—¶è¿˜ä¼šæœ‰æ›´æ–°æ—¶é—´ï¼Œçœ‹ä¸Šå»çœŸçš„æ˜¯æœ‰ç‚¹ä¸‘å•Šã€‚æˆ‘ä¸éœ€è¦å®ƒåœ¨æ–‡ç« æ­£æ–‡ä»¥å¤–çš„éƒ¨åˆ†å‡ºç°æ›´æ–°æ—¶é—´ï¼Œæ‰€ä»¥é€‰æ‹©æ–°å»ºä¸€ä¸ªupdated.ejsæ–‡ä»¶ï¼Œå°±æ”¾åœ¨ä¸date.ejsåŒçº§çš„postæ–‡ä»¶å¤¹ã€‚ å®é™…ä¸Šï¼Œdata.ejsåªåœ¨ã€Œæ–‡ç« é¡µã€å’Œã€Œé¦–é¡µã€å‡ºç°ï¼Œä¹Ÿæ²¡æœ‰å‡ºç°åœ¨ä¸è¯¥å‡ºç°çš„åœ°æ–¹ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œä»è€Œä¸éœ€è¦æ–°å»ºupdated.ejsæ–‡ä»¶ï¼Œä¹Ÿä¸éœ€è¦ä¿®æ”¹./themes/pure/layout/_partial/article.ejsã€‚ ç›´æ¥å¤åˆ¶ä¸€ä»½ï¼Œå¯¹åº”ä¿®æ”¹ä¸ºpost.updatedå’Œitemprop=&quot;dateUpdated&quot;ï¼Œå¹¶é€‰æ‹©åˆé€‚çš„å›¾æ ‡ã€‚1234567891011121314151617&lt;span class=&quot;article-date&quot;&gt; &lt;i class=&quot;icon icon-calendar&quot;&gt;&lt;/i&gt; &lt;a href=&quot;&lt;%- url_for(post.path) %&gt;&quot; class=&quot;&lt;%= class_name %&gt;&quot;&gt; &lt;time datetime=&quot;&lt;%= date_xml(post.date) %&gt;&quot; itemprop=&quot;datePublished&quot;&gt; &lt;%= date(post.date, date_format) %&gt; &lt;/time&gt; &lt;/a&gt;&lt;/span&gt;&lt;span class=&quot;article-date&quot;&gt; &lt;i class=&quot;icon icon-calendar-check&quot;&gt;&lt;/i&gt; &lt;a href=&quot;&lt;%- url_for(post.path) %&gt;&quot; class=&quot;&lt;%= class_name %&gt;&quot;&gt; &lt;time datetime=&quot;&lt;%= date_xml(post.updated) %&gt;&quot; itemprop=&quot;dateUpdated&quot;&gt; &lt;%= date(post.updated, date_format) %&gt; &lt;/time&gt; &lt;/a&gt;&lt;/span&gt;åˆ°è¿™é‡Œå°±å·²ç»æ”¹å¥½äº†ï¼Œé‡æ–°ç”Ÿæˆé¡µé¢å°±å¯ä»¥çœ‹åˆ°æ•ˆæœã€‚ä»¥ä¸‹æ˜¯å‡ ç‚¹è¯´æ˜ï¼Œè‡ªè¡Œå–èˆï¼š â‘´å¦‚æœåœ¨Front-matterä¸­å®šä¹‰äº†updatedï¼Œé‚£ä¹ˆæ›´æ–°æ—¶é—´å°±æ˜¯å®šä¹‰çš„é‚£ä¸ªå€¼ï¼Œå¦åˆ™å°±æ˜¯.mdæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼› â‘µé¦–é¡µæ–‡ç« æ’åºè§„åˆ™å’Œæ—¶é—´æ ¼å¼éœ€è¦åˆ†åˆ«ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶./_config.ymlçš„index_generator: order_by: -dateå’Œdate_format: YYYY-MM-DDï¼› â‘¶æ–‡ç« çš„ã€Œå‘å¸ƒæ—¶é—´ã€å’Œã€Œæ›´æ–°æ—¶é—´ã€å¦‚æœä¸åŠ åŒºåˆ«åœ°æ”¾åœ¨ä¸€èµ·ï¼Œå¯èƒ½ä¼šè®©äººè¿·æƒ‘ï¼Œå› æ­¤éœ€è¦ï¼š é€šè¿‡ä¸€ä¸ªæœ‰è¾¨è¯†åº¦çš„å›¾æ ‡æ¥åŒºåˆ†ï¼› åœ¨ä¸¤å¤„&lt;time&gt;æ ‡ç­¾å‰é€šè¿‡å­—æ®µæ˜¾å¼åœ°åŒºåˆ†ï¼š ç›´æ¥å†™æ­»ï¼Œä¾‹å¦‚æ›´æ–°äº&lt;time&gt;Â·Â·Â·ï¼› ä¹Ÿå¯ä»¥&lt;%= __(&#39;updated&#39;) %&gt; &lt;time&gt;Â·Â·Â·ï¼Œè¿™ç§æ–¹å¼é€‚åº”å¤šç§è¯­è¨€ç¯å¢ƒï¼Œå› æ­¤è¿˜éœ€åˆ°è¯­è¨€é…ç½®æ–‡ä»¶ä¸­å¢åŠ å¯¹åº”å­—æ®µupdated: æ›´æ–°äºï¼ˆå¦‚æœæ²¡æœ‰è®¾ç½®åˆ™æ˜¾ç¤ºä¸ºæ ‡ç­¾ä¸­çš„å€¼updatedï¼‰ï¼› â‘·å¦‚æœarticle-metaå†…å®¹è¿‡å¤šæˆ–å…¶ä»–åŸå› ï¼Œåªå¸Œæœ›åœ¨ã€Œæ–‡ç« é¡µã€æ˜¾ç¤ºï¼Œåˆ™éœ€è¦æ–°å»ºupdated.ejsæ–‡ä»¶ã€‚ â‘¸å…³äºã€Œé¦–é¡µã€å’Œã€Œæ–‡ç« é¡µã€æ—¶é—´æ ¼å¼ä¸ä¸€è‡´çš„é—®é¢˜ï¼šã€Œé¦–é¡µã€æ—¶é—´æ ¼å¼æ˜¯ç”±archive-post.ejsï¼ˆé»˜è®¤å€¼ä¸ºdate_format: &#39;MMM D&#39;ï¼‰å†³å®šï¼Œã€Œæ–‡ç« é¡µã€æ—¶é—´æ ¼å¼æ˜¯ç”±article.ejsï¼ˆé»˜è®¤å€¼ä¸ºdate_format: nullï¼‰å†³å®šï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½åœ¨&lt;xx class=&quot;article-meta&quot;&gt;ä¸­å¼•å…¥äº†date.ejsï¼Œåœ¨date.ejsæ¥å—é…ç½®æ–‡ä»¶_config.ymlä¸­çš„æ—¶é—´æ ¼å¼ã€‚åˆ†æå¯çŸ¥ï¼š _config.ymlä¸­è®¾ç½®çš„æ—¶é—´æ ¼å¼ä»…èƒ½å½±å“date.ejsï¼Œå†ä¼ ç»™å¦å¤–ä¸¤è€…è§£æï¼› archive-post.ejså’Œarticle.ejså„è‡ªæœ‰æ—¶é—´è§£æçš„æ ¼å¼ï¼Œå› æ­¤å¯¼è‡´äº†ä¸åŒã€‚å¦‚æœåœ¨è¿™ä¸¤è€…ä¸­æŒ‡å®šäº†date_formatåˆ™æŒ‰å®ƒæ¥è§£æï¼Œå¦åˆ™ç”¨å·²æœ‰çš„å€¼ã€‚ ç”±æ­¤è§£å†³æ–¹æ¡ˆä¾¿æ˜¾è€Œæ˜“è§äº†ï¼šå°†archive-post.ejsä¸­çš„date_format: &#39;MMM D&#39;ä¿®æ”¹ä¸ºdate_format: nullå³å¯ã€‚ â‘¹æ²¡äº†ã€‚ 19.æ·»åŠ æœç´¢å¼•æ“æ”¶å½•19.1.è°·æ­Œæ”¶å½• è°·æ­Œæ”¶å½•çš„æ“ä½œå¾ˆç®€å•ï¼Œå”¯ä¸€çš„é—®é¢˜å°±æ˜¯ä½ èƒ½å¦æ‰“å¼€è¿™ä¸²ç¥å¥‡çš„å­—ç¬¦ï¼šhttps://search.google.com/search-console æ“ä½œæ–¹æ³•ï¼š 1.ç™»é™†æˆ–æ³¨å†Œè°·æ­Œè´¦å·ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 2.æ·»åŠ èµ„æºï¼šèµ„æºç±»å‹é€‰æ‹©ã€Œç½‘å€å‰ç¼€ã€ã€å¦‚æœé€‰æ‹©ã€Œç½‘åŸŸã€ï¼Œåˆ™éœ€è¦è¿›è¡ŒDNSéªŒè¯ï¼Œå¯èƒ½æ¯”è¾ƒéº»çƒ¦ã€‘ï¼Œè¾“å…¥åŒ…å«åè®®å¤´çš„ç½‘å€ï¼Œä¾‹å¦‚https://hwame.topå¦‚å›¾æ‰€ç¤ºï¼š 3.éªŒè¯æ‰€æœ‰æƒï¼šå¯ä½¿ç”¨çš„æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š HTMLæ–‡ä»¶â€”â€”å°†HTMLæ–‡ä»¶ä¸Šä¼ è‡³æ‚¨çš„ç½‘ç«™ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œè¿™æ˜¯è°·æ­Œæ¨èä½¿ç”¨çš„éªŒè¯æ–¹æ³•ï¼Œéœ€è¦å°†googlexxx.htmlæ–‡ä»¶ä¸Šä¼ åˆ°ç½‘å€ä¸Šï¼Œå¯¹äºHexoåšå®¢è€Œè¨€ï¼Œç›´æ¥å°†å…¶æ”¾åœ¨./source/æ–‡ä»¶å¤¹ä¸‹ï¼ˆä¸CNAMEæ–‡ä»¶åŒçº§ï¼‰å³å¯ï¼› HTMLæ ‡è®°â€”â€”å‘æ‚¨ç½‘ç«™çš„é¦–é¡µæ·»åŠ å…ƒæ ‡è®°ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œè¿™æ˜¯æˆ‘ä½¿ç”¨çš„æ–¹æ³•ï¼Œåœ¨ç½‘é¡µä¸­æ·»åŠ å…ƒæ ‡è®°ã€‚éœ€è¦å°†Googleæä¾›çš„å…ƒæ ‡è®°ç²˜è´´è‡³ç½‘é¡µ&lt;head&gt;éƒ¨åˆ†ã€‚å¯¹äºHexoåšå®¢è€Œè¨€ï¼Œå¯ä»¥å°†å…¶æ·»åŠ åˆ°./themes/pure/layout/_common/head.ejsä¸­ï¼Œå¯ä»¥ä½¿æ¯ä¸ªé¡µé¢éƒ½èƒ½è¢«æ”¶å½•è€Œä¸ä»…æ˜¯é¦–é¡µï¼š1234&lt;meta name=&quot;xxx&quot; content=&quot;xxx&quot;&gt;&lt;meta name=&quot;xxx&quot; content=&quot;xxx&quot;&gt;&lt;!-- è°·æ­Œæ”¶å½• --&gt;&lt;meta name=&quot;google-site-verification&quot; content=&quot;xxxxxx&quot; /&gt; å‰©ä½™ä¸‰ç§å¯æ ¹æ®è‡ªèº«æƒ…å†µï¼Œå¦‚å›¾æ‰€ç¤ºï¼š Google Analyticsï¼ˆåˆ†æï¼‰â€”â€”ä½¿ç”¨æ‚¨çš„Google Analyticsï¼ˆåˆ†æï¼‰å¸å·ï¼› Google Tag Managerâ€”â€”ä½¿ç”¨æ‚¨çš„Googleè·Ÿè¸ªä»£ç ç®¡ç†å™¨å¸å·ï¼› åŸŸåæä¾›å•†â€”â€”å°†DNSè®°å½•ä¸Googleå…³è”ã€‚ 4.éªŒè¯å®Œæˆï¼šæ‰€æœ‰æƒéªŒè¯å®Œæˆåï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¯´æ˜ï¼šä¸Šè¿°éªŒè¯æ–¹å¼å¯ä»¥åŒæ—¶é‡‡ç”¨ï¼Œä»¥æ·»åŠ å¤šç§éªŒè¯æ–¹æ³•ï¼Œä»è€Œé¿å…éªŒè¯çŠ¶æ€ä¸¢å¤±ã€‚ 5.æ•ˆæœé¢„è§ˆï¼šç”±äºè°·æ­ŒæŠ“å–å†…å®¹éœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œæ‰€ä»¥æš‚æ—¶è¿˜çœ‹ä¸åˆ°å†…å®¹ï¼šç­‰ä¸€æ®µæ—¶é—´å³å¯çœ‹åˆ°æ•ˆæœï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 19.2.ç™¾åº¦æ”¶å½•ä¸è°·æ­Œæ”¶å½•ç›¸æ¯”ï¼Œç™¾åº¦æ”¶å½•å°±éº»çƒ¦å¤šäº†ã€‚ç¬¬ä¸€æ­¥ï¼Œæ³¨å†Œæˆ–ç™»é™†ã€Œç™¾åº¦æœç´¢èµ„æºå¹³å°ã€ï¼šhttps://ziyuan.baidu.com/login/index?u=/crawl/ ç¬¬äºŒæ­¥ï¼Œæ·»åŠ ç«™ç‚¹ï¼Œå°†è‡ªå·±åšå®¢ç½‘å€æ·»åŠ ï¼Œå¯è®¾ç½®æˆé»˜è®¤ç«™ç‚¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ç¬¬ä¸‰æ­¥ï¼Œç½‘ç«™éªŒè¯ï¼Œç«™ç‚¹æ·»åŠ ä»¥åå®ŒæˆéªŒè¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ç¬¬å››æ­¥ï¼Œèµ„æºæäº¤ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ æ‰¾åˆ°ã€Œèµ„æºæäº¤ã€â†’ã€Œæ™®é€šæ”¶å½•ã€è¿›è¡Œèµ„æºçš„æ¨é€ï¼Œæ¨é€æ–¹å¼åŒ…æ‹¬ä»¥ä¸‹å››ç§ï¼š ã€ŒAPIæäº¤ã€ï¼Œåˆ©ç”¨æ¨é€æ¥å£http://data.zz.baidu.com/urls?site=&lt;yoursite&gt;&amp;token=&lt;yourtoken&gt;ï¼Œç»“åˆæ¨é€ç¤ºä¾‹è¿›è¡Œç»“æ„åŒ–æ•°æ®çš„æäº¤ï¼Œå¯æ ¹æ®è‡ªå·±çš„æƒ…å†µä½¿ç”¨æ“…é•¿çš„è¯­è¨€ç¼–å†™ä»£ç ã€‚è¿™ä¹Ÿæ˜¯æˆ‘æ‰€ä½¿ç”¨çš„æ–¹å¼ï¼Œä¸‹æ–‡å°†è¯¦ç»†å±•å¼€ã€‚ ã€Œè‡ªåŠ¨æ¨é€ã€ï¼Œè‡ªåŠ¨æ¨é€ä»…å¯¹å…³è”è¿‡ä¸»ä½“çš„ç«™ç‚¹å¼€æ”¾ï¼Œéœ€è¦åœ¨å·¦ä¾§å¯¼èˆªæ ä¾æ¬¡å±•å¼€ã€Œæœç´¢å±•ç°ã€â†’ã€Œç«™ç‚¹å±æ€§ã€â†’ã€ŒåŸºç¡€ä¿¡æ¯ã€â†’ã€Œå…³è”ä¸»ä½“ã€ï¼Œç”±äºæœªä½¿ç”¨è¿™ç§æ–¹å¼å› æ­¤ä¸å†å™è¿°ï¼Œå‚è€ƒã€å…³è”ä¸»ä½“ä½¿ç”¨è¯´æ˜ã€‘ã€‚è‡ªåŠ¨æ¨é€çš„jsä»£ç éœ€è¦åœ¨æ¯ä¸ªHTMLé¡µé¢ä¸­éƒ½åŒ…å«ï¼Œå› æ­¤å¯ä»¥å†™å…¥åˆ°./themes/pure/layout/_common/head.ejsä¸­ï¼š1234567891011121314&lt;script&gt;(function()&#123; var bp = document.createElement(&#x27;script&#x27;); var curProtocol = window.location.protocol.split(&#x27;:&#x27;)[0]; if (curProtocol === &#x27;https&#x27;)&#123; bp.src = &#x27;https://zz.bdstatic.com/linksubmit/push.js&#x27;; &#125; else&#123; bp.src = &#x27;http://push.zhanzhang.baidu.com/push.js&#x27;; &#125; var s = document.getElementsByTagName(&quot;script&quot;)[0]; s.parentNode.insertBefore(bp, s);&#125;)();&lt;/script&gt; ã€Œsitemapã€ï¼Œæ ¹æ®ç™¾åº¦ç™¾ç§‘çš„è§£é‡Šï¼Œç«™ç‚¹åœ°å›¾å¯æ–¹ä¾¿ç½‘ç«™ç®¡ç†å‘˜é€šçŸ¥æœç´¢å¼•æ“ä»–ä»¬ç½‘ç«™ä¸Šæœ‰å“ªäº›å¯ä¾›æŠ“å–çš„ç½‘é¡µï¼Œä¸€èˆ¬ä¸ºXMLæ–‡ä»¶ï¼Œä¾‹å¦‚atom.xmlã€‚ç›´æ¥å°†XMLæ–‡ä»¶åœ°å€æ·»åŠ æäº¤å³å¯ã€‚æ³¨æ„å›¾ä¸­çš„æç¤ºä¿¡æ¯ ã€Œæ‰‹åŠ¨æäº¤ã€ï¼Œé¡¾åæ€ä¹‰å³å°†æ–‡ç« é“¾æ¥åœ°å€æ‰‹åŠ¨å¡«å†™å¹¶æäº¤ã€‚æ³¨æ„å›¾ä¸­çš„æç¤ºä¿¡æ¯ 19.3.APIæäº¤ä¸»åŠ¨æ¨é€çš„APIæäº¤å¯ä»¥ç®€å•å€ŸåŠ©Hexoæ’ä»¶ï¼Œå¯ä»¥å‚è€ƒHexoæ’ä»¶ä¹‹ç™¾åº¦ä¸»åŠ¨æäº¤é“¾æ¥ï¼Œä»¥ä¸‹æ˜¯è‡ªå·±å†™çš„ã€‚ ç™¾åº¦æä¾›äº†phpå’Œrubyçš„æ¨é€ç¤ºä¾‹ï¼Œå‚è€ƒcurlæ¨é€ç¤ºä¾‹ç¼–å†™pythonä»£ç ã€‚æ•´ä¸ªçš„æ€è·¯å°±æ˜¯å…ˆç”¨Pythonæå–ç½‘ç«™æ‰€æœ‰æ–‡ç« çš„é“¾æ¥ï¼Œç„¶åå°†å…¶å†™å…¥urls.txtï¼Œå†å†™ä¸€ä¸ªshellè„šæœ¬æ‰§è¡Œcurlå‘½ä»¤ï¼Œæ¨é€å®Œæˆååˆ é™¤txtæ–‡ä»¶ã€‚Pythonä¸»é€»è¾‘å¦‚ä¸‹ï¼Œåˆ©ç”¨çˆ¬è™«æŠ“å–ã€Œå½’æ¡£ã€é¡µé¢æ‰€æœ‰çš„æ–‡ç« é“¾æ¥æ”¾å…¥åˆ—è¡¨ï¼Œç„¶åæ‰“å°ã€‚123456789101112131415161718192021import requestsfrom lxml import etreedef get_article_links(site_url): # ã€Œå½’æ¡£ã€é¡µæå–æ‰€æœ‰æ–‡ç« é“¾æ¥ archive_url = site_url.rstrip(&quot;/&quot;) + &quot;/archives/&quot; articles = [] # ç¬¬ä¸€é¡µï¼Œè‹¥ç›´æ¥&quot;/archives/page/1/&quot;åˆ™æŠ¥é”™404 text = requests.get(archive_url).text html = etree.HTML(text) data = html.xpath(&#x27;/html/body/main/article/div/section/div[2]/div/div/a/@href&#x27;) articles.extend(data) # ç¬¬äºŒé¡µè‡³æœ«å°¾ page = html.xpath(&#x27;/html/body/main/nav/div/div&#x27;) if len(page): for i in range(1, int(page[0].text.split(&#x27;/&#x27;)[-1])): page_url = archive_url + &quot;page/&#123;&#125;/&quot;.format(i + 1) text = requests.get(page_url).text html = etree.HTML(text) data = html.xpath(&#x27;/html/body/main/article/div/section/div[2]/div/div/a/@href&#x27;) articles.extend(data) return list(map(lambda item: site_url + item, articles))å°†æ‰“å°çš„å†…å®¹é‡å®šå‘åˆ°urls.txtï¼Œç„¶åæ‰§è¡Œcurlå‘½ä»¤ï¼Œä¸»è¦å‘½ä»¤å¦‚ä¸‹ï¼š123python submit.py &gt; urls.txtcurl -H &#x27;Content-Type:text/plain&#x27; --data-binary @urls.txt &quot;http://data.zz.baidu.com/urls?site=&lt;yoursite&gt;&amp;token=&lt;yourtoken&gt;&quot;erase urls.txtæ‰§è¡Œæ•ˆæœå¦‚å›¾ï¼š è¯´æ˜ï¼š â‘ æ­¤è„šæœ¬é€‚ç”¨äºWindowsç³»ç»Ÿï¼ŒUnixç³»ç»Ÿåªéœ€å°†cmdçš„åˆ é™¤å‘½ä»¤eraseæ›¿æ¢ä¸ºrm -fï¼›â‘¡æ›´ç®€å•ç®€æ´çš„åŠæ³•æ˜¯ä»ç«™ç‚¹åœ°å›¾é‡Œæå–é“¾æ¥ï¼Œå»é‡åè¿›è¡Œæ¨é€ï¼Œè¿™ç§æ–¹å¼ä¸ä»…èƒ½æ¨é€æ–‡ç« ï¼Œè¿˜å¯ä»¥æ¨é€é¡µé¢ï¼›â‘¢cmdæˆ–shellè„šæœ¬æ˜¯åŸºäºcurlæ¨é€çš„ï¼Œå‚è€ƒç™¾åº¦çš„postæ¨é€ç¤ºä¾‹ï¼Œå¯ä»¥åªéœ€è¦ä¸€ä¸ªPythonè„šæœ¬ï¼Œåˆ©ç”¨requests.post()æ–¹æ³•ï¼Œä¸»è¦é€»è¾‘å¦‚ä¸‹ï¼š1234567891011def submit_to_baidu(articles, site, token): # articlesåˆ—è¡¨ä¸ºä¸Šæ–‡get_article_links()å‡½æ•°çš„è¿”å›å€¼ baidu_url = f&quot;http://data.zz.baidu.com/urls?site=&#123;site&#125;&amp;token=&#123;token&#125;&quot; headers = &#123;&quot;User-Agent&quot;: &quot;curl/7.12.1&quot;, &quot;Host&quot;: &quot;data.zz.baidu.com&quot;, &quot;Content-Type&quot;: &quot;text/plain&quot;, &quot;Content-Length&quot;: &quot;83&quot; &#125; post_url = &quot;\\n&quot;.join(articles) res = requests.post(url=baidu_url, headers=headers, data=post_url) return res.textâ‘£é€šç”¨Pythonè„šæœ¬ç‚¹æˆ‘ä¸‹è½½æ¥äº†ï¼Œå‘½ä»¤è¡Œæ‰§è¡Œpython submit.pyï¼Œè¾“å…¥å‚æ•°ã€ä¸»ç«™ç½‘å€ã€tokenå³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 19.4.æ”¶å½•æ•ˆæœè°·æ­Œæ”¶å½•ç›¸å¯¹è¾ƒå¿«ï¼Œå¤§æ¦‚ä¸€ä¸¤å¤©å°±èƒ½çœ‹åˆ°ï¼š ç™¾åº¦æ”¶å½•å°±å¾ˆæ…¢äº†ï¼Œå¤§æ¦‚éœ€è¦ä¸€å‘¨çš„æ—¶é—´ï¼š ä¸Šé¢æœç´¢æ˜¯ä½¿ç”¨å…³é”®å­—ï¼Œæ‰€ä»¥æ’åæ¯”è¾ƒé åï¼›å¦‚æœç²¾ç¡®æœç´¢ï¼Œåˆ™éœ¸å å¤´ç‰ˆï¼Œä¸”æœç´¢å†…å®¹å…¨éƒ¨ç›¸å…³ï¼š 20.è‡ªå®šä¹‰å›¾ç‰‡å¤§å°Hexoåšå®¢ä¸­åŸç”Ÿçš„Markdownè¯­æ³•ä¸æ”¯æŒè®¾ç½®å›¾ç‰‡å¤§å°ï¼Œå¦‚æœéœ€è¦æŒ‡å®šå›¾ç‰‡å¤§å°åªèƒ½é€šè¿‡HTMLè¯­æ³•æ¥è®¾ç½®ï¼Œè¿™æœªå…æœ‰ç‚¹éº»çƒ¦ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ç®€å•çš„åŠæ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼š å¯ä»¥é€šè¿‡é¢å¤–çš„jsæ¥å¯¹![å›¾ç‰‡æè¿°](å›¾ç‰‡åœ°å€)è¿›è¡Œè§£æï¼Œ æ­¤å›ç­”å‚è€ƒï¼šHexoä¸­æ‰©å±•Markdownè¯­æ³•è®¾ç½®å›¾ç‰‡çš„å¤§å°ã€‚â€‹åªéœ€è¦åœ¨å¸ƒå±€æ–‡ä»¶./themes/xxx/layout/layout.ejsä¸­å¼•å…¥jsæ–‡ä»¶å³å¯ï¼šhttps://cdn.jsdelivr.net/gh/bobcn/hexo_resize_image.js@master/hexo_resize_image.js å¼•å…¥ä½ç½®åœ¨&lt;body&gt;å‰å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š12&lt;script src=&quot;https://cdn.jsdelivr.net/gh/bobcn/hexo_resize_image.js@master/hexo_resize_image.js&quot;&gt;&lt;/script&gt;&lt;body class=&quot;&lt;%= bodyClass %&gt;&quot; xxx&gt;ä½¿ç”¨æ—¶åœ¨.mdæ–‡ä»¶ä¸­æ’å…¥å›¾ç‰‡æ—¶ï¼Œåªéœ€è¦åœ¨å›¾ç‰‡åœ°å€åæ·»åŠ ?&lt;width&gt;x&lt;height&gt;å³å¯ï¼Œå…·ä½“æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š æ ¼å¼ ç¤ºä¾‹ æè¿° ?widthxheight ?400x300 åŒæ—¶æŒ‡å®šå®½åº¦å’Œé«˜åº¦ ?widthx ?400x æŒ‡å®šå®½åº¦400 ?xheight ?x300 æŒ‡å®šé«˜åº¦300 ?scale ?50 æŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼Œç¤ºä¾‹è¡¨ç¤º50% ä¾‹å¦‚ï¼š ![avatar](https://cdn.jsdelivr.net/gh/hwame/pics@main/avatar.jpg?200x200) ![avatar](https://cdn.jsdelivr.net/gh/hwame/pics@main/avatar.jpg?200x) ![avatar](https://cdn.jsdelivr.net/gh/hwame/pics@main/avatar.jpg?x200) ![avatar](https://cdn.jsdelivr.net/gh/hwame/pics@main/avatar.jpg?80)","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/tags/Hexo/"}]},{"title":"Hexoåšå®¢æ­å»º(3)â€”â€”ä¼˜åŒ–è¯„è®ºç³»ç»Ÿ","slug":"hello-hexo-optimization","date":"2020-05-20T05:14:52.000Z","updated":"2020-09-28T02:29:51.000Z","comments":true,"path":"20200520/hello-hexo-optimization.html","link":"","permalink":"https://hwame.top/20200520/hello-hexo-optimization.html","excerpt":"æ‘˜è¦ï¼šåšå®¢é‡‡ç”¨Valineè¯„è®ºç³»ç»Ÿï¼Œå…¶åŸºäºLeanCloudï¼Œé…ç½®è¾ƒä¸ºç¹çï¼Œæ•…å•ç‹¬å–ä¸€ç¯‡å¹…è®°å½•å…¶é…ç½®è¿‡ç¨‹ã€‚","text":"æ‘˜è¦ï¼šåšå®¢é‡‡ç”¨Valineè¯„è®ºç³»ç»Ÿï¼Œå…¶åŸºäºLeanCloudï¼Œé…ç½®è¾ƒä¸ºç¹çï¼Œæ•…å•ç‹¬å–ä¸€ç¯‡å¹…è®°å½•å…¶é…ç½®è¿‡ç¨‹ã€‚ Hexoåšå®¢æ­å»ºåšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²ï¼Œç¯å¢ƒæ­å»ºå¹¶éƒ¨ç½²è‡³Githubã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®ï¼Œé’ˆå¯¹pureä¸»é¢˜è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(3)â€”â€”ä¼˜åŒ–è¯„è®ºç³»ç»Ÿï¼Œä¸»è¦å¯¹Valineè¯„è®ºç³»ç»Ÿè¿›è¡Œä¼˜åŒ–ã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ï¼Œä¿®å¤äº†pureä¸»é¢˜çš„ç³»åˆ—å°bugã€‚æ–‡ç« ä½œè€…ï¼šé´»å¡µ 1.å‰è¨€Hexoæ”¯æŒdisqusã€youyanã€livereã€gitmentã€gitalkåŠvalineç­‰å¤šç§è¯„è®ºç³»ç»Ÿï¼Œæ­¤éƒ¨åˆ†ä»…ç”¨äºValineè¯„è®ºç³»ç»Ÿã€‚åŸç‰ˆçš„é…ç½®ä»…èƒ½è®°å½•è¯„è®ºï¼Œä¸èƒ½å®ç°é‚®ä»¶æé†’ã€QQå¤´åƒç­‰ä¸ªæ€§åŒ–éœ€æ±‚ã€‚å¤´åƒå€’æ— æ‰€è°“ï¼ŒValineè‡ªå¸¦çš„å¤´åƒæ ·å¼ï¼ˆmonsteridã€wavatarã€robohashï¼‰å…¶å®ä¹Ÿå·®ä¸å¤šå¤Ÿç”¨äº†ï¼Œä½†è¿œä¸å¦‚QQå¤´åƒçš„è¾¨è¯†åº¦é«˜ã€‚æœ€ä¸»è¦çš„æ˜¯é‚®ä»¶æé†’åŠŸèƒ½ï¼Œæ¯”å¦‚è®¨è®ºæŸä¸ªé—®é¢˜ï¼Œå½“æœ‰äº†ç­”æ¡ˆçš„æ—¶å€™å´æ— æ³•é€šçŸ¥å¯¹æ–¹ï¼Œå› ä¸ºåˆ«äººä¸å¯èƒ½ä¸€ç›´å®ˆç€ä½ çš„ç½‘ç«™ç­‰å›å¤å§ï¼Œæ‰€ä»¥ã€Œé‚®ä»¶æé†’ã€å°±æ˜¾å¾—æå…¶é‡è¦ä¸”å¿…è¦äº†ã€‚åŸºç¡€é…ç½®å‚è€ƒå‰æ–‡Hexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®ä¹‹è¯„è®ºç³»ç»Ÿï¼Œä¸‹æ–‡æ˜¯è¿›é˜¶é…ç½®ã€‚ è¿›é˜¶é…ç½®ä¸»è¦å‚è€ƒï¼šâ‘ Valineè¯„è®ºä¹‹Valine-adminé…ç½®æ”»ç•¥â‘¡pureä¸»é¢˜valineç•™è¨€æ¿æ·»åŠ ï¼šæ˜µç§°ã€é‚®ç®±å¿…å¡«å¿…å†™åŠŸèƒ½ 2.éƒ¨ç½²valine-admin2.1.åˆ›å»ºåº”ç”¨æ³¨å†Œç™»å½• LeanCloud çš„å®˜ç½‘ï¼Œæ¨èä½¿ç”¨ã€Œå›½é™…ç‰ˆã€ï¼Œå› ä¸ºé™„èµ äº†ä¸€ä¸ªã€ŒLeanCloudè¯„è®ºç®¡ç†ã€çš„åŸŸåhttps://xxx.avosapps.usã€‚åˆ›å»ºåº”ç”¨ï¼Œé€‰æ‹©å…è´¹çš„ã€Œå¼€å‘ç‰ˆã€å³å¯ï¼Œåˆ›å»ºå®Œæˆå¦‚å›¾æ‰€ç¤ºã€‚ 2.2.éƒ¨ç½²é¡¹ç›®â‘´è¿›å…¥åˆ›å»ºå¥½çš„åº”ç”¨ï¼Œä¾æ¬¡ç‚¹å‡»ã€Œäº‘å¼•æ“ã€â†’ã€Œéƒ¨ç½²ã€â†’ã€Œé¡¹ç›®éƒ¨ç½²ã€ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚â‘µæ­¤æ—¶é»˜è®¤æ˜¯åœ¨ã€Œå‘½ä»¤è¡Œå·¥å…·éƒ¨ç½²ã€çš„æ•™ç¨‹é¡µé¢ï¼Œåˆ‡æ¢åˆ°ã€ŒGitéƒ¨ç½²ã€ï¼Œç‚¹å‡»ã€Œé…ç½®Gitã€ï¼Œåœ¨ã€ŒGit remote URLã€å¡«å…¥https://github.com/sviptzk/Valine-Admin-Serverï¼Œå¦‚å›¾æ‰€ç¤ºã€‚â‘¶ç‚¹å‡»ã€Œéƒ¨ç½²é¡¹ç›®ã€ï¼Œå›åˆ°ã€ŒGitéƒ¨ç½²ã€é€‰é¡¹å¡ï¼Œå¯ä»¥çœ‹åˆ°ã€ŒDeploy fromhttps://github.com/sviptzk/Valine-Admin-Serverã€ï¼Œã€Œæ‰‹åŠ¨éƒ¨ç½²ã€ä¸‹ç‚¹å‡»ã€Œéƒ¨ç½²ã€å³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚â‘·ç­‰å¾…éƒ¨ç½²å®Œæˆå³å¯ï¼Œæ§åˆ¶å°æ‰“å°éƒ¨ç½²æ—¥å¿—å¦‚å›¾ã€‚â‘¸éƒ¨ç½²è¿‡ç¨‹å®Œæ•´åŠ¨å›¾å¦‚ä¸‹ï¼Œå›¾ç‰‡æ¥æº 2.3.ç»‘å®šè¯„è®ºç®¡ç†çš„åŸŸåè¯´æ˜ï¼šè¿™ä¸€æ­¥éå¿…é¡»ï¼Œè¯„è®ºç®¡ç†æ¨¡å—å¯ä»¥ç›´æ¥åœ¨ã€Œå­˜å‚¨ã€â†’ã€Œç»“æ„åŒ–æ•°æ®ã€â†’ã€ŒCommentã€å¤„æ“ä½œï¼Œä½†æ˜¯ã€Œå›½é™…ç‰ˆåŸŸåã€å¯¹åº”çš„è¯„è®ºåå°ç®¡ç†ç³»ç»Ÿå¯ä»¥å¯¹å‘é€é‚®ä»¶æé†’å¤±è´¥çš„è¯„è®ºé‡æ–°å‘é€é€šçŸ¥ã€å¯ä»¥æ ‡è®°åƒåœ¾é‚®ä»¶ï¼Œç»¼ä¸Šè¿˜æ˜¯æœ‰å¿…è¦é…ç½®è¿™ä¸€æ­¥çš„ã€‚ ç”±äºLeanCloudåˆ†ä¸ºã€Œå›½åŒºç‰ˆã€å’Œã€Œå›½é™…ç‰ˆã€ï¼Œåªæœ‰ã€Œå›½é™…ç‰ˆã€æ‰åˆ†é…ä¸€ä¸ªå…è´¹çš„äºŒçº§åŸŸåï¼Œä¸Šæ–‡ä¹Ÿæ¨èä½¿ç”¨ã€Œå›½é™…ç‰ˆã€ï¼Œå› æ­¤é»˜è®¤å·²æœ‰è¯¥åŸŸåï¼šhttps://xxx.avosapps.usã€‚ è·å–å›½é™…ç‰ˆåŸŸåï¼šä¾æ¬¡ç‚¹å‡»ã€Œäº‘å¼•æ“ã€â†’ã€Œè®¾ç½®ã€â†’ã€Œäº‘å¼•æ“åŸŸåã€ï¼Œè®¾ç½®è‡ªå·±çš„ç‹¬ç«‹åŸŸåï¼Œä¾‹å¦‚ï¼šhwame.avosapps.usï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ 2.4.è®¾ç½®åŸŸåç™½åå•å¦‚æœæ²¡æœ‰è®¾ç½®åŸŸåç™½åå•ï¼Œç½‘é¡µå°±æ— æ³•åŠ è½½è¯„è®ºï¼Œæ˜¾ç¤ºæƒé™é”™è¯¯ã€‚æ¯è¡Œä¸€ä¸ªåŸŸåï¼Œå¤šä¸ªåŸŸåæ¢è¡Œåˆ†éš”ã€‚å­åŸŸåéœ€æ¯æ¡åˆ—å‡ºï¼Œä¸æ”¯æŒé€šé…ç¬¦ã€‚åè®®ã€åŸŸåå’Œç«¯å£å·éƒ½éœ€ä¸¥æ ¼ä¸€è‡´ï¼ˆå¦‚æœä½¿ç”¨çš„æ˜¯é»˜è®¤ç«¯å£å·å¯ä»¥çœç•¥ï¼Œä½†åè®®å¤´ä¸€å®šè¦å†™ï¼‰ã€‚ä¾‹å¦‚æˆ‘çš„è®¾ç½®å¦‚å›¾ï¼š 2.5.è®¾ç½®ç¯å¢ƒå˜é‡ä¾æ¬¡ç‚¹å‡»ã€Œäº‘å¼•æ“ã€â†’ã€Œè®¾ç½®ã€â†’ã€Œè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ã€ï¼Œæ·»åŠ ç¯å¢ƒå˜é‡ï¼Œæ­¤æ­¥éª¤éå¸¸é‡è¦ï¼Œè®¾ç½®æ—¶åŠ¡å¿…å¼„æ¸…æ¥šæ¯ä¸€ä¸ªå˜é‡çš„å«ä¹‰ã€‚ä¸‹è¡¨ä»…ä¸ºæœ¬äººæ‰€è®¾ç½®çš„ç¯å¢ƒå˜é‡ï¼ˆæŒ‰å­—æ¯æ’åºï¼‰ï¼Œæ ¹æ®éœ€è¦è‡ªè¡Œå¢å‡ï¼Œå…¶ä»–ç¯å¢ƒå˜é‡å‚è€ƒValineè¯„è®ºä¹‹Valine-adminé…ç½®æ”»ç•¥ã€‚ å˜é‡å å¿…éœ€ è¯´æ˜ ç¤ºä¾‹ ADMIN_URL å¯é€‰ *è¯„è®ºåå°çš„ç®¡ç†åœ°å€ï¼ˆéåšå®¢åœ°å€ï¼‰ https://hwame.avosapps.us/ BLOGGER_EMAIL å¯é€‰ *è¯„è®ºåå°çš„ç®¡ç†å‘˜é‚®ç®±ï¼Œé»˜è®¤ä½¿ç”¨SMTP_USER xxx@qq.com SENDER_NAME å¿…å¡« é‚®ä»¶å¯„ä»¶äººåç§° é´»å¡µ SITE_NAME å¿…å¡« ç½‘ç«™åç§° é´»å¡µçš„åšå®¢ SITE_URL å¿…å¡« ç½‘ç«™åœ°å€ï¼Œæœ€åä¸è¦åŠ / https://hwame.top SMTP_PASS å¿…å¡« *SMTPæˆæƒç  abcdefghijklmnop SMTP_SERVICE å¿…å¡« *é‚®ä»¶æœåŠ¡æä¾›å•† QQ SMTP_USER å¿…å¡« SMTPæœåŠ¡ç”¨æˆ·åï¼Œä¸€èˆ¬ä¸ºé‚®ç®±åœ°å€ xxx@qq.com TEMPLATE_NAME å¿…å¡« *æé†’é‚®ä»¶çš„ä¸»é¢˜ rainbow TO_EMAIL å¯é€‰ åšä¸»é€šçŸ¥æ”¶ä»¶åœ°å€ï¼Œé»˜è®¤ä½¿ç”¨SMTP_USER xxx@qq.com å¸¦*å·å­—æ®µçš„è¯¦ç»†è¯´æ˜ï¼š ADMIN_URLï¼šè¯„è®ºåå°çš„ç®¡ç†åœ°å€ï¼Œå³ä¸Šæ–‡2.3.ç»‘å®šè¯„è®ºç®¡ç†çš„åŸŸåè®¾ç½®çš„åŸŸåã€‚é€šè¿‡è¯¥åå°å¯ä»¥å¯¹å‘é€é‚®ä»¶æé†’å¤±è´¥çš„è¯„è®ºé‡æ–°å‘é€é€šçŸ¥ã€å¯ä»¥æ ‡è®°åƒåœ¾é‚®ä»¶ï¼Œè€Œã€Œç»“æ„åŒ–æ•°æ®ã€ä¸­çš„ã€ŒCommentã€å¯ä»¥ä¿®æ”¹è¯„è®ºå†…å®¹/æ˜µç§°/æ—¶é—´ã€ä¸ºè¯„è®ºæ·»åŠ QQå¤´åƒç­‰ï¼Œä¸¤å¤„éƒ½å¯ä»¥æŸ¥çœ‹é‚®ä»¶æé†’æ˜¯å¦æˆåŠŸã€‚ BLOGGER_EMAILï¼šè¯„è®ºåå°çš„ç®¡ç†å‘˜é‚®ç®±ï¼Œå¦‚æœè®¾ç½®åˆ™ä½œä¸ºåå°ç®¡ç†å‘˜é‚®ç®±ï¼ˆ/sign-upé¡µé¢è®¾ç½®ï¼‰ï¼Œå¦‚æœä¸è®¾ç½®åˆ™é»˜è®¤ä¸ºSMTP_USERã€‚ SMTP_PASSï¼šSMTPæˆæƒç ï¼Œæ³¨æ„ä¸æ˜¯é‚®ç®±çš„ç™»é™†å¯†ç ï¼ŒQQä»¥å¤–çš„è¯·è‡ªè¡ŒæŸ¥è¯¢å¯¹åº”é‚®ä»¶æœåŠ¡å•†çš„è·å–æ–¹å¼ï¼Œä»¥QQé‚®ç®±ä¸ºä¾‹ï¼ˆéœ€è¦è·å–QQé‚®ç®±ç‹¬ç«‹å¯†ç ï¼‰ï¼š ç™»é™†QQé‚®ç®±ï¼Œç‚¹å‡»ã€Œè®¾ç½®ã€â†’ã€Œè´¦æˆ·ã€ï¼Œä¸‹æ»‘è‡³ã€ŒPOP3/IMAP/SMTP/Exchange/CardDAV/CalDAVæœåŠ¡ã€ï¼Œå¼€å¯ã€ŒPOP3/SMTPã€å’Œã€ŒIMAP/SMTPã€æœåŠ¡ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ç‚¹å‡»ä¸Šå›¾ä¸­çš„ã€Œç”Ÿæˆæˆæƒç ã€ï¼Œæ ¹æ®æç¤ºå‘é€æ‰‹æœºçŸ­ä¿¡ï¼Œå®Œæˆåå°†ç”Ÿæˆ16ä½å­—ç¬¦çš„æˆæƒç ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè¯¥æˆæƒç ä»…æ˜¾ç¤ºä¸€æ¬¡ã€‚ å°†æˆæƒç å¡«å…¥ç¯å¢ƒå˜é‡SMTP_PASSå­—æ®µã€‚ SMTP_SERVICEï¼šé‚®ä»¶æœåŠ¡æä¾›å•†ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨QQé‚®ç®±ï¼Œå…¶ä»–å¸¸ç”¨é‚®ç®±ç±»å‹ï¼ˆå¦‚126ï¼Œ163ï¼ŒGmailï¼ŒHotmailï¼ŒOutlook365åŠYahooç­‰ï¼‰æ“ä½œç±»ä¼¼ï¼Œå¯ç”¨é€‰é¡¹å‚è€ƒSupported servicesã€‚ TEMPLATE_NAMEï¼šè¯„è®ºæé†’é‚®ä»¶çš„ä¸»é¢˜æ¨¡æ¿ï¼Œå¯é€‰å€¼æœ‰defaultï¼Œrainbowï¼ˆæ•ˆæœå¦‚å›¾ï¼‰ï¼Œcustom1ï¼Œcustom2ï¼Œç®€æ´é£å¯ç›´æ¥ä½¿ç”¨defaultæˆ–rainbowï¼Œè‹¥ä½¿ç”¨åä¸¤è€…ï¼Œå¯èƒ½è¿˜éœ€è¦è®¾ç½®é™„åŠ ç¯å¢ƒå˜é‡ï¼Œå…·ä½“å‚è€ƒéƒ¨ç½²valine-adminã€‚ 2.6.é‡æ–°éƒ¨ç½²ç¯å¢ƒå˜é‡è®¾ç½®å®Œæˆåéœ€è¦é‡æ–°éƒ¨ç½²å®ä¾‹ï¼Œä½¿å…¶ç”Ÿæ•ˆã€‚æ³¨æ„ï¼šç”±äºæ¯ä¸ªäººçš„éœ€æ±‚ä¸åŒï¼Œé…ç½®æ—¶åŠ¡å¿…å¼„æ¸…æ¥šå„å˜é‡çš„å«ä¹‰ã€‚æ³¨æ„ï¼šæ¯æ¬¡ä¿®æ”¹æˆ–æ·»åŠ ç¯å¢ƒå˜é‡åï¼Œéƒ½éœ€è¦é‡å¯/é‡æ–°éƒ¨ç½²å®ä¾‹ï¼Œå¦åˆ™é…ç½®ä¸ç”Ÿæ•ˆã€‚ 2.7.åˆå§‹åŒ–åå°ç®¡ç†æ³¨æ„ï¼šå¦‚æœä½ æ²¡æœ‰è®¾ç½®åå°åŸŸåï¼ˆå³ä¸Šæ–‡2.3.ç»‘å®šè¯„è®ºç®¡ç†çš„åŸŸåè®¾ç½®çš„åŸŸåï¼‰ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚ åˆå§‹åŒ–è®¾ç½®ç™»é™†ä¿¡æ¯ï¼Œæ‰“å¼€https://domain/sign-upï¼Œå…¶ä¸­domainä¸ºç»‘å®šçš„åå°ç®¡ç†çš„åŸŸåï¼Œä¾‹å¦‚ä½¿ç”¨ã€Œå›½é™…ç‰ˆã€èµ é€çš„åŸŸåhttps://hwame.avosapps.us/ï¼Œé‚£ä¹ˆæˆ‘è®¿é—®çš„åœ°å€å°±æ˜¯ https://hwame.avosapps.us/sign-upã€‚ åå°ç™»é™†è®¾ç½®ç™»é™†ä¿¡æ¯åå°±å¯ä»¥ç”¨ç™»å½•åç™»å½•äº†ï¼Œç™»é™†åå°ç›´æ¥ä½¿ç”¨https://hwame.avosapps.us/å³å¯ï¼Œè‹¥ä½¿ç”¨https://hwame.avosapps.us/sign-upå¯èƒ½ä¼šæœ‰bugã€‚ 2.8.åŸºæœ¬é…ç½®å®Œæˆåˆ°è¿™é‡ŒåŸºæœ¬ä¸Šå®Œæˆäº†valine-adminçš„åŸºæœ¬è®¾ç½®ã€‚ 3.é˜²æ­¢æœåŠ¡å™¨ä¼‘çœ 3.1.åˆ›å»ºå®šæ—¶ä»»åŠ¡ç»è¿‡ä¸Šè¿°è®¾ç½®ï¼ŒåŸºæœ¬ä¸Šèƒ½æ»¡è¶³æˆ‘ä»¬çš„æ—¥å¸¸è¦æ±‚ã€‚ æ­¤éƒ¨åˆ†å‚è€ƒï¼šâ‘ Valineè¯„è®ºç³»ç»Ÿè¯¦è§£ä¹‹é˜²æ­¢æœåŠ¡å™¨ä¼‘çœ â‘¡Valine-adminé…ç½®æ”»ç•¥ä¹‹é˜²æ­¢æœåŠ¡å™¨ä¼‘çœ  ç›®å‰æœ€æ–°ç‰ˆçš„Valine Adminå·²ç»å¯ä»¥å®ç°è‡ªå”¤é†’ï¼Œå³åœ¨ LeanCloud äº‘å¼•æ“ä¸­å®šæ—¶è¯·æ±‚ Web åº”ç”¨åœ°å€é˜²æ­¢ä¼‘çœ ã€‚å¯¹äºå¤œé—´ä¼‘çœ æœŸæ¼å‘çš„é‚®ä»¶é€šçŸ¥ï¼Œè‡ªåŠ¨åœ¨æ¬¡æ—¥æ—©ä¸Šè¡¥å‘ã€‚æ³¨æ„ï¼šåŠ¡å¿…ç¡®ä¿é…ç½®ä¸­è®¾ç½®äº†ADMIN_URLç¯å¢ƒå˜é‡ï¼Œå¹¶éœ€è¦æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªäº‘å‡½æ•°å®šæ—¶ä»»åŠ¡ã€‚ ç›®å‰å®ç°äº†ä¸¤ç§äº‘å‡½æ•°å®šæ—¶ä»»åŠ¡ï¼š(1) è‡ªåŠ¨å”¤é†’ï¼Œå®šæ—¶è®¿é—® Web APP äºŒçº§åŸŸåé˜²æ­¢äº‘å¼•æ“ä¼‘çœ ï¼›(2) æ¯å¤©å®šæ—¶æ£€æŸ¥ 24 å°æ—¶å†…æ¼å‘çš„é‚®ä»¶é€šçŸ¥ã€‚ è¿›å…¥ã€Œäº‘å¼•æ“ã€â†’ã€Œå®šæ—¶ä»»åŠ¡ã€ä¸­ï¼Œåˆ›å»ºå®šæ—¶å™¨ï¼Œåˆ›å»ºä¸¤ä¸ªå®šæ—¶ä»»åŠ¡ã€‚ é€‰æ‹©self-wakeäº‘å‡½æ•°ï¼ŒCronè¡¨è¾¾å¼ä¸º0 0/20 7-23 * * ?ï¼Œè¡¨ç¤ºæ¯å¤©æ—©ä¸Š 7 ç‚¹åˆ°æ™šä¸Š 23:59 ç‚¹æ¯éš” 20 åˆ†é’Ÿè®¿é—®äº‘å¼•æ“ã€‚ç¼–è¾‘åä¼šæœ‰æç¤ºEvery 20 minutes, between 07:00 AM and 11:59 PMï¼Œå¦‚å›¾æ‰€ç¤ºï¼š é€‰æ‹©resend-mailsäº‘å‡½æ•°ï¼ŒCronè¡¨è¾¾å¼ä¸º0 59 7 * * *ï¼Œè¡¨ç¤ºæ¯å¤©æ—©ä¸Š 8 ç‚¹æ£€æŸ¥è¿‡å» 24 å°æ—¶å†…æ¼å‘çš„é€šçŸ¥é‚®ä»¶å¹¶è¡¥å‘ã€‚ç¼–è¾‘åä¼šæœ‰æç¤ºAt 07:59 AMï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è®¾ç½®å®Œæˆåï¼Œå°±æ˜¯å¦‚ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š âœ‰ æ³¨æ„ï¼šæˆ‘ä»¬åœ¨åˆ›å»ºå®šæ—¶ä»»åŠ¡æ—¶çš„æ—¶é—´å’Œæç¤ºæ—¶é—´ï¼ˆå³ä¸‹å›¾ã€Œè¿è¡Œå‘¨æœŸã€ï¼‰éƒ½æ˜¯åŸºäºã€Œé›¶æ—¶åŒºã€ï¼Œè€Œä¸‹å›¾çš„ã€Œä¸‹æ¬¡æ‰§è¡Œæ—¶é—´ã€æ‰æ˜¯åŸºäºæœ¬åœ°æ—¶åŒºã€Œä¸œå…«åŒºã€ã€‚å¯ä»¥çœ‹åˆ°ï¼Œé‚®ä»¶é‡å‘æ£€æŸ¥è®¾ç½®çš„æ˜¯ã€Œæ—©ä¸Š8ç‚¹ã€ä½†æ‰§è¡Œæ—¶é—´æ˜¯ã€Œä¸‹åˆ16ç‚¹ã€ã€‚ 3.2.å›½é™…ç‰ˆæ—¶åŒºé—®é¢˜æŒ‰LeanCloudå®˜æ–¹æ–‡æ¡£ä¹‹CRONè¡¨è¾¾å¼æœ€åå¤‡æ³¨çš„è¯´æ³•ï¼šCron è¡¨è¾¾å¼çš„æ—¶åŒºä¸ºä¸œå…«åŒºï¼ˆå›½å†…ç‰ˆï¼‰ã€UTC é›¶æ—¶åŒºï¼ˆå›½é™…ç‰ˆï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ã€Œå›½é™…ç‰ˆã€è®¾ç½®çš„å®šæ—¶ä»»åŠ¡å’Œå›½å†…æ—¶åŒºä¸åŒ¹é…ï¼Œåº”å‡å»8å°æ—¶ï¼ˆæ—¶åŒºè½¬æ¢å‚è€ƒç™¾åº¦ç™¾ç§‘-ä¸œå…«åŒºï¼‰ã€‚ 3.3.æœåŠ¡å™¨è®¾ç½®è‡ªåŠ¨å”¤é†’äº‘å‡½æ•°å®šæ—¶ä»»åŠ¡æ—¶åŒºå…¶å®æ˜¯å°é—®é¢˜ï¼Œå› ä¸ºã€Œå”¤é†’æœåŠ¡å™¨ã€åŸºæœ¬ä¸Šç”¨ä¸äº†ï¼Œè€Œã€Œé‚®ä»¶é‡å‘ã€ä»»ä½•æ—¶é—´éƒ½å¯ä»¥ã€‚æ‰€ä»¥ä¸Šè¿°å®šæ—¶ä»»åŠ¡çš„Cronè¡¨è¾¾å¼ä¹Ÿå¯ä»¥ä¸éœ€è¦ä¿®æ”¹ï¼Œä¸”éœ€åœæ­¢ã€Œå”¤é†’æœåŠ¡å™¨ã€ï¼Œå¦‚å›¾æ‰€ç¤ºæ˜¯æˆ‘åœæ­¢äº†è‡ªåŠ¨å”¤é†’ä¸”ä¿®æ”¹äº†é‚®ä»¶é‡å‘ï¼š æŸ¥çœ‹æ—¥å¿—å‘ç°å”¤é†’å¤±è´¥ï¼šå› æµæ§åŸå› ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡å”¤é†’ä½“éªŒç‰ˆå®ä¾‹å¤±è´¥ï¼Œå»ºè®®å‡çº§è‡³æ ‡å‡†ç‰ˆäº‘å¼•æ“å®ä¾‹é¿å…ä¼‘çœ ï¼Œå‚è€ƒã€ŠValine-adminé…ç½®æ”»ç•¥ä¹‹é˜²æ­¢æœåŠ¡å™¨ä¼‘çœ ã€‹ã€ã€Šä¼˜é›…è§£å†³LeanCloudæµæ§é—®é¢˜ä¹‹å…¶ä»–è§£å†³æ–¹æ¡ˆï¼ˆæ–¹æ¡ˆäºŒï¼‰ã€‹åŠã€ŠHexo ä¼˜åŒ–â€”-æ”¯æŒé‚®ä»¶é€šçŸ¥çš„è¯„è®ºValineå¢å¼ºç‰ˆä¹‹LeanCloudä¼‘çœ ç­–ç•¥ã€‹ç­‰æ–‡ç« ï¼Œåœ¨æˆ‘è‡ªå·±çš„æœåŠ¡å™¨ä¸Šåˆ©ç”¨crontabåˆ›å»ºäº†å®šæ—¶ä»»åŠ¡ï¼š1234567891011[root@aliyun ~]# crontab -e0 0/20 7-23 * * ? curl https://hwame.avosapps.us~~&quot;/tmp/crontab.OOI2Ka&quot; 1L, 49C writtencrontab: installing new crontab&quot;/tmp/crontab.OOI2Ka&quot;:1: bad hourerrors in crontab file, can&#x27;t install.Do you want to retry the same edit? y*/20 7-23 * * * curl https://hwame.avosapps.us~æ³¨æ„ï¼šæ­¤crontabä¸æ˜¯LeanCloudåå°çš„å®šæ—¶ä»»åŠ¡ï¼Œå‘½ä»¤æœ‰æ‰€åŒºåˆ«ï¼Œå¦‚æœæŒ‰äº‘å‡½æ•°çš„é…ç½®0 0/20 7-23 * * ?åˆ™ä¼šæŠ¥é”™ï¼šerrors in crontab file, can&#39;t installï¼›å› æ­¤æŒ‰èµµä¿Šçš„é…ç½®*/20 7-23 * * * curl https://hwame.avosapps.usï¼Œå…¶ä¸­URLä¸ºè¯„è®ºç³»ç»Ÿåå°ç®¡ç†åœ°å€ï¼ˆç¯å¢ƒå˜é‡ä¸­çš„ADMIN_URLï¼Œä¾‹å¦‚https://hwame.avosapps.usï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 3.4.ç”Ÿäº§ç¯å¢ƒè¿è¡Œæ•ˆæœç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œã€Œé˜²æ­¢æœåŠ¡å™¨ä¼‘çœ ã€åŠã€Œå®šæ—¶æ£€æŸ¥æ¼å‘é‚®ä»¶ã€çš„è¿è¡Œæ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š web1æ˜¯åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨è®¾ç½®çš„crontab curlï¼Œæ¯å¤©æ—©ä¸Š 7 ç‚¹åˆ°æ™šä¸Š 23:59 ç‚¹æ¯éš” 20 åˆ†é’Ÿè®¿é—®äº‘å¼•æ“ï¼› systemæ˜¯LeanCloudçš„å®šæ—¶ä»»åŠ¡äº‘å‡½æ•°resend-mailsï¼Œæ¯å¤©æ—©ä¸Š 8 ç‚¹æ£€æŸ¥æ˜¨æ—¥æ¼å‘çš„é€šçŸ¥é‚®ä»¶å¹¶è¡¥å‘ã€‚ 4.è¯„è®ºç³»ç»Ÿè®¾ç½®å¿…å¡«é¡¹4.1.é—®é¢˜æè¿°ä¸Šæ–‡èŠ±è´¹å¤§é‡ç¯‡å¹…è®¾ç½®äº†ã€Œé‚®ä»¶æé†’ã€åŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœäººå®¶æ²¡æœ‰æ·»åŠ è‡ªå·±çš„é‚®ç®±å‘¢ï¼Ÿé‚£å²‚ä¸æ˜¯æˆ‘è¾›è‹¦å›å¤äº†ï¼Œä¹Ÿæ— æ³•è”ç³»åˆ°å¯¹æ–¹å•Šï¼æ‰€ä»¥éœ€è¦ç»™è¯„è®ºç³»ç»Ÿçš„é‚®ç®±å­—æ®µå¢åŠ å¿…å¡«çš„åŠŸèƒ½ã€‚æ—¢ç„¶æ·»åŠ å¿…å¡«é¡¹è¦æ¶‰åŠåˆ°ä¿®æ”¹æºç ï¼Œå¹²è„†ä¸€æ¬¡æ€§æ”¹å¥½ï¼ŒåŒ…æ‹¬ä¸Šæ–‡1.å‰è¨€æåˆ°çš„æ‹‰å–QQå¤´åƒåŠŸèƒ½ã€‚æ‰€ä»¥é—®é¢˜æ€»å…±æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š è®¾ç½®å¿…å¡«é¡¹requiredFieldsï¼› è‡ªåŠ¨æ‹‰å–QQå¤´åƒenableQQï¼› æ˜µç§°é•¿åº¦å°äº3çš„é—®é¢˜ã€‚ 4.2.æºç åˆ†ææ–‡ä»¶ä½äº./themes/pure/layout/_script/_comment/valine.ejsï¼Œæºç æ–‡ä»¶å†…å®¹è§githubã€‚å¯è§ï¼Œåœ¨verifyå’Œnotifyå·²è¢«å¼ƒç”¨çš„æƒ…å†µä¸‹ï¼Œé™¤äº†å¿…éœ€çš„appIdå’ŒappKeyä»¥å¤–ï¼Œpureä¸»é¢˜å®é™…åªè®¾ç½®äº†metaã€placeholderã€avatarã€pageSizeã€visitorè¿™5ä¸ªè‡ªå®šä¹‰å­—æ®µã€‚ç„¶è€Œï¼ŒValineå®é™…æ˜¯æä¾›äº†è¿™äº›çš„ï¼Œè¯¦è§valineé…ç½®é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥ä»¿ç…§valine.ejsä¸­çš„ä»£ç å¹¶ç»“åˆValineæ”¯æŒçš„é…ç½®é¡¹è¿›è¡Œæ·»åŠ ï¼š å­—ç¬¦ä¸²/true/falseç±»å‹ï¼šç›´æ¥ä»¥theme.comment.valine.FIELDçš„æ–¹å¼è·å–ï¼› åˆ—è¡¨ç±»å‹ï¼šä»¿ç…§metaä»¥ã€Œ,ã€åˆ†å‰²ï¼š1234567var FIELD = &#x27;&lt;%= theme.comment.valine.FIELD %&gt;&#x27;;FIELD = FIELD.split(&#x27;,&#x27;);new Valine(&#123; ... FIELD: FIELD,&#125;); 4.3.ä¿®æ”¹æºç åŠä¸»é¢˜é…ç½®æ–‡ä»¶Valineæä¾›äº†ä¼—å¤šé…ç½®é¡¹ï¼Œä½†å¹¶ä¸éƒ½æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ï¼Œé™¤å»ä¸Šæ–‡4.2.æºç åˆ†ææåˆ°çš„å·²é…ç½®çš„é¡¹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é…ç½®ï¼ˆæŒ‰./themes/pure/_config.ymlæ–‡ä»¶çš„é…ç½®é¡ºåºï¼‰ï¼š enableQQï¼šenableQQ: &#39;&lt;%= theme.comment.valine.enableQQ %&gt;&#39;, recordIPï¼šrecordIP: &#39;&lt;%= theme.comment.valine.recordIP %&gt;&#39;, requiredFieldsï¼š12345var requiredFields = &#x27;&lt;%= theme.comment.valine.requiredFields %&gt;&#x27;;requiredFields = requiredFields.split(&#x27;,&#x27;);new Valine(&#123; requiredFields: requiredFields,&#125;); ä¸Šè¿°ä¸‰é¡¹å·²åœ¨å‰æ–‡Hexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®ä¹‹è¯„è®ºç³»ç»Ÿä¸­é…ç½®ã€‚å¦å¤–å¯èƒ½ä¼šéœ€è¦çš„å°±æ˜¯emojiè¡¨æƒ…äº†ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸éœ€è¦è¿™äº›èŠ±é‡Œèƒ¡å“¨çš„ï¼Œå¯å‚è€ƒvalineè‡ªå®šä¹‰è¡¨æƒ…è‡ªè¡Œé…ç½®ï¼ˆæ³¨æ„ï¼šemojiCDNå’ŒemojiMapséœ€è¦åŒæ—¶è®¾ç½®ä¸”éœ€å¯¹åº”ï¼‰ã€‚ 4.4.æ˜µç§°é•¿åº¦çš„é—®é¢˜æœ€å¼€å§‹æ˜¯å¸Œæœ›è®¾ç½®å¿…å¡«é¡¹ä¸ºã€Œæ˜µç§°ã€å’Œã€Œé‚®ç®±ã€ä¸¤é¡¹ï¼Œä¸”ç›´æ¥å†™åœ¨ejsæ–‡ä»¶é‡Œï¼Œæµ‹è¯•æ—¶å‘ç°æ˜µç§°é•¿åº¦å¿…é¡»å¤§äº3ï¼ŒæŸ¥çœ‹å¼•å…¥çš„jsæºæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼ˆå¯Ctrlï¼‹FæŸ¥æ‰¾å®šä½ï¼‰ï¼š12if(e.config.requiredFields.indexOf(&quot;nick&quot;) &gt; -1 &amp;&amp; E.nick.length &lt; 3) return v.nick[0].focus(), void e.$el.find(&quot;.status-bar&quot;).text(&quot;&quot; + e.i18n.t(&quot;nickFail&quot;)).empty(3e3);é€»è¾‘å¾ˆç®€å•ï¼Œç›´æ¥å°†åˆ¤æ–­æ¡ä»¶ä¸­çš„æ˜µç§°é•¿åº¦æ”¹ä¸ºE.nick.length &lt; 1å³å¯ï¼Œäº¦å³æ˜µç§°éç©ºã€‚ä½†æ˜¯å°±è¿˜éœ€è¦å°†è¯¥jsæ–‡ä»¶æ”¾åˆ°æœ¬åœ°ï¼Œç„¶åå¼•å…¥ã€‚æ‰€ä»¥æˆ‘è¿™é‡Œå¦¥åäº†ä¸€ä¸‹ï¼Œåªè®©å¿…å¡«é¡¹ä¸ºã€Œé‚®ç®±ã€ï¼Œæ˜µç§°é»˜è®¤æ˜¯ã€ŒAnonymousã€ã€‚ä¸»é¢˜é…ç½®æ–‡ä»¶çš„é…ç½®å‚è€ƒå‰æ–‡Hexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®ä¹‹è¯„è®ºç³»ç»Ÿã€‚ 4.5.ä¿®æ”¹åå†…å®¹ä¿®æ”¹åå®Œæ•´å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829&lt;% if (typeof(script) !== &#x27;undefined&#x27; &amp;&amp; script) &#123; %&gt; &lt;script src=&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;//cdn.jsdelivr.net/npm/valine&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; var GUEST = [&#x27;nick&#x27;, &#x27;mail&#x27;, &#x27;link&#x27;]; var meta = &#x27;&lt;%= theme.comment.valine.meta %&gt;&#x27;; meta = meta.split(&#x27;,&#x27;).filter(function(item) &#123; return GUEST.indexOf(item) &gt; -1; &#125;); var requiredFields = &#x27;&lt;%= theme.comment.valine.requiredFields %&gt;&#x27;; requiredFields = requiredFields.split(&#x27;,&#x27;); new Valine(&#123; el: &#x27;#vcomments&#x27;, appId: &#x27;&lt;%= theme.comment.valine.appid %&gt;&#x27;, appKey: &#x27;&lt;%= theme.comment.valine.appkey %&gt;&#x27;, verify: &lt;%= theme.comment.valine.verify %&gt;, notify: &lt;%= theme.comment.valine.notify %&gt;, placeholder: &#x27;&lt;%= theme.comment.valine.placeholder %&gt;&#x27;, avatar: &#x27;&lt;%= theme.comment.valine.avatar %&gt;&#x27;, meta: meta, pageSize: &#x27;&lt;%= theme.comment.valine.pageSize %&gt;&#x27; || 10, enableQQ: &#x27;&lt;%= theme.comment.valine.enableQQ %&gt;&#x27;, recordIP: &#x27;&lt;%= theme.comment.valine.recordIP %&gt;&#x27;, requiredFields: requiredFields, visitor: &lt;%= theme.comment.valine.visitor %&gt; &#125;); &lt;/script&gt;&lt;% &#125; %&gt; 5.æ·»åŠ èº«ä»½æ ‡ç­¾5.1.å‰è¨€ æ­¤éƒ¨åˆ†ä¸»è¦å‚è€ƒä»¥ä¸‹æ–‡ç« ï¼š ã€HCLonlyã€‘Valineæ·»åŠ æ ‡ç­¾åŠå›¾æ ‡ ã€HCLonlyã€‘Hexoåšå®¢ç¾åŒ–ä¹‹valineè¯„è®ºæ·»åŠ åšä¸»ç­‰æ ‡ç­¾(ä»…Butterflyä¸»é¢˜)) ã€åˆè¾°ã®æ½æœˆã€‘Valineæ·»åŠ æ ‡ç­¾åŠå›¾æ ‡ è¯´æ˜ï¼šç”±äºç½‘ä¸Šå…³äºã€Œæ·»åŠ åšä¸»æ ‡ç­¾ã€éƒ½æ˜¯åŸºäºbutterflyä¸»é¢˜çš„ï¼Œè€Œæˆ‘ä½¿ç”¨çš„æ˜¯pureä¸»é¢˜ï¼Œå› æ­¤é…ç½®æ–¹é¢æœ‰è¾ƒå¤§å·®åˆ«ï¼Œå¹¶ä¸”æ— æ³•æ˜¾ç¤ºæ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨å›¾æ ‡ã€‚ 5.2.ä¿®æ”¹å’Œé…ç½®æ ·å¼æ–‡ä»¶ä¸º./themes/pure/layout/_script/_comment/valine.ejsï¼Œä¸»é¢˜é…ç½®æ–‡ä»¶ä¸º./themes/pure/_config.ymlã€‚ pureä¸»é¢˜å…³äºvalineåªæœ‰ä¸Šé¢ä¸€ä¸ªæ–‡ä»¶ï¼Œjsæ–‡ä»¶æ˜¯ä»¥&lt;script src=&quot;//xxx.js&quot;&gt;&lt;/script&gt;çš„å½¢å¼å¼•å…¥çš„ï¼ŒåŸæœ¬å·²å¼•å…¥ä¸¤ä¸ªjsæ–‡ä»¶ï¼Œä¸ºäº†èƒ½æ˜¾ç¤ºèº«ä»½æ ‡ç­¾è¿˜éœ€å¼•å…¥https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.jsï¼š123&lt;script src=&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;//cdn.jsdelivr.net/npm/valine&quot;&gt;&lt;/script&gt;&lt;script src=&quot;//cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js&quot;&gt;&lt;/script&gt;ç”±äºButterflyä¸»é¢˜ä½¿ç”¨.pugæ ¼å¼çš„æ ·å¼æ–‡ä»¶ï¼Œè€ŒPureä¸»é¢˜ä½¿ç”¨.ejsæ ¼å¼çš„æ ·å¼æ–‡ä»¶ï¼Œä¸¤è€…ä»ä¸»é¢˜é…ç½®æ–‡ä»¶è·å–é…ç½®å‚æ•°çš„æ–¹å¼ä¸ä¸€è‡´ï¼š1234567// Butterflyä¸»é¢˜valine.pugwindow.valine = new Valine(&#123; FIELD: &#x27;#&#123;theme.valine.FIELD&#125;&#x27;,// Pureä¸»é¢˜valine.ejsnew Valine(&#123; FIELD: &#x27;&lt;%= theme.comment.valine.FIELD %&gt;&#x27;,å› æ­¤ï¼Œæˆ‘ä»¬å°†è¿™éƒ¨åˆ†éœ€è¦å¢åŠ çš„å­—æ®µä¸é€šè¿‡.ymlæ–‡ä»¶è€Œæ˜¯ç›´æ¥å†™å…¥.ejsæ–‡ä»¶ä¸­ã€‚ æ–°å¼•å…¥çš„jsæ–‡ä»¶ä¸åŸç‰ˆç›¸æ¯”ï¼š æ·»åŠ åšä¸»ï¼Œå°ä¼™ä¼´ï¼Œè®¿å®¢æ ‡ç­¾ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ï¼› æ·»åŠ æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿå›¾æ ‡ï¼Œéœ€fontawesomeV5æ”¯æŒï¼› é‚®ç®±æ£€æµ‹æ›´ä¸¥æ ¼ï¼› å¢å¼ºQQé‚®ç®±è¯†åˆ«ï¼ˆåŸç‰ˆåªèƒ½é€šè¿‡æ˜µç§°æ è¾“å…¥QQå·è¯†åˆ«ï¼‰ï¼› meta placeholderå¯è‡ªå®šä¹‰ã€‚ æ³¨æ„ï¼šç”±äºæ­¤å¤„æœ‰ä¸‰ä¸ªjsæ–‡ä»¶å…±å­˜ï¼Œå‚æ•°é»˜è®¤å€¼å¯èƒ½ä¸å‚è€ƒæ–‡ç« é‡Œçš„ä¸ä¸€è‡´ï¼Œè¿™é‡Œä»…é’ˆå¯¹æˆ‘ä¿®æ”¹çš„Pureä¸»é¢˜ã€‚å¯æ·»åŠ çš„å‚æ•°ï¼š å‚æ•° ç±»å‹ è¯´æ˜ é»˜è®¤å€¼ master List/Str åŠ å¯†çš„åšä¸»é‚®ç®± [] friends List åŠ å¯†çš„å°ä¼™ä¼´é‚®ç®± [] tagMeta List èº«ä»½æ ‡ç­¾ [&quot;åšä¸»&quot;,&quot;å°ä¼™ä¼´&quot;,&quot;è®¿å®¢&quot;] metaPlaceholder Dict è‡ªå®šä¹‰å ä½ç¬¦ &#123;&quot;nick&quot;:&quot;æ˜µç§°/QQå·(å¿…å¡«)&quot;,&quot;mail&quot;:&quot;é‚®ç®±(å¿…å¡«)&quot;,&quot;link&quot;:&quot;ç½‘å€(https://)&quot;&#125; verify Bool è¯„è®ºæ˜¯å¦éœ€è¦éªŒè¯ false å‚æ•°è¿›ä¸€æ­¥è¯´æ˜åŠç¤ºä¾‹å‚è€ƒï¼š masterï¼šmd5åŠ å¯†åçš„åšä¸»é‚®ç®±ï¼Œ32ä½é•¿åº¦çš„å­—ç¬¦ï¼Œé‚®ç®±åŠ å¯†å¯ä»¥ç‚¹å‡»MD5åœ¨çº¿åŠ å¯†ã€‚ç¤ºä¾‹ï¼š[&#39;f86269b0b1850cd62ca22b218aea1780&#39;]æˆ–&#39;f86269b0b1850cd62ca22b218aea1780&#39;ã€‚ friendsï¼šmd5åŠ å¯†åçš„å°ä¼™ä¼´é‚®ç®±ï¼Œ32ä½é•¿åº¦çš„å­—ç¬¦ã€‚ç¤ºä¾‹ï¼š[&#39;1725648a3566b8841f19423519e0a36e&#39;, &#39;87b6f0e96e63727d889bb3653fb5867c&#39;]ã€‚ tagMetaï¼šæ˜¾ç¤ºçš„èº«ä»½æ ‡ç­¾ï¼Œè‡ªå®šä¹‰åç§°æ—¶éœ€è¦ä¿è¯æ•°ç»„é¡ºåºå¯¹åº”ï¼Œé¡ºåºåŠé¢œè‰²ä¾æ¬¡ä¸ºã€Œåšä¸»ã€ã€ã€Œå°ä¼™ä¼´ã€å’Œã€Œè®¿å®¢ã€ã€‚ç¤ºä¾‹ï¼š[&#39;é´»å¡µ&#39;, &#39;èœœæŸš&#39;, &#39;è®¿å®¢&#39;]ã€‚ metaPlaceholderï¼šåŸç‰ˆé»˜è®¤å€¼ä¸º&#123;&quot;nick&quot;:&quot;æ˜µç§°&quot;,&quot;mail&quot;:&quot;é‚®ç®±&quot;,&quot;link&quot;:&quot;ç½‘å€(http://)&quot;&#125;å¹¶ä¸”ä¸æ”¯æŒè‡ªå®šä¹‰ï¼Œæ–°å¼•å…¥çš„jsæ–‡ä»¶é»˜è®¤å€¼å¦‚ä¸Šè¡¨ä¸”æ”¯æŒä¿®æ”¹ã€‚ç¤ºä¾‹ï¼š&#123;&quot;nick&quot;:&quot;æ˜µç§°/QQå·&quot;,&quot;mail&quot;:&quot;é‚®ç®±(å¿…å¡«)&quot;,&quot;link&quot;:&quot;ä¸ªäººä¸»é¡µ&quot;&#125;ã€‚ verifyï¼šæ­¤é€‰é¡¹åœ¨å®˜æ–¹æ–‡æ¡£Valineé…ç½®é¡¹ä¹‹verifyä¸­å·²åºŸå¼ƒï¼Œå¹¶ä¸”ç”¨å¤„ä¸å¤§ï¼Œå› æ­¤ä¸äºˆé…ç½®ã€‚ é…ç½®å®Œæˆåçš„valine.ejsæ–‡ä»¶åªéœ€è¦åœ¨ä¸Šæ–‡4.5èŠ‚è¯„è®ºç³»ç»Ÿè®¾ç½®å¿…å¡«é¡¹ä¹‹ä¿®æ”¹åå†…å®¹çš„åŸºç¡€ä¸Šæ·»åŠ jsåº”ç”¨åŠå‚æ•°ï¼š12345678&lt;script src=&quot;//cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js&quot;&gt;&lt;/script&gt;new Valine(&#123; master: &#x27;f86269b0b1850cd62ca22b218aea1780&#x27;, friends: [&#x27;1725648a3566b8841f19423519e0a36e&#x27;, &#x27;87b6f0e96e63727d889bb3653fb5867c&#x27;], tagMeta: [&#x27;é´»å¡µ&#x27;, &#x27;èœœæŸš&#x27;, &#x27;è®¿å®¢&#x27;], metaPlaceholder: &#123;&quot;nick&quot;:&quot;æ˜µç§°/QQå·&quot;,&quot;mail&quot;:&quot;é‚®ç®±(å¿…å¡«)&quot;,&quot;link&quot;:&quot;ä¸ªäººä¸»é¡µ&quot;&#125; &#125;); 5.3.å…³äºæ˜µç§°é•¿åº¦çš„è¯´æ˜æ­£å¦‚ä¸Šæ–‡æåˆ°çš„ï¼š åŸç‰ˆè·å–QQå¤´åƒæ˜¯éœ€è¦åœ¨æ˜µç§°æ è¾“å…¥QQå·ï¼Œç„¶åç”ŸæˆQQé‚®ç®±ï¼Œä»¥æ­¤åŒ¹é…å¤´åƒå¹¶å°†è¾“å…¥çš„QQå·è½¬æ¢ä¸ºQQæ˜µç§°ã€‚å¦‚æœå†ä¿®æ”¹äº†æ˜µç§°ï¼Œæ˜¯ä¸ä¼šåŒ¹é…åˆ°æ­£ç¡®çš„QQå¤´åƒçš„ã€‚æ–°ç‰ˆå¢å¼ºäº†QQé‚®ç®±è¯†åˆ«ï¼ŒQQå¤´åƒåªæ ¹æ®é‚®ç®±åŒ¹é…ï¼Œå³ä½¿ä¿®æ”¹äº†æ˜µç§°ä¹Ÿèƒ½æ­£ç¡®åŒ¹é…å¤´åƒã€‚ Butterflyä¸»é¢˜è®¾ç½®çš„æ˜¯ã€Œæ˜µç§°ã€å¿…å¡«ï¼Œè¿™ä¼šå¯¼è‡´å…¶é•¿åº¦å¿…é¡»å¤§äºç­‰äº3ï¼Œè™½ç„¶ç°åœ¨ä¿®æ”¹æ˜µç§°é•¿åº¦ä¹Ÿä¸ä¼šä¸¢å¤±å¤´åƒï¼Œä½†æˆ‘ä»¬æ˜¯æœ‰ä¸‰ç§jså…±å­˜çš„ï¼è€Œä¸”ä¸Šæ–‡ä¹Ÿå–æ¶ˆäº†ã€Œæ˜µç§°ã€å¿…å¡«çš„é™åˆ¶ï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜ä¸éœ€è¦è€ƒè™‘ã€‚ è¯„è®ºæµ‹è¯•å¦‚ä¸‹ï¼Œæ”¯æŒåŒ¿åå’Œä»»æ„é•¿åº¦ï¼Œç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼ˆå› ä¸ºæ­¤é‚®ç®±ä¸æ˜¯QQé‚®ç®±ï¼Œæ‰€ä»¥æ˜¯ç³»ç»Ÿå¤´åƒï¼‰ï¼š 5.4.fontawesomeV5æ”¯æŒButterflyä¸»é¢˜å¤©ç„¶æ”¯æŒfontawesomeV5è€ŒPureä¸»é¢˜ä¸æ”¯æŒï¼Œå› æ­¤æ— æ³•æ˜¾ç¤ºã€Œæµè§ˆå™¨ã€å’Œã€Œæ“ä½œç³»ç»Ÿã€çš„å›¾æ ‡ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å›¾æ ‡æ˜¯å¦æ˜¾ç¤ºå¹¶æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œå› æ­¤æ˜¯å¦å¯¹Pureä¸»é¢˜æ·»åŠ fontawesomeV5æ”¯æŒéƒ½æ— æ‰€è°“ã€‚å¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹å†…å®¹è¿›è¡Œé…ç½®ï¼š Melodyä¸»é¢˜é…ç½®ä¹‹ç¤¾äº¤å›¾æ ‡ï¼Œä»‹ç»äº†font-awesomeç›¸å…³çŸ¥è¯†å’ŒHexo-theme-melodyä¸»é¢˜çš„å›¾æ ‡é…ç½®ï¼Œå¯ä»¥å‚è€ƒã€‚ fontawesome-free CDN Filesï¼Œè¿™æ˜¯è§£å†³åŠæ³•éœ€è¦ç”¨åˆ°çš„cssé“¾æ¥ï¼Œæ„Ÿè°¢HCLonelyå¤§ä½¬çš„æŒ‡ç‚¹ï¼Œæ‰ä½¿å¾—Pureä¸»é¢˜å®Œç¾æ”¯æŒã€‚ è§£å†³åŠæ³•ï¼šåœ¨æ ·å¼æ–‡ä»¶./themes/pure/layout/_script/_comment/valine.ejsä¸­å¼•å…¥å¤–éƒ¨CSSæ ·å¼å³å¯ï¼Œall.cssæˆ–all.min.cssçš†å¯ï¼š1234&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css&quot; /&gt;PS: æœ€å¼€å§‹æŠŠCSSå½“åšjså¼•å…¥äº†ï¼Œç»“æœæŸ¥é”™åŠå¤©ï¼Œåƒè¿™ç§ï¼š&lt;script src=&quot;//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css&quot;&gt;&lt;/script&gt;ä½†æ˜¯ä»ç„¶æ— æ³•è¯†åˆ«Mac OSã€QQæµè§ˆå™¨ã€å¤¸å…‹æµè§ˆå™¨ã€å¾®ä¿¡ç­‰ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯font-awesomeè‡ªèº«çš„é—®é¢˜ã€‚ ä¿®æ”¹å®Œåçš„æ•ˆæœè§è¯„è®ºåŒºã€‚ 6.ç¾åŒ–è¯„è®ºåŒºæ ·å¼æ­¤éƒ¨åˆ†å†…å®¹å‚è€ƒmoyuçš„æ–‡ç« ä¸ºåšå®¢æ·»åŠ ä¸€äº›å°åŠŸèƒ½ä»¥åŠç¾åŒ–ä¹‹ç¾åŒ–åŸºäºvalineçš„è¯„è®ºç³»ç»Ÿã€‚ ä¿®æ”¹./themes/pure/source/css/style.cssï¼Œå¯ä»¥æ·»åŠ å¦‚ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ï¼š æ·»åŠ è¯„è®ºæ¡†èƒŒæ™¯ï¼Œç¼–è¾‘è¯„è®ºæ—¶è‡ªåŠ¨éšè—ï¼› è¯„è®ºåŠå¯¹åº”çš„å›å¤é‡‡ç”¨äº†å¡ç‰‡å¼è®¾è®¡ï¼Œé¼ æ ‡ç»è¿‡æ—¶çš„é˜´å½±ï¼› é¼ æ ‡æ‚¬åœäºå¤´åƒæ—¶ï¼Œæ·»åŠ å¤´åƒæ—‹è½¬ã€‚ å°†éœ€è¦çš„éƒ¨åˆ†ç›´æ¥åœ¨æ–‡ä»¶æœ«å°¾åŠ ä¸Šï¼š1234567891011121314151617181920212223242526272829303132333435363738394041/* è¯„è®ºæ¡†èƒŒæ™¯åŠéšè— */#veditor &#123; background-image: url(https://cdn.jsdelivr.net/gh/drew233/cdn/20200409110727.webp); background-size: contain; background-repeat: no-repeat; background-position: right; background-color: rgba(255, 255, 255, 0); resize: vertical;&#125;#veditor:focus&#123; background-position-y: 200px; transition: all 0.2s ease-in-out 0s;&#125;/* è¯„è®ºåŠå›å¤æ·»åŠ è¾¹æ¡† */#vcomments .vcards .vcard &#123; padding: 15px 20px 0 20px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 0 4px 1px rgba(0, 0, 0, .12); transition: all .3s&#125;#vcomments .vcards .vcard:hover &#123; box-shadow: 0 0 8px 3px rgba(0, 0, 0, .12)&#125;#vcomments .vcards .vcard .vh .vcard &#123; border: none; box-shadow: none;&#125;/* è¯„è®ºå¤´åƒæ—‹è½¬ */img.vimg &#123; transition: all 1s&#125;img.vimg:hover &#123; transform: rotate(360deg); -webkit-transform: rotate(360deg); -moz-transform: rotate(360deg); -o-transform: rotate(360deg); -ms-transform: rotate(360deg);&#125;æœ¬ç«™é‡‡ç”¨äº†åä¸¤é¡¹ï¼Œæ•ˆæœè§è¯„è®ºåŒºã€‚","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/tags/Hexo/"}]},{"title":"Hexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®","slug":"hello-hexo-configuration","date":"2020-05-20T03:11:11.000Z","updated":"2020-05-22T00:23:15.000Z","comments":true,"path":"20200520/hello-hexo-configuration.html","link":"","permalink":"https://hwame.top/20200520/hello-hexo-configuration.html","excerpt":"æ‘˜è¦ï¼šåšå®¢æ­å»ºå®Œæˆåï¼Œå¯¹å…¶è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ï¼Œç”±äºpureä¸»é¢˜æ•™ç¨‹åå°‘ä¸”æ–‡æ¡£è¿‡äºç®€æ´ï¼Œå› æ­¤è¯¦ç»†è®°å½•ä¸‹æ¥ã€‚","text":"æ‘˜è¦ï¼šåšå®¢æ­å»ºå®Œæˆåï¼Œå¯¹å…¶è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ï¼Œç”±äºpureä¸»é¢˜æ•™ç¨‹åå°‘ä¸”æ–‡æ¡£è¿‡äºç®€æ´ï¼Œå› æ­¤è¯¦ç»†è®°å½•ä¸‹æ¥ã€‚ Hexoåšå®¢æ­å»ºåšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²ï¼Œç¯å¢ƒæ­å»ºå¹¶éƒ¨ç½²è‡³Githubã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®ï¼Œé’ˆå¯¹pureä¸»é¢˜è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(3)â€”â€”ä¼˜åŒ–è¯„è®ºç³»ç»Ÿï¼Œä¸»è¦å¯¹Valineè¯„è®ºç³»ç»Ÿè¿›è¡Œä¼˜åŒ–ã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ï¼Œä¿®å¤äº†pureä¸»é¢˜çš„ç³»åˆ—å°bugã€‚æ–‡ç« ä½œè€…ï¼šé´»å¡µ ä¸€ã€å‰è¨€1.èƒŒæ™¯æœ¬åšå®¢ä½¿ç”¨çš„hexo-pureä¸»é¢˜â€”â€”hexo-theme-pureï¼Œç”±äºè¯¥ä¸»é¢˜è¾ƒä¸ºå°ä¼—ï¼Œä½¿ç”¨äººæ•°ä¸å¤šï¼Œéš¾ä»¥æ‰¾åˆ°é è°±çš„å‚è€ƒæ–‡ç« ï¼Œä¸”ä¸è®ºæ˜¯ä¸­æ–‡æ–‡æ¡£ã€è‹±æ–‡æ–‡æ¡£ï¼Œè¿˜æ˜¯Hexoåšå®¢ä¸»é¢˜pureä½¿ç”¨è¯´æ˜ï¼Œéƒ½ä¸å¤Ÿè¯¦ç»†ï¼Œå®é™…åŠ¨æ‰‹è¿‡ç¨‹ä¸­ä»æœ‰è®¸å¤šé—®é¢˜ã€‚å› æ­¤ï¼Œå°†è¯¥ä¸»é¢˜çš„é…ç½®è¿‡ç¨‹è¯¦ç»†åœ°è®°å½•ä¸‹æ¥ã€‚è¯´æ˜ï¼šä¸»é¢˜é…ç½®å¤§éƒ¨åˆ†ä»ç„¶æ˜¯å‚è€ƒä¸Šè¿°æ–‡æ¡£ã€‚ 2.é…ç½®è¯´æ˜åœ¨ Hexo ä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶åç§°éƒ½æ˜¯ _config.ymlã€‚ å…¶ä¸­ï¼Œä¸€ä»½ä½äºç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä¸»è¦åŒ…å« Hexo æœ¬èº«çš„é…ç½®ï¼›å¦ä¸€ä»½ä½äºä¸»é¢˜ç›®å½•ä¸‹ï¼Œè¿™ä»½é…ç½®ç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œä¸»è¦ç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³çš„é€‰é¡¹ã€‚ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œåœ¨ä»¥ä¸‹è¯´æ˜ä¸­ï¼Œå°†å‰è€…ç§°ä¸ºç«™ç‚¹é…ç½®æ–‡ä»¶ï¼ˆ./_config.ymlï¼‰ï¼Œ åè€…ç§°ä¸ºä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆ./themes/pure/_config.ymlï¼‰ã€‚ äºŒã€å®‰è£…å¯ç”¨ä¸»é¢˜é¦–å…ˆåœ¨åšå®¢æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š123git clone https://github.com/cofess/hexo-theme-pure.git themes/purecd ./themes/puregit pull ç„¶åæ‰“å¼€ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°themeå­—æ®µï¼Œå°†å…¶å€¼æ›´æ”¹ä¸ºpureå³å¯ã€‚åˆ°æ­¤ï¼Œä¸»é¢˜å®‰è£…å®Œæˆã€‚ç„¶åå¯åŠ¨HexoæœåŠ¡éªŒè¯ä¸»é¢˜æ˜¯å¦æ­£ç¡®å¯ç”¨ã€‚1hexo s ä¸‰ã€ä¸»é¢˜é…ç½®1.è®¾ç½®è¯­è¨€æ‰“å¼€ç«™ç‚¹é…ç½®æ–‡ä»¶, å°†languageè®¾ç½®æˆä½ æ‰€éœ€è¦çš„è¯­è¨€ã€‚å»ºè®®æ˜ç¡®è®¾ç½®ä½ æ‰€éœ€è¦çš„è¯­è¨€,å¯é€‰å€¼å¯¹åº”themes\\pure\\languagesç›®å½•ä¸‹è¯­è¨€æ–‡ä»¶ï¼Œç®€ä½“ä¸­æ–‡é…ç½®å¦‚ä¸‹ï¼š1language: zh-CN 2.å¯¼èˆªèœå•menuå’Œmenu_iconsé»˜è®¤å³å¯ï¼Œå…¶ä¸­menuä¸ºé¡µé¢å·¦ä¾§å¯¼èˆªèœå•ï¼Œmenu_iconsä¸ºå¯¼èˆªèœå•å›¾æ ‡ï¼Œè‹¥éœ€æ›´æ”¹ï¼Œå‚è€ƒè¿™é‡Œã€‚rssè®¢é˜…ç”¨ä¸ä¸Šç›´æ¥è®¾ç½®falseå³å¯~ 3.ç«™ç‚¹ä¿¡æ¯æ­¤éƒ¨åˆ†åªéœ€è¦å…³æ³¨ç½‘ç«™logoå¤´åƒfaviconçš„å›¾ç‰‡è·¯å¾„ï¼Œå°†éœ€è¦ä½¿ç”¨çš„logoå›¾ç‰‡æ”¾åœ¨./themes/pure/source/favicon.pngï¼Œç„¶åè®¾ç½®ä¸ºfavicon: /favicon.pngå³å¯ã€‚ç«™ç‚¹å…¬å‘Šå¯ç”¨HTMLæ ¼å¼ï¼Œä¾‹å¦‚&lt;br&gt;æ¢è¡Œã€&lt;a href=&quot;xxx&quot; styly=&quot;xxx&quot;&gt;æ ‡ç­¾ç­‰è¿›è¡Œé…ç½®ã€‚ 4.ä¸»é¢˜ä¸ªæ€§é…ç½® configï¼šæ­¤éƒ¨åˆ†å¯¹ç…§æ³¨é‡Šé…ç½®å³å¯ã€‚ paginationï¼šåˆ†é¡µè®¾ç½®ï¼Œé»˜è®¤å³å¯ã€‚ sidebarï¼šå³ä¾§ï¼Œé»˜è®¤å³å¯ã€‚ widgetsï¼šå³ä¾§è¾¹æ å°éƒ¨ä»¶ï¼Œæ ¹æ®éœ€è¦å±•ç¤ºï¼Œä¸éœ€è¦æ³¨é‡Šæ‰å³å¯ã€‚ index_widgetsï¼šé»˜è®¤æ³¨é‡Šæ‰ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œå–æ¶ˆæ³¨é‡Šä¹Ÿæ²¡ååº”ã€‚ fancyboxï¼šå®ç°ç‚¹å‡»å›¾ç‰‡æ”¾å¤§çš„éƒ¨ä»¶ï¼Œé»˜è®¤å…³é—­ï¼Œæ‰“å¼€åä¼šå¯¼è‡´å‹é“¾æ‰“ä¸å¼€ï¼ˆè§£å†³åŠæ³•å‚è€ƒåæ–‡Hexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ä¹‹å¦‚ä½•å®ç°ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ï¼‰ã€‚ searchï¼šåˆ†ä¸ºç«™å†…æœç´¢insightå’Œç™¾åº¦æœç´¢baiduï¼Œä¸¤è€…è‡³å¤šå¼€å¯ä¸€ä¸ªã€‚ç«™å†…æœç´¢éœ€è¦å…ˆå®‰è£…hexo-generator-json-contentæ’ä»¶ï¼Œç™¾åº¦æœç´¢åˆ™éœ€è¦å…ˆè¢«ç™¾åº¦æ”¶å½•ã€‚ donateï¼šæ‰“èµåŠŸèƒ½åªéœ€è¦å°†./themes/pure/source/images/donate/xxx.jpgæ›¿æ¢ä¸ºè‡ªå·±çš„ã€‚ shareï¼š*siteså±æ€§å€¼ä¸ºè‹±æ–‡é€—å·åˆ†éš”ä¸”æ— ç©ºæ ¼ã€‚ githubï¼šå¡«å†™Githubç”¨æˆ·åï¼Œä»¥æ­£ç¡®è·å–ä»“åº“ä¿¡æ¯åŠGithubä¸»é¡µã€‚ 5.è¯„è®ºç³»ç»Ÿåšå®¢é‡‡ç”¨Valineè¯„è®ºç³»ç»Ÿï¼Œæ­¤éƒ¨åˆ†é…ç½®è¾ƒä¸ºç¹çï¼Œæ­¤å¤„é…ç½®ä»…é’ˆå¯¹ä¸»é¢˜é…ç½®æ–‡ä»¶çš„é…ç½®é¡¹ï¼Œè¯¦ç»†é…ç½®åŠæºç ä¿®æ”¹åˆ†å¸ƒè¯¦è§åæ–‡Hexoåšå®¢æ­å»º(3)â€”â€”ä¼˜åŒ–è¯„è®ºç³»ç»Ÿã€‚ä»¥ä¸‹é…ç½®ä¸­çš„enableQQå’ŒrequiredFieldsè®¾ç½®äº†ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºè¯„è®ºæ ·å¼æ–‡ä»¶./themes/pure/layout/_script/_comment/valine.jså¹¶æ²¡æœ‰åŒ…å«è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹æºç ã€‚ç›¸å…³è¯´æ˜ï¼š valineï¼šéœ€è¦å…ˆå°†typeè®¾ç½®ä¸ºvalineï¼Œè¡¨ç¤ºå¯ç”¨Valineè¯„è®ºç³»ç»Ÿ appidå’Œappkeyï¼šleancloudåº”ç”¨çš„ä¸“å±appidå’Œappkeyï¼Œleancloudåº”ç”¨å¦‚å›¾ï¼š notifyå’Œverifyï¼šè¯¥é€‰é¡¹å·²è¢«å¼ƒç”¨ placeholderï¼šè¯„è®ºæ¡†å ä½ç¬¦ï¼Œå¯è‡ªå®šä¹‰ï¼Œæ¢è¡Œç¬¦ä¸º\\n avatarï¼šè¯„è®ºå¤´åƒï¼Œå‚è€ƒvalineé…ç½®é¡¹ä¹‹avatarå’Œvalineå¤´åƒé…ç½® metaï¼šè¯„è®ºæ¡†è¡¨å¤´ï¼Œé»˜è®¤æ˜¾ç¤ºã€Œæ˜µç§°ã€ã€ã€Œé‚®ç®±ã€ã€ã€Œç½‘å€ã€ pageSizeï¼šè¯„è®ºåŒºåˆ†é¡µ visitorï¼šleancloudè‡ªå¸¦çš„æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡ï¼ˆç«™é•¿å¯éšæ„ä¿®æ”¹ï¼‰ï¼Œè‹¥å¼€å¯åˆ™éœ€å…³é—­ã€Œä¸è’œå­ã€ï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºä¸¤ä¸ªé˜…è¯»é‡ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š enableQQï¼šæ˜¯å¦å¯ç”¨æ˜µç§°æ¡†è‡ªåŠ¨è·å–QQæ˜µç§°å’ŒQQå¤´åƒ, é»˜è®¤å…³é—­ï¼Œéœ€ç«™é•¿ä¸»åŠ¨å¯ç”¨ï¼Œå¯ç”¨åè¿˜éœ€è¦ä¿®æ”¹æºç  recordIPï¼šæ˜¯å¦è®°å½•è®¿é—®è€…IP requiredFieldsï¼šè®¾ç½®å¿…å¡«é¡¹ï¼Œéœ€è¦ä¿®æ”¹æºç  123456789101112131415comment: type: valine valine: appid: ********************************* appkey: ************************ notify: true # mail notifier , https://github.com/xCss/Valine/wiki verify: false # Verification codeï¼ˆnotifyå’Œverifyå·²åºŸå¼ƒï¼‰ placeholder: ç•™ä¸‹é‚®ç®±æ‰å¯ä»¥æ”¶åˆ°æ–°æ¶ˆæ¯æé†’å“¦~ avatar: robohash # gravatar style https://valine.js.org/configuration.html#avatar meta: nick,mail,link # custom comment header pageSize: 10 # pagination size visitor: true # Article reading statistic https://valine.js.org/visitor.html enableQQ: true recordIP: false requiredFields: [&#x27;mail&#x27;,] # Nickå¿…å¡«åˆ™éœ€3+å­—ç¬¦ 6.å…¶ä»– è±†ç“£ä¹¦å•ï¼šå› ä¸ºæ²¡æœ‰è±†ç“£çš„è´¦å·ï¼Œæ­¤é¡µé¢æ‹Ÿæ”¹ä¸ºã€Œç›¸å†Œã€ï¼Œå› æ­¤æ­¤å¤„å…³äºã€Œè±†ç“£ã€çš„å…¨éƒ¨æ³¨é‡Šæ‰äº† pvï¼šæ–‡ç« é˜…è¯»é‡ç»Ÿè®¡ï¼Œç”±äºValineè¯„è®ºè‡ªå¸¦æœ‰é˜…è¯»é‡ç»Ÿè®¡ï¼Œæ•…æ­¤å¤„busuanziå’Œleancloudç›´æ¥è®¾ç½®ä¸ºfalseç¦ç”¨ postCountï¼šæ–‡ç« å­—æ•°åŠé˜…è¯»æ—¶é•¿ç»Ÿè®¡ï¼Œéœ€è¦å®‰è£…``æ’ä»¶ enableï¼šå¯ç”¨postCountï¼Œè®¾ç½®ä¸ºtrue wordcountï¼šå¯ç”¨æ–‡ç« å­—æ•°ç»Ÿè®¡ï¼Œè®¾ç½®ä¸ºtrue min2readï¼šå¯ç”¨é˜…è¯»æ—¶é•¿é¢„è®¡ï¼Œè®¾ç½®ä¸ºtrue pluginsï¼šæ’ä»¶ï¼Œæš‚ä¸éœ€è¦ï¼Œå¯æ ¹æ®è‡ªèº«å®é™…é…ç½® Miscellaneousï¼šæ‚é¡¹ï¼ˆåŒ…æ‹¬twitterï¼ŒGoogle+ï¼ŒFacebookï¼‰ï¼Œæš‚ä¸éœ€è¦ï¼Œå¯æ ¹æ®è‡ªèº«å®é™…é…ç½® 7.ä¸ªäººä¿¡æ¯profileæ­¤å¤„é…ç½®ä¸»è¦æ˜¯åœ¨é¡µé¢å·¦ä¾§ä¸ªäººä¿¡æ¯ï¼Œä»¥åŠã€Œå…³äºã€é¡µé¢å³ä¾§è¾¹æ çš„å±•ç¤ºã€‚labelsã€skillsã€linksã€workså’Œprojectsæ˜¾ç¤ºåœ¨ã€Œå…³äºã€é¡µé¢å³ä¾§è¾¹æ ï¼Œé…ç½®æ ¼å¼ä¸ºé”®å€¼å¯¹å½¢å¼ï¼Œå‚è€ƒæ¨¡æ¿å³å¯ã€‚ enabledï¼šæ˜¯å¦å¯ç”¨ avatarï¼šä¸ªäººå¤´åƒï¼Œæ›¿æ¢./themes/pure/source/images/avatar.jpgå³å¯ï¼Œè·¯å¾„è®¾ç½®ä¸ºimages/avatar.jpg gravatarï¼šgravatarå¤´åƒï¼Œå±æ€§å€¼ä¸ºGravatarè´¦æˆ·é‚®ç®±åœ°å€ï¼Œå°†ä¼šè¦†ç›–ä¸Šé¢çš„avataré…ç½® authorï¼šæ˜µç§° author_titleï¼šç•¥ï¼ˆå½“åšèŒä¸šæè¿°äº†â€¦ï¼‰ author_descriptionï¼šä¸ªäººç®€ä»‹ locationï¼šä½ç½® followï¼šå…³æ³¨æˆ‘çš„ä¸»é¡µ socialï¼šç¤¾äº¤å¹³å°é“¾æ¥ï¼Œä»¥å›¾æ ‡å½¢å¼æ˜¾ç¤ºåœ¨å„é¡µé¢çš„å·¦ä¸‹æ–¹ linksï¼šå„ä¸ªç¤¾äº¤å¹³å°çš„è¿æ¥å¯é€‰å€¼å‚è€ƒIconFontå›¾æ ‡ï¼Œä¸€èˆ¬æœ‰ã€ŒGithubã€ã€ã€Œå¾®åšã€ã€ã€Œtwitterã€ã€ã€Œfacebookã€ã€ã€ŒçŸ¥ä¹ã€ã€ã€Œé¢†è‹±ã€ã€ã€ŒèŠ±ç“£ã€ã€ã€Œæ€å¦ã€ã€ã€Œç äº‘ã€ã€ã€ŒQQ/ç©ºé—´ã€ã€ã€Œé‚®ç®±ã€ã€ã€Œæ˜é‡‘ã€ã€ã€Œå¾®ä¿¡ã€ã€ã€Œstackoverflowã€ã€ã€Œæ”¯ä»˜å®ã€ç­‰ï¼Œä¸€èˆ¬å±•ç¤ºä»¥4~6ä¸ªä¸ºå®œï¼Œå‚è€ƒåæ–‡Hexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ä¹‹å¦‚ä½•æ›´æ”¹å·¦ä¾§IconFont å›¾æ ‡ link_tooltipï¼šå»ºè®®è®¾ç½®ä¸ºtrue labelsï¼šä¸ªäººæ ‡ç­¾ï¼Œæ˜¾ç¤ºåœ¨ã€Œå…³äºã€é¡µé¢å³ä¾§è¾¹æ  skillsï¼šæŠ€èƒ½ï¼Œæ˜¾ç¤ºåœ¨ã€Œå…³äºã€é¡µé¢å³ä¾§è¾¹æ  linksï¼šä¸ªäººé“¾æ¥ï¼Œæ˜¾ç¤ºåœ¨ã€Œå…³äºã€é¡µé¢å³ä¾§è¾¹æ  worksï¼šä¸ªäººä½œå“ï¼Œæ˜¾ç¤ºåœ¨ã€Œå…³äºã€é¡µé¢å³ä¾§è¾¹æ  projectsï¼šä¸ªäººé¡¹ç›®ï¼Œæ˜¾ç¤ºåœ¨ã€Œå…³äºã€é¡µé¢å³ä¾§è¾¹æ  å››ã€ç«™ç‚¹é…ç½®ç«™ç‚¹é…ç½®å‚è€ƒï¼šå®˜æ–¹æ–‡æ¡£é…ç½® 1.ç½‘ç«™ titleï¼šç½‘ç«™æ ‡é¢˜ subtitleï¼šç½‘ç«™å‰¯æ ‡é¢˜ descriptionï¼šæè¿° keywordsï¼šå…³é”®å­— authorï¼šä½œè€… languageï¼šç«™ç‚¹è¯­è¨€ï¼Œç¬¬ä¸‰æ­¥å·²é…ç½® timezoneï¼šæ—¶åŒºï¼Œé»˜è®¤å³å¯ 2.ç½‘å€ urlï¼šä¸»é¡µURLï¼Œä¾‹å¦‚https://hwame.top rootï¼šç½‘ç«™æ ¹è·¯å¾„ï¼Œéœ€ä¸urlå¯¹åº”ï¼Œå¦‚æœç«™ç‚¹ä½äºå­ç›®å½•ï¼Œåˆ™urlä¸ºhttp://yoursite.com/childä¸”åŒæ—¶è®¾ç½®rootä¸º/child permalinkï¼šæ–‡ç« é“¾æ¥ï¼Œä¸ªäººè®¤ä¸ºä»¥æ—¥æœŸä¸ºè·¯ç”±åˆ†éš”å³å¯ï¼š:year:month:day/:title.htmlï¼Œæ­¤é¡¹é»˜è®¤å€¼ä¸º:year/:month/:day/:title/ permalink_defaultsï¼šå„éƒ¨åˆ†çš„é»˜è®¤å€¼ï¼Œç•™ç©ºå³å¯ pretty_urlsï¼šå¦‚æœè®¾ç½®ä¸ºfalseåˆ™ä¼šå»æ‰å°¾éƒ¨çš„index.htmlæˆ–.html 3.ç›®å½•/æ–‡ç« é»˜è®¤å³å¯ï¼Œæˆ–è€…å‚è€ƒå®˜æ–¹æ–‡æ¡£é…ç½® 4.é¦–é¡µåˆ†é¡µé¦–é¡µåˆ†é¡µindex_generatoræœ‰ä¸€ä¸ªå°bugï¼Œå³å½“æœ€åä¸€é¡µåªæœ‰ä¸€ç¯‡æ–‡ç« æ—¶ï¼Œä¼šç›´æ¥æ‰“å¼€é‚£ç¯‡æ–‡ç« ï¼ˆå¦‚æœè®¾ç½®äº†Read Moreï¼Œåˆ™æ˜¾ç¤ºåˆ°ã€Œæ‘˜è¦ã€ï¼‰ï¼Œè¿™ä¸ªé—®é¢˜è¿˜æœªè§£å†³ã€‚ pathï¼šä¸»é¡µçš„è·¯å¾„ï¼Œé»˜è®¤ä¸º&#39;&#39; per_pageï¼šæ¯é¡µå±•ç¤ºæ•°é‡ï¼Œè®¾ç½®ä¸º0åˆ™ç¦ç”¨åˆ†é¡µ order_byï¼šé»˜è®¤æŒ‰æ—¶é—´å€’åºæ’åº 5.å…¶ä»– Category &amp; Tagï¼šé»˜è®¤åˆ†ç±»default_categoryçš„é»˜è®¤å€¼ä¸ºuncategorizedï¼Œpureä¸»é¢˜å·²æ”¹ä¸ºcategoriesï¼Œå…¶ä»–é»˜è®¤å³å¯ã€‚ Metadata elementsï¼šmeta_generatorä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œé»˜è®¤å³å¯ã€‚ Date / Time formatï¼šæ—¥æœŸæ—¶é—´æ ¼å¼é»˜è®¤å³å¯ã€‚ 6.å½’æ¡£åˆ†é¡µæ­¤å¤„é…ç½®ä¸ºã€Œå½’æ¡£ã€çš„åˆ†é¡µï¼Œä¸åŒäºã€Œé¦–é¡µã€çš„åˆ†é¡µ per_pageï¼šæ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« æ•°é‡ ï¼Œé»˜è®¤å€¼ä¸º10ï¼Œè®¾ç½®ä¸º0åˆ™è¡¨ç¤ºå…³é—­åˆ†é¡µåŠŸèƒ½ pagination_dirï¼šåˆ†é¡µç›®å½•ï¼Œä¿æŒä¸ºé»˜è®¤å€¼pageå³å¯ 7.æ‰©å±• Include / Exclude file(s)ï¼šåŒ…æ‹¬æˆ–ä¸åŒ…æ‹¬ç›®å½•å’Œæ–‡ä»¶ï¼Œinclude/excludeä»…åº”ç”¨äºsource/ç›®å½•ï¼Œè€Œignoreå°†åº”ç”¨äºæ‰€æœ‰ç›®å½•ã€‚ä¸€èˆ¬é»˜è®¤å³å¯ã€‚ themeï¼šåº”ç”¨çš„ä¸»é¢˜ï¼Œç¬¬äºŒéƒ¨åˆ†å·²è®¾ç½®ä¸ºpureã€‚ Deploymentï¼šéƒ¨ç½²éƒ¨åˆ†è¯¦è§å‰æ–‡Hexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²ä¹‹éƒ¨ç½²Hexoã€‚æ­¤å¤„æœ‰ä¸ªå°é—®é¢˜ï¼Œå¦‚æœæŒ‰ä¹‹å‰é…ç½®ï¼šrepository: https://github.com/username/username.github.io.gitï¼Œåˆ™ä¼šæœ‰æ—¶å€™éœ€è¦æ‰‹åŠ¨è¾“å…¥Githubç”¨æˆ·åå¯†ç ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯é…ç½®ä¸ºrepository: git@github.com:username/username.github.io.gitï¼Œå‚è€ƒåæ–‡Hexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ä¹‹å…å¯†éƒ¨ç½²é—®é¢˜ã€‚ mathjaxï¼šæ•°å­¦å…¬å¼æ”¯æŒã€‚pureä¸»é¢˜é»˜è®¤ä¸æ”¯æŒmathjaxï¼Œæ­¤å¤„å¼€å¯è¯¥é€‰é¡¹ï¼Œå…·ä½“é…ç½®è§åæ–‡Hexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ä¹‹å¦‚ä½•ä½¿å…¶æ”¯æŒMathjaxã€‚","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/tags/Hexo/"}]},{"title":"Hexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²","slug":"hello-hexo-setup-deploy","date":"2020-05-19T21:20:52.000Z","updated":"2020-05-21T05:14:00.000Z","comments":true,"path":"20200520/hello-hexo-setup-deploy.html","link":"","permalink":"https://hwame.top/20200520/hello-hexo-setup-deploy.html","excerpt":"æ‘˜è¦ï¼šä»é›¶å¼€å§‹æ­å»ºHexoåšå®¢ï¼ŒåŒ…æ‹¬ç¯å¢ƒå®‰è£…ã€å»ºç«™å†™ä½œå’Œéƒ¨ç½²ã€‚","text":"æ‘˜è¦ï¼šä»é›¶å¼€å§‹æ­å»ºHexoåšå®¢ï¼ŒåŒ…æ‹¬ç¯å¢ƒå®‰è£…ã€å»ºç«™å†™ä½œå’Œéƒ¨ç½²ã€‚ Hexoåšå®¢æ­å»ºåšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²ï¼Œç¯å¢ƒæ­å»ºå¹¶éƒ¨ç½²è‡³Githubã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®ï¼Œé’ˆå¯¹pureä¸»é¢˜è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(3)â€”â€”ä¼˜åŒ–è¯„è®ºç³»ç»Ÿï¼Œä¸»è¦å¯¹Valineè¯„è®ºç³»ç»Ÿè¿›è¡Œä¼˜åŒ–ã€‚åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ï¼Œä¿®å¤äº†pureä¸»é¢˜çš„ç³»åˆ—å°bugã€‚æ–‡ç« ä½œè€…ï¼šé´»å¡µ 1.å¼€ç¯‡è¯1.1.èƒŒæ™¯å¾ˆæ—©å°±æœ‰æ­å»ºä¸ªäººåšå®¢çš„æƒ³æ³•ï¼Œå› ä¸ºåœ¨å¹³æ—¶çš„å­¦ä¹ è¿‡ç¨‹ä¸­éš¾å…é‡åˆ°å„ç§é—®é¢˜ï¼Œè®°å½•é‡åˆ°çš„é—®é¢˜ä¹Ÿæ˜¯æé«˜è‡ªå·±çš„ä¸€ç§æ–¹å¼ï¼Œå¹¶ä¸”äº’è”ç½‘ç²¾ç¥å°±åœ¨äºåˆ†äº«å’Œäº¤æµã€‚ç”±äºç–«æƒ…å½±å“è€Œæ— æ³•å¼€å­¦ï¼Œå› æ­¤å°±æ›´åŠ åšå®šäº†è¿™ä¸ªæƒ³æ³•ã€‚æ›´è®©äººæƒŠå–œçš„æ˜¯ï¼Œå¶ç„¶å¾—çŸ¥äº†ã€Šé˜¿é‡Œäº‘é«˜æ ¡å¸ˆç”Ÿè®¡åˆ’ã€‹ï¼Œå¯ä»¥ç™½å«–ä¸€å°æœåŠ¡å™¨ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨1å¹´ï¼š é˜¿é‡Œäº‘é…ç½®ä¸ºï¼š2æ ¸ï¼Œ4Gï¼Œ1Må¸¦å®½ï¼Œå¤–åŠ 40Gç¡¬ç›˜æˆ‘è‡ªå·±çš„è™šæ‹Ÿæœºé…ç½®ä¸ºï¼šå•æ ¸ï¼Œ2Gï¼Œ20Gç¡¬ç›˜è™½ç„¶é…ç½®ä¸é«˜ï¼Œä½†æ˜¯æ¯”æˆ‘çš„è™šæ‹Ÿæœºå¼ºå¤šäº†ï¼Œæœ€å…³é”®çš„æ˜¯æœ‰å…¬ç½‘IPï¼ æˆ‘åœ¨5æœˆ14æ—¥ç”³è¯·åˆ°äº†æœåŠ¡å™¨ï¼Œå‰åèŠ±äº†å‡ å¤©æ—¶é—´åŒ…æ‹¬å®‰è£…ç³»ç»Ÿã€æ•°æ®åº“ã€Nginxç­‰ï¼Œä»¥åŠNode.jsã€Hexoç­‰ï¼Œæ¶è®¾å¥½äº†å®Œæ•´çš„æœåŠ¡å™¨ã€‚å¹¶ä¸”æ ¹æ® Bç«™æ•™ç¨‹ ä»¥Nginxéƒ¨ç½²äº†ä¸€ä¸ªã€Šå›½å†…ç–«æƒ…å®æ—¶ç›‘æµ‹ã€‹çš„å°é¡¹ç›®ï¼Œç›®å‰ä»åœ¨ç¨³å®šè¿è¡Œã€‚ 1.2.è¯´æ˜ æœ¬ç€â€œèƒ½ä¸è£…å°±ä¸è£…ã€èƒ½å°‘è£…å°±å°‘è£…â€çš„åŸåˆ™ï¼Œæ‰“é€ ä¸€ä¸ªæ—¢èƒ½æ»¡è¶³ä½¿ç”¨è¦æ±‚åˆç²¾ç®€è½»é‡çš„ä¸ªäººåšå®¢ æ‹’ç»ä¸€åˆ‡èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿ï¼ŒåŒ…æ‹¬ä¸”ä¸é™äºæ·»åŠ å¡é€šäººç‰©ï¼ŒèƒŒæ™¯å›¾ç‰‡åŠç‰¹æ•ˆï¼Œé¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆï¼Œé¡µé¢ç‰¹æ•ˆï¼ŒèƒŒæ™¯éŸ³ä¹ï¼Œé¸¡è‚‹æŒ‚ä»¶â€¦â€¦ 2.å®‰è£…æ­¥éª¤2.1.å®‰è£…Node.jså’ŒGitæˆ‘æœ€å¼€å§‹æ˜¯åœ¨Linuxä¸‹æ­å»ºçš„ï¼Œç”±äºç™½å«–æ¥çš„é˜¿é‡Œäº‘æœåŠ¡å™¨é…ç½®æ¯”è¾ƒä½ï¼Œå¹¶ä¸”ä¸Šé¢å·²æœ‰å¤šä¸ªé¡¹ç›®è¿è¡Œï¼Œå› æ­¤åé¢å°†å…¶é‡æ–°è¿ç§»åˆ°Windowså¹¶éƒ¨ç½²åˆ°Githubã€‚å®‰è£…å‚è€ƒã€å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ã€‘æ³¨æ„ï¼šNode.jsç‰ˆæœ¬éœ€ä¸ä½äº 10.13ï¼Œå»ºè®®ä½¿ç”¨Node.js 12.0+ç‰ˆæœ¬ï¼›æ³¨æ„ï¼šWindowsä¸‹éœ€è¦æ³¨æ„è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå®Œæˆåé‡å¯å‘½ä»¤è¡Œï¼Œå¦åˆ™ä¼šçœ‹åˆ°ã€Œ&#39;xxxx&#39; ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶ã€çš„æŠ¥é”™ï¼ˆä½†å®é™…ä¸Šå¾ˆå¯èƒ½å·²ç»å®‰è£…å¥½äº†ï¼‰ã€‚ 2.2.å®‰è£…Hexoåœ¨Node.jså’ŒGitå®‰è£…å®Œæˆä¹‹åå³å¯å®‰è£…Hexoäº†ï¼Œå› ä¸ºHexoæ˜¯ä»¥npmæ–¹å¼å®‰è£…ï¼Œæ‰€ä»¥æ²¡æœ‰æ“ä½œç³»ç»Ÿçš„åŒºåˆ«äº†ã€‚ä½¿ç”¨ npm å®‰è£… Hexoçš„ä¸¤ç§æ–¹å¼äºŒé€‰ä¸€å³å¯ï¼š12$ npm install -g hexo-cli #å®Œæ•´ç‰ˆHexo$ npm install hexo #ç²¾ç®€ç‰ˆHexoè¯´æ˜ï¼šæ¨èå®‰è£…å®Œæ•´ç‰ˆï¼Œå¯ç›´æ¥ä½¿ç”¨hexo [command]ï¼›å¦‚æœæ˜¯ç²¾ç®€ç‰ˆHexoï¼Œåˆ™æ‰€æœ‰hexoç›¸å…³å‘½ä»¤éƒ½éœ€è¦åŠ ä¸Šnpxï¼Œå³npx hexo [command]ï¼›è¯´æ˜ï¼šLinuxä¸€èˆ¬è‡ªå¸¦æœ‰Gitï¼Œæ— éœ€å®‰è£…ã€‚ 3.å»ºç«™3.1.åˆå§‹åŒ–åšå®¢æ–‡ä»¶å‚è€ƒã€å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ã€‘å®‰è£… Hexo å®Œæˆåï¼Œè¿›å…¥æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚ä¾‹å¦‚æˆ‘æƒ³åœ¨G:ç›˜æ ¹ç›®å½•åˆ›å»ºåä¸ºblogçš„åšå®¢æ–‡ä»¶å¤¹ï¼ˆæ³¨æ„blogæ–‡ä»¶å¤¹ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼Œä¼šåœ¨initæ—¶è‡ªåŠ¨åˆ›å»ºï¼‰ï¼Œåˆ™ï¼š12345678$ G:# å½“å‰è·¯å¾„ä¸º&quot;G:\\&quot;$ hexo init blog# ç­‰å¾…å®Œæˆ$ cd blog# å½“å‰è·¯å¾„ä¸º&quot;G:\\blog&quot;$ npm install# ç­‰å¾…å®Œæˆæ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š12345678.+-- _config.yml+-- package.json+-- scaffolds+-- source| +-- _drafts| +-- _posts+-- themes 3.2.æ–‡ä»¶è¯´æ˜ _config.ymlï¼Œç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚æ³¨æ„ï¼šæ­¤æ–‡ä»¶ç§°ä¸ºç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹ä¹Ÿæœ‰ä¸ªåŒåæ–‡ä»¶ç§°ä¸ºä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚ package.jsonï¼Œå®‰è£…çš„åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ï¼Œå¦‚EJSã€Stylus å’Œ Markdown rendererï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±æ·»åŠ å’Œå¸è½½ã€‚ scaffoldsï¼Œæ¨¡ç‰ˆæ–‡ä»¶å¤¹ï¼Œæ˜¯æŒ‡åœ¨æ–°å»ºçš„mdæ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚åœ¨æ¯æ¬¡æ–°å»ºæ–‡ç« æˆ–é¡µé¢æ—¶ï¼ŒHexoä¼šæ ¹æ®scaffoldsæ¥å»ºç«‹æ–‡ä»¶ã€‚æ–‡ç« å¯¹åº”äºscaffolds/post.mdï¼Œé¡µé¢å¯¹åº”äºscaffolds/page.mdã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¿®æ”¹scaffold/post.mdä¸­çš„Front-matterå†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚ sourceï¼Œèµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ï¼ˆå¤¹ï¼‰å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚ themesï¼Œä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œè¿™æ˜¯ä¸‹è½½çš„ä¸»é¢˜å­˜æ”¾çš„ä½ç½®ï¼Œé»˜è®¤åªæœ‰landscapeä¸»é¢˜ã€‚ 3.3.å¯åŠ¨æœåŠ¡å™¨è¾“å…¥ä¸‹åˆ—å‘½ä»¤æ‰“å¼€hexoçš„æœåŠ¡ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥http://localhost:4000å°±å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„åšå®¢äº†ã€‚æ³¨æ„ï¼šå¦‚æœHexoå®‰è£…çš„æ˜¯ç²¾ç®€ç‰ˆï¼Œåˆ™åº”è¾“å…¥npx hexo commandï¼›æ³¨æ„ï¼šè¿ç»­å‘½ä»¤ä»¥æ­¤æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨&amp;&amp;è¿æ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼›æ³¨æ„ï¼šæœåŠ¡é»˜è®¤ç«¯å£ä¸º4000ï¼Œè‹¥å› ç«¯å£å ç”¨ç­‰é—®é¢˜éœ€è¦ä¿®æ”¹åˆ™æ·»åŠ ç›¸å…³å‚æ•°ï¼Œå¦‚hexo server -p 6666ã€‚å‘½ä»¤è¯¦ç»†ç”¨æ³•åŠå‚æ•°å‚è€ƒã€å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ã€‘ã€‚ 12345$ hexo generate #å¯ç®€å†™ä¸ºhexo g$ hexo server #å¯ç®€å†™ä¸ºhexo s# å¯å°†ä¸Šè¿°å‘½ä»¤åˆå¹¶$ hexo g &amp;&amp; hexo s 3.4.åœæ­¢æœåŠ¡ä»¥hexo serveræ–¹å¼å¯åŠ¨çš„æœåŠ¡åªèƒ½ç”¨äºæµ‹è¯•å’Œè°ƒè¯•ï¼Œå¯ä»¥å®æ—¶çœ‹åˆ°ä¿®æ”¹çš„æ•ˆæœï¼Œæ‰€ä»¥ç›´æ¥Ctrl + Cå³å¯åœæ­¢æœåŠ¡ã€‚ 4.å¼€å§‹å†™ä½œ4.1.åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« ä½ å¯ä»¥æ‰§è¡Œä¸‹åˆ—å‘½ä»¤æ¥åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« ï¼ˆ[option]è¡¨ç¤ºå¯é€‰å‚æ•°ï¼‰ã€‚æ³¨æ„ï¼šé»˜è®¤å¸ƒå±€ä¸ºpostï¼Œæ–°å»ºæ–‡ç« æ—¶æ— éœ€æŒ‡å®šlayoutï¼Œæ–°å»ºé¡µé¢æ—¶åˆ™éœ€è¦æ˜¾å¼åœ°æŒ‡å®šä¸ºpageï¼›æ³¨æ„ï¼šæ ‡é¢˜æœ€å¥½ä¸è¦æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ç”Ÿæˆçš„mdæ–‡ä»¶åå°†åªåŒ…å«ä¸€ä¸ªå•è¯ï¼Œä¸åˆ©äºç†è§£å’Œç»´æŠ¤ï¼›å‚è€ƒï¼šå®˜æ–¹ä¸­æ–‡æ–‡æ¡£å†™ä½œã€‚12$ hexo new [layout] &quot;My New Post&quot; #ä¸æ¨èæ ‡é¢˜å«ç©ºæ ¼$ hexo new [layout] &quot;My-New-Post&quot; #æ¨èä»¥åˆ†å‰²çº¿åˆ†éš”æ ‡é¢˜ 4.2.è¿è¡ŒæœåŠ¡é‡æ–°å¯åŠ¨æœåŠ¡å³å¯åœ¨æµè§ˆå™¨ä¸­è®¿é—®http://localhost:4000ï¼Œå¦‚æœæœåŠ¡å·²å¯åŠ¨åˆ™åªéœ€è¦åˆ·æ–°é¡µé¢ã€‚ 5.éƒ¨ç½²åˆ°Github5.1.åˆ›å»ºè´¦æˆ·æ—¢ç„¶è¦ä½¿ç”¨GitHubçš„äº§å“ï¼Œé‚£å½“ç„¶é¦–å…ˆéœ€è¦ä¸€ä¸ªGitHubè´¦æˆ·å§ã€‚æ³¨å†Œåœ°å€ï¼šGitHubï¼Œå…¨è‹±æ–‡ç•Œé¢ã€‚ 5.2.åˆ›å»ºä¸ªäººä»“åº“æ³¨å†Œç™»å½•åï¼Œåœ¨Repositoriesä»“åº“é€‰é¡¹å¡ä¸­ï¼Œæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šæ³¨æ„ï¼šä»“åº“åç§°å¿…é¡»ä¸º&lt;username&gt;.github.ioï¼Œå…¶ä¸­usernameæ˜¯GitHubçš„ç”¨æˆ·åå³å›¾ä¸­Owneræ‰€å¯¹åº”çš„ã€‚ 5.3.åˆå§‹åŒ–gitåœ¨å‘½ä»¤è¡Œæˆ–git bashä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå…¶ä¸­usernameä¸ºGitHubç”¨æˆ·åï¼Œemailä¸ºGitHubé‚®ç®±ï¼Œå¹¶ä»¥å¼•å·å¼•åŒ…è£¹ã€‚æ³¨æ„ï¼šè‹¥åˆæ¬¡ä½¿ç”¨Gitï¼Œåº”é¦–å…ˆè¿›å…¥åˆ°åšå®¢æ–‡ä»¶å¤¹è¿è¡Œgit initï¼Œç„¶åè¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œã€‚ 123456$ git config --global user.name &lt;username&gt;$ git config --global user.email &lt;email&gt;# å¯ä»¥ç”¨ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤æ£€æŸ¥æ˜¯å¦è¾“å…¥æ­£ç¡®$ git config user.name$ git config user.email 5.4.é…ç½®SSHå¯†é’¥åˆ›å»ºSSHå¯†é’¥ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œæ ¹æ®æç¤ºè¾“å…¥ä¸‰æ¬¡å›è½¦ï¼ˆemailä¸ºGitHubé‚®ç®±ï¼‰ï¼š1ssh-keygen -t rsa -C &lt;email&gt;å®Œæˆåä¼šç”Ÿæˆä¸€å¹…åœˆåœˆæ˜Ÿæ˜Ÿå›¾ï¼Œè¿™ä¸ªæ—¶å€™å°±å·²ç»ç”Ÿæˆäº†.sshçš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶ä¸€èˆ¬ä½äºç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹ï¼Œå³C:\\Users\\&lt;Administrator&gt;\\.sshï¼Œå…¶ä¸­&lt;Administrator&gt;ä¸ºWindowsç”¨æˆ·åã€‚æ–‡ä»¶å¤¹å†…å®¹å¦‚ä¸‹ï¼š id_rsaï¼Œç§é’¥ã€‚ id_rsa.pubï¼Œå…¬é’¥ã€‚ known_hostsï¼Œé¡¾åæ€ä¹‰ï¼Œæ­¤æ–‡ä»¶ä¿å­˜ç€å…¶ä»–ä¸»æœºè¿œç¨‹ç™»é™†æœ¬æœºçš„ä¿¡æ¯ã€‚ å…ˆå°†å…¬é’¥æ–‡ä»¶id_rsa.pubä»¥è®°äº‹æœ¬æ–¹å¼æ‰“å¼€ï¼Œå¤åˆ¶å…¨éƒ¨ä¿¡æ¯åˆ°å‰ªåˆ‡æ¿ã€‚ ç„¶ååœ¨GitHubä¸»é¡µçš„è®¾ç½®Settingsï¼ˆä¸æ˜¯ä»“åº“çš„è®¾ç½®ï¼‰ä¸­ï¼Œé¡µé¢å·¦ä¾§æ‰¾åˆ°SSH and GPG keysçš„è®¾ç½®é€‰é¡¹ï¼Œç‚¹å‡»å³ä¸Šè§’New SSH keyï¼ŒæŠŠå¤åˆ¶çš„id_rsa.pubå†…å®¹ç²˜è´´åˆ°Keyä¸­ï¼Œå†™ä¸ªæ ‡é¢˜ï¼Œç‚¹å‡»Add SSH keyå³å¯ã€‚ å›åˆ°å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹æ˜¯å¦æˆåŠŸï¼š123$ ssh -T git@github.com# æœ€åä¸€è¡Œè¾“å‡ºå¦‚ä¸‹ä¿¡æ¯å³ä¸ºæˆåŠŸ# Hi hwame! You&#x27;ve successfully authenticated... 5.5.éƒ¨ç½²Hexoè¦å°†hexoç”Ÿæˆçš„æ–‡ç« éƒ¨ç½²åˆ°GitHubä¸Šï¼Œé¦–å…ˆè¦ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œå°†hexoå’ŒGitHubå…³è”èµ·æ¥ï¼Œå…¶ä¸­usernameä¸ºGitHubç”¨æˆ·åã€‚åœ¨åšå®¢æ–‡ä»¶å¤¹é‡Œï¼Œä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlï¼Œåœ¨æ–‡ä»¶æœ€ååŠ ä¸Šï¼ˆå·²æœ‰åˆ™ä¿®æ”¹ï¼‰ï¼š123456deploy: type: git repository: https://github.com/username/username.github.io.git branch: master message: [description] #æ­¤è¡Œå¯çœç•¥ # messageä¸ºè‡ªå®šä¹‰æäº¤ä¿¡æ¯ï¼Œé»˜è®¤ä¸ºSite updated: YYYY-MM-DD HH:mm:ss æ³¨æ„ï¼šéœ€è¦å…ˆå®‰è£…Gitéƒ¨ç½²æ’ä»¶ï¼Œæ‰èƒ½ç”¨å‘½ä»¤éƒ¨ç½²åˆ°GitHubï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å®‰è£…hexo-deployer-gitæ’ä»¶ã€‚1$ npm install hexo-deployer-git --save æ’ä»¶å®‰è£…å®Œæˆåï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œéƒ¨ç½²ï¼šæ³¨æ„ï¼šéƒ¨ç½²æ—¶å¼ºçƒˆå»ºè®®å…ˆhexo cleanï¼Œå› ä¸ºæœ‰æ—¶å€™å½“ä½ ä¿®æ”¹åå‘ç°æ— æ³•ç”Ÿæ•ˆï¼Œé‚£ä¹ˆåŸå› å¯èƒ½å°±æ˜¯å› ä¸ºç¼“å­˜æ–‡ä»¶ï¼ˆdb.jsonï¼‰å’Œé™æ€æ–‡ä»¶ï¼ˆpublicï¼‰çš„é—®é¢˜ã€‚æ³¨æ„ï¼šéƒ¨ç½²æ—¶å¯èƒ½éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä¹Ÿå¯èƒ½ä¸éœ€è¦ã€‚æ›´æ–°ï¼šæ­¤é—®é¢˜å‚è€ƒåæ–‡Hexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ä¹‹å…å¯†éƒ¨ç½²é—®é¢˜ã€‚ 123456$ hexo clean #æ¸…é™¤ç¼“å­˜å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶$ hexo generate #ç­‰äºhexo g$ hexo deploy #ç­‰äºhexo d# å¯å°†ä¸Šè¿°å‘½ä»¤åˆå¹¶ä¸ºâ€œä¸€é”®ä¸‰è¿â€$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d å½“æ§åˆ¶å°è¾“å‡ºä¸‹é¢ä¿¡æ¯æ—¶ï¼Œåˆ™è¡¨æ˜éƒ¨ç½²æˆåŠŸï¼Œæµè§ˆå™¨ä¸­è®¿é—®https://&lt;username&gt;.github.ioå³å¯çœ‹åˆ°ä½ çš„åšå®¢äº†ï¼ï¼1234INFO Deploy done: git# ç”±äºWindowså­—ä½“é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯è¿™ç§ï¼ˆé—®é¢˜ä¸å¤§ï¼‰ï¼šâ†[32mINFO â†[39m Deploy done: â†[35mgitâ†[39m 6.ç»“è¯­è‡³æ­¤ï¼ŒHexoåšå®¢å°±åŸºæœ¬å®Œæˆäº†ï¼Œè¯¥æœ‰çš„åŠŸèƒ½éƒ½å¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯é¡µé¢ä¸ªæ€§åŒ–ä¸å¤Ÿã€è‡ªå®šä¹‰ç¨‹åº¦ä¸é«˜ï¼Œåšå®¢çš„ä¼˜åŒ–åŠå®Œå–„ç•™ä½œåç¯‡ã€‚ åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(1)â€”â€”å»ºç«™åŠéƒ¨ç½²ï¼Œç¯å¢ƒæ­å»ºå¹¶éƒ¨ç½²è‡³Githubã€‚ åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(2)â€”â€”ä¸»é¢˜é…ç½®ï¼Œé’ˆå¯¹pureä¸»é¢˜è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ã€‚ åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(3)â€”â€”ä¼˜åŒ–è¯„è®ºç³»ç»Ÿï¼Œä¸»è¦å¯¹Valineè¯„è®ºç³»ç»Ÿè¿›è¡Œä¼˜åŒ–ã€‚ åšå®¢ç³»åˆ—ï¼šHexoåšå®¢æ­å»º(4)â€”â€”å¸¸è§é—®é¢˜ï¼Œä¿®å¤äº†pureä¸»é¢˜çš„ç³»åˆ—å°bugã€‚","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/tags/Hexo/"}]}],"categories":[{"name":"Go","slug":"Go","permalink":"https://hwame.top/categories/Go/"},{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/categories/miscellanea/"},{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/categories/Linux/"},{"name":"MongoDB","slug":"MongoDB","permalink":"https://hwame.top/categories/MongoDB/"},{"name":"python","slug":"python","permalink":"https://hwame.top/categories/python/"},{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/categories/Hexo/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://hwame.top/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"Go","slug":"Go","permalink":"https://hwame.top/tags/Go/"},{"name":"miscellanea","slug":"miscellanea","permalink":"https://hwame.top/tags/miscellanea/"},{"name":"Linux","slug":"Linux","permalink":"https://hwame.top/tags/Linux/"},{"name":"shell","slug":"shell","permalink":"https://hwame.top/tags/shell/"},{"name":"MongoDB","slug":"MongoDB","permalink":"https://hwame.top/tags/MongoDB/"},{"name":"python","slug":"python","permalink":"https://hwame.top/tags/python/"},{"name":"Hexo","slug":"Hexo","permalink":"https://hwame.top/tags/Hexo/"},{"name":"matplotlib","slug":"matplotlib","permalink":"https://hwame.top/tags/matplotlib/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://hwame.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://hwame.top/tags/%E7%88%AC%E8%99%AB/"},{"name":"CentOS","slug":"CentOS","permalink":"https://hwame.top/tags/CentOS/"},{"name":"Spark","slug":"Spark","permalink":"https://hwame.top/tags/Spark/"},{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"https://hwame.top/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"},{"name":"Linuxéƒ¨ç½²","slug":"Linuxéƒ¨ç½²","permalink":"https://hwame.top/tags/Linux%E9%83%A8%E7%BD%B2/"}]}